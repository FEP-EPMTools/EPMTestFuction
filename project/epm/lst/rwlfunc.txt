; generated by ARM C/C++ Compiler, 5.03 [Build 76]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave -o.\obj\rwlfunc.o --asm_dir=.\lst\ --list_dir=.\lst\ --depend=.\obj\rwlfunc.d --cpu=ARM926EJ-S --apcs=interwork -O0 -I.\src -I..\..\common\src\BSP\Driver\Include -I..\..\common\src\FreeRTOS -I..\..\common\src\FreeRTOS\Source\include -I..\..\common\src\FreeRTOS\Source\portable\RVDS\ARM926EJ-S -I..\..\common\src\BSP\ThirdParty\FATFS\src -I.\src\userdrv -I.\src\syshal -I.\src\user -I.\src\userdrv\vl53l0x\core\inc -I.\src\userdrv\vl53l0x\platform\inc -I.\src\syshal\json -I.\src\syshal\modemlib -I..\..\common\src\BSP\ThirdParty\yaffs2 -I..\..\common\src\BSP\ThirdParty\yaffs2\include -I..\..\common\src\BSP\ThirdParty\yaffs2\include\asm -I..\..\common\src\BSP\ThirdParty\yaffs2\include\linux -I.\src\syshal\yaffs2 -I..\..\common\src\BSP\Library\SmartcardLib\Include -I.\src\syshal\cardlib -I.\src\syshal\cardlog -I.\src\syshal\blk -I..\..\common\src\BSP\Library\USB_HOST\Inc -I..\..\common\src\BSP\Library\USB_HOST\Inc\usb_uvc -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\Toshiba -DEPM_PROJECT -DCONFIG_YAFFS_DIRECT -DCONFIG_YAFFS_SHORT_NAMES_IN_RAM -DCONFIG_YAFFS_YAFFS2 -DNO_Y_INLINE -DCONFIG_YAFFS_PROVIDE_DEFS -DCONFIG_YAFFSFS_PROVIDE_VALUES --omf_browse=.\obj\rwlfunc.crf src\syshal\octopus\rwlfunc.c]
                          ARM

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_pre_padding
                          REQUIRE _printf_percent
                          REQUIRE _printf_flags
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_s
                          REQUIRE _printf_str
                  getDataFileCallback PROC
;;;26     
;;;27     static BOOL getDataFileCallback(char* dir, char* filename, int fileLen, void* para1, void* para2, void* para3, void* para4, void* para5)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;28     {
000004  e24dd024          SUB      sp,sp,#0x24
000008  e1a0a000          MOV      r10,r0
00000c  e1a05001          MOV      r5,r1
000010  e1a06002          MOV      r6,r2
000014  e1a0b003          MOV      r11,r3
;;;29         FileRec* CurrentFI = para1;
000018  e1a0400b          MOV      r4,r11
;;;30         CHAR* FN = para2;
00001c  e59d7048          LDR      r7,[sp,#0x48]
;;;31         UINT ver = *(UINT*)para3;
000020  e59d004c          LDR      r0,[sp,#0x4c]
000024  e5908000          LDR      r8,[r0,#0]
;;;32         CHAR* FILEDIR = para4;
000028  e59d0050          LDR      r0,[sp,#0x50]
00002c  e58d0020          STR      r0,[sp,#0x20]
;;;33         
;;;34         printf(" - WARNING [getDataFileCallback in Octopus]-> [%s %s (len=%d)] : FN = [%s], ver = %d, FILEDIR = [%s]!!\n", dir, filename, fileLen, FN, ver, FILEDIR);  
000030  e59d0020          LDR      r0,[sp,#0x20]
000034  e1a03006          MOV      r3,r6
000038  e1a02005          MOV      r2,r5
00003c  e1a0100a          MOV      r1,r10
000040  e58d0008          STR      r0,[sp,#8]
000044  e59f040c          LDR      r0,|L1.1112|
000048  e88d0180          STM      sp,{r7,r8}
00004c  ebfffffe          BL       terninalPrintf
;;;35         
;;;36         UINT R=0;
000050  e3a00000          MOV      r0,#0
000054  e58d001c          STR      r0,[sp,#0x1c]
;;;37         UINT NewVer=0;
000058  e3a09000          MOV      r9,#0
;;;38         UINT FNlen;
;;;39         CHAR cVer[10];
;;;40         
;;;41         NewVer = ver;
00005c  e1a09008          MOV      r9,r8
;;;42         FNlen = strlen(FN);    
000060  e1a00007          MOV      r0,r7
000064  ebfffffe          BL       strlen
000068  e58d0018          STR      r0,[sp,#0x18]
;;;43         
;;;44         if (strncmp(filename, FN, FNlen)==0) 
00006c  e1a01007          MOV      r1,r7
000070  e1a00005          MOV      r0,r5
000074  e59d2018          LDR      r2,[sp,#0x18]
000078  ebfffffe          BL       strncmp
00007c  e3500000          CMP      r0,#0
000080  1a00001e          BNE      |L1.256|
;;;45         {
;;;46             strcpy(cVer, strchr(filename,'-')+1);
000084  e3a0102d          MOV      r1,#0x2d
000088  e1a00005          MOV      r0,r5
00008c  ebfffffe          BL       strchr
000090  e2800001          ADD      r0,r0,#1
000094  e58d0008          STR      r0,[sp,#8]
000098  e1a01000          MOV      r1,r0
00009c  e28d000c          ADD      r0,sp,#0xc
0000a0  ebfffffe          BL       strcpy
;;;47             R = (UINT) atoi (cVer);
0000a4  e28d000c          ADD      r0,sp,#0xc
0000a8  ebfffffe          BL       atoi
0000ac  e58d001c          STR      r0,[sp,#0x1c]
;;;48             if (R > NewVer)
0000b0  e59d001c          LDR      r0,[sp,#0x1c]
0000b4  e1500009          CMP      r0,r9
0000b8  9a000010          BLS      |L1.256|
;;;49             {            
;;;50                 NewVer = R;
0000bc  e59d901c          LDR      r9,[sp,#0x1c]
;;;51                 printf("   - NewVer = %d \n", NewVer);
0000c0  e1a01009          MOV      r1,r9
0000c4  e28f0e39          ADR      r0,|L1.1116|
0000c8  ebfffffe          BL       terninalPrintf
;;;52                 
;;;53                 memset(CurrentFI->FN,0x00,sizeof(CurrentFI->FN));
0000cc  e3a01b01          MOV      r1,#0x400
0000d0  e1a00004          MOV      r0,r4
0000d4  ebfffffe          BL       __aeabi_memclr4
;;;54                 //strcpy(CurrentFI->FN, FILEDIR);
;;;55                 //strcat(CurrentFI->FN, "/");
;;;56                 strcat(CurrentFI->FN, filename);
0000d8  e1a01005          MOV      r1,r5
0000dc  e1a00004          MOV      r0,r4
0000e0  ebfffffe          BL       strcat
;;;57                 CurrentFI->FileOffset = 0;
0000e4  e3a00000          MOV      r0,#0
0000e8  e5840400          STR      r0,[r4,#0x400]
;;;58                 CurrentFI->FileLen = fileLen;
0000ec  e5846404          STR      r6,[r4,#0x404]
;;;59                 
;;;60                 printf("   - CurrentFI->FN = [%s], CurrentFI->FileLen = %d \n", CurrentFI->FN, CurrentFI->FileLen);
0000f0  e5942404          LDR      r2,[r4,#0x404]
0000f4  e1a01004          MOV      r1,r4
0000f8  e28f0e37          ADR      r0,|L1.1136|
0000fc  ebfffffe          BL       terninalPrintf
                  |L1.256|
;;;61             }
;;;62         }
;;;63         
;;;64         if (NewVer > ver)
000100  e1590008          CMP      r9,r8
000104  9a000003          BLS      |L1.280|
;;;65         {
;;;66             printf("   - Return value = %d \n", NewVer);
000108  e1a01009          MOV      r1,r9
00010c  e28f0fe5          ADR      r0,|L1.1192|
000110  ebfffffe          BL       terninalPrintf
000114  ea000002          B        |L1.292|
                  |L1.280|
;;;67             //return NewVer;
;;;68         }
;;;69         else
;;;70         {
;;;71             printf("   - Return value = %d \n", -1);
000118  e3e01000          MVN      r1,#0
00011c  e28f0fe1          ADR      r0,|L1.1192|
000120  ebfffffe          BL       terninalPrintf
                  |L1.292|
;;;72             //return -1;
;;;73         }
;;;74         
;;;75         return TRUE;    
000124  e3a00001          MOV      r0,#1
000128  e28dd024          ADD      sp,sp,#0x24
;;;76     }
00012c  e8bd8ff0          POP      {r4-r11,pc}
;;;77     
                          ENDP

                  FindOpFile PROC
;;;78     
;;;79     static INT FindOpFile (FileRec *CurrentFI, CHAR *FN, UINT ver, CHAR *FILEDIR)       /* kelvinli */
000130  e1a0c000          MOV      r12,r0
;;;80     {    
;;;81         //struct dirent **FindFileData;
;;;82         #if(0)
;;;83         #if(0)
;;;84         UINT R=0;
;;;85         UINT NewVer=0;
;;;86         UINT FNlen;
;;;87         CHAR cVer[10];
;;;88         INT  n;
;;;89         INT  cnt;
;;;90     
;;;91         NewVer = ver;
;;;92         FNlen = strlen(FN);
;;;93         #endif
;;;94         //BOOL FileAgentGetList(StorageType storageType, char* dir, char* extensionName, char* excludeFileName, fileAgentFatfsListCallback callback, void* para1, void* para2, void* para3, void* para4, void* para5);
;;;95         if(FileAgentGetList(FILE_AGENT_STORAGE_TYPE_FATFS, FILEDIR, "*.*", NULL, getDataFileCallback, CurrentFI, FN, &ver, FILEDIR))
;;;96         {
;;;97             printf(" \r\n--- FindOpFile : CurrentFI->FN = [%s], CurrentFI->FileLen = %d \n", CurrentFI->FN, CurrentFI->FileLen);
;;;98             return 1;
;;;99         }
;;;100        else
;;;101        {
;;;102            return -1;
;;;103        }
;;;104        #if(0)
;;;105        n = scandir(FILEDIR, &FindFileData, 0, alphasort);
;;;106        if (n>=0) {
;;;107            INT index_max = -1;
;;;108            for(cnt=n-1; cnt >= 0; --cnt) {
;;;109                if (strncmp(FindFileData[cnt]->d_name, FN, FNlen)==0) {
;;;110                    strcpy(cVer, strchr(FindFileData[cnt]->d_name,'-')+1);
;;;111                    R = (UINT) atoi (cVer);
;;;112                    if (R > NewVer){
;;;113                        NewVer = R;
;;;114                        index_max = cnt;
;;;115                    }
;;;116                }
;;;117            }
;;;118    
;;;119            if (index_max > -1) {
;;;120                FILE *fp = NULL;
;;;121                memset(CurrentFI->FN,0x00,sizeof(CurrentFI->FN));
;;;122                strcpy(CurrentFI->FN, FILEDIR);
;;;123                strcat(CurrentFI->FN, "/");
;;;124                strcat(CurrentFI->FN, FindFileData[index_max]->d_name);
;;;125                CurrentFI->FileOffset = 0;
;;;126                fp = fopen(CurrentFI->FN, "rb");
;;;127                fseek(fp, 0, SEEK_END);
;;;128                CurrentFI->FileLen = ftell(fp);
;;;129                fclose(fp);
;;;130            }
;;;131            // free memory allocated via malloc() in scandir()
;;;132            while (n--)
;;;133                free(FindFileData[n]);
;;;134            free(FindFileData);
;;;135        }
;;;136    
;;;137        if (NewVer > ver){
;;;138            return NewVer;
;;;139        }else{
;;;140            return -1;
;;;141        }
;;;142        
;;;143        return -1;
;;;144        #endif
;;;145        #else
;;;146        return -1;
000134  e3e00000          MVN      r0,#0
;;;147        #endif
;;;148    }
000138  e12fff1e          BX       lr
;;;149    
                          ENDP

                  XFileInitRecv PROC
;;;152     *************************************/
;;;153    INT XFileInitRecv (CHAR *XFileName, UINT u32_SegmentSize)
00013c  e92d4070          PUSH     {r4-r6,lr}
;;;154    {
000140  e1a04000          MOV      r4,r0
000144  e1a05001          MOV      r5,r1
;;;155        CmdXFileInitRecv (XFileName, u32_SegmentSize);
000148  e1a01005          MOV      r1,r5
00014c  e1a00004          MOV      r0,r4
000150  ebfffffe          BL       CmdXFileInitRecv
;;;156        terninalPrintf ("CmdXFileInitRecv g_len %d, g_inbuff[0] %d,  RW_RESULT %d\n", g_len, g_inbuff[0], RW_RESULT);
000154  e59f0368          LDR      r0,|L1.1220|
000158  e5d03001          LDRB     r3,[r0,#1]  ; g_inbuff
00015c  e5d02000          LDRB     r2,[r0,#0]  ; g_inbuff
000160  e59f0360          LDR      r0,|L1.1224|
000164  e5901000          LDR      r1,[r0,#0]  ; g_len
000168  e28f0fd7          ADR      r0,|L1.1228|
00016c  ebfffffe          BL       terninalPrintf
;;;157        if((g_len>0)&&(g_inbuff[0]==CSCMD_INITRECV+1)&&(RW_RESULT==0))
000170  e59f0350          LDR      r0,|L1.1224|
000174  e5900000          LDR      r0,[r0,#0]  ; g_len
000178  e3500000          CMP      r0,#0
00017c  da000009          BLE      |L1.424|
000180  e59f033c          LDR      r0,|L1.1220|
000184  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000188  e3500049          CMP      r0,#0x49
00018c  1a000005          BNE      |L1.424|
000190  e59f032c          LDR      r0,|L1.1220|
000194  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000198  e3500000          CMP      r0,#0
00019c  1a000001          BNE      |L1.424|
;;;158            return ERR_NOERR;
0001a0  e3a00000          MOV      r0,#0
                  |L1.420|
;;;159        else
;;;160            return ERR_ERRRESP;
;;;161    }
0001a4  e8bd8070          POP      {r4-r6,pc}
                  |L1.424|
0001a8  e3a00001          MOV      r0,#1                 ;160
0001ac  eafffffc          B        |L1.420|
;;;162    
                          ENDP

                  XFileContRecv PROC
;;;163    INT XFileContRecv (CHAR *XFileName, UINT u32_SegmentSize)
0001b0  e92d4070          PUSH     {r4-r6,lr}
;;;164    {
0001b4  e1a04000          MOV      r4,r0
0001b8  e1a05001          MOV      r5,r1
;;;165        CmdXFileContRecv (XFileName, u32_SegmentSize);
0001bc  e1a01005          MOV      r1,r5
0001c0  e1a00004          MOV      r0,r4
0001c4  ebfffffe          BL       CmdXFileContRecv
;;;166        terninalPrintf ("CmdXFileContRecv g_len %d, g_inbuff[0] %d,  RW_RESULT %d\n", g_len, g_inbuff[0], RW_RESULT);
0001c8  e59f02f4          LDR      r0,|L1.1220|
0001cc  e5d03001          LDRB     r3,[r0,#1]  ; g_inbuff
0001d0  e5d02000          LDRB     r2,[r0,#0]  ; g_inbuff
0001d4  e59f02ec          LDR      r0,|L1.1224|
0001d8  e5901000          LDR      r1,[r0,#0]  ; g_len
0001dc  e28f0fc9          ADR      r0,|L1.1288|
0001e0  ebfffffe          BL       terninalPrintf
;;;167        if((g_len>0)&&(g_inbuff[0]==CSCMD_CONTRECV+1)&&(RW_RESULT==0))
0001e4  e59f02dc          LDR      r0,|L1.1224|
0001e8  e5900000          LDR      r0,[r0,#0]  ; g_len
0001ec  e3500000          CMP      r0,#0
0001f0  da000009          BLE      |L1.540|
0001f4  e59f02c8          LDR      r0,|L1.1220|
0001f8  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
0001fc  e350007d          CMP      r0,#0x7d
000200  1a000005          BNE      |L1.540|
000204  e59f02b8          LDR      r0,|L1.1220|
000208  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
00020c  e3500000          CMP      r0,#0
000210  1a000001          BNE      |L1.540|
;;;168            return ERR_NOERR;
000214  e3a00000          MOV      r0,#0
                  |L1.536|
;;;169        else
;;;170            return ERR_ERRRESP;
;;;171    }
000218  e8bd8070          POP      {r4-r6,pc}
                  |L1.540|
00021c  e3a00001          MOV      r0,#1                 ;170
000220  eafffffc          B        |L1.536|
;;;172    
                          ENDP

                  TimeVer PROC
;;;175     *************************************/
;;;176    INT TimeVer (BYTE *Ver, UINT * u32_time)
000224  e92d4070          PUSH     {r4-r6,lr}
;;;177    {
000228  e1a05000          MOV      r5,r0
00022c  e1a06001          MOV      r6,r1
;;;178        stDevVer *V=(stDevVer *)Ver;
000230  e1a04005          MOV      r4,r5
;;;179    
;;;180        CmdTimeVer (u32_time);
000234  e1a00006          MOV      r0,r6
000238  ebfffffe          BL       CmdTimeVer
;;;181    
;;;182        if((g_len>0)&&(g_inbuff[0]==CSCMD_TIMEVER+1)&&(RW_RESULT==0))
00023c  e59f0284          LDR      r0,|L1.1224|
000240  e5900000          LDR      r0,[r0,#0]  ; g_len
000244  e3500000          CMP      r0,#0
000248  da00010a          BLE      |L1.1656|
00024c  e59f0270          LDR      r0,|L1.1220|
000250  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000254  e3500047          CMP      r0,#0x47
000258  1a000106          BNE      |L1.1656|
00025c  e59f0260          LDR      r0,|L1.1220|
000260  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000264  e3500000          CMP      r0,#0
000268  1a000102          BNE      |L1.1656|
;;;183        {
;;;184            V->DevID=GETLONG (g_inbuff+2); 					/* Device ID */
00026c  e59f0250          LDR      r0,|L1.1220|
000270  e5d00002          LDRB     r0,[r0,#2]  ; g_inbuff
000274  e1a00c00          LSL      r0,r0,#24
000278  e59f1244          LDR      r1,|L1.1220|
00027c  e5d11003          LDRB     r1,[r1,#3]
000280  e0800801          ADD      r0,r0,r1,LSL #16
000284  e59f1238          LDR      r1,|L1.1220|
000288  e5d11004          LDRB     r1,[r1,#4]
00028c  e0800401          ADD      r0,r0,r1,LSL #8
000290  e59f122c          LDR      r1,|L1.1220|
000294  e5d11005          LDRB     r1,[r1,#5]
000298  e0800001          ADD      r0,r0,r1
00029c  e5840000          STR      r0,[r4,#0]
;;;185            V->OperID=GETLONG (g_inbuff+6);					/* Operator ID */
0002a0  e59f021c          LDR      r0,|L1.1220|
0002a4  e5d00006          LDRB     r0,[r0,#6]  ; g_inbuff
0002a8  e1a00c00          LSL      r0,r0,#24
0002ac  e59f1210          LDR      r1,|L1.1220|
0002b0  e5d11007          LDRB     r1,[r1,#7]
0002b4  e0800801          ADD      r0,r0,r1,LSL #16
0002b8  e59f1204          LDR      r1,|L1.1220|
0002bc  e5d11008          LDRB     r1,[r1,#8]
0002c0  e0800401          ADD      r0,r0,r1,LSL #8
0002c4  e59f11f8          LDR      r1,|L1.1220|
0002c8  e5d11009          LDRB     r1,[r1,#9]
0002cc  e0800001          ADD      r0,r0,r1
0002d0  e5840004          STR      r0,[r4,#4]
;;;186            V->DevTime=GETLONG (g_inbuff+10);				/* Device Time */
0002d4  e59f01e8          LDR      r0,|L1.1220|
0002d8  e5d0000a          LDRB     r0,[r0,#0xa]  ; g_inbuff
0002dc  e1a00c00          LSL      r0,r0,#24
0002e0  e59f11dc          LDR      r1,|L1.1220|
0002e4  e5d1100b          LDRB     r1,[r1,#0xb]
0002e8  e0800801          ADD      r0,r0,r1,LSL #16
0002ec  e59f11d0          LDR      r1,|L1.1220|
0002f0  e5d1100c          LDRB     r1,[r1,#0xc]
0002f4  e0800401          ADD      r0,r0,r1,LSL #8
0002f8  e59f11c4          LDR      r1,|L1.1220|
0002fc  e5d1100d          LDRB     r1,[r1,#0xd]
000300  e0800001          ADD      r0,r0,r1
000304  e5840008          STR      r0,[r4,#8]
;;;187            V->CompID=GETWORD (g_inbuff+14);					/* Company ID */
000308  e59f01b4          LDR      r0,|L1.1220|
00030c  e5d0000f          LDRB     r0,[r0,#0xf]
000310  e59f11ac          LDR      r1,|L1.1220|
000314  e5d1100e          LDRB     r1,[r1,#0xe]  ; g_inbuff
000318  e0800401          ADD      r0,r0,r1,LSL #8
00031c  e584000c          STR      r0,[r4,#0xc]
;;;188            V->KeyVer=GETLONG (g_inbuff+16);					/* Key Version */
000320  e59f019c          LDR      r0,|L1.1220|
000324  e5d00010          LDRB     r0,[r0,#0x10]  ; g_inbuff
000328  e1a00c00          LSL      r0,r0,#24
00032c  e59f1190          LDR      r1,|L1.1220|
000330  e5d11011          LDRB     r1,[r1,#0x11]
000334  e0800801          ADD      r0,r0,r1,LSL #16
000338  e59f1184          LDR      r1,|L1.1220|
00033c  e5d11012          LDRB     r1,[r1,#0x12]
000340  e0800401          ADD      r0,r0,r1,LSL #8
000344  e59f1178          LDR      r1,|L1.1220|
000348  e5d11013          LDRB     r1,[r1,#0x13]
00034c  e0800001          ADD      r0,r0,r1
000350  e5840010          STR      r0,[r4,#0x10]
;;;189            V->EODVer=GETLONG (g_inbuff+20);					/* EOD Version */
000354  e59f0168          LDR      r0,|L1.1220|
000358  e5d00014          LDRB     r0,[r0,#0x14]  ; g_inbuff
00035c  e1a00c00          LSL      r0,r0,#24
000360  e59f115c          LDR      r1,|L1.1220|
000364  e5d11015          LDRB     r1,[r1,#0x15]
000368  e0800801          ADD      r0,r0,r1,LSL #16
00036c  e59f1150          LDR      r1,|L1.1220|
000370  e5d11016          LDRB     r1,[r1,#0x16]
000374  e0800401          ADD      r0,r0,r1,LSL #8
000378  e59f1144          LDR      r1,|L1.1220|
00037c  e5d11017          LDRB     r1,[r1,#0x17]
000380  e0800001          ADD      r0,r0,r1
000384  e5840014          STR      r0,[r4,#0x14]
;;;190            V->BLVer=GETLONG (g_inbuff+24);					/* Blacklist Version */
000388  e59f0134          LDR      r0,|L1.1220|
00038c  e5d00018          LDRB     r0,[r0,#0x18]  ; g_inbuff
000390  e1a00c00          LSL      r0,r0,#24
000394  e59f1128          LDR      r1,|L1.1220|
000398  e5d11019          LDRB     r1,[r1,#0x19]
00039c  e0800801          ADD      r0,r0,r1,LSL #16
0003a0  e59f111c          LDR      r1,|L1.1220|
0003a4  e5d1101a          LDRB     r1,[r1,#0x1a]
0003a8  e0800401          ADD      r0,r0,r1,LSL #8
0003ac  e59f1110          LDR      r1,|L1.1220|
0003b0  e5d1101b          LDRB     r1,[r1,#0x1b]
0003b4  e0800001          ADD      r0,r0,r1
0003b8  e5840018          STR      r0,[r4,#0x18]
;;;191            V->FIRMVer=GETLONG (g_inbuff+28);				/* Firmware Version */
0003bc  e59f0100          LDR      r0,|L1.1220|
0003c0  e5d0001c          LDRB     r0,[r0,#0x1c]  ; g_inbuff
0003c4  e1a00c00          LSL      r0,r0,#24
0003c8  e59f10f4          LDR      r1,|L1.1220|
0003cc  e5d1101d          LDRB     r1,[r1,#0x1d]
0003d0  e0800801          ADD      r0,r0,r1,LSL #16
0003d4  e59f10e8          LDR      r1,|L1.1220|
0003d8  e5d1101e          LDRB     r1,[r1,#0x1e]
0003dc  e0800401          ADD      r0,r0,r1,LSL #8
0003e0  e59f10dc          LDR      r1,|L1.1220|
0003e4  e5d1101f          LDRB     r1,[r1,#0x1f]
0003e8  e0800001          ADD      r0,r0,r1
0003ec  e584001c          STR      r0,[r4,#0x1c]
;;;192            V->CCHSVer=GETLONG (g_inbuff+32);				/* CCHS Version */
0003f0  e59f00cc          LDR      r0,|L1.1220|
0003f4  e5d00020          LDRB     r0,[r0,#0x20]  ; g_inbuff
0003f8  e1a00c00          LSL      r0,r0,#24
0003fc  e59f10c0          LDR      r1,|L1.1220|
000400  e5d11021          LDRB     r1,[r1,#0x21]
000404  e0800801          ADD      r0,r0,r1,LSL #16
000408  e59f10b4          LDR      r1,|L1.1220|
00040c  e5d11022          LDRB     r1,[r1,#0x22]
000410  e0800401          ADD      r0,r0,r1,LSL #8
000414  e59f10a8          LDR      r1,|L1.1220|
000418  e5d11023          LDRB     r1,[r1,#0x23]
00041c  e0800001          ADD      r0,r0,r1
000420  e5840020          STR      r0,[r4,#0x20]
;;;193            V->CSSer=GETLONG (g_inbuff+36);					/* CS Serial No, Loc ID*/
000424  e59f0098          LDR      r0,|L1.1220|
000428  e5d00024          LDRB     r0,[r0,#0x24]  ; g_inbuff
00042c  e1a00c00          LSL      r0,r0,#24
000430  e59f108c          LDR      r1,|L1.1220|
000434  e5d11025          LDRB     r1,[r1,#0x25]
000438  e0800801          ADD      r0,r0,r1,LSL #16
00043c  e59f1080          LDR      r1,|L1.1220|
000440  e5d11026          LDRB     r1,[r1,#0x26]
000444  e0800401          ADD      r0,r0,r1,LSL #8
000448  e59f1074          LDR      r1,|L1.1220|
00044c  e5d11027          LDRB     r1,[r1,#0x27]
000450  e0800001          ADD      r0,r0,r1
000454  ea00003a          B        |L1.1348|
                  |L1.1112|
                          DCD      ||.constdata||
                  |L1.1116|
00045c  2020202d          DCB      "   - NewVer = %d \n",0
000460  204e6577
000464  56657220
000468  3d202564
00046c  200a00  
00046f  00                DCB      0
                  |L1.1136|
000470  2020202d          DCB      "   - CurrentFI->FN = [%s], CurrentFI->FileLen = %d \n",0
000474  20437572
000478  72656e74
00047c  46492d3e
000480  464e203d
000484  205b2573
000488  5d2c2043
00048c  75727265
000490  6e744649
000494  2d3e4669
000498  6c654c65
00049c  6e203d20
0004a0  2564200a
0004a4  00      
0004a5  00                DCB      0
0004a6  00                DCB      0
0004a7  00                DCB      0
                  |L1.1192|
0004a8  2020202d          DCB      "   - Return value = %d \n",0
0004ac  20526574
0004b0  75726e20
0004b4  76616c75
0004b8  65203d20
0004bc  2564200a
0004c0  00      
0004c1  00                DCB      0
0004c2  00                DCB      0
0004c3  00                DCB      0
                  |L1.1220|
                          DCD      g_inbuff
                  |L1.1224|
                          DCD      g_len
                  |L1.1228|
0004cc  436d6458          DCB      "CmdXFileInitRecv g_len %d, g_inbuff[0] %d,  RW_RESULT %"
0004d0  46696c65
0004d4  496e6974
0004d8  52656376
0004dc  20675f6c
0004e0  656e2025
0004e4  642c2067
0004e8  5f696e62
0004ec  7566665b
0004f0  305d2025
0004f4  642c2020
0004f8  52575f52
0004fc  4553554c
000500  542025  
000503  640a00            DCB      "d\n",0
000506  00                DCB      0
000507  00                DCB      0
                  |L1.1288|
000508  436d6458          DCB      "CmdXFileContRecv g_len %d, g_inbuff[0] %d,  RW_RESULT %"
00050c  46696c65
000510  436f6e74
000514  52656376
000518  20675f6c
00051c  656e2025
000520  642c2067
000524  5f696e62
000528  7566665b
00052c  305d2025
000530  642c2020
000534  52575f52
000538  4553554c
00053c  542025  
00053f  640a00            DCB      "d\n",0
000542  00                DCB      0
000543  00                DCB      0
                  |L1.1348|
000544  e5840024          STR      r0,[r4,#0x24]
;;;194            V->IntBLVer=GETLONG (g_inbuff+40);				//Interim Blacklist Version
000548  e51f008c          LDR      r0,|L1.1220|
00054c  e5d00028          LDRB     r0,[r0,#0x28]  ; g_inbuff
000550  e1a00c00          LSL      r0,r0,#24
000554  e51f1098          LDR      r1,|L1.1220|
000558  e5d11029          LDRB     r1,[r1,#0x29]
00055c  e0800801          ADD      r0,r0,r1,LSL #16
000560  e51f10a4          LDR      r1,|L1.1220|
000564  e5d1102a          LDRB     r1,[r1,#0x2a]
000568  e0800401          ADD      r0,r0,r1,LSL #8
00056c  e51f10b0          LDR      r1,|L1.1220|
000570  e5d1102b          LDRB     r1,[r1,#0x2b]
000574  e0800001          ADD      r0,r0,r1
000578  e5840028          STR      r0,[r4,#0x28]
;;;195            V->FuncBLVer=GETLONG (g_inbuff+44);			//functional blacklist version
00057c  e51f00c0          LDR      r0,|L1.1220|
000580  e5d0002c          LDRB     r0,[r0,#0x2c]  ; g_inbuff
000584  e1a00c00          LSL      r0,r0,#24
000588  e51f10cc          LDR      r1,|L1.1220|
00058c  e5d1102d          LDRB     r1,[r1,#0x2d]
000590  e0800801          ADD      r0,r0,r1,LSL #16
000594  e51f10d8          LDR      r1,|L1.1220|
000598  e5d1102e          LDRB     r1,[r1,#0x2e]
00059c  e0800401          ADD      r0,r0,r1,LSL #8
0005a0  e51f10e4          LDR      r1,|L1.1220|
0005a4  e5d1102f          LDRB     r1,[r1,#0x2f]
0005a8  e0800001          ADD      r0,r0,r1
0005ac  e584002c          STR      r0,[r4,#0x2c]
;;;196            V->AlertMsgVer=GETLONG (g_inbuff+48);	//Alert msg file version
0005b0  e51f00f4          LDR      r0,|L1.1220|
0005b4  e5d00030          LDRB     r0,[r0,#0x30]  ; g_inbuff
0005b8  e1a00c00          LSL      r0,r0,#24
0005bc  e51f1100          LDR      r1,|L1.1220|
0005c0  e5d11031          LDRB     r1,[r1,#0x31]
0005c4  e0800801          ADD      r0,r0,r1,LSL #16
0005c8  e51f110c          LDR      r1,|L1.1220|
0005cc  e5d11032          LDRB     r1,[r1,#0x32]
0005d0  e0800401          ADD      r0,r0,r1,LSL #8
0005d4  e51f1118          LDR      r1,|L1.1220|
0005d8  e5d11033          LDRB     r1,[r1,#0x33]
0005dc  e0800001          ADD      r0,r0,r1
0005e0  e5840030          STR      r0,[r4,#0x30]
;;;197            V->RWKeyVer=GETLONG (g_inbuff+52);			//rwkey version
0005e4  e51f0128          LDR      r0,|L1.1220|
0005e8  e5d00034          LDRB     r0,[r0,#0x34]  ; g_inbuff
0005ec  e1a00c00          LSL      r0,r0,#24
0005f0  e51f1134          LDR      r1,|L1.1220|
0005f4  e5d11035          LDRB     r1,[r1,#0x35]
0005f8  e0800801          ADD      r0,r0,r1,LSL #16
0005fc  e51f1140          LDR      r1,|L1.1220|
000600  e5d11036          LDRB     r1,[r1,#0x36]
000604  e0800401          ADD      r0,r0,r1,LSL #8
000608  e51f114c          LDR      r1,|L1.1220|
00060c  e5d11037          LDRB     r1,[r1,#0x37]
000610  e0800001          ADD      r0,r0,r1
000614  e5840034          STR      r0,[r4,#0x34]
;;;198            V->OTPVer=GETLONG (g_inbuff+56);				//Last receive OTP file version
000618  e51f015c          LDR      r0,|L1.1220|
00061c  e5d00038          LDRB     r0,[r0,#0x38]  ; g_inbuff
000620  e1a00c00          LSL      r0,r0,#24
000624  e51f1168          LDR      r1,|L1.1220|
000628  e5d11039          LDRB     r1,[r1,#0x39]
00062c  e0800801          ADD      r0,r0,r1,LSL #16
000630  e51f1174          LDR      r1,|L1.1220|
000634  e5d1103a          LDRB     r1,[r1,#0x3a]
000638  e0800401          ADD      r0,r0,r1,LSL #8
00063c  e51f1180          LDR      r1,|L1.1220|
000640  e5d1103b          LDRB     r1,[r1,#0x3b]
000644  e0800001          ADD      r0,r0,r1
000648  e5840038          STR      r0,[r4,#0x38]
;;;199            memcpy (V->Reserved, g_inbuff+60, sizeof (V->Reserved));//Last receive OTP file version
00064c  e3a02014          MOV      r2,#0x14
000650  e59f1220          LDR      r1,|L1.2168|
000654  e284003c          ADD      r0,r4,#0x3c
000658  ebfffffe          BL       __aeabi_memcpy
;;;200    
;;;201            theRWL.CompID=V->CompID;		//save for OTP file transfer
00065c  e59f1218          LDR      r1,|L1.2172|
000660  e3e02f6a          MVN      r2,#0x1a8
000664  e0411002          SUB      r1,r1,r2
000668  e594000c          LDR      r0,[r4,#0xc]
00066c  ebfffffe          BL       __aeabi_uwrite4
;;;202            return ERR_NOERR;
000670  e3a00000          MOV      r0,#0
                  |L1.1652|
;;;203        }
;;;204        else
;;;205            return ERR_ERRRESP;
;;;206    }
000674  e8bd8070          POP      {r4-r6,pc}
                  |L1.1656|
000678  e3a00001          MOV      r0,#1                 ;205
00067c  eafffffc          B        |L1.1652|
;;;207    
                          ENDP

                  HouseKeepingInitTran PROC
;;;210     *************************************/
;;;211    INT HouseKeepingInitTran (void)
000680  e92d4010          PUSH     {r4,lr}
;;;212    {
000684  e24dde81          SUB      sp,sp,#0x810
;;;213        CHAR 	FindFN[1024];
;;;214        FileRec FI;
;;;215    
;;;216        sprintf (FindFN, "OTP.%04d-", theRWL.CompID);
000688  e59f01ec          LDR      r0,|L1.2172|
00068c  e3e01f6a          MVN      r1,#0x1a8
000690  e0400001          SUB      r0,r0,r1
000694  ebfffffe          BL       __aeabi_uread4
000698  e1a04000          MOV      r4,r0
00069c  e1a02004          MOV      r2,r4
0006a0  e28f1f76          ADR      r1,|L1.2176|
0006a4  e28d0e41          ADD      r0,sp,#0x410
0006a8  ebfffffe          BL       __2sprintf
;;;217        terninalPrintf ("Finding OTP file %s\n", FindFN);
0006ac  e28d1e41          ADD      r1,sp,#0x410
0006b0  e28f0f75          ADR      r0,|L1.2188|
0006b4  ebfffffe          BL       terninalPrintf
;;;218    
;;;219        if(FindOpFile (&FI, FindFN, 0, theRWL.OTPFILEDIR)!=-1)
0006b8  e59f31bc          LDR      r3,|L1.2172|
0006bc  e3a02000          MOV      r2,#0
0006c0  e28d1e41          ADD      r1,sp,#0x410
0006c4  e28d0008          ADD      r0,sp,#8
0006c8  ebfffffe          BL       FindOpFile
0006cc  e3700001          CMN      r0,#1
0006d0  0a00001c          BEQ      |L1.1864|
;;;220        {
;;;221            sprintf (FindFN, "%s", FI.FN);
0006d4  e28d2008          ADD      r2,sp,#8
0006d8  e28f1f71          ADR      r1,|L1.2212|
0006dc  e28d0e41          ADD      r0,sp,#0x410
0006e0  ebfffffe          BL       __2sprintf
;;;222            terninalPrintf ("Sending OTP file, filename:%s%s\n", theRWL.OTPFILEDIR, FindFN);
0006e4  e28d2e41          ADD      r2,sp,#0x410
0006e8  e59f118c          LDR      r1,|L1.2172|
0006ec  e28f0f6d          ADR      r0,|L1.2216|
0006f0  ebfffffe          BL       terninalPrintf
;;;223    
;;;224            CmdMetaFileInitSend (FindFN, theRWL.OTPFILEDIR, FI.FileLen);
0006f4  e59f1180          LDR      r1,|L1.2172|
0006f8  e59d240c          LDR      r2,[sp,#0x40c]
0006fc  e28d0e41          ADD      r0,sp,#0x410
000700  ebfffffe          BL       CmdMetaFileInitSend
;;;225            if((g_len>0)&&(g_inbuff[0]==CSCMD_INITTRAN+1)&&(RW_RESULT==0))
000704  e51f0244          LDR      r0,|L1.1224|
000708  e5900000          LDR      r0,[r0,#0]  ; g_len
00070c  e3500000          CMP      r0,#0
000710  da00000a          BLE      |L1.1856|
000714  e51f0258          LDR      r0,|L1.1220|
000718  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
00071c  e350005b          CMP      r0,#0x5b
000720  1a000006          BNE      |L1.1856|
000724  e51f0268          LDR      r0,|L1.1220|
000728  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
00072c  e3500000          CMP      r0,#0
000730  1a000002          BNE      |L1.1856|
;;;226                return ERR_NOERR;
000734  e3a00000          MOV      r0,#0
                  |L1.1848|
000738  e28dde81          ADD      sp,sp,#0x810
;;;227            else
;;;228                return ERR_ERRRESP;
;;;229        }
;;;230        else
;;;231            return ERR_FILE_OPEN; // file open error
;;;232    }
00073c  e8bd8010          POP      {r4,pc}
                  |L1.1856|
000740  e3a00001          MOV      r0,#1                 ;228
000744  eafffffb          B        |L1.1848|
                  |L1.1864|
000748  e3a00002          MOV      r0,#2                 ;231
00074c  eafffff9          B        |L1.1848|
;;;233    
                          ENDP

                  HouseKeepingContTran PROC
;;;234    INT HouseKeepingContTran (void)
000750  e92d4010          PUSH     {r4,lr}
;;;235    {
;;;236        CmdMetaFileContSend ();
000754  ebfffffe          BL       CmdMetaFileContSend
;;;237        if((g_len>0)&&(g_inbuff[0]==CSCMD_CONTTRAN+1)&&(RW_RESULT==0))
000758  e51f0298          LDR      r0,|L1.1224|
00075c  e5900000          LDR      r0,[r0,#0]  ; g_len
000760  e3500000          CMP      r0,#0
000764  da000009          BLE      |L1.1936|
000768  e51f02ac          LDR      r0,|L1.1220|
00076c  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000770  e350005d          CMP      r0,#0x5d
000774  1a000005          BNE      |L1.1936|
000778  e51f02bc          LDR      r0,|L1.1220|
00077c  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000780  e3500000          CMP      r0,#0
000784  1a000001          BNE      |L1.1936|
;;;238            return ERR_NOERR;
000788  e3a00000          MOV      r0,#0
                  |L1.1932|
;;;239        else
;;;240            return ERR_ERRRESP;
;;;241    }
00078c  e8bd8010          POP      {r4,pc}
                  |L1.1936|
000790  e3a00001          MOV      r0,#1                 ;240
000794  eafffffc          B        |L1.1932|
;;;242    
                          ENDP

                  WriteID PROC
;;;245     *************************************/
;;;246    INT WriteID (UINT CSID)
000798  e92d4010          PUSH     {r4,lr}
;;;247    {
00079c  e1a04000          MOV      r4,r0
;;;248        CmdWriteID (CSID);
0007a0  e1a00004          MOV      r0,r4
0007a4  ebfffffe          BL       CmdWriteID
;;;249    
;;;250        if((g_len>0)&&(g_inbuff[0]==CSCMD_WRITEID+1)&&(RW_RESULT==0))
0007a8  e51f02e8          LDR      r0,|L1.1224|
0007ac  e5900000          LDR      r0,[r0,#0]  ; g_len
0007b0  e3500000          CMP      r0,#0
0007b4  da000009          BLE      |L1.2016|
0007b8  e51f02fc          LDR      r0,|L1.1220|
0007bc  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
0007c0  e3500037          CMP      r0,#0x37
0007c4  1a000005          BNE      |L1.2016|
0007c8  e51f030c          LDR      r0,|L1.1220|
0007cc  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
0007d0  e3500000          CMP      r0,#0
0007d4  1a000001          BNE      |L1.2016|
;;;251            return ERR_NOERR;
0007d8  e3a00000          MOV      r0,#0
                  |L1.2012|
;;;252        else
;;;253            return ERR_ERRRESP;
;;;254    }
0007dc  e8bd8010          POP      {r4,pc}
                  |L1.2016|
0007e0  e3a00001          MOV      r0,#1                 ;253
0007e4  eafffffc          B        |L1.2012|
;;;255    
                          ENDP

                  AntennaOff PROC
;;;258     *************************************/
;;;259    INT AntennaOff (void)
0007e8  e92d4010          PUSH     {r4,lr}
;;;260    {
;;;261        CmdAntennaOff ();
0007ec  ebfffffe          BL       CmdAntennaOff
;;;262        if((g_len>0)&&(g_inbuff[0]==CSCMD_ANTENNA_CTRL+1)&&(RW_RESULT==0))
0007f0  e51f0330          LDR      r0,|L1.1224|
0007f4  e5900000          LDR      r0,[r0,#0]  ; g_len
0007f8  e3500000          CMP      r0,#0
0007fc  da000009          BLE      |L1.2088|
000800  e51f0344          LDR      r0,|L1.1220|
000804  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000808  e350006f          CMP      r0,#0x6f
00080c  1a000005          BNE      |L1.2088|
000810  e51f0354          LDR      r0,|L1.1220|
000814  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000818  e3500000          CMP      r0,#0
00081c  1a000001          BNE      |L1.2088|
;;;263            return ERR_NOERR;
000820  e3a00000          MOV      r0,#0
                  |L1.2084|
;;;264        else
;;;265            return ERR_ERRRESP;
;;;266    }
000824  e8bd8010          POP      {r4,pc}
                  |L1.2088|
000828  e3a00001          MOV      r0,#1                 ;265
00082c  eafffffc          B        |L1.2084|
;;;267    
                          ENDP

                  EndSession PROC
;;;270     *************************************/
;;;271    INT EndSession (void)
000830  e92d4010          PUSH     {r4,lr}
;;;272    {
;;;273        CmdEndSession ();
000834  ebfffffe          BL       CmdEndSession
;;;274        if((g_len>0)&&(g_inbuff[0]==CSCMD_END_SESSION+1)&&(RW_RESULT==0))
000838  e51f0378          LDR      r0,|L1.1224|
00083c  e5900000          LDR      r0,[r0,#0]  ; g_len
000840  e3500000          CMP      r0,#0
000844  da000009          BLE      |L1.2160|
000848  e51f038c          LDR      r0,|L1.1220|
00084c  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000850  e350005f          CMP      r0,#0x5f
000854  1a000005          BNE      |L1.2160|
000858  e51f039c          LDR      r0,|L1.1220|
00085c  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000860  e3500000          CMP      r0,#0
000864  1a000001          BNE      |L1.2160|
;;;275            return ERR_NOERR;
000868  e3a00000          MOV      r0,#0
                  |L1.2156|
;;;276        else
;;;277            return ERR_ERRRESP;
;;;278    }
00086c  e8bd8010          POP      {r4,pc}
                  |L1.2160|
000870  e3a00001          MOV      r0,#1                 ;277
000874  eafffffc          B        |L1.2156|
                  |L1.2168|
                          DCD      g_inbuff+0x3c
                  |L1.2172|
                          DCD      theRWL
                  |L1.2176|
000880  4f54502e          DCB      "OTP.%04d-",0
000884  25303464
000888  2d00    
00088a  00                DCB      0
00088b  00                DCB      0
                  |L1.2188|
00088c  46696e64          DCB      "Finding OTP file %s\n",0
000890  696e6720
000894  4f545020
000898  66696c65
00089c  2025730a
0008a0  00      
0008a1  00                DCB      0
0008a2  00                DCB      0
0008a3  00                DCB      0
                  |L1.2212|
0008a4  257300            DCB      "%s",0
0008a7  00                DCB      0
                  |L1.2216|
0008a8  53656e64          DCB      "Sending OTP file, filename:%s%s\n",0
0008ac  696e6720
0008b0  4f545020
0008b4  66696c65
0008b8  2c206669
0008bc  6c656e61
0008c0  6d653a25
0008c4  7325730a
0008c8  00      
0008c9  00                DCB      0
0008ca  00                DCB      0
0008cb  00                DCB      0
                          ENDP

                  Authenticate PROC
;;;282     *************************************/
;;;283    INT Authenticate (void)
0008cc  e92d4038          PUSH     {r3-r5,lr}
;;;284    {
;;;285        BYTE u8_stage;
;;;286        UINT	u32_ret;
;;;287        u32_ret=CmdAuthenticate (&u8_stage);
0008d0  e1a0000d          MOV      r0,sp
0008d4  ebfffffe          BL       CmdAuthenticate
0008d8  e1a04000          MOV      r4,r0
;;;288        if(u32_ret)
0008dc  e3540000          CMP      r4,#0
0008e0  0a000001          BEQ      |L1.2284|
;;;289            return ERR_ERRRESP;
0008e4  e3a00001          MOV      r0,#1
                  |L1.2280|
;;;290    
;;;291        if(u8_stage==CSCMD_AUTH1)
;;;292        {
;;;293            if((g_len>0)&&(g_inbuff[0]==CSCMD_AUTH1+1)&&(RW_RESULT==0))
;;;294                return ERR_NOERR;
;;;295        }
;;;296        if(u8_stage==CSCMD_AUTH2)
;;;297        {
;;;298            if((g_len>0)&&(g_inbuff[0]==CSCMD_AUTH2+1)&&(RW_RESULT==0))
;;;299                return ERR_NOERR;
;;;300        }
;;;301        return ERR_ERRRESP;
;;;302    }
0008e8  e8bd8038          POP      {r3-r5,pc}
                  |L1.2284|
0008ec  e5dd0000          LDRB     r0,[sp,#0]            ;291
0008f0  e3500004          CMP      r0,#4                 ;291
0008f4  1a00000d          BNE      |L1.2352|
0008f8  e51f0438          LDR      r0,|L1.1224|
0008fc  e5900000          LDR      r0,[r0,#0]            ;293  ; g_len
000900  e3500000          CMP      r0,#0                 ;293
000904  da000009          BLE      |L1.2352|
000908  e51f044c          LDR      r0,|L1.1220|
00090c  e5d00000          LDRB     r0,[r0,#0]            ;293  ; g_inbuff
000910  e3500005          CMP      r0,#5                 ;293
000914  1a000005          BNE      |L1.2352|
000918  e51f045c          LDR      r0,|L1.1220|
00091c  e5d00001          LDRB     r0,[r0,#1]            ;293  ; g_inbuff
000920  e3500000          CMP      r0,#0                 ;293
000924  1a000001          BNE      |L1.2352|
000928  e3a00000          MOV      r0,#0                 ;294
00092c  eaffffed          B        |L1.2280|
                  |L1.2352|
000930  e5dd0000          LDRB     r0,[sp,#0]            ;296
000934  e3500006          CMP      r0,#6                 ;296
000938  1a00000d          BNE      |L1.2420|
00093c  e51f047c          LDR      r0,|L1.1224|
000940  e5900000          LDR      r0,[r0,#0]            ;298  ; g_len
000944  e3500000          CMP      r0,#0                 ;298
000948  da000009          BLE      |L1.2420|
00094c  e51f0490          LDR      r0,|L1.1220|
000950  e5d00000          LDRB     r0,[r0,#0]            ;298  ; g_inbuff
000954  e3500007          CMP      r0,#7                 ;298
000958  1a000005          BNE      |L1.2420|
00095c  e51f04a0          LDR      r0,|L1.1220|
000960  e5d00001          LDRB     r0,[r0,#1]            ;298  ; g_inbuff
000964  e3500000          CMP      r0,#0                 ;298
000968  1a000001          BNE      |L1.2420|
00096c  e3a00000          MOV      r0,#0                 ;299
000970  eaffffdc          B        |L1.2280|
                  |L1.2420|
000974  e3a00001          MOV      r0,#1                 ;301
000978  eaffffda          B        |L1.2280|
;;;303    
                          ENDP

                  PollDeduct PROC
;;;306     *************************************/
;;;307    INT PollDeduct (BYTE bTimeout, INT TxnAmt, const BYTE *AddInfo, BYTE bAlertMsgFmt, Rsp_PollDeductStl *cardInfo)
00097c  e92d41f0          PUSH     {r4-r8,lr}
;;;308    {
000980  e24ddf56          SUB      sp,sp,#0x158
000984  e1a04000          MOV      r4,r0
000988  e1a05001          MOV      r5,r1
00098c  e1a06002          MOV      r6,r2
000990  e1a07003          MOV      r7,r3
000994  e59d8170          LDR      r8,[sp,#0x170]
;;;309        Rsp_PollDeductStl pollDeductStlResp;
;;;310    
;;;311        CmdPollDeduct (bTimeout, TxnAmt, AddInfo, bAlertMsgFmt);
000998  e1a03007          MOV      r3,r7
00099c  e1a02006          MOV      r2,r6
0009a0  e1a01005          MOV      r1,r5
0009a4  e1a00004          MOV      r0,r4
0009a8  ebfffffe          BL       CmdPollDeduct
;;;312        if(g_len>0)
0009ac  e51f04ec          LDR      r0,|L1.1224|
0009b0  e5900000          LDR      r0,[r0,#0]  ; g_len
0009b4  e3500000          CMP      r0,#0
0009b8  da00000b          BLE      |L1.2540|
;;;313            memcpy (&pollDeductStlResp, g_inbuff, CLAMP (g_len, (INT)sizeof (Rsp_PollDeductStl)));
0009bc  e51f04fc          LDR      r0,|L1.1224|
0009c0  e5900000          LDR      r0,[r0,#0]  ; g_len
0009c4  e3500f56          CMP      r0,#0x158
0009c8  da000001          BLE      |L1.2516|
0009cc  e3a00f56          MOV      r0,#0x158
0009d0  ea000001          B        |L1.2524|
                  |L1.2516|
0009d4  e51f0514          LDR      r0,|L1.1224|
0009d8  e5900000          LDR      r0,[r0,#0]  ; g_len
                  |L1.2524|
0009dc  e1a02000          MOV      r2,r0
0009e0  e51f1524          LDR      r1,|L1.1220|
0009e4  e1a0000d          MOV      r0,sp
0009e8  ebfffffe          BL       __aeabi_memcpy
                  |L1.2540|
;;;314    
;;;315        memcpy (cardInfo, &pollDeductStlResp, sizeof (Rsp_PollDeductStl));
0009ec  e3a02f56          MOV      r2,#0x158
0009f0  e1a0100d          MOV      r1,sp
0009f4  e1a00008          MOV      r0,r8
0009f8  ebfffffe          BL       __aeabi_memcpy
;;;316    
;;;317        if((g_len>0)&&(g_inbuff[0]==CSCMD_POLLDEDUCT_STL+1)&&(RW_RESULT==0))
0009fc  e51f053c          LDR      r0,|L1.1224|
000a00  e5900000          LDR      r0,[r0,#0]  ; g_len
000a04  e3500000          CMP      r0,#0
000a08  da00000a          BLE      |L1.2616|
000a0c  e51f0550          LDR      r0,|L1.1220|
000a10  e5d00000          LDRB     r0,[r0,#0]  ; g_inbuff
000a14  e3500071          CMP      r0,#0x71
000a18  1a000006          BNE      |L1.2616|
000a1c  e51f0560          LDR      r0,|L1.1220|
000a20  e5d00001          LDRB     r0,[r0,#1]  ; g_inbuff
000a24  e3500000          CMP      r0,#0
000a28  1a000002          BNE      |L1.2616|
;;;318        {
;;;319            return ERR_NOERR;
000a2c  e3a00000          MOV      r0,#0
                  |L1.2608|
000a30  e28ddf56          ADD      sp,sp,#0x158
;;;320        }
;;;321        else
;;;322        {
;;;323            //for power up time measurement
;;;324            if((g_len>0)&&(g_inbuff[0]==CSCMD_POLLDEDUCT_STL+1)&&(RW_RESULT==ERR_NOFUND))
;;;325                return ERR_NOFUND;
;;;326        }
;;;327        return ERR_ERRRESP;
;;;328    }
000a34  e8bd81f0          POP      {r4-r8,pc}
                  |L1.2616|
000a38  e51f0578          LDR      r0,|L1.1224|
000a3c  e5900000          LDR      r0,[r0,#0]            ;324  ; g_len
000a40  e3500000          CMP      r0,#0                 ;324
000a44  da000009          BLE      |L1.2672|
000a48  e51f058c          LDR      r0,|L1.1220|
000a4c  e5d00000          LDRB     r0,[r0,#0]            ;324  ; g_inbuff
000a50  e3500071          CMP      r0,#0x71              ;324
000a54  1a000005          BNE      |L1.2672|
000a58  e51f059c          LDR      r0,|L1.1220|
000a5c  e5d00001          LDRB     r0,[r0,#1]            ;324  ; g_inbuff
000a60  e3500030          CMP      r0,#0x30              ;324
000a64  1a000001          BNE      |L1.2672|
000a68  e3a00030          MOV      r0,#0x30              ;325
000a6c  eaffffef          B        |L1.2608|
                  |L1.2672|
000a70  e3a00001          MOV      r0,#1                 ;327
000a74  eaffffed          B        |L1.2608|
                          ENDP


                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  202d2057          DCB      0x20,0x2d,0x20,0x57
000004  41524e49          DCB      0x41,0x52,0x4e,0x49
000008  4e47205b          DCB      0x4e,0x47,0x20,0x5b
00000c  67657444          DCB      0x67,0x65,0x74,0x44
000010  61746146          DCB      0x61,0x74,0x61,0x46
000014  696c6543          DCB      0x69,0x6c,0x65,0x43
000018  616c6c62          DCB      0x61,0x6c,0x6c,0x62
00001c  61636b20          DCB      0x61,0x63,0x6b,0x20
000020  696e204f          DCB      0x69,0x6e,0x20,0x4f
000024  63746f70          DCB      0x63,0x74,0x6f,0x70
000028  75735d2d          DCB      0x75,0x73,0x5d,0x2d
00002c  3e205b25          DCB      0x3e,0x20,0x5b,0x25
000030  73202573          DCB      0x73,0x20,0x25,0x73
000034  20286c65          DCB      0x20,0x28,0x6c,0x65
000038  6e3d2564          DCB      0x6e,0x3d,0x25,0x64
00003c  295d203a          DCB      0x29,0x5d,0x20,0x3a
000040  20464e20          DCB      0x20,0x46,0x4e,0x20
000044  3d205b25          DCB      0x3d,0x20,0x5b,0x25
000048  735d2c20          DCB      0x73,0x5d,0x2c,0x20
00004c  76657220          DCB      0x76,0x65,0x72,0x20
000050  3d202564          DCB      0x3d,0x20,0x25,0x64
000054  2c204649          DCB      0x2c,0x20,0x46,0x49
000058  4c454449          DCB      0x4c,0x45,0x44,0x49
00005c  52203d20          DCB      0x52,0x20,0x3d,0x20
000060  5b25735d          DCB      0x5b,0x25,0x73,0x5d
000064  21210a00          DCB      0x21,0x21,0x0a,0x00
