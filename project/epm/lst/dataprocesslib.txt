; generated by ARM C/C++ Compiler, 5.03 [Build 76]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave -o.\obj\dataprocesslib.o --asm_dir=.\lst\ --list_dir=.\lst\ --depend=.\obj\dataprocesslib.d --cpu=ARM926EJ-S --apcs=interwork -O0 -I.\src -I..\..\common\src\BSP\Driver\Include -I..\..\common\src\FreeRTOS -I..\..\common\src\FreeRTOS\Source\include -I..\..\common\src\FreeRTOS\Source\portable\RVDS\ARM926EJ-S -I..\..\common\src\BSP\ThirdParty\FATFS\src -I.\src\userdrv -I.\src\syshal -I.\src\user -I.\src\userdrv\vl53l0x\core\inc -I.\src\userdrv\vl53l0x\platform\inc -I.\src\syshal\json -I.\src\syshal\modemlib -I..\..\common\src\BSP\ThirdParty\yaffs2 -I..\..\common\src\BSP\ThirdParty\yaffs2\include -I..\..\common\src\BSP\ThirdParty\yaffs2\include\asm -I..\..\common\src\BSP\ThirdParty\yaffs2\include\linux -I.\src\syshal\yaffs2 -I..\..\common\src\BSP\Library\SmartcardLib\Include -I.\src\syshal\cardlib -I.\src\syshal\cardlog -I.\src\syshal\blk -I..\..\common\src\BSP\Library\USB_HOST\Inc -I..\..\common\src\BSP\Library\USB_HOST\Inc\usb_uvc -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\Toshiba -DEPM_PROJECT -DCONFIG_YAFFS_DIRECT -DCONFIG_YAFFS_SHORT_NAMES_IN_RAM -DCONFIG_YAFFS_YAFFS2 -DNO_Y_INLINE -DCONFIG_YAFFS_PROVIDE_DEFS -DCONFIG_YAFFSFS_PROVIDE_VALUES --omf_browse=.\obj\dataprocesslib.crf src\syshal\dataprocesslib.c]
                          ARM

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_pre_padding
                          REQUIRE _printf_percent
                          REQUIRE _printf_flags
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_d
                          REQUIRE _printf_s
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                          REQUIRE _printf_str
                  loadSimpleFile PROC
;;;111    
;;;112    static BOOL loadSimpleFile(BOOL needChdirFlag, StorageType storageType, char* dir, TCHAR* fileName, char* ftpdir, DataSendType type, BOOL checkMode)
000000  e92d4fff          PUSH     {r0-r11,lr}
;;;113    {    
000004  e24ddb01          SUB      sp,sp,#0x400
000008  e24dd014          SUB      sp,sp,#0x14
00000c  e1a05001          MOV      r5,r1
000010  e1a06002          MOV      r6,r2
000014  e1a04003          MOV      r4,r3
000018  e28dae45          ADD      r10,sp,#0x450
00001c  e81a0700          LDMDA    r10,{r8-r10}
;;;114        uint8_t* dataTmp;
;;;115        size_t dataTmpLen;
;;;116        BOOL needFree;
;;;117        FileAgentReturn reVal;  
;;;118        BOOL returnVal = TRUE;
000020  e3a07001          MOV      r7,#1
;;;119        sysprintf("\r\n  !!! --[INFO]--> loadSimpleFile[%s] start... !!!\r\n", fileName);
000024  e1a01004          MOV      r1,r4
000028  e28f0f52          ADR      r0,|L1.376|
00002c  ebfffffe          BL       sysprintf
;;;120    
;;;121        reVal = FileAgentGetData(storageType, dir, fileName, &dataTmp, &dataTmpLen, &needFree, checkMode);
000030  e28d0b01          ADD      r0,sp,#0x400
000034  e2800008          ADD      r0,r0,#8
000038  e28d1b01          ADD      r1,sp,#0x400
00003c  e281100c          ADD      r1,r1,#0xc
000040  e98d0401          STMIB    sp,{r0,r10}
000044  e58d1000          STR      r1,[sp,#0]
000048  e28d3e41          ADD      r3,sp,#0x410
00004c  e1a02004          MOV      r2,r4
000050  e1a01006          MOV      r1,r6
000054  e1a00005          MOV      r0,r5
000058  ebfffffe          BL       FileAgentGetData
00005c  e58d0404          STR      r0,[sp,#0x404]
;;;122        if(reVal != FILE_AGENT_RETURN_ERROR)
000060  e59d0404          LDR      r0,[sp,#0x404]
000064  e3500000          CMP      r0,#0
000068  0a000097          BEQ      |L1.716|
;;;123        {
;;;124            if(dataTmpLen > 0)
00006c  e59d040c          LDR      r0,[sp,#0x40c]
000070  e3500000          CMP      r0,#0
000074  0a000094          BEQ      |L1.716|
;;;125            {
;;;126                if(type == DATA_SEND_TYPE_FTP)
000078  e3590002          CMP      r9,#2
00007c  1a000092          BNE      |L1.716|
;;;127                {
;;;128                    char ftpPreTargetDir[_MAX_LFN];
;;;129                    sprintf(ftpPreTargetDir, "%s%08d", FTP_PRE_PATH, GetMeterData()->epmid);
000080  ebfffffe          BL       GetMeterData
000084  e590b004          LDR      r11,[r0,#4]
000088  e1a0300b          MOV      r3,r11
00008c  e28f2f47          ADR      r2,|L1.432|
000090  e28f1e12          ADR      r1,|L1.440|
000094  e28d0fc1          ADD      r0,sp,#0x304
000098  ebfffffe          BL       __2sprintf
;;;130                    char ftpTargetDir[_MAX_LFN];
;;;131                    //sprintf(ftpTargetDir, "%08d/%s", GetMeterData()->epmid, ftpdir);                
;;;132                    sprintf(ftpTargetDir, "%s%08d/%s", FTP_PRE_PATH, GetMeterData()->epmid, ftpdir);
00009c  ebfffffe          BL       GetMeterData
0000a0  e590b004          LDR      r11,[r0,#4]
0000a4  e1a0300b          MOV      r3,r11
0000a8  e28f2c01          ADR      r2,|L1.432|
0000ac  e28f1f43          ADR      r1,|L1.448|
0000b0  e58d8000          STR      r8,[sp,#0]
0000b4  e28d0f81          ADD      r0,sp,#0x204
0000b8  ebfffffe          BL       __2sprintf
;;;133                    
;;;134                    QModemFtpClientStart();
0000bc  ebfffffe          BL       QModemFtpClientStart
;;;135                    if(QModemFtpClientProcess() == TRUE)
0000c0  ebfffffe          BL       QModemFtpClientProcess
0000c4  e3500001          CMP      r0,#1
0000c8  1a000077          BNE      |L1.684|
;;;136                    {
;;;137                        #if(ENABLE_LOG_FUNCTION)
;;;138                        {
;;;139                            char str[512];
;;;140                            sprintf(str, " !!!!!! ~ FTP_CONNECT SUCCESS (loadSimpleFile) ~!!!!!!\r\n");
0000cc  e28f10f8          ADR      r1,|L1.460|
0000d0  e28d0004          ADD      r0,sp,#4
0000d4  ebfffffe          BL       __2sprintf
;;;141                            LoglibPrintf(LOG_TYPE_INFO, str);
0000d8  e28d1004          ADD      r1,sp,#4
0000dc  e3a00000          MOV      r0,#0
0000e0  ebfffffe          BL       LoglibPrintf
;;;142                        }
;;;143                        #endif
;;;144                        if(FtpClientSendFile(needChdirFlag, ftpPreTargetDir, ftpTargetDir, fileName, (uint8_t*)dataTmp, dataTmpLen) == FALSE)
0000e4  e59d0410          LDR      r0,[sp,#0x410]
0000e8  e59d140c          LDR      r1,[sp,#0x40c]
0000ec  e1a03004          MOV      r3,r4
0000f0  e1cd00f0          STRD     r0,r1,[sp,#0]
0000f4  e28d2f81          ADD      r2,sp,#0x204
0000f8  e28d1fc1          ADD      r1,sp,#0x304
0000fc  e59d0414          LDR      r0,[sp,#0x414]
000100  ebfffffe          BL       FtpClientSendFile
000104  e3500000          CMP      r0,#0
000108  1a000008          BNE      |L1.304|
;;;145                        {                    
;;;146                            #if(ENABLE_LOG_FUNCTION)
;;;147                            {
;;;148                                char str[256];
;;;149                                sprintf(str, "  -X-> FtpClientSendFile[%s] ERROR...\r\n", fileName);
00010c  e1a02004          MOV      r2,r4
000110  e28f10f0          ADR      r1,|L1.520|
000114  e28d0f41          ADD      r0,sp,#0x104
000118  ebfffffe          BL       __2sprintf
;;;150                                LoglibPrintf(LOG_TYPE_ERROR, str);
00011c  e28d1f41          ADD      r1,sp,#0x104
000120  e3a00002          MOV      r0,#2
000124  ebfffffe          BL       LoglibPrintf
;;;151                            }
;;;152                            #else
;;;153                            sysprintf("--[INFO]--> FtpClientSendFile[%s] ERROR...\r\n", fileName);
;;;154                            #endif
;;;155                            returnVal = FALSE;
000128  e3a07000          MOV      r7,#0
00012c  ea000007          B        |L1.336|
                  |L1.304|
;;;156                        }  
;;;157                        else
;;;158                        {
;;;159                            #if(ENABLE_LOG_FUNCTION)
;;;160                            char str[256];
;;;161                            sprintf(str, "  -O-> FtpClientSendFile[%s] OK...\r\n", fileName);
000130  e1a02004          MOV      r2,r4
000134  e28f10f4          ADR      r1,|L1.560|
000138  e28d0f41          ADD      r0,sp,#0x104
00013c  ebfffffe          BL       __2sprintf
;;;162                            LoglibPrintf(LOG_TYPE_INFO, str);
000140  e28d1f41          ADD      r1,sp,#0x104
000144  e3a00000          MOV      r0,#0
000148  ebfffffe          BL       LoglibPrintf
;;;163                            #else
;;;164                            sysprintf("--[INFO]--> FtpClientSendFile[%s] OK...\r\n", fileName);
;;;165                            #endif
;;;166                        }   
00014c  e1a00000          MOV      r0,r0
                  |L1.336|
;;;167                        #if(1)
;;;168                        if(FtpClientClose())
000150  ebfffffe          BL       FtpClientClose
000154  e3500000          CMP      r0,#0
000158  0a00004c          BEQ      |L1.656|
;;;169                        {
;;;170                            #if(ENABLE_LOG_FUNCTION)
;;;171                            {
;;;172                                char str[512];
;;;173                                sprintf(str, " !!!!!! ~ FTP_CLOSE SUCCESS (loadSimpleFile) ~!!!!!!\r\n");
00015c  e28f10f4          ADR      r1,|L1.600|
000160  e28d0004          ADD      r0,sp,#4
000164  ebfffffe          BL       __2sprintf
;;;174                                LoglibPrintf(LOG_TYPE_INFO, str);
000168  e28d1004          ADD      r1,sp,#4
00016c  e3a00000          MOV      r0,#0
000170  ebfffffe          BL       LoglibPrintf
;;;175                            }
000174  ea000053          B        |L1.712|
                  |L1.376|
000178  0d0a2020          DCB      "\r\n  !!! --[INFO]--> loadSimpleFile[%s] start... !!!\r"
00017c  21212120
000180  2d2d5b49
000184  4e464f5d
000188  2d2d3e20
00018c  6c6f6164
000190  53696d70
000194  6c654669
000198  6c655b25
00019c  735d2073
0001a0  74617274
0001a4  2e2e2e20
0001a8  2121210d
0001ac  0a00              DCB      "\n",0
0001ae  00                DCB      0
0001af  00                DCB      0
                  |L1.432|
0001b0  74657374          DCB      "test/",0
0001b4  2f00    
0001b6  00                DCB      0
0001b7  00                DCB      0
                  |L1.440|
0001b8  25732530          DCB      "%s%08d",0
0001bc  386400  
0001bf  00                DCB      0
                  |L1.448|
0001c0  25732530          DCB      "%s%08d/%s",0
0001c4  38642f25
0001c8  7300    
0001ca  00                DCB      0
0001cb  00                DCB      0
                  |L1.460|
0001cc  20212121          DCB      " !!!!!! ~ FTP_CONNECT SUCCESS (loadSimpleFile) ~!!!!!!\r"
0001d0  21212120
0001d4  7e204654
0001d8  505f434f
0001dc  4e4e4543
0001e0  54205355
0001e4  43434553
0001e8  5320286c
0001ec  6f616453
0001f0  696d706c
0001f4  6546696c
0001f8  6529207e
0001fc  21212121
000200  21210d  
000203  0a00              DCB      "\n",0
000205  00                DCB      0
000206  00                DCB      0
000207  00                DCB      0
                  |L1.520|
000208  20202d58          DCB      "  -X-> FtpClientSendFile[%s] ERROR...\r\n",0
00020c  2d3e2046
000210  7470436c
000214  69656e74
000218  53656e64
00021c  46696c65
000220  5b25735d
000224  20455252
000228  4f522e2e
00022c  2e0d0a00
                  |L1.560|
000230  20202d4f          DCB      "  -O-> FtpClientSendFile[%s] OK...\r\n",0
000234  2d3e2046
000238  7470436c
00023c  69656e74
000240  53656e64
000244  46696c65
000248  5b25735d
00024c  204f4b2e
000250  2e2e0d0a
000254  00      
000255  00                DCB      0
000256  00                DCB      0
000257  00                DCB      0
                  |L1.600|
000258  20212121          DCB      " !!!!!! ~ FTP_CLOSE SUCCESS (loadSimpleFile) ~!!!!!!\r\n"
00025c  21212120
000260  7e204654
000264  505f434c
000268  4f534520
00026c  53554343
000270  45535320
000274  286c6f61
000278  6453696d
00027c  706c6546
000280  696c6529
000284  207e2121
000288  21212121
00028c  0d0a    
00028e  00                DCB      0
00028f  00                DCB      0
                  |L1.656|
;;;176                            #endif
;;;177                        }
;;;178                        else
;;;179                        {
;;;180                            #if(ENABLE_LOG_FUNCTION)
;;;181                            {
;;;182                                char str[512];
;;;183                                sprintf(str, " !!!!!! ~ FTP_CLOSE ERROR (loadSimpleFile) ~!!!!!!\r\n");
000290  e28f10b0          ADR      r1,|L1.840|
000294  e28d0004          ADD      r0,sp,#4
000298  ebfffffe          BL       __2sprintf
;;;184                                LoglibPrintf(LOG_TYPE_INFO, str);
00029c  e28d1004          ADD      r1,sp,#4
0002a0  e3a00000          MOV      r0,#0
0002a4  ebfffffe          BL       LoglibPrintf
;;;185                            }
0002a8  ea000006          B        |L1.712|
                  |L1.684|
;;;186                            #endif
;;;187                        }
;;;188                        #endif
;;;189                    }
;;;190                    else
;;;191                    {
;;;192                        #if(ENABLE_LOG_FUNCTION)
;;;193                        {
;;;194                            char str[512];
;;;195                            sprintf(str, " !!!!!! ~ FTP_CONNECT ERROR (loadSimpleFile) ~!!!!!!\r\n");
0002ac  e28f10cc          ADR      r1,|L1.896|
0002b0  e28d0004          ADD      r0,sp,#4
0002b4  ebfffffe          BL       __2sprintf
;;;196                            LoglibPrintf(LOG_TYPE_INFO, str);
0002b8  e28d1004          ADD      r1,sp,#4
0002bc  e3a00000          MOV      r0,#0
0002c0  ebfffffe          BL       LoglibPrintf
;;;197                        }
;;;198                        #endif
;;;199                        returnVal = FALSE;
0002c4  e3a07000          MOV      r7,#0
                  |L1.712|
;;;200                    }
;;;201                    //sysDelay(5000/portTICK_RATE_MS);//
;;;202                }
0002c8  e1a00000          MOV      r0,r0
                  |L1.716|
;;;203                /*
;;;204                else if(type == DATA_SEND_TYPE_WEB_POST)
;;;205                {
;;;206                    if(WebPostMessage(WEB_POST_ADDRESS, (uint8_t*)dataTmp) == FALSE)
;;;207                    {
;;;208                        sysprintf("--[INFO]--> WebPostMessage[%s] ERROR...\r\n", fileName);
;;;209                        //char str[256];
;;;210                        //sprintf(str, "  -X-> WebPostMessage[%s] ERROR...\r\n", fileName);
;;;211                        //LoglibPrintf(LOG_TYPE_ERROR, str); 
;;;212                        returnVal = FALSE;
;;;213                    }  
;;;214                    else
;;;215                    {
;;;216                        sysprintf("--[INFO]--> WebPostMessage[%s] OK...\r\n", fileName);
;;;217                        #if(LOG_SUCCESS_ENABLE)
;;;218                        //char str[256];
;;;219                        //sprintf(str, "  -O-> WebPostMessage[%s] OK...\r\n", fileName);
;;;220                        //LoglibPrintf(LOG_TYPE_INFO, str); 
;;;221                        #endif
;;;222                    } 
;;;223                }
;;;224                */
;;;225            }
;;;226        }
;;;227        if(returnVal == TRUE)
0002cc  e3570001          CMP      r7,#1
0002d0  1a00000f          BNE      |L1.788|
;;;228        {
;;;229            if(FileAgentDelFile(storageType, dir, fileName) != FILE_AGENT_RETURN_ERROR)
0002d4  e1a02004          MOV      r2,r4
0002d8  e1a01006          MOV      r1,r6
0002dc  e1a00005          MOV      r0,r5
0002e0  ebfffffe          BL       FileAgentDelFile
0002e4  e3500000          CMP      r0,#0
0002e8  0a000004          BEQ      |L1.768|
;;;230            {
;;;231                sysprintf("--[INFO]--> loadSimpleFile[%s%s], delete it OK...\r\n", dir, fileName);
0002ec  e1a02004          MOV      r2,r4
0002f0  e1a01006          MOV      r1,r6
0002f4  e28f00bc          ADR      r0,|L1.952|
0002f8  ebfffffe          BL       sysprintf
0002fc  ea000008          B        |L1.804|
                  |L1.768|
;;;232            }
;;;233            else
;;;234            {
;;;235                sysprintf("--[INFO]--> loadSimpleFile[%s%s], delete it ERROR...\r\n", dir, fileName);
000300  e1a02004          MOV      r2,r4
000304  e1a01006          MOV      r1,r6
000308  e28f00dc          ADR      r0,|L1.1004|
00030c  ebfffffe          BL       sysprintf
000310  ea000003          B        |L1.804|
                  |L1.788|
;;;236                //char str[1024];
;;;237                //sprintf(str, " !!! loadSimpleFile[%s%s], delete it ERROR...\r\n", dir, fileName);
;;;238                //LoglibPrintf(LOG_TYPE_ERROR, str);
;;;239            }
;;;240        }
;;;241        else
;;;242        {
;;;243            sysprintf("--[INFO]--> loadSimpleFile[%s%s], ignore delete it...\r\n", dir, fileName);
000314  e1a02004          MOV      r2,r4
000318  e1a01006          MOV      r1,r6
00031c  e28f0c01          ADR      r0,|L1.1060|
000320  ebfffffe          BL       sysprintf
                  |L1.804|
;;;244        }
;;;245        if(needFree)
000324  e5dd0408          LDRB     r0,[sp,#0x408]
000328  e3500000          CMP      r0,#0
00032c  0a000001          BEQ      |L1.824|
;;;246        {
;;;247            vPortFree(dataTmp);
000330  e59d0410          LDR      r0,[sp,#0x410]
000334  ebfffffe          BL       vPortFree
                  |L1.824|
;;;248        }
;;;249        return returnVal;    
000338  e1a00007          MOV      r0,r7
00033c  e28ddb01          ADD      sp,sp,#0x400
000340  e28dd024          ADD      sp,sp,#0x24
;;;250    }
000344  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.840|
000348  20212121          DCB      " !!!!!! ~ FTP_CLOSE ERROR (loadSimpleFile) ~!!!!!!\r\n",0
00034c  21212120
000350  7e204654
000354  505f434c
000358  4f534520
00035c  4552524f
000360  5220286c
000364  6f616453
000368  696d706c
00036c  6546696c
000370  6529207e
000374  21212121
000378  21210d0a
00037c  00      
00037d  00                DCB      0
00037e  00                DCB      0
00037f  00                DCB      0
                  |L1.896|
000380  20212121          DCB      " !!!!!! ~ FTP_CONNECT ERROR (loadSimpleFile) ~!!!!!!\r\n"
000384  21212120
000388  7e204654
00038c  505f434f
000390  4e4e4543
000394  54204552
000398  524f5220
00039c  286c6f61
0003a0  6453696d
0003a4  706c6546
0003a8  696c6529
0003ac  207e2121
0003b0  21212121
0003b4  0d0a    
0003b6  00                DCB      0
0003b7  00                DCB      0
                  |L1.952|
0003b8  2d2d5b49          DCB      "--[INFO]--> loadSimpleFile[%s%s], delete it OK...\r\n",0
0003bc  4e464f5d
0003c0  2d2d3e20
0003c4  6c6f6164
0003c8  53696d70
0003cc  6c654669
0003d0  6c655b25
0003d4  7325735d
0003d8  2c206465
0003dc  6c657465
0003e0  20697420
0003e4  4f4b2e2e
0003e8  2e0d0a00
                  |L1.1004|
0003ec  2d2d5b49          DCB      "--[INFO]--> loadSimpleFile[%s%s], delete it ERROR...\r\n"
0003f0  4e464f5d
0003f4  2d2d3e20
0003f8  6c6f6164
0003fc  53696d70
000400  6c654669
000404  6c655b25
000408  7325735d
00040c  2c206465
000410  6c657465
000414  20697420
000418  4552524f
00041c  522e2e2e
000420  0d0a    
000422  00                DCB      0
000423  00                DCB      0
                  |L1.1060|
000424  2d2d5b49          DCB      "--[INFO]--> loadSimpleFile[%s%s], ignore delete it...\r"
000428  4e464f5d
00042c  2d2d3e20
000430  6c6f6164
000434  53696d70
000438  6c654669
00043c  6c655b25
000440  7325735d
000444  2c206967
000448  6e6f7265
00044c  2064656c
000450  65746520
000454  69742e2e
000458  2e0d    
00045a  0a00              DCB      "\n",0
                          ENDP

                  sendDataCallback PROC
;;;251    //static BOOL sendDataNeedChdirFlag = FALSE;
;;;252    static BOOL sendDataCallback(char* dir, char* filename, int fileLen, void* para1, void* para2, void* para3, void* para4)
00045c  e92d4ff0          PUSH     {r4-r11,lr}
;;;253    {    
000460  e24dd01c          SUB      sp,sp,#0x1c
000464  e1a05000          MOV      r5,r0
000468  e1a06001          MOV      r6,r1
00046c  e1a04003          MOV      r4,r3
000470  e28d9040          ADD      r9,sp,#0x40
000474  e8990380          LDM      r9,{r7-r9}
;;;254        BOOL reVal = TRUE;
000478  e3a00001          MOV      r0,#1
00047c  e58d0018          STR      r0,[sp,#0x18]
;;;255        DataSendType* type = (DataSendType*)para1;
000480  e1a0a004          MOV      r10,r4
;;;256        StorageType* storageType = (StorageType*)para2;
000484  e1a0b007          MOV      r11,r7
;;;257        BOOL* checkMode = (BOOL*)para3;
000488  e58d8014          STR      r8,[sp,#0x14]
;;;258        char* ftpdir = (char*)para4;
00048c  e58d9010          STR      r9,[sp,#0x10]
;;;259        //sysprintf(" - sendDataCallback copy [%d] [%s %s]!!\n", tariffIndex, dir, filename);
;;;260        if(loadSimpleFile(TRUE, *storageType, dir, filename, ftpdir, *type, *checkMode) == FALSE)
000490  e59d8014          LDR      r8,[sp,#0x14]
000494  e5d80000          LDRB     r0,[r8,#0]
000498  e59a1000          LDR      r1,[r10,#0]
00049c  e59d9010          LDR      r9,[sp,#0x10]
0004a0  e58d0008          STR      r0,[sp,#8]
0004a4  e58d1004          STR      r1,[sp,#4]
0004a8  e58d9000          STR      r9,[sp,#0]
0004ac  e5db1000          LDRB     r1,[r11,#0]
0004b0  e1a03006          MOV      r3,r6
0004b4  e1a02005          MOV      r2,r5
0004b8  e3a00001          MOV      r0,#1
0004bc  ebfffffe          BL       loadSimpleFile
0004c0  e3500000          CMP      r0,#0
0004c4  1a000001          BNE      |L1.1232|
;;;261        {
;;;262            //sysprintf("[sendDataCallback] LoadFile error\r\n");
;;;263            reVal = FALSE;
0004c8  e3a00000          MOV      r0,#0
0004cc  e58d0018          STR      r0,[sp,#0x18]
                  |L1.1232|
;;;264        }
;;;265        else
;;;266        {
;;;267            //sendDataNeedChdirFlag = FALSE;
;;;268        }
;;;269        //vTaskDelay(1000/portTICK_RATE_MS);
;;;270        return reVal;
0004d0  e59d0018          LDR      r0,[sp,#0x18]
0004d4  e28dd01c          ADD      sp,sp,#0x1c
;;;271    }
0004d8  e8bd8ff0          POP      {r4-r11,pc}
;;;272    static BOOL sendDataFile (StorageType storageType, char* dir, char* extensionName, char* ftpdir, DataSendType type, char* excludeFileName, BOOL checkMode)
                          ENDP

                  sendDataFile PROC
0004dc  e92d40ff          PUSH     {r0-r7,lr}
;;;273    {
0004e0  e24dd014          SUB      sp,sp,#0x14
0004e4  e1a05001          MOV      r5,r1
0004e8  e1a06002          MOV      r6,r2
0004ec  e1a04003          MOV      r4,r3
0004f0  e59d703c          LDR      r7,[sp,#0x3c]
;;;274        //sendDataNeedChdirFlag = TRUE;
;;;275        return FileAgentGetList(storageType, dir, extensionName, excludeFileName, sendDataCallback, &type, &storageType, &checkMode, ftpdir);
0004f4  e28d0040          ADD      r0,sp,#0x40
0004f8  e28d1014          ADD      r1,sp,#0x14
0004fc  e28d2038          ADD      r2,sp,#0x38
000500  e58d000c          STR      r0,[sp,#0xc]
000504  e58d4010          STR      r4,[sp,#0x10]
000508  e59f0228          LDR      r0,|L1.1848|
00050c  e1a03007          MOV      r3,r7
000510  e88d0005          STM      sp,{r0,r2}
000514  e1a02006          MOV      r2,r6
000518  e58d1008          STR      r1,[sp,#8]
00051c  e1a01005          MOV      r1,r5
000520  e5dd0014          LDRB     r0,[sp,#0x14]
000524  ebfffffe          BL       FileAgentGetList
000528  e28dd024          ADD      sp,sp,#0x24
;;;276    }
00052c  e8bd80f0          POP      {r4-r7,pc}
;;;277    static BOOL needReloadFlag = FALSE;
                          ENDP

                  getDataFileCallback PROC
;;;278    static BOOL getDataFileCallback(char* dir, char* filename, int fileLen, void* para1, void* para2, void* para3, void* para4)
000530  e92d4ff8          PUSH     {r3-r11,lr}
;;;279    {
000534  e1a06000          MOV      r6,r0
000538  e1a07001          MOV      r7,r1
00053c  e1a08003          MOV      r8,r3
000540  e1cda2d8          LDRD     r10,r11,[sp,#0x28]
;;;280        int i;
;;;281        sysprintf(" - WARNING [getDataFileCallback]-> [%s %s] !!\n", dir, filename);
000544  e1a02007          MOV      r2,r7
000548  e1a01006          MOV      r1,r6
00054c  e28f0f7a          ADR      r0,|L1.1852|
000550  ebfffffe          BL       sysprintf
;;;282        FileAgentTargetFileName* targetFileName = (FileAgentTargetFileName*)para1;
000554  e1a05008          MOV      r5,r8
;;;283        int targetFileNum = *(int*)para2;
000558  e59a9000          LDR      r9,[r10,#0]
;;;284        StorageType* storageType = (StorageType*)para3;
00055c  e58db000          STR      r11,[sp,#0]
;;;285        for(i = 0; i<targetFileNum; i++)
000560  e3a04000          MOV      r4,#0
000564  ea000011          B        |L1.1456|
                  |L1.1384|
;;;286        {   
;;;287            if(strlen(targetFileName[i].name) != 0)
000568  e0850404          ADD      r0,r5,r4,LSL #8
00056c  ebfffffe          BL       strlen
000570  e3500000          CMP      r0,#0
000574  0a00000c          BEQ      |L1.1452|
;;;288            {
;;;289                //sysprintf(" -  WARNING [getDataFileCallback]->  compare [%s %s] !!\n", GetMeterData()->targetTariffFileName[i].name, filename);
;;;290                if(strcmp(targetFileName[i].name, filename) == 0)
000578  e0850404          ADD      r0,r5,r4,LSL #8
00057c  e1a01007          MOV      r1,r7
000580  ebfffffe          BL       strcmp
000584  e3500000          CMP      r0,#0
000588  1a000007          BNE      |L1.1452|
;;;291                {
;;;292                    sysprintf(" - WARNING [getDataFileCallback]->  get it [%s %s] !!\n", targetFileName[i].name, filename);
00058c  e0851404          ADD      r1,r5,r4,LSL #8
000590  e1a02007          MOV      r2,r7
000594  e28f0e1d          ADR      r0,|L1.1900|
000598  ebfffffe          BL       sysprintf
;;;293                    targetFileName[i].existFlag = TRUE;
00059c  e3a00001          MOV      r0,#1
0005a0  e0851404          ADD      r1,r5,r4,LSL #8
0005a4  e5c100ff          STRB     r0,[r1,#0xff]
;;;294                    break;
0005a8  ea000002          B        |L1.1464|
                  |L1.1452|
0005ac  e2844001          ADD      r4,r4,#1              ;285
                  |L1.1456|
0005b0  e1540009          CMP      r4,r9                 ;285
0005b4  baffffeb          BLT      |L1.1384|
                  |L1.1464|
0005b8  e1a00000          MOV      r0,r0
;;;295                }
;;;296            }
;;;297        }
;;;298        //sysprintf(" - WARNING [checkCallback] for exit -> [%d %d] !!\n", i, targetFileNum);
;;;299        if(i == targetFileNum)
0005bc  e1540009          CMP      r4,r9
0005c0  1a00000c          BNE      |L1.1528|
;;;300        {
;;;301            #if(1)
;;;302            sysprintf(" - WARNING [getDataFileCallback]->  delete [%s %s] !!\n", dir, filename);
0005c4  e1a02007          MOV      r2,r7
0005c8  e1a01006          MOV      r1,r6
0005cc  e28f0e1d          ADR      r0,|L1.1956|
0005d0  ebfffffe          BL       sysprintf
;;;303            FileAgentDelFile(*storageType, dir, filename);
0005d4  e59d1000          LDR      r1,[sp,#0]
0005d8  e5d10000          LDRB     r0,[r1,#0]
0005dc  e1a02007          MOV      r2,r7
0005e0  e1a01006          MOV      r1,r6
0005e4  ebfffffe          BL       FileAgentDelFile
;;;304            #else
;;;305            char fileName[_MAX_LFN];
;;;306            sysprintf(" - WARNING [getDataFileCallback]->  delete [%s %s] !!\n", dir, filename);
;;;307            sprintf(fileName, "%s%s", dir, filename);
;;;308            f_unlink(fileName);
;;;309            #endif
;;;310            needReloadFlag = TRUE;
0005e8  e3a00001          MOV      r0,#1
0005ec  e59f11e8          LDR      r1,|L1.2012|
0005f0  e5c10000          STRB     r0,[r1,#0]  ; needReloadFlag
                  |L1.1524|
;;;311            return TRUE;
;;;312        }   
;;;313        else
;;;314        {        
;;;315            //return FALSE;
;;;316            return TRUE;
;;;317        }
;;;318    }
0005f4  e8bd8ff8          POP      {r3-r11,pc}
                  |L1.1528|
0005f8  e3a00001          MOV      r0,#1                 ;316
0005fc  eafffffc          B        |L1.1524|
;;;319    static BOOL getDataFile (StorageType storageType, char* localDir, char* ftpDir, char* extensionName, DataSendType type, char* excludeFileName, FileAgentTargetFileName* targetFileName, int targetFileNum, DataProcessFtpGetReloadCallback reloadFunc)
                          ENDP

                  getDataFile PROC
000600  e92d4fff          PUSH     {r0-r11,lr}
;;;320    {
000604  e24ddfc1          SUB      sp,sp,#0x304
000608  e1a09001          MOV      r9,r1
00060c  e1a06002          MOV      r6,r2
000610  e1a07003          MOV      r7,r3
000614  e59d4340          LDR      r4,[sp,#0x340]
000618  e59d8348          LDR      r8,[sp,#0x348]
00061c  e59da33c          LDR      r10,[sp,#0x33c]
000620  e59db338          LDR      r11,[sp,#0x338]
;;;321        sysprintf("--[WARNING]--> getDataFile[localDir = %s][ftpDir = %s][extensionName = %s] \r\n", localDir, ftpDir, extensionName);
000624  e1a03007          MOV      r3,r7
000628  e1a02006          MOV      r2,r6
00062c  e1a01009          MOV      r1,r9
000630  e59f01a8          LDR      r0,|L1.2016|
000634  ebfffffe          BL       sysprintf
;;;322        needReloadFlag = FALSE;
000638  e3a00000          MOV      r0,#0
00063c  e59f1198          LDR      r1,|L1.2012|
000640  e5c10000          STRB     r0,[r1,#0]  ; needReloadFlag
;;;323        
;;;324        for(int i = 0; i<targetFileNum; i++)
000644  e3a05000          MOV      r5,#0
000648  ea000007          B        |L1.1644|
                  |L1.1612|
;;;325        {
;;;326            targetFileName[i].existFlag = FALSE;
00064c  e3a00000          MOV      r0,#0
000650  e0841405          ADD      r1,r4,r5,LSL #8
000654  e5c100ff          STRB     r0,[r1,#0xff]
;;;327            sysprintf("--[WARNING]--> targetFileName[%d]:[%s] \r\n", i, targetFileName[i].name);
000658  e0842405          ADD      r2,r4,r5,LSL #8
00065c  e1a01005          MOV      r1,r5
000660  e28f0f5f          ADR      r0,|L1.2020|
000664  ebfffffe          BL       sysprintf
000668  e2855001          ADD      r5,r5,#1              ;324
                  |L1.1644|
00066c  e59d0344          LDR      r0,[sp,#0x344]        ;324
000670  e1550000          CMP      r5,r0                 ;324
000674  bafffff4          BLT      |L1.1612|
;;;328        }
;;;329    
;;;330        FileAgentGetList(storageType, localDir, extensionName, excludeFileName, getDataFileCallback, targetFileName, &targetFileNum, &storageType, NULL);
000678  e3a00000          MOV      r0,#0
00067c  e28d1fc1          ADD      r1,sp,#0x304
000680  e28d2fd1          ADD      r2,sp,#0x344
000684  e58d0010          STR      r0,[sp,#0x10]
000688  e59f0180          LDR      r0,|L1.2064|
00068c  e1a0300a          MOV      r3,r10
000690  e58d2008          STR      r2,[sp,#8]
000694  e1a02007          MOV      r2,r7
000698  e58d100c          STR      r1,[sp,#0xc]
00069c  e1a01009          MOV      r1,r9
0006a0  e88d0011          STM      sp,{r0,r4}
0006a4  e5dd0304          LDRB     r0,[sp,#0x304]
0006a8  ebfffffe          BL       FileAgentGetList
;;;331    
;;;332        for(int i = 0; i<targetFileNum; i++)
0006ac  e3a05000          MOV      r5,#0
0006b0  ea000096          B        |L1.2320|
                  |L1.1716|
;;;333        {
;;;334            if(strlen(targetFileName[i].name) != 0)
0006b4  e0840405          ADD      r0,r4,r5,LSL #8
0006b8  ebfffffe          BL       strlen
0006bc  e3500000          CMP      r0,#0
0006c0  0a000091          BEQ      |L1.2316|
;;;335            {
;;;336                if(targetFileName[i].existFlag == FALSE)
0006c4  e0840405          ADD      r0,r4,r5,LSL #8
0006c8  e5d000ff          LDRB     r0,[r0,#0xff]
0006cc  e3500000          CMP      r0,#0
0006d0  1a00008d          BNE      |L1.2316|
;;;337                {
;;;338                    char ftpTargetDir[_MAX_LFN];         
;;;339                    sprintf(ftpTargetDir, "%s%s", FTP_PRE_PATH, ftpDir);
0006d4  e1a03006          MOV      r3,r6
0006d8  e59f2134          LDR      r2,|L1.2068|
0006dc  e28f1f4d          ADR      r1,|L1.2072|
0006e0  e28d0f81          ADD      r0,sp,#0x204
0006e4  ebfffffe          BL       __2sprintf
;;;340                    
;;;341                    QModemFtpClientStart();
0006e8  ebfffffe          BL       QModemFtpClientStart
;;;342                    if(QModemFtpClientProcess() == TRUE)
0006ec  ebfffffe          BL       QModemFtpClientProcess
0006f0  e3500001          CMP      r0,#1
0006f4  1a00007c          BNE      |L1.2284|
;;;343                    {
;;;344                        #if(ENABLE_LOG_FUNCTION)
;;;345                        {
;;;346                            char str[512];
;;;347                            sprintf(str, " !!!!!! ~ FTP_CONNECT SUCCESS (getDataFile) ~!!!!!!\r\n");
0006f8  e28f1e12          ADR      r1,|L1.2080|
0006fc  e28d0004          ADD      r0,sp,#4
000700  ebfffffe          BL       __2sprintf
;;;348                            LoglibPrintf(LOG_TYPE_INFO, str);
000704  e28d1004          ADD      r1,sp,#4
000708  e3a00000          MOV      r0,#0
00070c  ebfffffe          BL       LoglibPrintf
;;;349                        }
;;;350                        #endif
;;;351                        if(FtpClientGetFile(ftpTargetDir, targetFileName[i].name) == FALSE)
000710  e0841405          ADD      r1,r4,r5,LSL #8
000714  e28d0f81          ADD      r0,sp,#0x204
000718  ebfffffe          BL       FtpClientGetFile
00071c  e3500000          CMP      r0,#0
000720  1a000059          BNE      |L1.2188|
;;;352                        {
;;;353                           sysprintf("--[WARNING]--> FtpClientGetFile[%s, %s] ERROR...\r\n", ftpTargetDir, targetFileName[i].name);
000724  e0842405          ADD      r2,r4,r5,LSL #8
000728  e28d1f81          ADD      r1,sp,#0x204
00072c  e28f0f49          ADR      r0,|L1.2136|
000730  ebfffffe          BL       sysprintf
000734  ea00005b          B        |L1.2216|
                  |L1.1848|
                          DCD      sendDataCallback
                  |L1.1852|
00073c  202d2057          DCB      " - WARNING [getDataFileCallback]-> [%s %s] !!\n",0
000740  41524e49
000744  4e47205b
000748  67657444
00074c  61746146
000750  696c6543
000754  616c6c62
000758  61636b5d
00075c  2d3e205b
000760  25732025
000764  735d2021
000768  210a00  
00076b  00                DCB      0
                  |L1.1900|
00076c  202d2057          DCB      " - WARNING [getDataFileCallback]->  get it [%s %s] !!\n"
000770  41524e49
000774  4e47205b
000778  67657444
00077c  61746146
000780  696c6543
000784  616c6c62
000788  61636b5d
00078c  2d3e2020
000790  67657420
000794  6974205b
000798  25732025
00079c  735d2021
0007a0  210a    
0007a2  00                DCB      0
0007a3  00                DCB      0
                  |L1.1956|
0007a4  202d2057          DCB      " - WARNING [getDataFileCallback]->  delete [%s %s] !!\n"
0007a8  41524e49
0007ac  4e47205b
0007b0  67657444
0007b4  61746146
0007b8  696c6543
0007bc  616c6c62
0007c0  61636b5d
0007c4  2d3e2020
0007c8  64656c65
0007cc  7465205b
0007d0  25732025
0007d4  735d2021
0007d8  210a    
0007da  00                DCB      0
0007db  00                DCB      0
                  |L1.2012|
                          DCD      needReloadFlag
                  |L1.2016|
                          DCD      ||.constdata||
                  |L1.2020|
0007e4  2d2d5b57          DCB      "--[WARNING]--> targetFileName[%d]:[%s] \r\n",0
0007e8  41524e49
0007ec  4e475d2d
0007f0  2d3e2074
0007f4  61726765
0007f8  7446696c
0007fc  654e616d
000800  655b2564
000804  5d3a5b25
000808  735d200d
00080c  0a00    
00080e  00                DCB      0
00080f  00                DCB      0
                  |L1.2064|
                          DCD      getDataFileCallback
                  |L1.2068|
                          DCD      ||.text||+0x1b0
                  |L1.2072|
000818  25732573          DCB      "%s%s",0
00081c  00      
00081d  00                DCB      0
00081e  00                DCB      0
00081f  00                DCB      0
                  |L1.2080|
000820  20212121          DCB      " !!!!!! ~ FTP_CONNECT SUCCESS (getDataFile) ~!!!!!!\r\n"
000824  21212120
000828  7e204654
00082c  505f434f
000830  4e4e4543
000834  54205355
000838  43434553
00083c  53202867
000840  65744461
000844  74614669
000848  6c652920
00084c  7e212121
000850  2121210d
000854  0a      
000855  00                DCB      0
000856  00                DCB      0
000857  00                DCB      0
                  |L1.2136|
000858  2d2d5b57          DCB      "--[WARNING]--> FtpClientGetFile[%s, %s] ERROR...\r\n",0
00085c  41524e49
000860  4e475d2d
000864  2d3e2046
000868  7470436c
00086c  69656e74
000870  47657446
000874  696c655b
000878  25732c20
00087c  25735d20
000880  4552524f
000884  522e2e2e
000888  0d0a00  
00088b  00                DCB      0
                  |L1.2188|
;;;354                        }  
;;;355                        else
;;;356                        {
;;;357                            sysprintf("--[WARNING]--> FtpClientGetFile[%s, %s] OK...\r\n", ftpTargetDir, targetFileName[i].name);
00088c  e0842405          ADD      r2,r4,r5,LSL #8
000890  e28d1f81          ADD      r1,sp,#0x204
000894  e28f00bc          ADR      r0,|L1.2392|
000898  ebfffffe          BL       sysprintf
;;;358                            needReloadFlag = TRUE;
00089c  e3a00001          MOV      r0,#1
0008a0  e51f10cc          LDR      r1,|L1.2012|
0008a4  e5c10000          STRB     r0,[r1,#0]  ; needReloadFlag
                  |L1.2216|
;;;359                        }   
;;;360                        #if(1)
;;;361                        if(FtpClientClose())
0008a8  ebfffffe          BL       FtpClientClose
0008ac  e3500000          CMP      r0,#0
0008b0  0a000006          BEQ      |L1.2256|
;;;362                        {
;;;363                            #if(ENABLE_LOG_FUNCTION)
;;;364                            {
;;;365                                char str[512];
;;;366                                sprintf(str, " !!!!!! ~ FTP_CLOSE SUCCESS (getDataFile) ~!!!!!!\r\n");
0008b4  e28f10cc          ADR      r1,|L1.2440|
0008b8  e28d0004          ADD      r0,sp,#4
0008bc  ebfffffe          BL       __2sprintf
;;;367                                LoglibPrintf(LOG_TYPE_INFO, str);
0008c0  e28d1004          ADD      r1,sp,#4
0008c4  e3a00000          MOV      r0,#0
0008c8  ebfffffe          BL       LoglibPrintf
;;;368                            }
0008cc  ea00000d          B        |L1.2312|
                  |L1.2256|
;;;369                            #endif
;;;370                        }
;;;371                        else
;;;372                        {
;;;373                            #if(ENABLE_LOG_FUNCTION)
;;;374                            {
;;;375                                char str[512];
;;;376                                sprintf(str, " !!!!!! ~ FTP_CLOSE ERROR (getDataFile) ~!!!!!!\r\n");
0008d0  e28f10e4          ADR      r1,|L1.2492|
0008d4  e28d0004          ADD      r0,sp,#4
0008d8  ebfffffe          BL       __2sprintf
;;;377                                LoglibPrintf(LOG_TYPE_INFO, str);
0008dc  e28d1004          ADD      r1,sp,#4
0008e0  e3a00000          MOV      r0,#0
0008e4  ebfffffe          BL       LoglibPrintf
;;;378                            }
0008e8  ea000006          B        |L1.2312|
                  |L1.2284|
;;;379                            #endif
;;;380                        }
;;;381                        #endif
;;;382                    }
;;;383                    else
;;;384                    {
;;;385                        #if(ENABLE_LOG_FUNCTION)
;;;386                        {
;;;387                            char str[512];
;;;388                            sprintf(str, " !!!!!! ~ FTP_CONNECT ERROR (getDataFile) ~!!!!!!\r\n");
0008ec  e28f10fc          ADR      r1,|L1.2544|
0008f0  e28d0004          ADD      r0,sp,#4
0008f4  ebfffffe          BL       __2sprintf
;;;389                            LoglibPrintf(LOG_TYPE_INFO, str);
0008f8  e28d1004          ADD      r1,sp,#4
0008fc  e3a00000          MOV      r0,#0
000900  ebfffffe          BL       LoglibPrintf
;;;390                        }
000904  e1a00000          MOV      r0,r0
                  |L1.2312|
;;;391                        #endif
;;;392                    }
;;;393                }
000908  e1a00000          MOV      r0,r0
                  |L1.2316|
00090c  e2855001          ADD      r5,r5,#1              ;332
                  |L1.2320|
000910  e59d0344          LDR      r0,[sp,#0x344]        ;332
000914  e1550000          CMP      r5,r0                 ;332
000918  baffff65          BLT      |L1.1716|
;;;394            }
;;;395        }
;;;396        if(needReloadFlag)
00091c  e51f0148          LDR      r0,|L1.2012|
000920  e5d00000          LDRB     r0,[r0,#0]  ; needReloadFlag
000924  e3500000          CMP      r0,#0
000928  0a000005          BEQ      |L1.2372|
;;;397        {
;;;398            sysprintf("--[WARNING]--> needReloadFlag = TRUE...\r\n");
00092c  e28f00f0          ADR      r0,|L1.2596|
000930  ebfffffe          BL       sysprintf
;;;399            if(reloadFunc != NULL)
000934  e3580000          CMP      r8,#0
000938  0a000003          BEQ      |L1.2380|
;;;400            {
;;;401                reloadFunc();
00093c  e12fff38          BLX      r8
000940  ea000001          B        |L1.2380|
                  |L1.2372|
;;;402            }
;;;403        }
;;;404        else
;;;405        {
;;;406            sysprintf("--[WARNING]--> needReloadFlag = FALSE...\r\n");
000944  e28f0f41          ADR      r0,|L1.2640|
000948  ebfffffe          BL       sysprintf
                  |L1.2380|
;;;407        }
;;;408        return TRUE;
00094c  e3a00001          MOV      r0,#1
000950  e28ddfc5          ADD      sp,sp,#0x314
;;;409    }
000954  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.2392|
000958  2d2d5b57          DCB      "--[WARNING]--> FtpClientGetFile[%s, %s] OK...\r\n",0
00095c  41524e49
000960  4e475d2d
000964  2d3e2046
000968  7470436c
00096c  69656e74
000970  47657446
000974  696c655b
000978  25732c20
00097c  25735d20
000980  4f4b2e2e
000984  2e0d0a00
                  |L1.2440|
000988  20212121          DCB      " !!!!!! ~ FTP_CLOSE SUCCESS (getDataFile) ~!!!!!!\r\n",0
00098c  21212120
000990  7e204654
000994  505f434c
000998  4f534520
00099c  53554343
0009a0  45535320
0009a4  28676574
0009a8  44617461
0009ac  46696c65
0009b0  29207e21
0009b4  21212121
0009b8  210d0a00
                  |L1.2492|
0009bc  20212121          DCB      " !!!!!! ~ FTP_CLOSE ERROR (getDataFile) ~!!!!!!\r\n",0
0009c0  21212120
0009c4  7e204654
0009c8  505f434c
0009cc  4f534520
0009d0  4552524f
0009d4  52202867
0009d8  65744461
0009dc  74614669
0009e0  6c652920
0009e4  7e212121
0009e8  2121210d
0009ec  0a00    
0009ee  00                DCB      0
0009ef  00                DCB      0
                  |L1.2544|
0009f0  20212121          DCB      " !!!!!! ~ FTP_CONNECT ERROR (getDataFile) ~!!!!!!\r\n",0
0009f4  21212120
0009f8  7e204654
0009fc  505f434f
000a00  4e4e4543
000a04  54204552
000a08  524f5220
000a0c  28676574
000a10  44617461
000a14  46696c65
000a18  29207e21
000a1c  21212121
000a20  210d0a00
                  |L1.2596|
000a24  2d2d5b57          DCB      "--[WARNING]--> needReloadFlag = TRUE...\r\n",0
000a28  41524e49
000a2c  4e475d2d
000a30  2d3e206e
000a34  65656452
000a38  656c6f61
000a3c  64466c61
000a40  67203d20
000a44  54525545
000a48  2e2e2e0d
000a4c  0a00    
000a4e  00                DCB      0
000a4f  00                DCB      0
                  |L1.2640|
000a50  2d2d5b57          DCB      "--[WARNING]--> needReloadFlag = FALSE...\r\n",0
000a54  41524e49
000a58  4e475d2d
000a5c  2d3e206e
000a60  65656452
000a64  656c6f61
000a68  64466c61
000a6c  67203d20
000a70  46414c53
000a74  452e2e2e
000a78  0d0a00  
000a7b  00                DCB      0
                          ENDP

                  checkProcessExecuteFlag PROC
;;;410                                            
;;;411    static DataSendType checkProcessExecuteFlag(uint32_t currentTime)
000a7c  e1a02000          MOV      r2,r0
;;;412    {
;;;413        int i;
;;;414        DataSendType reval = DATA_SEND_TYPE_NONE;
000a80  e3a00000          MOV      r0,#0
;;;415        for (i = 0; ; i++)
000a84  e3a01000          MOV      r1,#0
000a88  e1a00000          MOV      r0,r0
                  |L1.2700|
;;;416        {
;;;417            if(processItem[i].processName == NULL)
000a8c  e0813101          ADD      r3,r1,r1,LSL #2
000a90  e59fc29c          LDR      r12,|L1.3380|
000a94  e79c3103          LDR      r3,[r12,r3,LSL #2]
000a98  e3530000          CMP      r3,#0
000a9c  1a000000          BNE      |L1.2724|
;;;418                break;
000aa0  ea00000b          B        |L1.2772|
                  |L1.2724|
;;;419            if(processItem[i].executeFlag == FALSE)
000aa4  e0813101          ADD      r3,r1,r1,LSL #2
000aa8  e59fc284          LDR      r12,|L1.3380|
000aac  e08c3103          ADD      r3,r12,r3,LSL #2
000ab0  e5d3300c          LDRB     r3,[r3,#0xc]
000ab4  e3530000          CMP      r3,#0
000ab8  0a000003          BEQ      |L1.2764|
;;;420            {
;;;421              
;;;422            }
;;;423            else
;;;424            {
;;;425                //sysprintf("\r\n  -[info]-> proecess check Get it: [%s] !!\n", processItem[i].processName);
;;;426                reval = reval | (processItem[i].sendType);
000abc  e0813101          ADD      r3,r1,r1,LSL #2
000ac0  e08c3103          ADD      r3,r12,r3,LSL #2
000ac4  e5933010          LDR      r3,[r3,#0x10]
000ac8  e1800003          ORR      r0,r0,r3
                  |L1.2764|
000acc  e2811001          ADD      r1,r1,#1              ;415
000ad0  eaffffed          B        |L1.2700|
                  |L1.2772|
000ad4  e1a00000          MOV      r0,r0                 ;418
;;;427            }
;;;428        }
;;;429        
;;;430        //sysprintf("\r\n  -[info]-> proecess check: reval = 0x%02x !!\n", reval);
;;;431        return reval;
;;;432    }
000ad8  e12fff1e          BX       lr
;;;433    
                          ENDP

                  executeProcess PROC
;;;434    static BOOL executeProcess(uint32_t currentTime, DataSendType type)
000adc  e92d41f0          PUSH     {r4-r8,lr}
;;;435    {
000ae0  e24ddf42          SUB      sp,sp,#0x108
000ae4  e1a08000          MOV      r8,r0
000ae8  e1a06001          MOV      r6,r1
;;;436        int i;
;;;437        int reExecuteTimes = 1;//RE_EXECUTE_TIMES; 一次就好
000aec  e3a05001          MOV      r5,#1
;;;438        BOOL reval = FALSE;
000af0  e3a07000          MOV      r7,#0
;;;439        //sysprintf("\r\n  -[info]-> executeProcess: currentTime = %d, type = %d !!\n", currentTime, reval);
;;;440        while((reExecuteTimes > 0) && (reval == FALSE)) //重作3次
000af4  ea000047          B        |L1.3096|
                  |L1.2808|
;;;441        {        
;;;442            reval = TRUE;
000af8  e3a07001          MOV      r7,#1
;;;443            for (i = 0; ; i++)
000afc  e3a04000          MOV      r4,#0
000b00  e1a00000          MOV      r0,r0
                  |L1.2820|
;;;444            {
;;;445                if(processItem[i].processName == NULL)
000b04  e0840104          ADD      r0,r4,r4,LSL #2
000b08  e59f1224          LDR      r1,|L1.3380|
000b0c  e7910100          LDR      r0,[r1,r0,LSL #2]
000b10  e3500000          CMP      r0,#0
000b14  1a000000          BNE      |L1.2844|
;;;446                    break;
000b18  ea00003c          B        |L1.3088|
                  |L1.2844|
;;;447                if((processItem[i].executeFlag == TRUE) && (type == processItem[i].sendType))
000b1c  e0840104          ADD      r0,r4,r4,LSL #2
000b20  e59f120c          LDR      r1,|L1.3380|
000b24  e0810100          ADD      r0,r1,r0,LSL #2
000b28  e5d0000c          LDRB     r0,[r0,#0xc]
000b2c  e3500001          CMP      r0,#1
000b30  1a000034          BNE      |L1.3080|
000b34  e0840104          ADD      r0,r4,r4,LSL #2
000b38  e0810100          ADD      r0,r1,r0,LSL #2
000b3c  e5900010          LDR      r0,[r0,#0x10]
000b40  e1500006          CMP      r0,r6
000b44  1a00002f          BNE      |L1.3080|
;;;448                {
;;;449                    #if(ENABLE_LOG_FUNCTION)
;;;450                    {
;;;451                        char str[256];
;;;452                        sprintf(str, "<<<< [ INFO ] >>>> execute %s Process[%d] : Start(reExecuteTimes=%d) !!\r\n", processItem[i].processName, i, reExecuteTimes);
000b48  e0840104          ADD      r0,r4,r4,LSL #2
000b4c  e58d5000          STR      r5,[sp,#0]
000b50  e7912100          LDR      r2,[r1,r0,LSL #2]
000b54  e1a03004          MOV      r3,r4
000b58  e59f11d8          LDR      r1,|L1.3384|
000b5c  e28d0008          ADD      r0,sp,#8
000b60  ebfffffe          BL       __2sprintf
;;;453                        LoglibPrintf(LOG_TYPE_INFO, str);
000b64  e28d1008          ADD      r1,sp,#8
000b68  e3a00000          MOV      r0,#0
000b6c  ebfffffe          BL       LoglibPrintf
;;;454                    }
;;;455                    #else
;;;456                    sysprintf("\r\n  <<<< [ INFO ] >>>> execute %s Process[%d] : Start(reExecuteTimes=%d) !!\r\n", processItem[i].processName, i, reExecuteTimes);
;;;457                    #endif
;;;458                    if(processItem[i].executeFunc(currentTime, processItem[i].sendType))
000b70  e0840104          ADD      r0,r4,r4,LSL #2
000b74  e59f31b8          LDR      r3,|L1.3380|
000b78  e0830100          ADD      r0,r3,r0,LSL #2
000b7c  e5901010          LDR      r1,[r0,#0x10]
000b80  e0840104          ADD      r0,r4,r4,LSL #2
000b84  e0830100          ADD      r0,r3,r0,LSL #2
000b88  e5902008          LDR      r2,[r0,#8]
000b8c  e1a00008          MOV      r0,r8
000b90  e12fff32          BLX      r2
000b94  e3500000          CMP      r0,#0
000b98  0a00000f          BEQ      |L1.3036|
;;;459                    {
;;;460                        processItem[i].executeFlag = FALSE;
000b9c  e3a00000          MOV      r0,#0
000ba0  e0841104          ADD      r1,r4,r4,LSL #2
000ba4  e59f2188          LDR      r2,|L1.3380|
000ba8  e0821101          ADD      r1,r2,r1,LSL #2
000bac  e5c1000c          STRB     r0,[r1,#0xc]
;;;461                        #if(ENABLE_LOG_FUNCTION)
;;;462                        {
;;;463                            char str[256];
;;;464                            sprintf(str, "<<<< [ SUCCESS ] >>>> execute %s Process[%d] : Execute OK !!\r\n", processItem[i].processName, i);
000bb0  e0840104          ADD      r0,r4,r4,LSL #2
000bb4  e2821000          ADD      r1,r2,#0
000bb8  e7912100          LDR      r2,[r1,r0,LSL #2]
000bbc  e1a03004          MOV      r3,r4
000bc0  e28f1f5d          ADR      r1,|L1.3388|
000bc4  e28d0008          ADD      r0,sp,#8
000bc8  ebfffffe          BL       __2sprintf
;;;465                            LoglibPrintf(LOG_TYPE_INFO, str);
000bcc  e28d1008          ADD      r1,sp,#8
000bd0  e3a00000          MOV      r0,#0
000bd4  ebfffffe          BL       LoglibPrintf
;;;466                        }
000bd8  ea00000a          B        |L1.3080|
                  |L1.3036|
;;;467                        #else
;;;468                        sysprintf("\r\n  <<<< [ SUCCESS ] >>>> execute %s Process[%d] : Execute OK !!\r\n", processItem[i].processName, i);
;;;469                        #endif
;;;470                    }
;;;471                    else
;;;472                    {
;;;473                        #if(ENABLE_LOG_FUNCTION)
;;;474                        {
;;;475                            char str[256];
;;;476                            sprintf(str, "<<<< [ ERROR ] >>>> execute %s Process[%d]: Execute ERROR !!\r\n", processItem[i].processName, i);
000bdc  e0840104          ADD      r0,r4,r4,LSL #2
000be0  e59f114c          LDR      r1,|L1.3380|
000be4  e7912100          LDR      r2,[r1,r0,LSL #2]
000be8  e1a03004          MOV      r3,r4
000bec  e28f1f62          ADR      r1,|L1.3452|
000bf0  e28d0008          ADD      r0,sp,#8
000bf4  ebfffffe          BL       __2sprintf
;;;477                            LoglibPrintf(LOG_TYPE_ERROR, str);
000bf8  e28d1008          ADD      r1,sp,#8
000bfc  e3a00002          MOV      r0,#2
000c00  ebfffffe          BL       LoglibPrintf
;;;478                        }
;;;479                        #else
;;;480                        sysprintf("\r\n  <<<< [ ERROR ] >>>> execute %s Process[%d]: Execute ERROR !!\r\n", processItem[i].processName, i);
;;;481                        #endif
;;;482                        reval = FALSE;
000c04  e3a07000          MOV      r7,#0
                  |L1.3080|
000c08  e2844001          ADD      r4,r4,#1              ;443
000c0c  eaffffbc          B        |L1.2820|
                  |L1.3088|
000c10  e1a00000          MOV      r0,r0                 ;446
;;;483                    }
;;;484                }
;;;485                else
;;;486                {
;;;487                    //sysprintf("\r\n  ~[info]~> execute Process[%d] %s: Ignore !!\n", i, processItem[i].processName);               
;;;488                }
;;;489            }
;;;490            reExecuteTimes--;
000c14  e2455001          SUB      r5,r5,#1
                  |L1.3096|
000c18  e3550000          CMP      r5,#0                 ;440
000c1c  da000001          BLE      |L1.3112|
000c20  e3570000          CMP      r7,#0                 ;440
000c24  0affffb3          BEQ      |L1.2808|
                  |L1.3112|
;;;491        }
;;;492        //if(reval)
;;;493        //{
;;;494        //    char str[256];
;;;495        //    sprintf(str, " => executeProcess(type = %d): TRUE [reExecute left %d Times]...\r\n", type, reExecuteTimes);
;;;496        //    LoglibPrintf(LOG_TYPE_INFO, str);
;;;497        //}
;;;498        //else
;;;499        //{
;;;500        //    char str[256];
;;;501        //    sprintf(str, " => executeProcess(type = %d): FALSE [reExecute left %d Times]...\r\n", type, reExecuteTimes);
;;;502        //    LoglibPrintf(LOG_TYPE_ERROR, str);
;;;503        //}
;;;504        
;;;505        return reval;
000c28  e1a00007          MOV      r0,r7
000c2c  e28ddf42          ADD      sp,sp,#0x108
;;;506    }
000c30  e8bd81f0          POP      {r4-r8,pc}
;;;507    
                          ENDP

                  statusExecuteFunc PROC
;;;509    //-----  status -----
;;;510    static BOOL statusExecuteFunc(uint32_t currentTime, DataSendType type)
000c34  e92d41f0          PUSH     {r4-r8,lr}
;;;511    {
000c38  e24dde41          SUB      sp,sp,#0x410
000c3c  e1a07000          MOV      r7,r0
000c40  e1a08001          MOV      r8,r1
;;;512        //sysprintf("\r\n     -[info]-> status Execute Func[%d] !!\n", currentTime);
;;;513        //return sendEsfFile(FILE_EXTENSION_EX(STATUS_FILE_EXTENSION));  
;;;514        BOOL reVal = TRUE;
000c44  e3a06001          MOV      r6,#1
;;;515        char *statusData;    
;;;516        
;;;517        //sysprintf("\r\n     -[info]-> statusExecuteFunc [%d], uxQueueGetQueueNumber = %d !!\n", currentTime, uxQueueGetQueueNumber(xStatusDataQueue));
;;;518        while( xQueueReceive(xStatusDataQueue, &statusData, 0 ) == pdPASS )
000c48  ea000083          B        |L1.3676|
                  |L1.3148|
;;;519        {
;;;520            BOOL postValue = FALSE;
000c4c  e3a04000          MOV      r4,#0
;;;521            int reExecuteTimes = RE_EXECUTE_TIMES;
000c50  e3a05003          MOV      r5,#3
;;;522            while((reExecuteTimes > 0) && (postValue == FALSE)) //重作3次
000c54  ea000017          B        |L1.3256|
                  |L1.3160|
;;;523            {
;;;524                postValue = TRUE;
000c58  e3a04001          MOV      r4,#1
;;;525                //sysprintf("\r\n     -[info]-> statusExecuteFunc statusData = [%s] !!\n", statusData);
;;;526                if(WebPostMessage(WEB_POST_ADDRESS, (uint8_t*)statusData) == FALSE)
000c5c  e28f0f56          ADR      r0,|L1.3516|
000c60  e59d140c          LDR      r1,[sp,#0x40c]
000c64  ebfffffe          BL       WebPostMessage
000c68  e3500000          CMP      r0,#0
000c6c  1a000008          BNE      |L1.3220|
;;;527                {                
;;;528                    #if(ENABLE_LOG_FUNCTION)
;;;529                    {
;;;530                        char str[1024];
;;;531                        sprintf(str, "  -X-> WebPostMessage[%s] ERROR...\r\n", statusData);
000c70  e28f1f59          ADR      r1,|L1.3548|
000c74  e59d240c          LDR      r2,[sp,#0x40c]
000c78  e28d000c          ADD      r0,sp,#0xc
000c7c  ebfffffe          BL       __2sprintf
;;;532                        LoglibPrintf(LOG_TYPE_ERROR, str);
000c80  e28d100c          ADD      r1,sp,#0xc
000c84  e3a00002          MOV      r0,#2
000c88  ebfffffe          BL       LoglibPrintf
;;;533                    }
;;;534                    #else
;;;535                    sysprintf("--[INFO]--> WebPostMessage[%s] ERROR...\r\n", statusData);
;;;536                    #endif                
;;;537                    postValue = FALSE;
000c8c  e3a04000          MOV      r4,#0
000c90  ea000007          B        |L1.3252|
                  |L1.3220|
;;;538                }  
;;;539                else
;;;540                {
;;;541                    
;;;542                    #if(ENABLE_LOG_FUNCTION)
;;;543                    {
;;;544                        char str[1024];
;;;545                        sprintf(str, "  -O-> WebPostMessage[%s] OK...\r\n", statusData);
000c94  e28f1f5a          ADR      r1,|L1.3588|
000c98  e59d240c          LDR      r2,[sp,#0x40c]
000c9c  e28d000c          ADD      r0,sp,#0xc
000ca0  ebfffffe          BL       __2sprintf
;;;546                        LoglibPrintf(LOG_TYPE_INFO, str); 
000ca4  e28d100c          ADD      r1,sp,#0xc
000ca8  e3a00000          MOV      r0,#0
000cac  ebfffffe          BL       LoglibPrintf
;;;547                    }
000cb0  e1a00000          MOV      r0,r0
                  |L1.3252|
;;;548                    #else
;;;549                    sysprintf("--[INFO]--> WebPostMessage[%s] OK...\r\n", statusData);
;;;550                    #endif                
;;;551                } 
;;;552                reExecuteTimes--;
000cb4  e2455001          SUB      r5,r5,#1
                  |L1.3256|
000cb8  e3550000          CMP      r5,#0                 ;522
000cbc  da000001          BLE      |L1.3272|
000cc0  e3540000          CMP      r4,#0                 ;522
000cc4  0affffe3          BEQ      |L1.3160|
                  |L1.3272|
;;;553            }
;;;554            if(postValue == FALSE)
000cc8  e3540000          CMP      r4,#0
000ccc  1a000058          BNE      |L1.3636|
;;;555            {   
;;;556                if(pdPASS == xQueueSendToFront( xStatusDataQueue, ( void * ) &statusData, ( TickType_t ) 0 ))
000cd0  e3a03001          MOV      r3,#1
000cd4  e3a02000          MOV      r2,#0
000cd8  e28d1b01          ADD      r1,sp,#0x400
000cdc  e281100c          ADD      r1,r1,#0xc
000ce0  e59f0140          LDR      r0,|L1.3624|
000ce4  e5900000          LDR      r0,[r0,#0]  ; xStatusDataQueue
000ce8  ebfffffe          BL       xQueueGenericSend
000cec  e3500001          CMP      r0,#1
000cf0  1a000006          BNE      |L1.3344|
;;;557                {
;;;558                    #if(ENABLE_LOG_FUNCTION)
;;;559                    {
;;;560                        char str[1024];
;;;561                        sprintf(str, "  -x-> WebPostMessage ERROR, insert back to queue OK, and break...\r\n");
000cf4  e59f1130          LDR      r1,|L1.3628|
000cf8  e28d000c          ADD      r0,sp,#0xc
000cfc  ebfffffe          BL       __2sprintf
;;;562                        LoglibPrintf(LOG_TYPE_ERROR, str); 
000d00  e28d100c          ADD      r1,sp,#0xc
000d04  e3a00002          MOV      r0,#2
000d08  ebfffffe          BL       LoglibPrintf
;;;563                    }
000d0c  ea000006          B        |L1.3372|
                  |L1.3344|
;;;564                    #endif           
;;;565                }
;;;566                else
;;;567                {
;;;568                    #if(ENABLE_LOG_FUNCTION)
;;;569                    {
;;;570                        char str[1024];
;;;571                        sprintf(str, "  -x-> WebPostMessage ERROR, insert back to queue error, and break...\r\n");
000d10  e59f1118          LDR      r1,|L1.3632|
000d14  e28d000c          ADD      r0,sp,#0xc
000d18  ebfffffe          BL       __2sprintf
;;;572                        LoglibPrintf(LOG_TYPE_ERROR, str); 
000d1c  e28d100c          ADD      r1,sp,#0xc
000d20  e3a00002          MOV      r0,#2
000d24  ebfffffe          BL       LoglibPrintf
;;;573                    }
000d28  e1a00000          MOV      r0,r0
                  |L1.3372|
;;;574                    #endif 
;;;575                }
;;;576                reVal = FALSE; 
000d2c  e3a06000          MOV      r6,#0
;;;577                break;
000d30  ea000052          B        |L1.3712|
                  |L1.3380|
                          DCD      processItem
                  |L1.3384|
                          DCD      ||.constdata||+0x50
                  |L1.3388|
000d3c  3c3c3c3c          DCB      "<<<< [ SUCCESS ] >>>> execute %s Process[%d] : Execute "
000d40  205b2053
000d44  55434345
000d48  5353205d
000d4c  203e3e3e
000d50  3e206578
000d54  65637574
000d58  65202573
000d5c  2050726f
000d60  63657373
000d64  5b25645d
000d68  203a2045
000d6c  78656375
000d70  746520  
000d73  4f4b2021          DCB      "OK !!\r\n",0
000d77  210d0a00
000d7b  00                DCB      0
                  |L1.3452|
000d7c  3c3c3c3c          DCB      "<<<< [ ERROR ] >>>> execute %s Process[%d]: Execute ERR"
000d80  205b2045
000d84  52524f52
000d88  205d203e
000d8c  3e3e3e20
000d90  65786563
000d94  75746520
000d98  25732050
000d9c  726f6365
000da0  73735b25
000da4  645d3a20
000da8  45786563
000dac  75746520
000db0  455252  
000db3  4f522021          DCB      "OR !!\r\n",0
000db7  210d0a00
000dbb  00                DCB      0
                  |L1.3516|
000dbc  68747470          DCB      "http://210.17.120.42/DCU/api/",0
000dc0  3a2f2f32
000dc4  31302e31
000dc8  372e3132
000dcc  302e3432
000dd0  2f444355
000dd4  2f617069
000dd8  2f00    
000dda  00                DCB      0
000ddb  00                DCB      0
                  |L1.3548|
000ddc  20202d58          DCB      "  -X-> WebPostMessage[%s] ERROR...\r\n",0
000de0  2d3e2057
000de4  6562506f
000de8  73744d65
000dec  73736167
000df0  655b2573
000df4  5d204552
000df8  524f522e
000dfc  2e2e0d0a
000e00  00      
000e01  00                DCB      0
000e02  00                DCB      0
000e03  00                DCB      0
                  |L1.3588|
000e04  20202d4f          DCB      "  -O-> WebPostMessage[%s] OK...\r\n",0
000e08  2d3e2057
000e0c  6562506f
000e10  73744d65
000e14  73736167
000e18  655b2573
000e1c  5d204f4b
000e20  2e2e2e0d
000e24  0a00    
000e26  00                DCB      0
000e27  00                DCB      0
                  |L1.3624|
                          DCD      xStatusDataQueue
                  |L1.3628|
                          DCD      ||.constdata||+0x9c
                  |L1.3632|
                          DCD      ||.constdata||+0xe4
                  |L1.3636|
;;;578    
;;;579            }
;;;580            else
;;;581            {
;;;582                #if(ENABLE_LOG_FUNCTION)
;;;583                {
;;;584                    char str[1024];
;;;585                    sprintf(str, "  -o-> WebPostMessage OK, vPortFree(statusData)...\r\n");
000e34  e28f1f79          ADR      r1,|L1.4128|
000e38  e28d000c          ADD      r0,sp,#0xc
000e3c  ebfffffe          BL       __2sprintf
;;;586                    LoglibPrintf(LOG_TYPE_INFO, str); 
000e40  e28d100c          ADD      r1,sp,#0xc
000e44  e3a00000          MOV      r0,#0
000e48  ebfffffe          BL       LoglibPrintf
;;;587                }
;;;588                #endif
;;;589                vPortFree(statusData); 
000e4c  e59d040c          LDR      r0,[sp,#0x40c]
000e50  ebfffffe          BL       vPortFree
;;;590                reVal = TRUE; 
000e54  e3a06001          MOV      r6,#1
;;;591            }
;;;592            
;;;593        }
000e58  e1a00000          MOV      r0,r0
                  |L1.3676|
000e5c  e3a03000          MOV      r3,#0                 ;518
000e60  e1a02003          MOV      r2,r3                 ;518
000e64  e28d1b01          ADD      r1,sp,#0x400          ;518
000e68  e281100c          ADD      r1,r1,#0xc            ;518
000e6c  e51f004c          LDR      r0,|L1.3624|
000e70  e5900000          LDR      r0,[r0,#0]            ;518  ; xStatusDataQueue
000e74  ebfffffe          BL       xQueueGenericReceive
000e78  e3500001          CMP      r0,#1                 ;518
000e7c  0affff72          BEQ      |L1.3148|
                  |L1.3712|
000e80  e1a00000          MOV      r0,r0                 ;577
;;;594        return reVal;
000e84  e1a00006          MOV      r0,r6
000e88  e28dde41          ADD      sp,sp,#0x410
;;;595    }
000e8c  e8bd81f0          POP      {r4-r8,pc}
;;;596    
                          ENDP

                  dsfExecuteFunc PROC
;;;597    //-----  dsf -----
;;;598    static BOOL dsfExecuteFunc(uint32_t currentTime, DataSendType type)
000e90  e92d40fe          PUSH     {r1-r7,lr}
;;;599    {
000e94  e1a06000          MOV      r6,r0
000e98  e1a04001          MOV      r4,r1
;;;600        return sendDataFile(DSF_FILE_SAVE_POSITION, DSF_FILE_DIR, FILE_EXTENSION_EX(DSF_FILE_EXTENSION), GetMeterData()->dsfFileFTPPath, type, NULL, TRUE);    
000e9c  ebfffffe          BL       GetMeterData
000ea0  e2805b02          ADD      r5,r0,#0x800
000ea4  e2855014          ADD      r5,r5,#0x14
000ea8  e3a00001          MOV      r0,#1
000eac  e3a01000          MOV      r1,#0
000eb0  e1a03005          MOV      r3,r5
000eb4  e28f2f67          ADR      r2,|L1.4184|
000eb8  e58d1004          STR      r1,[sp,#4]
000ebc  e28f1f67          ADR      r1,|L1.4192|
000ec0  e58d0008          STR      r0,[sp,#8]
000ec4  e3a00000          MOV      r0,#0
000ec8  e58d4000          STR      r4,[sp,#0]
000ecc  ebfffffe          BL       sendDataFile
;;;601    }
000ed0  e8bd80fe          POP      {r1-r7,pc}
;;;602    
                          ENDP

                  dcfExecuteFunc PROC
;;;603    //-----  dcf -----
;;;604    static BOOL dcfExecuteFunc(uint32_t currentTime, DataSendType type)
000ed4  e92d40f0          PUSH     {r4-r7,lr}
;;;605    {
000ed8  e24dd03c          SUB      sp,sp,#0x3c
000edc  e1a07000          MOV      r7,r0
000ee0  e1a04001          MOV      r4,r1
;;;606        RTC_TIME_DATA_T pt;
;;;607        return sendDataFile(DCF_FILE_SAVE_POSITION, DCF_FILE_DIR, FILE_EXTENSION_EX(DCF_FILE_EXTENSION), GetMeterData()->dcfFileFTPPath, type, MeterGetCurrentDCFFileName(&pt), FALSE);    
000ee4  e28d000c          ADD      r0,sp,#0xc
000ee8  ebfffffe          BL       MeterGetCurrentDCFFileName
000eec  e1a05000          MOV      r5,r0
000ef0  ebfffffe          BL       GetMeterData
000ef4  e2806c09          ADD      r6,r0,#0x900
000ef8  e2866013          ADD      r6,r6,#0x13
000efc  e3a00000          MOV      r0,#0
000f00  e1a03006          MOV      r3,r6
000f04  e28f2f56          ADR      r2,|L1.4196|
000f08  e28f1e15          ADR      r1,|L1.4192|
000f0c  e58d0008          STR      r0,[sp,#8]
000f10  e1cd40f0          STRD     r4,r5,[sp,#0]
000f14  ebfffffe          BL       sendDataFile
000f18  e28dd03c          ADD      sp,sp,#0x3c
;;;608    }
000f1c  e8bd80f0          POP      {r4-r7,pc}
;;;609    
                          ENDP

                  photoExecuteFunc PROC
;;;610    //-----  photo -----
;;;611    static BOOL photoExecuteFunc(uint32_t currentTime, DataSendType type)
000f20  e92d40fe          PUSH     {r1-r7,lr}
;;;612    {
000f24  e1a06000          MOV      r6,r0
000f28  e1a04001          MOV      r4,r1
;;;613        //sysprintf("\r\n     -[info]-> photo Execute Func[%d] !!\n", currentTime);
;;;614        return sendDataFile(PHOTO_SAVE_POSITION, PHOTO_FILE_DIR, FILE_EXTENSION_EX(PHOTO_FILE_EXTENSION), GetMeterData()->jpgFileFTPPath, type, NULL, TRUE);                
000f2c  ebfffffe          BL       GetMeterData
000f30  e2805c07          ADD      r5,r0,#0x700
000f34  e2855015          ADD      r5,r5,#0x15
000f38  e3a00001          MOV      r0,#1
000f3c  e3a01000          MOV      r1,#0
000f40  e1a03005          MOV      r3,r5
000f44  e28f2e12          ADR      r2,|L1.4204|
000f48  e58d1004          STR      r1,[sp,#4]
000f4c  e28f1f43          ADR      r1,|L1.4192|
000f50  e58d0008          STR      r0,[sp,#8]
000f54  e3a00000          MOV      r0,#0
000f58  e58d4000          STR      r4,[sp,#0]
000f5c  ebfffffe          BL       sendDataFile
;;;615    }
000f60  e8bd80fe          POP      {r1-r7,pc}
;;;616    
                          ENDP

                  logExecuteFunc PROC
;;;617    //-----  log -----
;;;618    static BOOL logExecuteFunc(uint32_t currentTime, DataSendType type)
000f64  e92d40fe          PUSH     {r1-r7,lr}
;;;619    {
000f68  e1a07000          MOV      r7,r0
000f6c  e1a04001          MOV      r4,r1
;;;620        //sysprintf("\r\n     -[info]-> log Execute Func[%d] !!\n", currentTime);
;;;621        return sendDataFile(LOG_SAVE_POSITION, LOG_FILE_DIR, FILE_EXTENSION_EX(LOG_FILE_EXTENSION), GetMeterData()->logFileFTPPath, type, LoglibGetCurrentLogFileName(), FALSE);                
000f70  ebfffffe          BL       LoglibGetCurrentLogFileName
000f74  e1a05000          MOV      r5,r0
000f78  ebfffffe          BL       GetMeterData
000f7c  e2806c0a          ADD      r6,r0,#0xa00
000f80  e2866012          ADD      r6,r6,#0x12
000f84  e3a00000          MOV      r0,#0
000f88  e1a03006          MOV      r3,r6
000f8c  e28f20e0          ADR      r2,|L1.4212|
000f90  e28f10c8          ADR      r1,|L1.4192|
000f94  e58d0008          STR      r0,[sp,#8]
000f98  e1cd40f0          STRD     r4,r5,[sp,#0]
000f9c  ebfffffe          BL       sendDataFile
;;;622    }
000fa0  e8bd80fe          POP      {r1-r7,pc}
;;;623    //-----  tariff  -----
                          ENDP

                  tariffReloadCallback PROC
;;;624    static BOOL tariffReloadCallback(void)
000fa4  e92d4010          PUSH     {r4,lr}
;;;625    {
;;;626        TariffLoadTariffFile();
000fa8  ebfffffe          BL       TariffLoadTariffFile
;;;627        TariffUpdateCurrentTariffData();
000fac  ebfffffe          BL       TariffUpdateCurrentTariffData
;;;628        return TRUE;
000fb0  e3a00001          MOV      r0,#1
;;;629    }
000fb4  e8bd8010          POP      {r4,pc}
;;;630    
                          ENDP

                  tariffExecuteFunc PROC
;;;631    static BOOL tariffExecuteFunc(uint32_t currentTime, DataSendType type)
000fb8  e92d40f0          PUSH     {r4-r7,lr}
;;;632    {
000fbc  e24dd014          SUB      sp,sp,#0x14
000fc0  e1a07000          MOV      r7,r0
000fc4  e1a04001          MOV      r4,r1
;;;633        sysprintf("--[WARNING]--> tariffExecuteFunc \r\n");
000fc8  e28f00ac          ADR      r0,|L1.4220|
000fcc  ebfffffe          BL       sysprintf
;;;634        return getDataFile(TARIFF_FILE_SAVE_POSITION, TARIFF_FILE_DIR, GetMeterData()->tariffFileFTPPath, FILE_EXTENSION_EX(TARIFF_FILE_EXTENSION), type, NULL, GetMeterData()->targetTariffFileName, TARIFF_FILE_NUM, tariffReloadCallback);
000fd0  ebfffffe          BL       GetMeterData
000fd4  e2805c01          ADD      r5,r0,#0x100
000fd8  e2855017          ADD      r5,r5,#0x17
000fdc  ebfffffe          BL       GetMeterData
000fe0  e2806c05          ADD      r6,r0,#0x500
000fe4  e2866017          ADD      r6,r6,#0x17
000fe8  e59f00b0          LDR      r0,|L1.4256|
000fec  e3a01003          MOV      r1,#3
000ff0  e3a02000          MOV      r2,#0
000ff4  e28f30a8          ADR      r3,|L1.4260|
000ff8  e98d0024          STMIB    sp,{r2,r5}
000ffc  e1a02006          MOV      r2,r6
001000  e58d100c          STR      r1,[sp,#0xc]
001004  e28f1054          ADR      r1,|L1.4192|
001008  e58d0010          STR      r0,[sp,#0x10]
00100c  e3a00000          MOV      r0,#0
001010  e58d4000          STR      r4,[sp,#0]
001014  ebfffffe          BL       getDataFile
001018  e28dd014          ADD      sp,sp,#0x14
;;;635    }
00101c  e8bd80f0          POP      {r4-r7,pc}
                  |L1.4128|
001020  20202d6f          DCB      "  -o-> WebPostMessage OK, vPortFree(statusData)...\r\n",0
001024  2d3e2057
001028  6562506f
00102c  73744d65
001030  73736167
001034  65204f4b
001038  2c207650
00103c  6f727446
001040  72656528
001044  73746174
001048  75734461
00104c  7461292e
001050  2e2e0d0a
001054  00      
001055  00                DCB      0
001056  00                DCB      0
001057  00                DCB      0
                  |L1.4184|
001058  2a2e6473          DCB      "*.dsf",0
00105c  6600    
00105e  00                DCB      0
00105f  00                DCB      0
                  |L1.4192|
001060  313a00            DCB      "1:",0
001063  00                DCB      0
                  |L1.4196|
001064  2a2e6463          DCB      "*.dcf",0
001068  6600    
00106a  00                DCB      0
00106b  00                DCB      0
                  |L1.4204|
00106c  2a2e6a70          DCB      "*.jpg",0
001070  6700    
001072  00                DCB      0
001073  00                DCB      0
                  |L1.4212|
001074  2a2e6c6f          DCB      "*.log",0
001078  6700    
00107a  00                DCB      0
00107b  00                DCB      0
                  |L1.4220|
00107c  2d2d5b57          DCB      "--[WARNING]--> tariffExecuteFunc \r\n",0
001080  41524e49
001084  4e475d2d
001088  2d3e2074
00108c  61726966
001090  66457865
001094  63757465
001098  46756e63
00109c  200d0a00
                  |L1.4256|
                          DCD      tariffReloadCallback
                  |L1.4260|
0010a4  2a2e7472          DCB      "*.tre",0
0010a8  6500    
0010aa  00                DCB      0
0010ab  00                DCB      0
                          ENDP

                  paraReloadCallback PROC
;;;636    // ----- para  -----
;;;637    static BOOL paraReloadCallback(void)
0010ac  e92d4010          PUSH     {r4,lr}
;;;638    {
;;;639        MeterDataReloadParaFile();
0010b0  ebfffffe          BL       MeterDataReloadParaFile
;;;640        GuiManagerRefreshScreen();  
0010b4  ebfffffe          BL       GuiManagerRefreshScreen
;;;641        return TRUE;
0010b8  e3a00001          MOV      r0,#1
;;;642    }
0010bc  e8bd8010          POP      {r4,pc}
;;;643    static BOOL paraExecuteFunc(uint32_t currentTime, DataSendType type)
                          ENDP

                  paraExecuteFunc PROC
0010c0  e92d40f0          PUSH     {r4-r7,lr}
;;;644    {
0010c4  e24dd014          SUB      sp,sp,#0x14
0010c8  e1a07000          MOV      r7,r0
0010cc  e1a04001          MOV      r4,r1
;;;645        sysprintf("--[WARNING]--> paraExecuteFunc \r\n");
0010d0  e28f0feb          ADR      r0,|L1.5252|
0010d4  ebfffffe          BL       sysprintf
;;;646        return getDataFile(EPM_PARA_SAVE_POSITION, EPM_PARA_FILE_DIR, GetMeterData()->paraFileFTPPath, FILE_EXTENSION_EX(EPM_PRAR_FILE_EXTENSION), type, NULL, &GetMeterData()->targetParaFileName, 1, paraReloadCallback);
0010d8  ebfffffe          BL       GetMeterData
0010dc  e2805b01          ADD      r5,r0,#0x400
0010e0  e2855017          ADD      r5,r5,#0x17
0010e4  ebfffffe          BL       GetMeterData
0010e8  e2806c06          ADD      r6,r0,#0x600
0010ec  e2866016          ADD      r6,r6,#0x16
0010f0  e59f03b0          LDR      r0,|L1.5288|
0010f4  e3a01001          MOV      r1,#1
0010f8  e3a02000          MOV      r2,#0
0010fc  e28f3fea          ADR      r3,|L1.5292|
001100  e98d0024          STMIB    sp,{r2,r5}
001104  e1a02006          MOV      r2,r6
001108  e58d100c          STR      r1,[sp,#0xc]
00110c  e24f10b4          ADR      r1,|L1.4192|
001110  e58d0010          STR      r0,[sp,#0x10]
001114  e3a00000          MOV      r0,#0
001118  e58d4000          STR      r4,[sp,#0]
00111c  ebfffffe          BL       getDataFile
001120  e28dd014          ADD      sp,sp,#0x14
;;;647    
;;;648    }
001124  e8bd80f0          POP      {r4-r7,pc}
;;;649    
                          ENDP

                  setExecuteFlag PROC
;;;650    BOOL setExecuteFlag(DataProcessId id)
001128  e1a02000          MOV      r2,r0
;;;651    {
;;;652        int i;
;;;653        for (i = 0; ; i++)
00112c  e3a01000          MOV      r1,#0
001130  e1a00000          MOV      r0,r0
                  |L1.4404|
;;;654        {
;;;655            if(processItem[i].processName == NULL)
001134  e0810101          ADD      r0,r1,r1,LSL #2
001138  e51f340c          LDR      r3,|L1.3380|
00113c  e7930100          LDR      r0,[r3,r0,LSL #2]
001140  e3500000          CMP      r0,#0
001144  1a000000          BNE      |L1.4428|
;;;656                break;
001148  ea00000d          B        |L1.4484|
                  |L1.4428|
;;;657            if(processItem[i].dataProcessId == id)
00114c  e0810101          ADD      r0,r1,r1,LSL #2
001150  e51f3424          LDR      r3,|L1.3380|
001154  e0830100          ADD      r0,r3,r0,LSL #2
001158  e5d00004          LDRB     r0,[r0,#4]
00115c  e1500002          CMP      r0,r2
001160  1a000005          BNE      |L1.4476|
;;;658            {
;;;659                processItem[i].executeFlag = TRUE;
001164  e3a00001          MOV      r0,#1
001168  e0813101          ADD      r3,r1,r1,LSL #2
00116c  e51fc440          LDR      r12,|L1.3380|
001170  e08c3103          ADD      r3,r12,r3,LSL #2
001174  e5c3000c          STRB     r0,[r3,#0xc]
                  |L1.4472|
;;;660                return TRUE;
;;;661            }
;;;662        }
;;;663        return FALSE;
;;;664    }
001178  e12fff1e          BX       lr
                  |L1.4476|
00117c  e2811001          ADD      r1,r1,#1              ;653
001180  eaffffeb          B        |L1.4404|
                  |L1.4484|
001184  e1a00000          MOV      r0,r0                 ;656
001188  e3a00000          MOV      r0,#0                 ;663
00118c  eafffff9          B        |L1.4472|
;;;665    
                          ENDP

                  DataProcessLibInit PROC
;;;668    /*-----------------------------------------*/
;;;669    BOOL DataProcessLibInit(void)
001190  e92d4010          PUSH     {r4,lr}
;;;670    {
;;;671        sysprintf("DataProcessLibInit!! \r\n");
001194  e28f0fc6          ADR      r0,|L1.5300|
001198  ebfffffe          BL       sysprintf
;;;672     
;;;673        xStatusDataQueue = xQueueCreate( STATUS_DATA_QUEUE_SIZE, ( unsigned portBASE_TYPE ) sizeof(char*));
00119c  e3a02000          MOV      r2,#0
0011a0  e3a01004          MOV      r1,#4
0011a4  e3a00b01          MOV      r0,#0x400
0011a8  ebfffffe          BL       xQueueGenericCreate
0011ac  e51f138c          LDR      r1,|L1.3624|
0011b0  e5810000          STR      r0,[r1,#0]  ; xStatusDataQueue
;;;674        if(xStatusDataQueue == NULL)
0011b4  e2810000          ADD      r0,r1,#0
0011b8  e5900000          LDR      r0,[r0,#0]  ; xStatusDataQueue
0011bc  e3500000          CMP      r0,#0
0011c0  1a000001          BNE      |L1.4556|
;;;675        {
;;;676            sysprintf("ERROR DataProcessLibInit(xStatusDataQueue == NULL)\n");
0011c4  e28f0c03          ADR      r0,|L1.5324|
0011c8  ebfffffe          BL       sysprintf
                  |L1.4556|
;;;677        }
;;;678     
;;;679        return TRUE;
0011cc  e3a00001          MOV      r0,#1
;;;680    }
0011d0  e8bd8010          POP      {r4,pc}
;;;681    
                          ENDP

                  DataProcessCheckExecute PROC
;;;682    BOOL DataProcessCheckExecute(uint32_t currentTime)
0011d4  e92d4010          PUSH     {r4,lr}
;;;683    {
0011d8  e1a04000          MOV      r4,r0
;;;684        return checkProcessExecuteFlag(currentTime);
0011dc  e1a00004          MOV      r0,r4
0011e0  ebfffffe          BL       checkProcessExecuteFlag
0011e4  e20000ff          AND      r0,r0,#0xff
;;;685    }
0011e8  e8bd8010          POP      {r4,pc}
;;;686    
                          ENDP

                  DataProcessExecute PROC
;;;687    BOOL DataProcessExecute(uint32_t currentTime, DataSendType type)
0011ec  e92d4070          PUSH     {r4-r6,lr}
;;;688    {
0011f0  e1a04000          MOV      r4,r0
0011f4  e1a05001          MOV      r5,r1
;;;689        return executeProcess(currentTime, type);
0011f8  e1a01005          MOV      r1,r5
0011fc  e1a00004          MOV      r0,r4
001200  ebfffffe          BL       executeProcess
;;;690    }
001204  e8bd8070          POP      {r4-r6,pc}
;;;691    
                          ENDP

                  DataProcessSetExecuteFlag PROC
;;;692    BOOL DataProcessSetExecuteFlag(DataProcessId id)
001208  e92d4010          PUSH     {r4,lr}
;;;693    {
00120c  e1a04000          MOV      r4,r0
;;;694        if(id != DATA_PROCESS_ID_ESF)
001210  e3540002          CMP      r4,#2
001214  0a000001          BEQ      |L1.4640|
;;;695            setExecuteFlag(DATA_PROCESS_ID_LOG);//有要傳檔案 順便傳就好
001218  e3a00001          MOV      r0,#1
00121c  ebfffffe          BL       setExecuteFlag
                  |L1.4640|
;;;696        return setExecuteFlag(id);
001220  e1a00004          MOV      r0,r4
001224  ebfffffe          BL       setExecuteFlag
;;;697    }
001228  e8bd8010          POP      {r4,pc}
;;;698    
                          ENDP

                  DataProcessSendStatusData PROC
;;;699    BOOL DataProcessSendStatusData(uint32_t currentTime, char* flagStr)
00122c  e92d4ff0          PUSH     {r4-r11,lr}
;;;700    {
001230  e24dd07c          SUB      sp,sp,#0x7c
001234  e1a04000          MOV      r4,r0
001238  e1a06001          MOV      r6,r1
;;;701        BOOL reval = TRUE;
00123c  e3a00001          MOV      r0,#1
001240  e58d0078          STR      r0,[sp,#0x78]
;;;702        char *out = NULL;   
001244  e3a05000          MOV      r5,#0
;;;703        char *outurlencoded = NULL;
001248  e3a00000          MOV      r0,#0
00124c  e58d0074          STR      r0,[sp,#0x74]
;;;704        UINT32 leftVoltage, rightVoltage;
;;;705        
;;;706        if(xStatusDataQueue == NULL)
001250  e51f0430          LDR      r0,|L1.3624|
001254  e5900000          LDR      r0,[r0,#0]  ; xStatusDataQueue
001258  e3500000          CMP      r0,#0
00125c  1a000004          BNE      |L1.4724|
;;;707        {
;;;708            sysprintf(" !! DataProcessSendStatusData ignore (xStatusDataQueue == NULL)\n");
001260  e59f0298          LDR      r0,|L1.5376|
001264  ebfffffe          BL       sysprintf
;;;709            return FALSE;
001268  e3a00000          MOV      r0,#0
                  |L1.4716|
00126c  e28dd07c          ADD      sp,sp,#0x7c
;;;710        }
;;;711        sysprintf(" !! DataProcessSendStatusData Start currentTime...\r\n");
;;;712        if(currentTime == 0)
;;;713            currentTime = GetCurrentUTCTime();
;;;714        
;;;715        //{
;;;716        //char str[1024];
;;;717        //sprintf(str, " !! DataProcessSendStatusData[%d] !!\r\n", currentTime);
;;;718        //LoglibPrintf(LOG_TYPE_INFO, str); 
;;;719        //}
;;;720        sysprintf(" !! DataProcessSendStatusData Start get string:[currentTime = %d]\r\n", currentTime);
;;;721        
;;;722        BatteryGetValue(NULL,&rightVoltage, &leftVoltage);
;;;723    
;;;724        //char* JsonCmdCreateStatusData(int jsonver, char* epmver, char* flag, char* epmid, int time, int index, BOOL bay1, BOOL bay2, 
;;;725        //                            int baydist1, int baydist2, int voltage1, int voltage2, 
;;;726        //                            int deposit1, int deposit2, int deposit3, int deposit4, int deposit5, int deposit6,
;;;727        //                            char* tariff, char* setting);
;;;728        out = JsonCmdCreateStatusData(JSON_CMD_VER, GetMeterData()->buildStr, flagStr, GetMeterData()->epmIdStr, currentTime, esfIndex++, 
;;;729                                    GetSpaceStatus(SPACE_INDEX_1), GetSpaceStatus(SPACE_INDEX_2), 
;;;730                                    GetSpaceDist(SPACE_INDEX_1), GetSpaceDist(SPACE_INDEX_2), 
;;;731                                    leftVoltage, rightVoltage, 
;;;732                                    GetMeterStorageData()->depositEndTime[0], GetMeterStorageData()->depositEndTime[1], GetMeterStorageData()->depositEndTime[2], 
;;;733                                    GetMeterStorageData()->depositEndTime[3], GetMeterStorageData()->depositEndTime[4], GetMeterStorageData()->depositEndTime[5],
;;;734                                    TariffGetFileName(), GetMeterPara()->name); 
;;;735                                    
;;;736        sysprintf(" !! DataProcessSendStatusData out string OK:[%s]\r\n", out);
;;;737        
;;;738        outurlencoded = pvPortMalloc(strlen(out) + strlen("data=") + 1);
;;;739        if(outurlencoded != NULL)
;;;740        {
;;;741            sprintf(outurlencoded, "%s%s", "data=", out);  
;;;742            sysprintf("\r\n !! DataProcessSendStatusData outurlencoded string OK:[%s]\r\n", out);        
;;;743            //sysprintf("\r\n     -[info 1]-> statusExecuteFunc [%d], result = %d, uxQueueGetQueueNumber = %d !!\n", currentTime, result, uxQueueGetQueueNumber(xStatusDataQueue));
;;;744            if(xQueueIsQueueFullFromISR(xStatusDataQueue))
;;;745            {
;;;746                char *statusData;
;;;747                if( xQueueReceive(xStatusDataQueue, &statusData, 0 ) == pdPASS)
;;;748                {
;;;749                    //char str[1024];
;;;750                    //sprintf(str, " !! DataProcessSendStatusData [%d] FULL:  xQueueReceive the oldest OK!!\r\n", currentTime);   
;;;751                    //LoglibPrintf(LOG_TYPE_INFO, str);  
;;;752                    //sysprintf("\r\n     -[info 1]-> DataProcessSendStatusData [%s] !!\n", statusData);
;;;753                    vPortFree(statusData);                 
;;;754                }
;;;755                else
;;;756                {
;;;757                    //char str[1024];
;;;758                    //sprintf(str, " !! DataProcessSendStatusData [%d] FULL:  xQueueReceive the oldest ERROR!!\r\n", currentTime);   
;;;759                    //LoglibPrintf(LOG_TYPE_ERROR, str);  
;;;760                }
;;;761            }
;;;762            if(pdPASS == xQueueSendToBack( xStatusDataQueue, ( void * ) &outurlencoded, ( TickType_t ) 0 ))
;;;763            {
;;;764                sysprintf("~~ DataProcessSendStatusData OK: \r\n"); 
;;;765                //char str[1024];
;;;766                //sprintf(str, " !! DataProcessSendStatusData[%d, esfIndex = %d] OK!!\r\n", currentTime, esfIndex); 
;;;767                //LoglibPrintf(LOG_TYPE_INFO, str);              
;;;768            }
;;;769            else
;;;770            {
;;;771                sysprintf("~~ DataProcessSendStatusData ERROR: \r\n");  
;;;772                //char str[1024];
;;;773                //sprintf(str, " !! DataProcessSendStatusData[%d, esfIndex = %d] ERROR!!\r\n", currentTime, esfIndex);    
;;;774                //LoglibPrintf(LOG_TYPE_ERROR, str);  
;;;775                reval = FALSE;
;;;776            }
;;;777            //sysprintf("\r\n     -[info 2]-> statusExecuteFunc [%d], result = %d, uxQueueGetQueueNumber = %d !!\n", currentTime, result, uxQueueGetQueueNumber(xStatusDataQueue));
;;;778        }
;;;779        else
;;;780        {
;;;781            reval = FALSE;
;;;782        }        
;;;783        vPortFree(out);
;;;784        return reval;
;;;785    }
001270  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.4724|
001274  e28f0fa2          ADR      r0,|L1.5380|
001278  ebfffffe          BL       sysprintf
00127c  e3540000          CMP      r4,#0                 ;712
001280  1a000001          BNE      |L1.4748|
001284  ebfffffe          BL       GetCurrentUTCTime
001288  e1a04000          MOV      r4,r0                 ;713
                  |L1.4748|
00128c  e1a01004          MOV      r1,r4                 ;720
001290  e59f02a4          LDR      r0,|L1.5436|
001294  ebfffffe          BL       sysprintf
001298  e28d2070          ADD      r2,sp,#0x70           ;722
00129c  e28d106c          ADD      r1,sp,#0x6c           ;722
0012a0  e3a00000          MOV      r0,#0                 ;722
0012a4  ebfffffe          BL       BatteryGetValue
0012a8  ebfffffe          BL       GetMeterPara
0012ac  e2807004          ADD      r7,r0,#4              ;728
0012b0  ebfffffe          BL       TariffGetFileName
0012b4  e1a08000          MOV      r8,r0                 ;728
0012b8  ebfffffe          BL       GetMeterStorageData
0012bc  e280b02f          ADD      r11,r0,#0x2f          ;728
0012c0  e1a0000b          MOV      r0,r11                ;728
0012c4  ebfffffe          BL       __aeabi_uread4
0012c8  e1a09000          MOV      r9,r0                 ;728
0012cc  ebfffffe          BL       GetMeterStorageData
0012d0  e280b02b          ADD      r11,r0,#0x2b          ;728
0012d4  e1a0000b          MOV      r0,r11                ;728
0012d8  ebfffffe          BL       __aeabi_uread4
0012dc  e1a0a000          MOV      r10,r0                ;728
0012e0  ebfffffe          BL       GetMeterStorageData
0012e4  e280b027          ADD      r11,r0,#0x27          ;728
0012e8  e1a0000b          MOV      r0,r11                ;728
0012ec  ebfffffe          BL       __aeabi_uread4
0012f0  e58d0068          STR      r0,[sp,#0x68]         ;728
0012f4  ebfffffe          BL       GetMeterStorageData
0012f8  e280b023          ADD      r11,r0,#0x23          ;728
0012fc  e1a0000b          MOV      r0,r11                ;728
001300  ebfffffe          BL       __aeabi_uread4
001304  e58d0064          STR      r0,[sp,#0x64]         ;728
001308  ebfffffe          BL       GetMeterStorageData
00130c  e280b01f          ADD      r11,r0,#0x1f          ;728
001310  e1a0000b          MOV      r0,r11                ;728
001314  ebfffffe          BL       __aeabi_uread4
001318  e58d0060          STR      r0,[sp,#0x60]         ;728
00131c  ebfffffe          BL       GetMeterStorageData
001320  e280b01b          ADD      r11,r0,#0x1b          ;728
001324  e1a0000b          MOV      r0,r11                ;728
001328  ebfffffe          BL       __aeabi_uread4
00132c  e58d005c          STR      r0,[sp,#0x5c]         ;728
001330  e3a00001          MOV      r0,#1                 ;728
001334  ebfffffe          BL       GetSpaceDist
001338  e58d0058          STR      r0,[sp,#0x58]         ;728
00133c  e3a00000          MOV      r0,#0                 ;728
001340  ebfffffe          BL       GetSpaceDist
001344  e58d0054          STR      r0,[sp,#0x54]         ;728
001348  e3a00001          MOV      r0,#1                 ;728
00134c  ebfffffe          BL       GetSpaceStatus
001350  e58d0050          STR      r0,[sp,#0x50]         ;728
001354  e3a00000          MOV      r0,#0                 ;728
001358  ebfffffe          BL       GetSpaceStatus
00135c  e58d004c          STR      r0,[sp,#0x4c]         ;728
001360  ebfffffe          BL       GetMeterData
001364  e2800088          ADD      r0,r0,#0x88           ;728
001368  e58d0048          STR      r0,[sp,#0x48]         ;728
00136c  ebfffffe          BL       GetMeterData
001370  e2800008          ADD      r0,r0,#8              ;728
001374  e58d0044          STR      r0,[sp,#0x44]         ;728
001378  e58d703c          STR      r7,[sp,#0x3c]         ;728
00137c  e58d8038          STR      r8,[sp,#0x38]         ;728
001380  e58d9034          STR      r9,[sp,#0x34]         ;728
001384  e58da030          STR      r10,[sp,#0x30]        ;728
001388  e59d0068          LDR      r0,[sp,#0x68]         ;728
00138c  e59d1064          LDR      r1,[sp,#0x64]         ;728
001390  e59d205c          LDR      r2,[sp,#0x5c]         ;728
001394  e59d3060          LDR      r3,[sp,#0x60]         ;728
001398  e58d002c          STR      r0,[sp,#0x2c]         ;728
00139c  e58d1028          STR      r1,[sp,#0x28]         ;728
0013a0  e1cd22f0          STRD     r2,r3,[sp,#0x20]      ;728
0013a4  e59d0054          LDR      r0,[sp,#0x54]         ;728
0013a8  e59d1058          LDR      r1,[sp,#0x58]         ;728
0013ac  e59d206c          LDR      r2,[sp,#0x6c]         ;728
0013b0  e59d3070          LDR      r3,[sp,#0x70]         ;728
0013b4  e28dc010          ADD      r12,sp,#0x10          ;728
0013b8  e88c000b          STM      r12,{r0,r1,r3}        ;728
0013bc  e58d201c          STR      r2,[sp,#0x1c]         ;728
0013c0  e59f2178          LDR      r2,|L1.5440|
0013c4  e59d0050          LDR      r0,[sp,#0x50]         ;728
0013c8  e59d104c          LDR      r1,[sp,#0x4c]         ;728
0013cc  e5922000          LDR      r2,[r2,#0]            ;728  ; esfIndex
0013d0  e59f3168          LDR      r3,|L1.5440|
0013d4  e5933000          LDR      r3,[r3,#0]            ;728  ; esfIndex
0013d8  e2833001          ADD      r3,r3,#1              ;728
0013dc  e59fc15c          LDR      r12,|L1.5440|
0013e0  e58c3000          STR      r3,[r12,#0]           ;728  ; esfIndex
0013e4  e58d000c          STR      r0,[sp,#0xc]          ;728
0013e8  e58d1008          STR      r1,[sp,#8]            ;728
0013ec  e58d2004          STR      r2,[sp,#4]            ;728
0013f0  e58d4000          STR      r4,[sp,#0]            ;728
0013f4  e1a02006          MOV      r2,r6                 ;728
0013f8  e3a00001          MOV      r0,#1                 ;728
0013fc  e59d1044          LDR      r1,[sp,#0x44]         ;728
001400  e59d3048          LDR      r3,[sp,#0x48]         ;728
001404  ebfffffe          BL       JsonCmdCreateStatusData
001408  e1a05000          MOV      r5,r0                 ;728
00140c  e1a01005          MOV      r1,r5                 ;736
001410  e28f0f4b          ADR      r0,|L1.5444|
001414  ebfffffe          BL       sysprintf
001418  e1a00005          MOV      r0,r5                 ;738
00141c  ebfffffe          BL       strlen
001420  e2807006          ADD      r7,r0,#6              ;738
001424  e1a00007          MOV      r0,r7                 ;738
001428  ebfffffe          BL       pvPortMalloc
00142c  e58d0074          STR      r0,[sp,#0x74]         ;738
001430  e59d0074          LDR      r0,[sp,#0x74]         ;739
001434  e3500000          CMP      r0,#0                 ;739
001438  0a000078          BEQ      |L1.5664|
00143c  e1a03005          MOV      r3,r5                 ;741
001440  e28f2e13          ADR      r2,|L1.5496|
001444  e59f1134          LDR      r1,|L1.5504|
001448  e59d0074          LDR      r0,[sp,#0x74]         ;741
00144c  ebfffffe          BL       __2sprintf
001450  e1a01005          MOV      r1,r5                 ;742
001454  e28f0f4a          ADR      r0,|L1.5508|
001458  ebfffffe          BL       sysprintf
00145c  e51f063c          LDR      r0,|L1.3624|
001460  e5900000          LDR      r0,[r0,#0]            ;744  ; xStatusDataQueue
001464  ebfffffe          BL       xQueueIsQueueFullFromISR
001468  e3500000          CMP      r0,#0                 ;744
00146c  0a00005b          BEQ      |L1.5600|
001470  e3a03000          MOV      r3,#0                 ;747
001474  e1a02003          MOV      r2,r3                 ;747
001478  e28d1068          ADD      r1,sp,#0x68           ;747
00147c  e51f065c          LDR      r0,|L1.3624|
001480  ea00004f          B        |L1.5572|
                  |L1.5252|
001484  2d2d5b57          DCB      "--[WARNING]--> paraExecuteFunc \r\n",0
001488  41524e49
00148c  4e475d2d
001490  2d3e2070
001494  61726145
001498  78656375
00149c  74654675
0014a0  6e63200d
0014a4  0a00    
0014a6  00                DCB      0
0014a7  00                DCB      0
                  |L1.5288|
                          DCD      paraReloadCallback
                  |L1.5292|
0014ac  2a2e7072          DCB      "*.pre",0
0014b0  6500    
0014b2  00                DCB      0
0014b3  00                DCB      0
                  |L1.5300|
0014b4  44617461          DCB      "DataProcessLibInit!! \r\n",0
0014b8  50726f63
0014bc  6573734c
0014c0  6962496e
0014c4  69742121
0014c8  200d0a00
                  |L1.5324|
0014cc  4552524f          DCB      "ERROR DataProcessLibInit(xStatusDataQueue == NULL)\n",0
0014d0  52204461
0014d4  74615072
0014d8  6f636573
0014dc  734c6962
0014e0  496e6974
0014e4  28785374
0014e8  61747573
0014ec  44617461
0014f0  51756575
0014f4  65203d3d
0014f8  204e554c
0014fc  4c290a00
                  |L1.5376|
                          DCD      ||.constdata||+0x12c
                  |L1.5380|
001504  20212120          DCB      " !! DataProcessSendStatusData Start currentTime...\r\n",0
001508  44617461
00150c  50726f63
001510  65737353
001514  656e6453
001518  74617475
00151c  73446174
001520  61205374
001524  61727420
001528  63757272
00152c  656e7454
001530  696d652e
001534  2e2e0d0a
001538  00      
001539  00                DCB      0
00153a  00                DCB      0
00153b  00                DCB      0
                  |L1.5436|
                          DCD      ||.constdata||+0x170
                  |L1.5440|
                          DCD      esfIndex
                  |L1.5444|
001544  20212120          DCB      " !! DataProcessSendStatusData out string OK:[%s]\r\n",0
001548  44617461
00154c  50726f63
001550  65737353
001554  656e6453
001558  74617475
00155c  73446174
001560  61206f75
001564  74207374
001568  72696e67
00156c  204f4b3a
001570  5b25735d
001574  0d0a00  
001577  00                DCB      0
                  |L1.5496|
001578  64617461          DCB      "data=",0
00157c  3d00    
00157e  00                DCB      0
00157f  00                DCB      0
                  |L1.5504|
                          DCD      ||.text||+0x818
                  |L1.5508|
001584  0d0a2021          DCB      "\r\n !! DataProcessSendStatusData outurlencoded string "
001588  21204461
00158c  74615072
001590  6f636573
001594  7353656e
001598  64537461
00159c  74757344
0015a0  61746120
0015a4  6f757475
0015a8  726c656e
0015ac  636f6465
0015b0  64207374
0015b4  72696e67
0015b8  20      
0015b9  4f4b3a5b          DCB      "OK:[%s]\r\n",0
0015bd  25735d0d
0015c1  0a00    
0015c3  00                DCB      0
                  |L1.5572|
0015c4  e5900000          LDR      r0,[r0,#0]            ;747  ; xStatusDataQueue
0015c8  ebfffffe          BL       xQueueGenericReceive
0015cc  e3500001          CMP      r0,#1                 ;747
0015d0  1a000001          BNE      |L1.5596|
0015d4  e59d0068          LDR      r0,[sp,#0x68]         ;753
0015d8  ebfffffe          BL       vPortFree
                  |L1.5596|
0015dc  e1a00000          MOV      r0,r0                 ;761
                  |L1.5600|
0015e0  e3a03000          MOV      r3,#0                 ;762
0015e4  e1a02003          MOV      r2,r3                 ;762
0015e8  e28d1074          ADD      r1,sp,#0x74           ;762
0015ec  e51f07cc          LDR      r0,|L1.3624|
0015f0  e5900000          LDR      r0,[r0,#0]            ;762  ; xStatusDataQueue
0015f4  ebfffffe          BL       xQueueGenericSend
0015f8  e3500001          CMP      r0,#1                 ;762
0015fc  1a000002          BNE      |L1.5644|
001600  e28f0fdf          ADR      r0,|L1.6532|
001604  ebfffffe          BL       sysprintf
001608  ea000006          B        |L1.5672|
                  |L1.5644|
00160c  e28f0fe5          ADR      r0,|L1.6568|
001610  ebfffffe          BL       sysprintf
001614  e3a00000          MOV      r0,#0                 ;775
001618  e58d0078          STR      r0,[sp,#0x78]         ;775
00161c  ea000001          B        |L1.5672|
                  |L1.5664|
001620  e3a00000          MOV      r0,#0                 ;781
001624  e58d0078          STR      r0,[sp,#0x78]         ;781
                  |L1.5672|
001628  e1a00005          MOV      r0,r5                 ;783
00162c  ebfffffe          BL       vPortFree
001630  e59d0078          LDR      r0,[sp,#0x78]         ;784
001634  eaffff0c          B        |L1.4716|
;;;786    
                          ENDP

                  DataProcessSendData PROC
;;;787    
;;;788    BOOL DataProcessSendData(uint32_t currentTime, int bayid, int time, int cost, int balance, DataId dataType, char* flagStr)
001638  e92d4ff0          PUSH     {r4-r11,lr}
;;;789    {
00163c  e24dd084          SUB      sp,sp,#0x84
001640  e1a06000          MOV      r6,r0
001644  e1a08001          MOV      r8,r1
001648  e1a09002          MOV      r9,r2
00164c  e1a0a003          MOV      r10,r3
001650  e59d40ac          LDR      r4,[sp,#0xac]
;;;790        BOOL reval = TRUE;
001654  e3a00001          MOV      r0,#1
001658  e58d0080          STR      r0,[sp,#0x80]
;;;791        char *out = NULL;   
00165c  e3a0b000          MOV      r11,#0
;;;792        UINT32 leftVoltage, rightVoltage;
;;;793        cJSON *root_json;
;;;794        cJSON *extend_json;
;;;795        
;;;796         if(xStatusDataQueue == NULL)
001660  e51f0840          LDR      r0,|L1.3624|
001664  e5900000          LDR      r0,[r0,#0]  ; xStatusDataQueue
001668  e3500000          CMP      r0,#0
00166c  1a000004          BNE      |L1.5764|
;;;797        {
;;;798            sysprintf(" !! DataProcessSendData ignore (xStatusDataQueue == NULL)\n");
001670  e28f0fd6          ADR      r0,|L1.6608|
001674  ebfffffe          BL       sysprintf
;;;799            return FALSE;
001678  e3a00000          MOV      r0,#0
                  |L1.5756|
00167c  e28dd084          ADD      sp,sp,#0x84
;;;800        }
;;;801        
;;;802        if(currentTime == 0)
;;;803            currentTime = GetCurrentUTCTime();
;;;804        if((dataType != DATA_TYPE_ID_TRANSACTION) && (dataType != DATA_TYPE_ID_EXPIRED))
;;;805        {
;;;806            sysprintf("\r\n !! DataProcessSendData[%d, dataType = %d]  ERROR!!\r\n", currentTime, dataType);
;;;807            return FALSE;
;;;808        }
;;;809        else
;;;810        {
;;;811            //char str[1024];
;;;812            //sprintf(str, " !! DataProcessSendData[%d, dataType = %d] !!\r\n", currentTime, dataType);
;;;813            //LoglibPrintf(LOG_TYPE_INFO, str);
;;;814        }
;;;815     
;;;816        BatteryGetValue(NULL,&rightVoltage, &leftVoltage);
;;;817    
;;;818        //char* JsonCmdCreateStatusData(int jsonver, char* epmver, char* flag, char* epmid, int time, int index, BOOL bay1, BOOL bay2, 
;;;819        //                            int baydist1, int baydist2, int voltage1, int voltage2, 
;;;820        //                            int deposit1, int deposit2, int deposit3, int deposit4, int deposit5, int deposit6,
;;;821        //                            char* tariff, char* setting);
;;;822        out = JsonCmdCreateStatusData(JSON_CMD_VER, GetMeterData()->buildStr, flagStr, GetMeterData()->epmIdStr, currentTime, esfIndex++, 
;;;823                                    GetSpaceStatus(SPACE_INDEX_1), GetSpaceStatus(SPACE_INDEX_2), 
;;;824                                    GetSpaceDist(SPACE_INDEX_1), GetSpaceDist(SPACE_INDEX_2), 
;;;825                                    leftVoltage, rightVoltage, 
;;;826                                    GetMeterStorageData()->depositEndTime[0], GetMeterStorageData()->depositEndTime[1], GetMeterStorageData()->depositEndTime[2], 
;;;827                                    GetMeterStorageData()->depositEndTime[3], GetMeterStorageData()->depositEndTime[4], GetMeterStorageData()->depositEndTime[5],
;;;828                                    TariffGetFileName(), GetMeterPara()->name);  
;;;829    
;;;830        root_json = cJSON_Parse((char*)out);
;;;831        if(root_json != NULL)
;;;832        {
;;;833            char* outUnformatted;
;;;834            char *outurlencoded = NULL;
;;;835            if(dataType == DATA_TYPE_ID_TRANSACTION)
;;;836            {
;;;837                extend_json = JsonCmdCreateTransactionStatusData(bayid, time, cost, balance);
;;;838            }
;;;839            else if(dataType == DATA_TYPE_ID_EXPIRED)
;;;840            {
;;;841                extend_json = JsonCmdCreateExpiredStatusData(bayid);
;;;842            }
;;;843            if(extend_json != NULL)
;;;844            {
;;;845                if(dataType == DATA_TYPE_ID_TRANSACTION)
;;;846                {
;;;847                    cJSON_AddItemToObject(root_json, "transaction", extend_json);
;;;848                }
;;;849                else if(dataType == DATA_TYPE_ID_EXPIRED)
;;;850                {
;;;851                    cJSON_AddItemToObject(root_json, "expired", extend_json);
;;;852                }
;;;853                outUnformatted = cJSON_PrintUnformatted(root_json);            
;;;854                cJSON_Delete(root_json);
;;;855    
;;;856                outurlencoded = pvPortMalloc(strlen(outUnformatted) + strlen("data=") + 1);
;;;857                if(outurlencoded != NULL)
;;;858                {
;;;859                    sprintf(outurlencoded, "%s%s", "data=", outUnformatted);                              
;;;860                    //sysprintf("\r\n     -[info 1]-> statusExecuteFunc [%d], result = %d, uxQueueGetQueueNumber = %d !!\n", currentTime, result, uxQueueGetQueueNumber(xStatusDataQueue));
;;;861                    if(xQueueIsQueueFullFromISR(xStatusDataQueue))
;;;862                    {
;;;863                        char *statusData;
;;;864                        if( xQueueReceive(xStatusDataQueue, &statusData, 0 ) == pdPASS)
;;;865                        {
;;;866                            //char str[1024];
;;;867                            //sprintf(str, " !! DataProcessSendData FULL:  xQueueReceive the oldest OK!![%d, dataType = %d] !!\r\n", currentTime, dataType);  
;;;868                            //LoglibPrintf(LOG_TYPE_INFO, str);  
;;;869                            sysprintf("\r\n     -[info 1]-> DataProcessSendData [%s] !!\n", statusData);
;;;870                            vPortFree(statusData);                            
;;;871                        }
;;;872                        else
;;;873                        {
;;;874                            //char str[1024];
;;;875                            //sprintf(str, " !! DataProcessSendData FULL:  xQueueReceive the oldest ERROR!![%d, dataType = %d] !!\r\n", currentTime, dataType);  
;;;876                            //LoglibPrintf(LOG_TYPE_ERROR, str);   
;;;877                        }
;;;878                    }
;;;879                    if(pdPASS == xQueueSendToBack( xStatusDataQueue, ( void * ) &outurlencoded, ( TickType_t ) 0 ))
;;;880                    {
;;;881                        sysprintf("~~ DataProcessSendData OK: \r\n");  
;;;882                        //char str[1024];
;;;883                        //sprintf(str, " !! DataProcessSendData OK [%d, esfIndex = %d, dataType = %d] !!\r\n", currentTime, esfIndex, dataType);
;;;884                        //LoglibPrintf(LOG_TYPE_INFO, str);  
;;;885                    }
;;;886                    else
;;;887                    {
;;;888                        sysprintf("~~ DataProcessSendData ERROR: \r\n"); 
;;;889                        //char str[1024];
;;;890                        //sprintf(str, " !! DataProcessSendData ERROR [%d, esfIndex = %d, dataType = %d] !!\r\n", currentTime, esfIndex, dataType);
;;;891                        //LoglibPrintf(LOG_TYPE_INFO, str);  
;;;892                        reval = FALSE;
;;;893                    }
;;;894                    //sysprintf("\r\n     -[info 2]-> statusExecuteFunc [%d], result = %d, uxQueueGetQueueNumber = %d !!\n", currentTime, result, uxQueueGetQueueNumber(xStatusDataQueue));
;;;895                }
;;;896                else
;;;897                {
;;;898                    sysprintf("sendTransactionStatusData error: if(outurlencoded != NULL)!!\n");
;;;899                    reval = FALSE;
;;;900                }   
;;;901                vPortFree(outUnformatted);   
;;;902            }
;;;903            else
;;;904            {
;;;905                sysprintf("sendTransactionStatusData error: if(extend_json != NULL)!!\n");
;;;906                reval = FALSE;
;;;907            }
;;;908        }
;;;909        else
;;;910        {
;;;911            sysprintf("sendTransactionStatusData error: if(root_json != NULL) [%s]!!\n", out);
;;;912            reval = FALSE;
;;;913        }    
;;;914    
;;;915        vPortFree(out); 
;;;916    
;;;917        return reval;
;;;918    }
001680  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.5764|
001684  e3560000          CMP      r6,#0                 ;802
001688  1a000001          BNE      |L1.5780|
00168c  ebfffffe          BL       GetCurrentUTCTime
001690  e1a06000          MOV      r6,r0                 ;803
                  |L1.5780|
001694  e3540000          CMP      r4,#0                 ;804
001698  0a000007          BEQ      |L1.5820|
00169c  e3540001          CMP      r4,#1                 ;804
0016a0  0a000005          BEQ      |L1.5820|
0016a4  e1a02004          MOV      r2,r4                 ;806
0016a8  e1a01006          MOV      r1,r6                 ;806
0016ac  e28f0fd6          ADR      r0,|L1.6668|
0016b0  ebfffffe          BL       sysprintf
0016b4  e3a00000          MOV      r0,#0                 ;807
0016b8  eaffffef          B        |L1.5756|
                  |L1.5820|
0016bc  e28d207c          ADD      r2,sp,#0x7c           ;816
0016c0  e28d1078          ADD      r1,sp,#0x78           ;816
0016c4  e3a00000          MOV      r0,#0                 ;816
0016c8  ebfffffe          BL       BatteryGetValue
0016cc  ebfffffe          BL       GetMeterPara
0016d0  e2800004          ADD      r0,r0,#4              ;822
0016d4  e58d0074          STR      r0,[sp,#0x74]         ;822
0016d8  ebfffffe          BL       TariffGetFileName
0016dc  e58d0070          STR      r0,[sp,#0x70]         ;822
0016e0  ebfffffe          BL       GetMeterStorageData
0016e4  e280002f          ADD      r0,r0,#0x2f           ;822
0016e8  e58d003c          STR      r0,[sp,#0x3c]         ;822
0016ec  ebfffffe          BL       __aeabi_uread4
0016f0  e58d006c          STR      r0,[sp,#0x6c]         ;822
0016f4  ebfffffe          BL       GetMeterStorageData
0016f8  e280002b          ADD      r0,r0,#0x2b           ;822
0016fc  e58d003c          STR      r0,[sp,#0x3c]         ;822
001700  ebfffffe          BL       __aeabi_uread4
001704  e58d0068          STR      r0,[sp,#0x68]         ;822
001708  ebfffffe          BL       GetMeterStorageData
00170c  e2800027          ADD      r0,r0,#0x27           ;822
001710  e58d003c          STR      r0,[sp,#0x3c]         ;822
001714  ebfffffe          BL       __aeabi_uread4
001718  e58d0064          STR      r0,[sp,#0x64]         ;822
00171c  ebfffffe          BL       GetMeterStorageData
001720  e2800023          ADD      r0,r0,#0x23           ;822
001724  e58d003c          STR      r0,[sp,#0x3c]         ;822
001728  ebfffffe          BL       __aeabi_uread4
00172c  e58d0060          STR      r0,[sp,#0x60]         ;822
001730  ebfffffe          BL       GetMeterStorageData
001734  e280001f          ADD      r0,r0,#0x1f           ;822
001738  e58d003c          STR      r0,[sp,#0x3c]         ;822
00173c  ebfffffe          BL       __aeabi_uread4
001740  e58d005c          STR      r0,[sp,#0x5c]         ;822
001744  ebfffffe          BL       GetMeterStorageData
001748  e280001b          ADD      r0,r0,#0x1b           ;822
00174c  e58d003c          STR      r0,[sp,#0x3c]         ;822
001750  ebfffffe          BL       __aeabi_uread4
001754  e58d0058          STR      r0,[sp,#0x58]         ;822
001758  e3a00001          MOV      r0,#1                 ;822
00175c  ebfffffe          BL       GetSpaceDist
001760  e58d0054          STR      r0,[sp,#0x54]         ;822
001764  e3a00000          MOV      r0,#0                 ;822
001768  ebfffffe          BL       GetSpaceDist
00176c  e58d0050          STR      r0,[sp,#0x50]         ;822
001770  e3a00001          MOV      r0,#1                 ;822
001774  ebfffffe          BL       GetSpaceStatus
001778  e58d004c          STR      r0,[sp,#0x4c]         ;822
00177c  e3a00000          MOV      r0,#0                 ;822
001780  ebfffffe          BL       GetSpaceStatus
001784  e58d0048          STR      r0,[sp,#0x48]         ;822
001788  ebfffffe          BL       GetMeterData
00178c  e2800088          ADD      r0,r0,#0x88           ;822
001790  e58d0044          STR      r0,[sp,#0x44]         ;822
001794  ebfffffe          BL       GetMeterData
001798  e2800008          ADD      r0,r0,#8              ;822
00179c  e58d0040          STR      r0,[sp,#0x40]         ;822
0017a0  e59d0074          LDR      r0,[sp,#0x74]         ;822
0017a4  e59d1070          LDR      r1,[sp,#0x70]         ;822
0017a8  e1cd26d8          LDRD     r2,r3,[sp,#0x68]      ;822
0017ac  e58d003c          STR      r0,[sp,#0x3c]         ;822
0017b0  e58d1038          STR      r1,[sp,#0x38]         ;822
0017b4  e1cd23f0          STRD     r2,r3,[sp,#0x30]      ;822
0017b8  e59d0064          LDR      r0,[sp,#0x64]         ;822
0017bc  e59d1060          LDR      r1,[sp,#0x60]         ;822
0017c0  e1cd25d8          LDRD     r2,r3,[sp,#0x58]      ;822
0017c4  e58d002c          STR      r0,[sp,#0x2c]         ;822
0017c8  e58d1028          STR      r1,[sp,#0x28]         ;822
0017cc  e1cd22f0          STRD     r2,r3,[sp,#0x20]      ;822
0017d0  e1cd05d0          LDRD     r0,r1,[sp,#0x50]      ;822
0017d4  e1cd27d8          LDRD     r2,r3,[sp,#0x78]      ;822
0017d8  e28d7010          ADD      r7,sp,#0x10           ;822
0017dc  e887000b          STM      r7,{r0,r1,r3}         ;822
0017e0  e58d201c          STR      r2,[sp,#0x1c]         ;822
0017e4  e51f22ac          LDR      r2,|L1.5440|
0017e8  e59d004c          LDR      r0,[sp,#0x4c]         ;822
0017ec  e59d1048          LDR      r1,[sp,#0x48]         ;822
0017f0  e5922000          LDR      r2,[r2,#0]            ;822  ; esfIndex
0017f4  e51f32bc          LDR      r3,|L1.5440|
0017f8  e5933000          LDR      r3,[r3,#0]            ;822  ; esfIndex
0017fc  e2833001          ADD      r3,r3,#1              ;822
001800  e51fc2c8          LDR      r12,|L1.5440|
001804  e58c3000          STR      r3,[r12,#0]           ;822  ; esfIndex
001808  e58d000c          STR      r0,[sp,#0xc]          ;822
00180c  e58d1008          STR      r1,[sp,#8]            ;822
001810  e58d2004          STR      r2,[sp,#4]            ;822
001814  e58d6000          STR      r6,[sp,#0]            ;822
001818  e3a00001          MOV      r0,#1                 ;822
00181c  e59d1040          LDR      r1,[sp,#0x40]         ;822
001820  e59d3044          LDR      r3,[sp,#0x44]         ;822
001824  e59d20b0          LDR      r2,[sp,#0xb0]         ;822
001828  ebfffffe          BL       JsonCmdCreateStatusData
00182c  e1a0b000          MOV      r11,r0                ;822
001830  e1a0000b          MOV      r0,r11                ;830
001834  ebfffffe          BL       cJSON_Parse
001838  e1a07000          MOV      r7,r0                 ;830
00183c  e3570000          CMP      r7,#0                 ;831
001840  0a0000a9          BEQ      |L1.6892|
001844  e3a00000          MOV      r0,#0                 ;834
001848  e58d0070          STR      r0,[sp,#0x70]         ;834
00184c  e3540000          CMP      r4,#0                 ;835
001850  1a000006          BNE      |L1.6256|
001854  e1a0200a          MOV      r2,r10                ;837
001858  e1a01009          MOV      r1,r9                 ;837
00185c  e1a00008          MOV      r0,r8                 ;837
001860  e59d30a8          LDR      r3,[sp,#0xa8]         ;837
001864  ebfffffe          BL       JsonCmdCreateTransactionStatusData
001868  e1a05000          MOV      r5,r0                 ;837
00186c  ea000004          B        |L1.6276|
                  |L1.6256|
001870  e3540001          CMP      r4,#1                 ;839
001874  1a000002          BNE      |L1.6276|
001878  e1a00008          MOV      r0,r8                 ;841
00187c  ebfffffe          BL       JsonCmdCreateExpiredStatusData
001880  e1a05000          MOV      r5,r0                 ;841
                  |L1.6276|
001884  e3550000          CMP      r5,#0                 ;843
001888  0a000092          BEQ      |L1.6872|
00188c  e3540000          CMP      r4,#0                 ;845
001890  1a000004          BNE      |L1.6312|
001894  e1a02005          MOV      r2,r5                 ;847
001898  e28f1f69          ADR      r1,|L1.6724|
00189c  e1a00007          MOV      r0,r7                 ;847
0018a0  ebfffffe          BL       cJSON_AddItemToObject
0018a4  ea000005          B        |L1.6336|
                  |L1.6312|
0018a8  e3540001          CMP      r4,#1                 ;849
0018ac  1a000003          BNE      |L1.6336|
0018b0  e1a02005          MOV      r2,r5                 ;851
0018b4  e28f1f65          ADR      r1,|L1.6736|
0018b8  e1a00007          MOV      r0,r7                 ;851
0018bc  ebfffffe          BL       cJSON_AddItemToObject
                  |L1.6336|
0018c0  e1a00007          MOV      r0,r7                 ;853
0018c4  ebfffffe          BL       cJSON_PrintUnformatted
0018c8  e58d0074          STR      r0,[sp,#0x74]         ;853
0018cc  e1a00007          MOV      r0,r7                 ;854
0018d0  ebfffffe          BL       cJSON_Delete
0018d4  e59d0074          LDR      r0,[sp,#0x74]         ;856
0018d8  ebfffffe          BL       strlen
0018dc  e2800006          ADD      r0,r0,#6              ;856
0018e0  e58d006c          STR      r0,[sp,#0x6c]         ;856
0018e4  ebfffffe          BL       pvPortMalloc
0018e8  e58d0070          STR      r0,[sp,#0x70]         ;856
0018ec  e59d0070          LDR      r0,[sp,#0x70]         ;857
0018f0  e3500000          CMP      r0,#0                 ;857
0018f4  0a000070          BEQ      |L1.6844|
0018f8  e24f2fe2          ADR      r2,|L1.5496|
0018fc  e51f1384          LDR      r1,|L1.5504|
001900  e59d0070          LDR      r0,[sp,#0x70]         ;859
001904  e59d3074          LDR      r3,[sp,#0x74]         ;859
001908  ebfffffe          BL       __2sprintf
00190c  e51f0aec          LDR      r0,|L1.3624|
001910  e5900000          LDR      r0,[r0,#0]            ;861  ; xStatusDataQueue
001914  ebfffffe          BL       xQueueIsQueueFullFromISR
001918  e3500000          CMP      r0,#0                 ;861
00191c  0a00000d          BEQ      |L1.6488|
001920  e3a03000          MOV      r3,#0                 ;864
001924  e1a02003          MOV      r2,r3                 ;864
001928  e28d106c          ADD      r1,sp,#0x6c           ;864
00192c  e51f0b0c          LDR      r0,|L1.3624|
001930  e5900000          LDR      r0,[r0,#0]            ;864  ; xStatusDataQueue
001934  ebfffffe          BL       xQueueGenericReceive
001938  e3500001          CMP      r0,#1                 ;864
00193c  1a000004          BNE      |L1.6484|
001940  e28f0e11          ADR      r0,|L1.6744|
001944  e59d106c          LDR      r1,[sp,#0x6c]         ;869
001948  ebfffffe          BL       sysprintf
00194c  e59d006c          LDR      r0,[sp,#0x6c]         ;870
001950  ebfffffe          BL       vPortFree
                  |L1.6484|
001954  e1a00000          MOV      r0,r0                 ;878
                  |L1.6488|
001958  e3a03000          MOV      r3,#0                 ;879
00195c  e1a02003          MOV      r2,r3                 ;879
001960  e28d1070          ADD      r1,sp,#0x70           ;879
001964  e51f0b44          LDR      r0,|L1.3624|
001968  e5900000          LDR      r0,[r0,#0]            ;879  ; xStatusDataQueue
00196c  ebfffffe          BL       xQueueGenericSend
001970  e3500001          CMP      r0,#1                 ;879
001974  1a00004b          BNE      |L1.6824|
001978  e28f0f42          ADR      r0,|L1.6792|
00197c  ebfffffe          BL       sysprintf
001980  ea000051          B        |L1.6860|
                  |L1.6532|
001984  7e7e2044          DCB      "~~ DataProcessSendStatusData OK: \r\n",0
001988  61746150
00198c  726f6365
001990  73735365
001994  6e645374
001998  61747573
00199c  44617461
0019a0  204f4b3a
0019a4  200d0a00
                  |L1.6568|
0019a8  7e7e2044          DCB      "~~ DataProcessSendStatusData ERROR: \r\n",0
0019ac  61746150
0019b0  726f6365
0019b4  73735365
0019b8  6e645374
0019bc  61747573
0019c0  44617461
0019c4  20455252
0019c8  4f523a20
0019cc  0d0a00  
0019cf  00                DCB      0
                  |L1.6608|
0019d0  20212120          DCB      " !! DataProcessSendData ignore (xStatusDataQueue == NUL"
0019d4  44617461
0019d8  50726f63
0019dc  65737353
0019e0  656e6444
0019e4  61746120
0019e8  69676e6f
0019ec  72652028
0019f0  78537461
0019f4  74757344
0019f8  61746151
0019fc  75657565
001a00  203d3d20
001a04  4e554c  
001a07  4c290a00          DCB      "L)\n",0
001a0b  00                DCB      0
                  |L1.6668|
001a0c  0d0a2021          DCB      "\r\n !! DataProcessSendData[%d, dataType = %d]  ERROR!!"
001a10  21204461
001a14  74615072
001a18  6f636573
001a1c  7353656e
001a20  64446174
001a24  615b2564
001a28  2c206461
001a2c  74615479
001a30  7065203d
001a34  2025645d
001a38  20204552
001a3c  524f5221
001a40  21      
001a41  0d0a00            DCB      "\r\n",0
                  |L1.6724|
001a44  7472616e          DCB      "transaction",0
001a48  73616374
001a4c  696f6e00
                  |L1.6736|
001a50  65787069          DCB      "expired",0
001a54  72656400
                  |L1.6744|
001a58  0d0a2020          DCB      "\r\n     -[info 1]-> DataProcessSendData [%s] !!\n",0
001a5c  2020202d
001a60  5b696e66
001a64  6f20315d
001a68  2d3e2044
001a6c  61746150
001a70  726f6365
001a74  73735365
001a78  6e644461
001a7c  7461205b
001a80  25735d20
001a84  21210a00
                  |L1.6792|
001a88  7e7e2044          DCB      "~~ DataProcessSendData OK: \r\n",0
001a8c  61746150
001a90  726f6365
001a94  73735365
001a98  6e644461
001a9c  7461204f
001aa0  4b3a200d
001aa4  0a00    
001aa6  00                DCB      0
001aa7  00                DCB      0
                  |L1.6824|
001aa8  e28f0f43          ADR      r0,|L1.7100|
001aac  ebfffffe          BL       sysprintf
001ab0  e3a00000          MOV      r0,#0                 ;892
001ab4  e58d0080          STR      r0,[sp,#0x80]         ;892
001ab8  ea000003          B        |L1.6860|
                  |L1.6844|
001abc  e28f0f47          ADR      r0,|L1.7136|
001ac0  ebfffffe          BL       sysprintf
001ac4  e3a00000          MOV      r0,#0                 ;899
001ac8  e58d0080          STR      r0,[sp,#0x80]         ;899
                  |L1.6860|
001acc  e59d0074          LDR      r0,[sp,#0x74]         ;901
001ad0  ebfffffe          BL       vPortFree
001ad4  ea000003          B        |L1.6888|
                  |L1.6872|
001ad8  e28f0d05          ADR      r0,|L1.7200|
001adc  ebfffffe          BL       sysprintf
001ae0  e3a00000          MOV      r0,#0                 ;906
001ae4  e58d0080          STR      r0,[sp,#0x80]         ;906
                  |L1.6888|
001ae8  ea000004          B        |L1.6912|
                  |L1.6892|
001aec  e1a0100b          MOV      r1,r11                ;911
001af0  e28f0f59          ADR      r0,|L1.7260|
001af4  ebfffffe          BL       sysprintf
001af8  e3a00000          MOV      r0,#0                 ;912
001afc  e58d0080          STR      r0,[sp,#0x80]         ;912
                  |L1.6912|
001b00  e1a0000b          MOV      r0,r11                ;915
001b04  ebfffffe          BL       vPortFree
001b08  e59d0080          LDR      r0,[sp,#0x80]         ;917
001b0c  eafffeda          B        |L1.5756|
;;;919    
                          ENDP

                  DataParserWebPostReturnData PROC
;;;920    BOOL DataParserWebPostReturnData(char* jsonStr)
001b10  e92d47f0          PUSH     {r4-r10,lr}
;;;921    {
001b14  e24ddf92          SUB      sp,sp,#0x248
001b18  e1a08000          MOV      r8,r0
;;;922        cJSON *root_json;
;;;923        cJSON *tmp_json, *tmp_json2;
;;;924        
;;;925        sysprintf(" == DataParserWebPostReturnData [%s]\r\n", jsonStr);  
001b1c  e1a01008          MOV      r1,r8
001b20  e28f0f5d          ADR      r0,|L1.7324|
001b24  ebfffffe          BL       sysprintf
;;;926        //{"ok":1,"errorcode":0,"datetime":1488418637,"tarifffile":["tariff.tre","tariff1.tre",""],"parafile":"epm.pre"}
;;;927        
;;;928        //sysprintf("!!! parserString = [%s], destLen = %d, sizeof(double) = %d\r\n", str, destLen, sizeof(double));
;;;929         //__SHOW_FREE_HEAP_SIZE__
;;;930        root_json = cJSON_Parse((char*)jsonStr);     
001b28  e1a00008          MOV      r0,r8
001b2c  ebfffffe          BL       cJSON_Parse
001b30  e1a09000          MOV      r9,r0
;;;931        if (NULL != root_json)
001b34  e3590000          CMP      r9,#0
001b38  0a000150          BEQ      |L1.8320|
;;;932        {
;;;933            tmp_json = cJSON_GetObjectItem(root_json, "ok");
001b3c  e28f1f60          ADD      r1,pc,#0x60, 30 ; #0x180
001b40  e1a00009          MOV      r0,r9
001b44  ebfffffe          BL       cJSON_GetObjectItem
001b48  e1a04000          MOV      r4,r0
;;;934            if(tmp_json != NULL)
001b4c  e3540000          CMP      r4,#0
001b50  0a000002          BEQ      |L1.7008|
;;;935            {
;;;936                sysprintf(" >> Web Get ok: %d\n", tmp_json->valueint);
001b54  e28f0f5b          ADR      r0,|L1.7368|
001b58  e5941014          LDR      r1,[r4,#0x14]
001b5c  ebfffffe          BL       sysprintf
                  |L1.7008|
;;;937            }
;;;938            
;;;939            tmp_json = cJSON_GetObjectItem(root_json, "errCode");
001b60  e28f1f5d          ADR      r1,|L1.7388|
001b64  e1a00009          MOV      r0,r9
001b68  ebfffffe          BL       cJSON_GetObjectItem
001b6c  e1a04000          MOV      r4,r0
;;;940            if(tmp_json != NULL)
001b70  e3540000          CMP      r4,#0
001b74  0a000002          BEQ      |L1.7044|
;;;941            {
;;;942                sysprintf(" >> Web Get errCode: %d\n", tmp_json->valueint);
001b78  e28f0f59          ADR      r0,|L1.7396|
001b7c  e5941014          LDR      r1,[r4,#0x14]
001b80  ebfffffe          BL       sysprintf
                  |L1.7044|
;;;943            }
;;;944            //tariff file
;;;945            tmp_json = cJSON_GetObjectItem(root_json, "tarifffile");
001b84  e28f1f5d          ADR      r1,|L1.7424|
001b88  e1a00009          MOV      r0,r9
001b8c  ebfffffe          BL       cJSON_GetObjectItem
001b90  e1a04000          MOV      r4,r0
;;;946            if (tmp_json != NULL)
001b94  e3540000          CMP      r4,#0
001b98  0a000074          BEQ      |L1.7536|
;;;947            {
;;;948                int i;
;;;949                int arrarSize = cJSON_GetArraySize(tmp_json);
001b9c  e1a00004          MOV      r0,r4
001ba0  ebfffffe          BL       cJSON_GetArraySize
001ba4  e1a07000          MOV      r7,r0
;;;950                if(arrarSize > TARIFF_FILE_NUM)
001ba8  e3570003          CMP      r7,#3
001bac  da000000          BLE      |L1.7092|
;;;951                    arrarSize = TARIFF_FILE_NUM;
001bb0  e3a07003          MOV      r7,#3
                  |L1.7092|
;;;952                for(i = 0; i < arrarSize; i++)
001bb4  e3a05000          MOV      r5,#0
001bb8  ea000069          B        |L1.7524|
                  |L1.7100|
001bbc  7e7e2044          DCB      "~~ DataProcessSendData ERROR: \r\n",0
001bc0  61746150
001bc4  726f6365
001bc8  73735365
001bcc  6e644461
001bd0  74612045
001bd4  52524f52
001bd8  3a200d0a
001bdc  00      
001bdd  00                DCB      0
001bde  00                DCB      0
001bdf  00                DCB      0
                  |L1.7136|
001be0  73656e64          DCB      "sendTransactionStatusData error: if(outurlencoded != NU"
001be4  5472616e
001be8  73616374
001bec  696f6e53
001bf0  74617475
001bf4  73446174
001bf8  61206572
001bfc  726f723a
001c00  20696628
001c04  6f757475
001c08  726c656e
001c0c  636f6465
001c10  6420213d
001c14  204e55  
001c17  4c4c2921          DCB      "LL)!!\n",0
001c1b  210a00  
001c1e  00                DCB      0
001c1f  00                DCB      0
                  |L1.7200|
001c20  73656e64          DCB      "sendTransactionStatusData error: if(extend_json != NULL"
001c24  5472616e
001c28  73616374
001c2c  696f6e53
001c30  74617475
001c34  73446174
001c38  61206572
001c3c  726f723a
001c40  20696628
001c44  65787465
001c48  6e645f6a
001c4c  736f6e20
001c50  213d204e
001c54  554c4c  
001c57  2921210a          DCB      ")!!\n",0
001c5b  00      
                  |L1.7260|
001c5c  73656e64          DCB      "sendTransactionStatusData error: if(root_json != NULL) "
001c60  5472616e
001c64  73616374
001c68  696f6e53
001c6c  74617475
001c70  73446174
001c74  61206572
001c78  726f723a
001c7c  20696628
001c80  726f6f74
001c84  5f6a736f
001c88  6e20213d
001c8c  204e554c
001c90  4c2920  
001c93  5b25735d          DCB      "[%s]!!\n",0
001c97  21210a00
001c9b  00                DCB      0
                  |L1.7324|
001c9c  203d3d20          DCB      " == DataParserWebPostReturnData [%s]\r\n",0
001ca0  44617461
001ca4  50617273
001ca8  65725765
001cac  62506f73
001cb0  74526574
001cb4  75726e44
001cb8  61746120
001cbc  5b25735d
001cc0  0d0a00  
001cc3  00                DCB      0
001cc4  6f6b00            DCB      "ok",0
001cc7  00                DCB      0
                  |L1.7368|
001cc8  203e3e20          DCB      " >> Web Get ok: %d\n",0
001ccc  57656220
001cd0  47657420
001cd4  6f6b3a20
001cd8  25640a00
                  |L1.7388|
001cdc  65727243          DCB      "errCode",0
001ce0  6f646500
                  |L1.7396|
001ce4  203e3e20          DCB      " >> Web Get errCode: %d\n",0
001ce8  57656220
001cec  47657420
001cf0  65727243
001cf4  6f64653a
001cf8  2025640a
001cfc  00      
001cfd  00                DCB      0
001cfe  00                DCB      0
001cff  00                DCB      0
                  |L1.7424|
001d00  74617269          DCB      "tarifffile",0
001d04  66666669
001d08  6c6500  
001d0b  00                DCB      0
                  |L1.7436|
;;;953                {                       
;;;954                    tmp_json2 = cJSON_GetArrayItem(tmp_json, i);  
001d0c  e1a01005          MOV      r1,r5
001d10  e1a00004          MOV      r0,r4
001d14  ebfffffe          BL       cJSON_GetArrayItem
001d18  e1a06000          MOV      r6,r0
;;;955                    if (tmp_json2 != NULL)
001d1c  e3560000          CMP      r6,#0
001d20  0a00000e          BEQ      |L1.7520|
;;;956                    {
;;;957                        strcpy((char*)GetMeterData()->targetTariffFileName[i].name, (const char*)(tmp_json2->valuestring));
001d24  ebfffffe          BL       GetMeterData
001d28  e2800c01          ADD      r0,r0,#0x100
001d2c  e2800017          ADD      r0,r0,#0x17
001d30  e080a405          ADD      r10,r0,r5,LSL #8
001d34  e1a0000a          MOV      r0,r10
001d38  e5961010          LDR      r1,[r6,#0x10]
001d3c  ebfffffe          BL       strcpy
;;;958                        sysprintf(" >> Web Get target Tariff File Name[%d]:[%s]\n", i, GetMeterData()->targetTariffFileName[i].name);                    
001d40  ebfffffe          BL       GetMeterData
001d44  e2800c01          ADD      r0,r0,#0x100
001d48  e2800017          ADD      r0,r0,#0x17
001d4c  e080a405          ADD      r10,r0,r5,LSL #8
001d50  e1a0200a          MOV      r2,r10
001d54  e1a01005          MOV      r1,r5
001d58  e28f00b8          ADR      r0,|L1.7704|
001d5c  ebfffffe          BL       sysprintf
                  |L1.7520|
001d60  e2855001          ADD      r5,r5,#1              ;952
                  |L1.7524|
001d64  e1550007          CMP      r5,r7                 ;952
001d68  baffffe7          BLT      |L1.7436|
;;;959                    }
;;;960                }      
;;;961            }
001d6c  ea000001          B        |L1.7544|
                  |L1.7536|
;;;962            else
;;;963            {
;;;964                sysprintf(" >> Web Get targetTariffFileName error ((tmp_json != NULL))\n");
001d70  e28f00d0          ADR      r0,|L1.7752|
001d74  ebfffffe          BL       sysprintf
                  |L1.7544|
;;;965            }
;;;966            
;;;967            tmp_json = cJSON_GetObjectItem(root_json, "parafile");
001d78  e28f1f42          ADR      r1,|L1.7816|
001d7c  e1a00009          MOV      r0,r9
001d80  ebfffffe          BL       cJSON_GetObjectItem
001d84  e1a04000          MOV      r4,r0
;;;968            if (tmp_json != NULL)
001d88  e3540000          CMP      r4,#0
001d8c  0a00000c          BEQ      |L1.7620|
;;;969            {
;;;970                strcpy((char*)GetMeterData()->targetParaFileName.name, (const char*)(tmp_json->valuestring));
001d90  ebfffffe          BL       GetMeterData
001d94  e2805b01          ADD      r5,r0,#0x400
001d98  e2855017          ADD      r5,r5,#0x17
001d9c  e1a00005          MOV      r0,r5
001da0  e5941010          LDR      r1,[r4,#0x10]
001da4  ebfffffe          BL       strcpy
;;;971                sysprintf(" >> Web Get targetParaFileName:[%s]\n", GetMeterData()->targetParaFileName.name);
001da8  ebfffffe          BL       GetMeterData
001dac  e2805b01          ADD      r5,r0,#0x400
001db0  e2855017          ADD      r5,r5,#0x17
001db4  e1a01005          MOV      r1,r5
001db8  e28f00d4          ADR      r0,|L1.7828|
001dbc  ebfffffe          BL       sysprintf
001dc0  ea000001          B        |L1.7628|
                  |L1.7620|
;;;972            }
;;;973            else
;;;974            {
;;;975                sysprintf(" >> Web Get targetParaFileName error ((tmp_json != NULL))\n");
001dc4  e28f00f0          ADR      r0,|L1.7868|
001dc8  ebfffffe          BL       sysprintf
                  |L1.7628|
;;;976            }
;;;977            
;;;978            tmp_json = cJSON_GetObjectItem(root_json, "tariffpath");
001dcc  e28f1f49          ADR      r1,|L1.7928|
001dd0  e1a00009          MOV      r0,r9
001dd4  ebfffffe          BL       cJSON_GetObjectItem
001dd8  e1a04000          MOV      r4,r0
;;;979            if (tmp_json != NULL)
001ddc  e3540000          CMP      r4,#0
001de0  0a000050          BEQ      |L1.7976|
;;;980            {
;;;981                strcpy((char*)GetMeterData()->tariffFileFTPPath, (const char*)(tmp_json->valuestring));
001de4  ebfffffe          BL       GetMeterData
001de8  e2805c05          ADD      r5,r0,#0x500
001dec  e2855017          ADD      r5,r5,#0x17
001df0  e1a00005          MOV      r0,r5
001df4  e5941010          LDR      r1,[r4,#0x10]
001df8  ebfffffe          BL       strcpy
;;;982                sysprintf(" >> Web Get tariffFileFTPPath:[%s]\n", GetMeterData()->tariffFileFTPPath);
001dfc  ebfffffe          BL       GetMeterData
001e00  e2805c05          ADD      r5,r0,#0x500
001e04  e2855017          ADD      r5,r5,#0x17
001e08  e1a01005          MOV      r1,r5
001e0c  e28f00f0          ADR      r0,|L1.7940|
001e10  ebfffffe          BL       sysprintf
001e14  ea000045          B        |L1.7984|
                  |L1.7704|
001e18  203e3e20          DCB      " >> Web Get target Tariff File Name[%d]:[%s]\n",0
001e1c  57656220
001e20  47657420
001e24  74617267
001e28  65742054
001e2c  61726966
001e30  66204669
001e34  6c65204e
001e38  616d655b
001e3c  25645d3a
001e40  5b25735d
001e44  0a00    
001e46  00                DCB      0
001e47  00                DCB      0
                  |L1.7752|
001e48  203e3e20          DCB      " >> Web Get targetTariffFileName error ((tmp_json != NU"
001e4c  57656220
001e50  47657420
001e54  74617267
001e58  65745461
001e5c  72696666
001e60  46696c65
001e64  4e616d65
001e68  20657272
001e6c  6f722028
001e70  28746d70
001e74  5f6a736f
001e78  6e20213d
001e7c  204e55  
001e7f  4c4c2929          DCB      "LL))\n",0
001e83  0a00    
001e85  00                DCB      0
001e86  00                DCB      0
001e87  00                DCB      0
                  |L1.7816|
001e88  70617261          DCB      "parafile",0
001e8c  66696c65
001e90  00      
001e91  00                DCB      0
001e92  00                DCB      0
001e93  00                DCB      0
                  |L1.7828|
001e94  203e3e20          DCB      " >> Web Get targetParaFileName:[%s]\n",0
001e98  57656220
001e9c  47657420
001ea0  74617267
001ea4  65745061
001ea8  72614669
001eac  6c654e61
001eb0  6d653a5b
001eb4  25735d0a
001eb8  00      
001eb9  00                DCB      0
001eba  00                DCB      0
001ebb  00                DCB      0
                  |L1.7868|
001ebc  203e3e20          DCB      " >> Web Get targetParaFileName error ((tmp_json != NULL"
001ec0  57656220
001ec4  47657420
001ec8  74617267
001ecc  65745061
001ed0  72614669
001ed4  6c654e61
001ed8  6d652065
001edc  72726f72
001ee0  20282874
001ee4  6d705f6a
001ee8  736f6e20
001eec  213d204e
001ef0  554c4c  
001ef3  29290a00          DCB      "))\n",0
001ef7  00                DCB      0
                  |L1.7928|
001ef8  74617269          DCB      "tariffpath",0
001efc  66667061
001f00  746800  
001f03  00                DCB      0
                  |L1.7940|
001f04  203e3e20          DCB      " >> Web Get tariffFileFTPPath:[%s]\n",0
001f08  57656220
001f0c  47657420
001f10  74617269
001f14  66664669
001f18  6c654654
001f1c  50506174
001f20  683a5b25
001f24  735d0a00
                  |L1.7976|
;;;983            }
;;;984            else
;;;985            {
;;;986                sysprintf(" >> Web Get tariffFileFTPPath error ((tmp_json != NULL))\n");
001f28  e28f0f57          ADR      r0,|L1.8332|
001f2c  ebfffffe          BL       sysprintf
                  |L1.7984|
;;;987            }
;;;988            
;;;989            tmp_json = cJSON_GetObjectItem(root_json, "parapath");
001f30  e28f1e19          ADR      r1,|L1.8392|
001f34  e1a00009          MOV      r0,r9
001f38  ebfffffe          BL       cJSON_GetObjectItem
001f3c  e1a04000          MOV      r4,r0
;;;990            if (tmp_json != NULL)
001f40  e3540000          CMP      r4,#0
001f44  0a00000c          BEQ      |L1.8060|
;;;991            {
;;;992                strcpy((char*)GetMeterData()->paraFileFTPPath, (const char*)(tmp_json->valuestring));
001f48  ebfffffe          BL       GetMeterData
001f4c  e2805c06          ADD      r5,r0,#0x600
001f50  e2855016          ADD      r5,r5,#0x16
001f54  e1a00005          MOV      r0,r5
001f58  e5941010          LDR      r1,[r4,#0x10]
001f5c  ebfffffe          BL       strcpy
;;;993                sysprintf(" >> Web Get paraFileFTPPath:[%s]\n", GetMeterData()->paraFileFTPPath);
001f60  ebfffffe          BL       GetMeterData
001f64  e2805c06          ADD      r5,r0,#0x600
001f68  e2855016          ADD      r5,r5,#0x16
001f6c  e1a01005          MOV      r1,r5
001f70  e28f0f57          ADR      r0,|L1.8404|
001f74  ebfffffe          BL       sysprintf
001f78  ea000001          B        |L1.8068|
                  |L1.8060|
;;;994            }
;;;995            else
;;;996            {
;;;997                sysprintf(" >> Web Get paraFileFTPPath error ((tmp_json != NULL))\n");
001f7c  e28f0f5d          ADR      r0,|L1.8440|
001f80  ebfffffe          BL       sysprintf
                  |L1.8068|
;;;998            }
;;;999            
;;;1000           tmp_json = cJSON_GetObjectItem(root_json, "datetime");
001f84  e28f1f69          ADR      r1,|L1.8496|
001f88  e1a00009          MOV      r0,r9
001f8c  ebfffffe          BL       cJSON_GetObjectItem
001f90  e1a04000          MOV      r4,r0
;;;1001           if(tmp_json != NULL)
001f94  e3540000          CMP      r4,#0
001f98  0a000036          BEQ      |L1.8312|
;;;1002           {
;;;1003               RTC_TIME_DATA_T time;
;;;1004               time_t rawtime = GetCurrentUTCTime();
001f9c  ebfffffe          BL       GetCurrentUTCTime
001fa0  e1a07000          MOV      r7,r0
;;;1005               //time_t webPostRawtime = (int)(tmp_json->valuedouble/(double)1000)+1;
;;;1006               #warning 
;;;1007               //time_t webPostRawtime = tmp_json->valueint+1;
;;;1008               time_t webPostRawtime = tmp_json->valueint+1 + 8*60*60;
001fa4  e5940014          LDR      r0,[r4,#0x14]
001fa8  e2805a07          ADD      r5,r0,#0x7000
001fac  e2855081          ADD      r5,r5,#0x81
;;;1009               sysprintf(" >> Web Get datetime: %d (current time:%d)\n", webPostRawtime, rawtime); 
001fb0  e1a02007          MOV      r2,r7
001fb4  e1a01005          MOV      r1,r5
001fb8  e28f0f5f          ADR      r0,|L1.8508|
001fbc  ebfffffe          BL       sysprintf
;;;1010               ///*
;;;1011               if(abs(webPostRawtime - rawtime) >= 3)
001fc0  e0550007          SUBS     r0,r5,r7
001fc4  4a000001          BMI      |L1.8144|
001fc8  e1a01000          MOV      r1,r0
001fcc  ea000000          B        |L1.8148|
                  |L1.8144|
001fd0  e2601000          RSB      r1,r0,#0
                  |L1.8148|
001fd4  e3510003          CMP      r1,#3
001fd8  ba00001d          BLT      |L1.8276|
;;;1012               {
;;;1013                   Time2RTC(webPostRawtime, &time);
001fdc  e28d1f86          ADD      r1,sp,#0x218
001fe0  e1a00005          MOV      r0,r5
001fe4  ebfffffe          BL       Time2RTC
;;;1014                   if(SetOSTime(time.u32Year, time.u32cMonth, time.u32cDay, time.u32cHour, time.u32cMinute, time.u32cSecond, time.u32cDayOfWeek) == TRUE)
001fe8  e59d0228          LDR      r0,[sp,#0x228]
001fec  e59d1220          LDR      r1,[sp,#0x220]
001ff0  e59d221c          LDR      r2,[sp,#0x21c]
001ff4  e58d0008          STR      r0,[sp,#8]
001ff8  e88d0006          STM      sp,{r1,r2}
001ffc  e59d0234          LDR      r0,[sp,#0x234]
002000  e59d1230          LDR      r1,[sp,#0x230]
002004  e59d222c          LDR      r2,[sp,#0x22c]
002008  e59d3224          LDR      r3,[sp,#0x224]
00200c  ebfffffe          BL       SetOSTime
002010  e3500001          CMP      r0,#1
002014  1a00000e          BNE      |L1.8276|
;;;1015                   {
;;;1016                       #if(ENABLE_LOG_FUNCTION)
;;;1017                       {
;;;1018                           char str[512];
;;;1019                           sprintf(str, " --> CMD_TIME_CORRECTION_ID _!!!! : [%04d/%02d/%02d %02d:%02d:%02d (%d)]\r\n",
002018  e59d0228          LDR      r0,[sp,#0x228]
00201c  e59d121c          LDR      r1,[sp,#0x21c]
002020  e59d3220          LDR      r3,[sp,#0x220]
002024  e59d2224          LDR      r2,[sp,#0x224]
002028  e58d0010          STR      r0,[sp,#0x10]
00202c  e58d100c          STR      r1,[sp,#0xc]
002030  e98d000c          STMIB    sp,{r2,r3}
002034  e59d022c          LDR      r0,[sp,#0x22c]
002038  e58d0000          STR      r0,[sp,#0]
00203c  e59f1124          LDR      r1,|L1.8552|
002040  e59d2234          LDR      r2,[sp,#0x234]
002044  e59d3230          LDR      r3,[sp,#0x230]
002048  e28d0018          ADD      r0,sp,#0x18
00204c  ebfffffe          BL       __2sprintf
;;;1020                                                               time.u32Year, time.u32cMonth, time.u32cDay, 
;;;1021                                                               time.u32cHour, time.u32cMinute, time.u32cSecond, time.u32cDayOfWeek);
;;;1022                           //LoglibPrintf(LOG_TYPE_INFO, str);
;;;1023                       }
;;;1024                       #endif
;;;1025                       TariffUpdateCurrentTariffData();
002050  ebfffffe          BL       TariffUpdateCurrentTariffData
                  |L1.8276|
;;;1026                    
;;;1027                   }
;;;1028               }
;;;1029               if(abs(webPostRawtime - rawtime) >= 20)
002054  e0550007          SUBS     r0,r5,r7
002058  4a000001          BMI      |L1.8292|
00205c  e1a01000          MOV      r1,r0
002060  ea000000          B        |L1.8296|
                  |L1.8292|
002064  e2601000          RSB      r1,r0,#0
                  |L1.8296|
002068  e3510014          CMP      r1,#0x14
00206c  ba000000          BLT      |L1.8308|
;;;1030               {               
;;;1031                   GuiManagerRefreshScreen(); 
002070  ebfffffe          BL       GuiManagerRefreshScreen
                  |L1.8308|
;;;1032               }
;;;1033           }
002074  e1a00000          MOV      r0,r0
                  |L1.8312|
;;;1034           
;;;1035           
;;;1036           
;;;1037           
;;;1038           //sysprintf(" >> cJSON_Print(root_json) = [%s]\n", cJSON_Print(root_json));//印出記得要FREE
;;;1039           cJSON_Delete(root_json);
002078  e1a00009          MOV      r0,r9
00207c  ebfffffe          BL       cJSON_Delete
                  |L1.8320|
;;;1040           //__SHOW_FREE_HEAP_SIZE__
;;;1041       }    
;;;1042       return TRUE;
002080  e3a00001          MOV      r0,#1
002084  e28ddf92          ADD      sp,sp,#0x248
;;;1043   }
002088  e8bd87f0          POP      {r4-r10,pc}
;;;1044   
                          ENDP

                  |L1.8332|
00208c  203e3e20          DCB      " >> Web Get tariffFileFTPPath error ((tmp_json != NULL)"
002090  57656220
002094  47657420
002098  74617269
00209c  66664669
0020a0  6c654654
0020a4  50506174
0020a8  68206572
0020ac  726f7220
0020b0  2828746d
0020b4  705f6a73
0020b8  6f6e2021
0020bc  3d204e55
0020c0  4c4c29  
0020c3  290a00            DCB      ")\n",0
0020c6  00                DCB      0
0020c7  00                DCB      0
                  |L1.8392|
0020c8  70617261          DCB      "parapath",0
0020cc  70617468
0020d0  00      
0020d1  00                DCB      0
0020d2  00                DCB      0
0020d3  00                DCB      0
                  |L1.8404|
0020d4  203e3e20          DCB      " >> Web Get paraFileFTPPath:[%s]\n",0
0020d8  57656220
0020dc  47657420
0020e0  70617261
0020e4  46696c65
0020e8  46545050
0020ec  6174683a
0020f0  5b25735d
0020f4  0a00    
0020f6  00                DCB      0
0020f7  00                DCB      0
                  |L1.8440|
0020f8  203e3e20          DCB      " >> Web Get paraFileFTPPath error ((tmp_json != NULL))\n"
0020fc  57656220
002100  47657420
002104  70617261
002108  46696c65
00210c  46545050
002110  61746820
002114  6572726f
002118  72202828
00211c  746d705f
002120  6a736f6e
002124  20213d20
002128  4e554c4c
00212c  29290a  
00212f  00                DCB      0
                  |L1.8496|
002130  64617465          DCB      "datetime",0
002134  74696d65
002138  00      
002139  00                DCB      0
00213a  00                DCB      0
00213b  00                DCB      0
                  |L1.8508|
00213c  203e3e20          DCB      " >> Web Get datetime: %d (current time:%d)\n",0
002140  57656220
002144  47657420
002148  64617465
00214c  74696d65
002150  3a202564
002154  20286375
002158  7272656e
00215c  74207469
002160  6d653a25
002164  64290a00
                  |L1.8552|
                          DCD      ||.constdata||+0x1b4

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  2d2d5b57          DCB      0x2d,0x2d,0x5b,0x57
000004  41524e49          DCB      0x41,0x52,0x4e,0x49
000008  4e475d2d          DCB      0x4e,0x47,0x5d,0x2d
00000c  2d3e2067          DCB      0x2d,0x3e,0x20,0x67
000010  65744461          DCB      0x65,0x74,0x44,0x61
000014  74614669          DCB      0x74,0x61,0x46,0x69
000018  6c655b6c          DCB      0x6c,0x65,0x5b,0x6c
00001c  6f63616c          DCB      0x6f,0x63,0x61,0x6c
000020  44697220          DCB      0x44,0x69,0x72,0x20
000024  3d202573          DCB      0x3d,0x20,0x25,0x73
000028  5d5b6674          DCB      0x5d,0x5b,0x66,0x74
00002c  70446972          DCB      0x70,0x44,0x69,0x72
000030  203d2025          DCB      0x20,0x3d,0x20,0x25
000034  735d5b65          DCB      0x73,0x5d,0x5b,0x65
000038  7874656e          DCB      0x78,0x74,0x65,0x6e
00003c  73696f6e          DCB      0x73,0x69,0x6f,0x6e
000040  4e616d65          DCB      0x4e,0x61,0x6d,0x65
000044  203d2025          DCB      0x20,0x3d,0x20,0x25
000048  735d200d          DCB      0x73,0x5d,0x20,0x0d
00004c  0a000000          DCB      0x0a,0x00,0x00,0x00
000050  3c3c3c3c          DCB      0x3c,0x3c,0x3c,0x3c
000054  205b2049          DCB      0x20,0x5b,0x20,0x49
000058  4e464f20          DCB      0x4e,0x46,0x4f,0x20
00005c  5d203e3e          DCB      0x5d,0x20,0x3e,0x3e
000060  3e3e2065          DCB      0x3e,0x3e,0x20,0x65
000064  78656375          DCB      0x78,0x65,0x63,0x75
000068  74652025          DCB      0x74,0x65,0x20,0x25
00006c  73205072          DCB      0x73,0x20,0x50,0x72
000070  6f636573          DCB      0x6f,0x63,0x65,0x73
000074  735b2564          DCB      0x73,0x5b,0x25,0x64
000078  5d203a20          DCB      0x5d,0x20,0x3a,0x20
00007c  53746172          DCB      0x53,0x74,0x61,0x72
000080  74287265          DCB      0x74,0x28,0x72,0x65
000084  45786563          DCB      0x45,0x78,0x65,0x63
000088  75746554          DCB      0x75,0x74,0x65,0x54
00008c  696d6573          DCB      0x69,0x6d,0x65,0x73
000090  3d256429          DCB      0x3d,0x25,0x64,0x29
000094  2021210d          DCB      0x20,0x21,0x21,0x0d
000098  0a000000          DCB      0x0a,0x00,0x00,0x00
00009c  20202d78          DCB      0x20,0x20,0x2d,0x78
0000a0  2d3e2057          DCB      0x2d,0x3e,0x20,0x57
0000a4  6562506f          DCB      0x65,0x62,0x50,0x6f
0000a8  73744d65          DCB      0x73,0x74,0x4d,0x65
0000ac  73736167          DCB      0x73,0x73,0x61,0x67
0000b0  65204552          DCB      0x65,0x20,0x45,0x52
0000b4  524f522c          DCB      0x52,0x4f,0x52,0x2c
0000b8  20696e73          DCB      0x20,0x69,0x6e,0x73
0000bc  65727420          DCB      0x65,0x72,0x74,0x20
0000c0  6261636b          DCB      0x62,0x61,0x63,0x6b
0000c4  20746f20          DCB      0x20,0x74,0x6f,0x20
0000c8  71756575          DCB      0x71,0x75,0x65,0x75
0000cc  65204f4b          DCB      0x65,0x20,0x4f,0x4b
0000d0  2c20616e          DCB      0x2c,0x20,0x61,0x6e
0000d4  64206272          DCB      0x64,0x20,0x62,0x72
0000d8  65616b2e          DCB      0x65,0x61,0x6b,0x2e
0000dc  2e2e0d0a          DCB      0x2e,0x2e,0x0d,0x0a
0000e0  00000000          DCB      0x00,0x00,0x00,0x00
0000e4  20202d78          DCB      0x20,0x20,0x2d,0x78
0000e8  2d3e2057          DCB      0x2d,0x3e,0x20,0x57
0000ec  6562506f          DCB      0x65,0x62,0x50,0x6f
0000f0  73744d65          DCB      0x73,0x74,0x4d,0x65
0000f4  73736167          DCB      0x73,0x73,0x61,0x67
0000f8  65204552          DCB      0x65,0x20,0x45,0x52
0000fc  524f522c          DCB      0x52,0x4f,0x52,0x2c
000100  20696e73          DCB      0x20,0x69,0x6e,0x73
000104  65727420          DCB      0x65,0x72,0x74,0x20
000108  6261636b          DCB      0x62,0x61,0x63,0x6b
00010c  20746f20          DCB      0x20,0x74,0x6f,0x20
000110  71756575          DCB      0x71,0x75,0x65,0x75
000114  65206572          DCB      0x65,0x20,0x65,0x72
000118  726f722c          DCB      0x72,0x6f,0x72,0x2c
00011c  20616e64          DCB      0x20,0x61,0x6e,0x64
000120  20627265          DCB      0x20,0x62,0x72,0x65
000124  616b2e2e          DCB      0x61,0x6b,0x2e,0x2e
000128  2e0d0a00          DCB      0x2e,0x0d,0x0a,0x00
00012c  20212120          DCB      0x20,0x21,0x21,0x20
000130  44617461          DCB      0x44,0x61,0x74,0x61
000134  50726f63          DCB      0x50,0x72,0x6f,0x63
000138  65737353          DCB      0x65,0x73,0x73,0x53
00013c  656e6453          DCB      0x65,0x6e,0x64,0x53
000140  74617475          DCB      0x74,0x61,0x74,0x75
000144  73446174          DCB      0x73,0x44,0x61,0x74
000148  61206967          DCB      0x61,0x20,0x69,0x67
00014c  6e6f7265          DCB      0x6e,0x6f,0x72,0x65
000150  20287853          DCB      0x20,0x28,0x78,0x53
000154  74617475          DCB      0x74,0x61,0x74,0x75
000158  73446174          DCB      0x73,0x44,0x61,0x74
00015c  61517565          DCB      0x61,0x51,0x75,0x65
000160  7565203d          DCB      0x75,0x65,0x20,0x3d
000164  3d204e55          DCB      0x3d,0x20,0x4e,0x55
000168  4c4c290a          DCB      0x4c,0x4c,0x29,0x0a
00016c  00000000          DCB      0x00,0x00,0x00,0x00
000170  20212120          DCB      0x20,0x21,0x21,0x20
000174  44617461          DCB      0x44,0x61,0x74,0x61
000178  50726f63          DCB      0x50,0x72,0x6f,0x63
00017c  65737353          DCB      0x65,0x73,0x73,0x53
000180  656e6453          DCB      0x65,0x6e,0x64,0x53
000184  74617475          DCB      0x74,0x61,0x74,0x75
000188  73446174          DCB      0x73,0x44,0x61,0x74
00018c  61205374          DCB      0x61,0x20,0x53,0x74
000190  61727420          DCB      0x61,0x72,0x74,0x20
000194  67657420          DCB      0x67,0x65,0x74,0x20
000198  73747269          DCB      0x73,0x74,0x72,0x69
00019c  6e673a5b          DCB      0x6e,0x67,0x3a,0x5b
0001a0  63757272          DCB      0x63,0x75,0x72,0x72
0001a4  656e7454          DCB      0x65,0x6e,0x74,0x54
0001a8  696d6520          DCB      0x69,0x6d,0x65,0x20
0001ac  3d202564          DCB      0x3d,0x20,0x25,0x64
0001b0  5d0d0a00          DCB      0x5d,0x0d,0x0a,0x00
0001b4  202d2d3e          DCB      0x20,0x2d,0x2d,0x3e
0001b8  20434d44          DCB      0x20,0x43,0x4d,0x44
0001bc  5f54494d          DCB      0x5f,0x54,0x49,0x4d
0001c0  455f434f          DCB      0x45,0x5f,0x43,0x4f
0001c4  52524543          DCB      0x52,0x52,0x45,0x43
0001c8  54494f4e          DCB      0x54,0x49,0x4f,0x4e
0001cc  5f494420          DCB      0x5f,0x49,0x44,0x20
0001d0  5f212121          DCB      0x5f,0x21,0x21,0x21
0001d4  21203a20          DCB      0x21,0x20,0x3a,0x20
0001d8  5b253034          DCB      0x5b,0x25,0x30,0x34
0001dc  642f2530          DCB      0x64,0x2f,0x25,0x30
0001e0  32642f25          DCB      0x32,0x64,0x2f,0x25
0001e4  30326420          DCB      0x30,0x32,0x64,0x20
0001e8  25303264          DCB      0x25,0x30,0x32,0x64
0001ec  3a253032          DCB      0x3a,0x25,0x30,0x32
0001f0  643a2530          DCB      0x64,0x3a,0x25,0x30
0001f4  32642028          DCB      0x32,0x64,0x20,0x28
0001f8  2564295d          DCB      0x25,0x64,0x29,0x5d
0001fc  0d0a00            DCB      0x0d,0x0a,0x00

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=0

000000  5b537461          DCB      "[Status File]",0
000004  74757320
000008  46696c65
00000c  5d00    
00000e  5b445346          DCB      "[DSF File]",0
000012  2046696c
000016  655d00  
000019  5b444346          DCB      "[DCF File]",0
00001d  2046696c
000021  655d00  
000024  5b50686f          DCB      "[Photo File]",0
000028  746f2046
00002c  696c655d
000030  00      
000031  5b4c6f67          DCB      "[Log File]",0
000035  2046696c
000039  655d00  
00003c  5b506172          DCB      "[Para File]",0
000040  61204669
000044  6c655d00
000048  5b546172          DCB      "[Tariff File]",0
00004c  69666620
000050  46696c65
000054  5d00    

                          AREA ||.data||, DATA, ALIGN=2

                  esfIndex
                          DCD      0x00000000
                  processItem
                          DCD      ||.conststring||
000008  02000000          DCB      0x02,0x00,0x00,0x00
                          DCD      statusExecuteFunc
000010  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000001
                          DCD      ||.conststring||+0xe
00001c  05000000          DCB      0x05,0x00,0x00,0x00
                          DCD      dsfExecuteFunc
000024  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000002
                          DCD      ||.conststring||+0x19
000030  06000000          DCB      0x06,0x00,0x00,0x00
                          DCD      dcfExecuteFunc
000038  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000002
                          DCD      ||.conststring||+0x24
000044  03000000          DCB      0x03,0x00,0x00,0x00
                          DCD      photoExecuteFunc
00004c  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000002
                          DCD      ||.conststring||+0x31
000058  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      logExecuteFunc
000060  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000002
                          DCD      ||.conststring||+0x3c
00006c  07000000          DCB      0x07,0x00,0x00,0x00
                          DCD      paraExecuteFunc
000074  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000004
                          DCD      ||.conststring||+0x48
000080  04000000          DCB      0x04,0x00,0x00,0x00
                          DCD      tariffExecuteFunc
000088  01000000          DCB      0x01,0x00,0x00,0x00
                          DCD      0x00000004
                          DCD      0x00000000
000094  00000000          DCB      0x00,0x00,0x00,0x00
                          DCD      0x00000000
00009c  00000000          DCB      0x00,0x00,0x00,0x00
                          DCD      0x00000000
                  needReloadFlag
0000a4  00000000          DCB      0x00,0x00,0x00,0x00
                  xStatusDataQueue
                          DCD      0x00000000
