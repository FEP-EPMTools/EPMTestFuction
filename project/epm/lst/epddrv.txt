; generated by ARM C/C++ Compiler, 5.03 [Build 76]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave -o.\obj\epddrv.o --asm_dir=.\lst\ --list_dir=.\lst\ --depend=.\obj\epddrv.d --cpu=ARM926EJ-S --apcs=interwork -O0 -I.\src -I..\..\common\src\BSP\Driver\Include -I..\..\common\src\FreeRTOS -I..\..\common\src\FreeRTOS\Source\include -I..\..\common\src\FreeRTOS\Source\portable\RVDS\ARM926EJ-S -I..\..\common\src\BSP\ThirdParty\FATFS\src -I.\src\userdrv -I.\src\syshal -I.\src\user -I.\src\userdrv\vl53l0x\core\inc -I.\src\userdrv\vl53l0x\platform\inc -I.\src\syshal\json -I.\src\syshal\modemlib -I..\..\common\src\BSP\ThirdParty\yaffs2 -I..\..\common\src\BSP\ThirdParty\yaffs2\include -I..\..\common\src\BSP\ThirdParty\yaffs2\include\asm -I..\..\common\src\BSP\ThirdParty\yaffs2\include\linux -I.\src\syshal\yaffs2 -I..\..\common\src\BSP\Library\SmartcardLib\Include -I.\src\syshal\cardlib -I.\src\syshal\cardlog -I.\src\syshal\blk -I..\..\common\src\BSP\Library\USB_HOST\Inc -I..\..\common\src\BSP\Library\USB_HOST\Inc\usb_uvc -IC:\Keil\ARM\RV31\INC -IC:\Keil\ARM\CMSIS\Include -IC:\Keil\ARM\Inc\Toshiba -DEPM_PROJECT -DCONFIG_YAFFS_DIRECT -DCONFIG_YAFFS_SHORT_NAMES_IN_RAM -DCONFIG_YAFFS_YAFFS2 -DNO_Y_INLINE -DCONFIG_YAFFS_PROVIDE_DEFS -DCONFIG_YAFFSFS_PROVIDE_VALUES --omf_browse=.\obj\epddrv.crf src\SysHal\epddrv.c]
                          ARM

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_pre_padding
                          REQUIRE _printf_percent
                          REQUIRE _printf_flags
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_d
                          REQUIRE _printf_u
                          REQUIRE _printf_int_dec
                  EPDSetBacklight PROC
;;;2002   
;;;2003   void EPDSetBacklight(BOOL flag)
000000  e92d4010          PUSH     {r4,lr}
;;;2004   {         
000004  e1a04000          MOV      r4,r0
;;;2005       sysprintf("-- EPDSetBacklight %d --\n", flag); 
000008  e1a01004          MOV      r1,r4
00000c  e28f0e23          ADR      r0,|L1.580|
000010  ebfffffe          BL       sysprintf
;;;2006       if(flag)    
000014  e3540000          CMP      r4,#0
000018  0a000003          BEQ      |L1.44|
;;;2007           GPIO_SetBit(BACK_LIGHT_PIN_PORT, BACK_LIGHT_PORT_BIT); 
00001c  e3a01901          MOV      r1,#0x4000
000020  e3a000c0          MOV      r0,#0xc0
000024  ebfffffe          BL       GPIO_SetBit
000028  ea000002          B        |L1.56|
                  |L1.44|
;;;2008       else
;;;2009           GPIO_ClrBit(BACK_LIGHT_PIN_PORT, BACK_LIGHT_PORT_BIT);
00002c  e3a01901          MOV      r1,#0x4000
000030  e3a000c0          MOV      r0,#0xc0
000034  ebfffffe          BL       GPIO_ClrBit
                  |L1.56|
;;;2010   }
000038  e8bd8010          POP      {r4,pc}
;;;2011   
                          ENDP

                  SpiFlash_ReadStatusReg PROC
;;;917    
;;;918    static uint8_t SpiFlash_ReadStatusReg(void)
00003c  e92d4010          PUSH     {r4,lr}
;;;919    {
;;;920        uint8_t u8Status;
;;;921    
;;;922        // /CS: active
;;;923        pSpiInterface->activeCSFunc(TRUE); 
000040  e59f0218          LDR      r0,|L1.608|
000044  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
000048  e590100c          LDR      r1,[r0,#0xc]
00004c  e3a00001          MOV      r0,#1
000050  e12fff31          BLX      r1
;;;924    
;;;925        // send Command: 0x05, Read status register
;;;926        pSpiInterface->writeFunc(0, 0x05);
000054  e59f0204          LDR      r0,|L1.608|
000058  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00005c  e3a01005          MOV      r1,#5
000060  e5902004          LDR      r2,[r0,#4]
000064  e3a00000          MOV      r0,#0
000068  e12fff32          BLX      r2
;;;927    
;;;928        // read status
;;;929        pSpiInterface->writeFunc(0, 0x00);
00006c  e59f01ec          LDR      r0,|L1.608|
000070  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
000074  e3a01000          MOV      r1,#0
000078  e5902004          LDR      r2,[r0,#4]
00007c  e1a00001          MOV      r0,r1
000080  e12fff32          BLX      r2
;;;930    
;;;931        u8Status = pSpiInterface->readFunc(0);
000084  e59f01d4          LDR      r0,|L1.608|
000088  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00008c  e5901008          LDR      r1,[r0,#8]
000090  e3a00000          MOV      r0,#0
000094  e12fff31          BLX      r1
000098  e20040ff          AND      r4,r0,#0xff
;;;932        //vTaskDelay(10/portTICK_RATE_MS);
;;;933        // /CS: de-active
;;;934        pSpiInterface->activeCSFunc(FALSE); 
00009c  e59f01bc          LDR      r0,|L1.608|
0000a0  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0000a4  e590100c          LDR      r1,[r0,#0xc]
0000a8  e3a00000          MOV      r0,#0
0000ac  e12fff31          BLX      r1
;;;935    
;;;936        return u8Status;
0000b0  e1a00004          MOV      r0,r4
;;;937    }
0000b4  e8bd8010          POP      {r4,pc}
;;;938    
                          ENDP

                  SpiFlash_WaitReady PROC
;;;942    
;;;943    static void SpiFlash_WaitReady(void)
0000b8  e92d4070          PUSH     {r4-r6,lr}
;;;944    {
;;;945        int counter =  5000/10; 
0000bc  e3a05f7d          MOV      r5,#0x1f4
;;;946        uint8_t ReturnValue;
;;;947    
;;;948        do {
0000c0  e1a00000          MOV      r0,r0
                  |L1.196|
;;;949            //vTaskDelay(1/portTICK_RATE_MS); //add by sam
;;;950            #if(FREERTOS_USE_1000MHZ)
;;;951            vTaskDelay(1/portTICK_RATE_MS); 
;;;952            #error
;;;953            #else
;;;954            //terninalPrintf("_"); 
;;;955            
;;;956            if(W25Q64BVspecialburnFlag)
0000c4  e59f0198          LDR      r0,|L1.612|
0000c8  e5d00000          LDRB     r0,[r0,#0]  ; W25Q64BVspecialburnFlag
0000cc  e3500000          CMP      r0,#0
0000d0  0a000002          BEQ      |L1.224|
;;;957                vTaskDelay(10/portTICK_RATE_MS); 
0000d4  e3a00001          MOV      r0,#1
0000d8  ebfffffe          BL       vTaskDelay
0000dc  ea000001          B        |L1.232|
                  |L1.224|
;;;958            else
;;;959                vTaskDelay(10/portTICK_RATE_MS);
0000e0  e3a00001          MOV      r0,#1
0000e4  ebfffffe          BL       vTaskDelay
                  |L1.232|
;;;960            
;;;961            if(counter-- == 0)
0000e8  e1b00005          MOVS     r0,r5
0000ec  e2455001          SUB      r5,r5,#1
0000f0  1a000006          BNE      |L1.272|
;;;962            {
;;;963                terninalPrintf("\r\n #################################\r\n"); 
0000f4  e28f0f5b          ADR      r0,|L1.616|
0000f8  ebfffffe          BL       terninalPrintf
;;;964                terninalPrintf(    " ### SpiFlash_WaitReady  break ### \r\n"); 
0000fc  e28f0f63          ADR      r0,|L1.656|
000100  ebfffffe          BL       terninalPrintf
;;;965                terninalPrintf(    " ################################# \r\n"); 
000104  e28f0f6b          ADR      r0,|L1.696|
000108  ebfffffe          BL       terninalPrintf
;;;966                break;  
00010c  ea000004          B        |L1.292|
                  |L1.272|
;;;967            }            
;;;968            #endif
;;;969            ReturnValue = SpiFlash_ReadStatusReg();
000110  ebfffffe          BL       SpiFlash_ReadStatusReg
000114  e1a04000          MOV      r4,r0
;;;970            ReturnValue = ReturnValue & 1;
000118  e2044001          AND      r4,r4,#1
;;;971            
;;;972        } while(ReturnValue!=0); // check the BUSY bit
00011c  e3540000          CMP      r4,#0
000120  1affffe7          BNE      |L1.196|
                  |L1.292|
000124  e1a00000          MOV      r0,r0                 ;966
;;;973        
;;;974        //terninalPrintf("counter = %d \r\n",counter);
;;;975    }
000128  e8bd8070          POP      {r4-r6,pc}
;;;976    
                          ENDP

                  W25Q64BVqueryEx PROC
;;;1176   
;;;1177   void W25Q64BVqueryEx(int temposition,uint8_t *u8DataBuffer,int size)
00012c  e92d47f0          PUSH     {r4-r10,lr}
;;;1178   {
000130  e1a04000          MOV      r4,r0
000134  e1a08001          MOV      r8,r1
000138  e1a05002          MOV      r5,r2
;;;1179       //int size = 4000;
;;;1180       uint8_t buff[size];
00013c  e1a09005          MOV      r9,r5
000140  e1a00009          MOV      r0,r9
000144  ebfffffe          BL       malloc
000148  e1a06000          MOV      r6,r0
;;;1181   
;;;1182       //GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
;;;1183       //vTaskDelay(10/portTICK_RATE_MS);
;;;1184   
;;;1185       SpiFlash_WaitReady();
00014c  ebfffffe          BL       SpiFlash_WaitReady
;;;1186   
;;;1187       pSpiInterface->activeCSFunc(TRUE);    
000150  e59f0108          LDR      r0,|L1.608|
000154  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
000158  e590100c          LDR      r1,[r0,#0xc]
00015c  e3a00001          MOV      r0,#1
000160  e12fff31          BLX      r1
;;;1188   
;;;1189       pSpiInterface->writeFunc(0, 0x03);
000164  e59f00f4          LDR      r0,|L1.608|
000168  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00016c  e3a01003          MOV      r1,#3
000170  e5902004          LDR      r2,[r0,#4]
000174  e3a00000          MOV      r0,#0
000178  e12fff32          BLX      r2
;;;1190   
;;;1191       pSpiInterface->writeFunc(0, temposition>>16);
00017c  e1a01844          ASR      r1,r4,#16
000180  e59f00d8          LDR      r0,|L1.608|
000184  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
000188  e5902004          LDR      r2,[r0,#4]
00018c  e3a00000          MOV      r0,#0
000190  e12fff32          BLX      r2
;;;1192       pSpiInterface->writeFunc(0, temposition>>8);
000194  e1a01444          ASR      r1,r4,#8
000198  e59f00c0          LDR      r0,|L1.608|
00019c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0001a0  e5902004          LDR      r2,[r0,#4]
0001a4  e3a00000          MOV      r0,#0
0001a8  e12fff32          BLX      r2
;;;1193       pSpiInterface->writeFunc(0, temposition & 0xFF);
0001ac  e20410ff          AND      r1,r4,#0xff
0001b0  e59f00a8          LDR      r0,|L1.608|
0001b4  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0001b8  e5902004          LDR      r2,[r0,#4]
0001bc  e3a00000          MOV      r0,#0
0001c0  e12fff32          BLX      r2
;;;1194   
;;;1195   
;;;1196       for(int i=0;i<size;i++)
0001c4  e3a07000          MOV      r7,#0
0001c8  ea00000c          B        |L1.512|
                  |L1.460|
;;;1197       {
;;;1198           pSpiInterface->writeFunc(0, 0x00);
0001cc  e59f008c          LDR      r0,|L1.608|
0001d0  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0001d4  e3a01000          MOV      r1,#0
0001d8  e5902004          LDR      r2,[r0,#4]
0001dc  e1a00001          MOV      r0,r1
0001e0  e12fff32          BLX      r2
;;;1199           buff[i] = pSpiInterface->readFunc(0); 
0001e4  e59f0074          LDR      r0,|L1.608|
0001e8  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0001ec  e5901008          LDR      r1,[r0,#8]
0001f0  e3a00000          MOV      r0,#0
0001f4  e12fff31          BLX      r1
0001f8  e7c60007          STRB     r0,[r6,r7]
0001fc  e2877001          ADD      r7,r7,#1              ;1196
                  |L1.512|
000200  e1570005          CMP      r7,r5                 ;1196
000204  bafffff0          BLT      |L1.460|
;;;1200           
;;;1201       }
;;;1202   
;;;1203   
;;;1204       pSpiInterface->activeCSFunc(FALSE);   
000208  e59f0050          LDR      r0,|L1.608|
00020c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
000210  e590100c          LDR      r1,[r0,#0xc]
000214  e3a00000          MOV      r0,#0
000218  e12fff31          BLX      r1
;;;1205   
;;;1206       
;;;1207       //terninalPrintf("buff = ");
;;;1208       for(int i=0;i<size;i++)
00021c  e3a00000          MOV      r0,#0
000220  ea000002          B        |L1.560|
                  |L1.548|
;;;1209       {
;;;1210           //*(u8DataBuffer + i) = buff[i];
;;;1211           
;;;1212           u8DataBuffer[i] = buff[i];
000224  e7d61000          LDRB     r1,[r6,r0]
000228  e7c81000          STRB     r1,[r8,r0]
00022c  e2800001          ADD      r0,r0,#1              ;1208
                  |L1.560|
000230  e1500005          CMP      r0,r5                 ;1208
000234  bafffffa          BLT      |L1.548|
000238  e1a00006          MOV      r0,r6                 ;1208
00023c  ebfffffe          BL       free
;;;1213           
;;;1214           //terninalPrintf("%02x ",buff[i]); 
;;;1215       }
;;;1216       //terninalPrintf("\r\n"); 
;;;1217       
;;;1218   
;;;1219       //GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT);  
;;;1220   
;;;1221   }
000240  e8bd87f0          POP      {r4-r10,pc}
                  |L1.580|
000244  2d2d2045          DCB      "-- EPDSetBacklight %d --\n",0
000248  50445365
00024c  74426163
000250  6b6c6967
000254  68742025
000258  64202d2d
00025c  0a00    
00025e  00                DCB      0
00025f  00                DCB      0
                  |L1.608|
                          DCD      pSpiInterface
                  |L1.612|
                          DCD      W25Q64BVspecialburnFlag
                  |L1.616|
000268  0d0a2023          DCB      "\r\n #################################\r\n",0
00026c  23232323
000270  23232323
000274  23232323
000278  23232323
00027c  23232323
000280  23232323
000284  23232323
000288  23232323
00028c  0d0a00  
00028f  00                DCB      0
                  |L1.656|
000290  20232323          DCB      " ### SpiFlash_WaitReady  break ### \r\n",0
000294  20537069
000298  466c6173
00029c  685f5761
0002a0  69745265
0002a4  61647920
0002a8  20627265
0002ac  616b2023
0002b0  2323200d
0002b4  0a00    
0002b6  00                DCB      0
0002b7  00                DCB      0
                  |L1.696|
0002b8  20232323          DCB      " ################################# \r\n",0
0002bc  23232323
0002c0  23232323
0002c4  23232323
0002c8  23232323
0002cc  23232323
0002d0  23232323
0002d4  23232323
0002d8  2323200d
0002dc  0a00    
0002de  00                DCB      0
0002df  00                DCB      0
                          ENDP

                  getflashvalue PROC
;;;3948   
;;;3949   uint8_t getflashvalue(int position)
0002e0  e92d4038          PUSH     {r3-r5,lr}
;;;3950   {
0002e4  e1a04000          MOV      r4,r0
;;;3951   
;;;3952       uint8_t tempbyte;
;;;3953   
;;;3954       GPIO_ClrBit(GPIOI, BIT0); 
0002e8  e3a01001          MOV      r1,#1
0002ec  e3a00c02          MOV      r0,#0x200
0002f0  ebfffffe          BL       GPIO_ClrBit
;;;3955       vTaskDelay(10/portTICK_RATE_MS);
0002f4  e3a00001          MOV      r0,#1
0002f8  ebfffffe          BL       vTaskDelay
;;;3956       W25Q64BVqueryEx(position,&tempbyte,sizeof(tempbyte));
0002fc  e3a02001          MOV      r2,#1
000300  e1a0100d          MOV      r1,sp
000304  e1a00004          MOV      r0,r4
000308  ebfffffe          BL       W25Q64BVqueryEx
;;;3957       GPIO_SetBit(GPIOI, BIT0);
00030c  e3a01001          MOV      r1,#1
000310  e3a00c02          MOV      r0,#0x200
000314  ebfffffe          BL       GPIO_SetBit
;;;3958       //terninalPrintf("tempbyte = %d.\r\n",tempbyte);
;;;3959       return tempbyte;
000318  e5dd0000          LDRB     r0,[sp,#0]
;;;3960   }
00031c  e8bd8038          POP      {r3-r5,pc}
;;;3961   
                          ENDP

                  EPDSetPower PROC
;;;224    
;;;225    static BOOL EPDSetPower(BOOL flag)
000320  e92d4010          PUSH     {r4,lr}
;;;226    {
000324  e1a04000          MOV      r4,r0
;;;227        if(flag)
000328  e3540000          CMP      r4,#0
00032c  0a000008          BEQ      |L1.852|
;;;228        {         
;;;229            sysprintf("-- EPDSetPower ON --\n");
000330  e28f0f76          ADR      r0,|L1.1296|
000334  ebfffffe          BL       sysprintf
;;;230            GPIO_SetBit(POWER_PIN_PORT, POWER_PORT_BIT); 
000338  e3a01002          MOV      r1,#2
00033c  e3a00c02          MOV      r0,#0x200
000340  ebfffffe          BL       GPIO_SetBit
;;;231            GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT); //reset       
000344  e3a01001          MOV      r1,#1
000348  e3a00c02          MOV      r0,#0x200
00034c  ebfffffe          BL       GPIO_SetBit
000350  ea000007          B        |L1.884|
                  |L1.852|
;;;232        }
;;;233        else
;;;234        {
;;;235            sysprintf("-- EPDSetPower OFF --\n");
000354  e28f0f73          ADR      r0,|L1.1320|
000358  ebfffffe          BL       sysprintf
;;;236            GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT);//reset
00035c  e3a01001          MOV      r1,#1
000360  e3a00c02          MOV      r0,#0x200
000364  ebfffffe          BL       GPIO_ClrBit
;;;237            GPIO_ClrBit(POWER_PIN_PORT, POWER_PORT_BIT);  
000368  e3a01002          MOV      r1,#2
00036c  e3a00c02          MOV      r0,#0x200
000370  ebfffffe          BL       GPIO_ClrBit
                  |L1.884|
;;;238        }
;;;239        return TRUE;
000374  e3a00001          MOV      r0,#1
;;;240    }
000378  e8bd8010          POP      {r4,pc}
;;;241    
                          ENDP

                  EPDReset PROC
;;;242    static BOOL EPDReset(void)
00037c  e92d4010          PUSH     {r4,lr}
;;;243    {         
;;;244        sysprintf("-- EPDReset --\n"); 
000380  e28f0f6e          ADR      r0,|L1.1344|
000384  ebfffffe          BL       sysprintf
;;;245        //ReloadWWDT();    
;;;246        GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
000388  e3a01001          MOV      r1,#1
00038c  e3a00c02          MOV      r0,#0x200
000390  ebfffffe          BL       GPIO_ClrBit
;;;247       
;;;248        sysDelay(1000/portTICK_RATE_MS);
000394  e3a00064          MOV      r0,#0x64
000398  ebfffffe          BL       sysDelay
;;;249        //ReloadWWDT();
;;;250        sysDelay(1000/portTICK_RATE_MS);
00039c  e3a00064          MOV      r0,#0x64
0003a0  ebfffffe          BL       sysDelay
;;;251        //ReloadWWDT();
;;;252        sysDelay(1000/portTICK_RATE_MS);
0003a4  e3a00064          MOV      r0,#0x64
0003a8  ebfffffe          BL       sysDelay
;;;253    
;;;254        GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT); 
0003ac  e3a01001          MOV      r1,#1
0003b0  e3a00c02          MOV      r0,#0x200
0003b4  ebfffffe          BL       GPIO_SetBit
;;;255        //ReloadWWDT();
;;;256        return TRUE;
0003b8  e3a00001          MOV      r0,#1
;;;257    } 
0003bc  e8bd8010          POP      {r4,pc}
;;;258    
                          ENDP

                  setTotalPower PROC
;;;270    
;;;271    void setTotalPower(BOOL flag)
0003c0  e92d4010          PUSH     {r4,lr}
;;;272    {
0003c4  e1a04000          MOV      r4,r0
;;;273        if(flag)
0003c8  e3540000          CMP      r4,#0
0003cc  0a000016          BEQ      |L1.1068|
;;;274        {
;;;275            GPIO_CloseBit(GPIOI, BIT5);
0003d0  e3a01020          MOV      r1,#0x20
0003d4  e3a00c02          MOV      r0,#0x200
0003d8  ebfffffe          BL       GPIO_CloseBit
;;;276            GPIO_CloseBit(GPIOI, BIT6);
0003dc  e3a01040          MOV      r1,#0x40
0003e0  e3a00c02          MOV      r0,#0x200
0003e4  ebfffffe          BL       GPIO_CloseBit
;;;277            GPIO_CloseBit(GPIOI, BIT7);
0003e8  e3a01080          MOV      r1,#0x80
0003ec  e3a00c02          MOV      r0,#0x200
0003f0  ebfffffe          BL       GPIO_CloseBit
;;;278            GPIO_CloseBit(GPIOI, BIT8);   
0003f4  e3a01c01          MOV      r1,#0x100
0003f8  e3a00c02          MOV      r0,#0x200
0003fc  ebfffffe          BL       GPIO_CloseBit
;;;279            GPIO_CloseBit(READY_PIN_PORT, READY_PORT_BIT);        
000400  e3a01c02          MOV      r1,#0x200
000404  e1a00001          MOV      r0,r1
000408  ebfffffe          BL       GPIO_CloseBit
;;;280            pSpiInterface->setPin();
00040c  e51f11b4          LDR      r1,|L1.608|
000410  e5911000          LDR      r1,[r1,#0]  ; pSpiInterface
000414  e5910010          LDR      r0,[r1,#0x10]
000418  e12fff30          BLX      r0
;;;281            EPDSetPower(TRUE);        
00041c  e3a00001          MOV      r0,#1
000420  ebfffffe          BL       EPDSetPower
;;;282            EPDReset();
000424  ebfffffe          BL       EPDReset
000428  ea00002d          B        |L1.1252|
                  |L1.1068|
;;;283        }
;;;284        else
;;;285        {        
;;;286            EPDSetPower(FALSE);
00042c  e3a00000          MOV      r0,#0
000430  ebfffffe          BL       EPDSetPower
;;;287            pSpiInterface->resetPin();
000434  e51f11dc          LDR      r1,|L1.608|
000438  e5911000          LDR      r1,[r1,#0]  ; pSpiInterface
00043c  e5910014          LDR      r0,[r1,#0x14]
000440  e12fff30          BLX      r0
;;;288            GPIO_OpenBit(GPIOI, BIT5, DIR_OUTPUT, NO_PULL_UP);  
000444  e3a03000          MOV      r3,#0
000448  e3a02001          MOV      r2,#1
00044c  e3a01020          MOV      r1,#0x20
000450  e3a00c02          MOV      r0,#0x200
000454  ebfffffe          BL       GPIO_OpenBit
;;;289            GPIO_ClrBit(GPIOI, BIT5);
000458  e3a01020          MOV      r1,#0x20
00045c  e3a00c02          MOV      r0,#0x200
000460  ebfffffe          BL       GPIO_ClrBit
;;;290            GPIO_OpenBit(GPIOI, BIT6, DIR_OUTPUT, NO_PULL_UP);  
000464  e3a03000          MOV      r3,#0
000468  e3a02001          MOV      r2,#1
00046c  e3a01040          MOV      r1,#0x40
000470  e3a00c02          MOV      r0,#0x200
000474  ebfffffe          BL       GPIO_OpenBit
;;;291            GPIO_ClrBit(GPIOI, BIT6);
000478  e3a01040          MOV      r1,#0x40
00047c  e3a00c02          MOV      r0,#0x200
000480  ebfffffe          BL       GPIO_ClrBit
;;;292            GPIO_OpenBit(GPIOI, BIT7, DIR_OUTPUT, NO_PULL_UP);  
000484  e3a03000          MOV      r3,#0
000488  e3a02001          MOV      r2,#1
00048c  e3a01080          MOV      r1,#0x80
000490  e3a00c02          MOV      r0,#0x200
000494  ebfffffe          BL       GPIO_OpenBit
;;;293            GPIO_ClrBit(GPIOI, BIT7);
000498  e3a01080          MOV      r1,#0x80
00049c  e3a00c02          MOV      r0,#0x200
0004a0  ebfffffe          BL       GPIO_ClrBit
;;;294            GPIO_OpenBit(GPIOI, BIT8, DIR_OUTPUT, NO_PULL_UP);  
0004a4  e3a03000          MOV      r3,#0
0004a8  e3a02001          MOV      r2,#1
0004ac  e3a01c01          MOV      r1,#0x100
0004b0  e3a00c02          MOV      r0,#0x200
0004b4  ebfffffe          BL       GPIO_OpenBit
;;;295            GPIO_ClrBit(GPIOI, BIT8);
0004b8  e3a01c01          MOV      r1,#0x100
0004bc  e3a00c02          MOV      r0,#0x200
0004c0  ebfffffe          BL       GPIO_ClrBit
;;;296            
;;;297            GPIO_OpenBit(READY_PIN_PORT, READY_PORT_BIT, DIR_OUTPUT, NO_PULL_UP);  
0004c4  e3a03000          MOV      r3,#0
0004c8  e3a02001          MOV      r2,#1
0004cc  e3a01c02          MOV      r1,#0x200
0004d0  e1a00001          MOV      r0,r1
0004d4  ebfffffe          BL       GPIO_OpenBit
;;;298            GPIO_ClrBit(READY_PIN_PORT, READY_PORT_BIT);
0004d8  e3a01c02          MOV      r1,#0x200
0004dc  e1a00001          MOV      r0,r1
0004e0  ebfffffe          BL       GPIO_ClrBit
                  |L1.1252|
;;;299        }
;;;300    }
0004e4  e8bd8010          POP      {r4,pc}
;;;301    
                          ENDP

                  reinitEpd PROC
;;;302    static void reinitEpd(void)
0004e8  e92d4010          PUSH     {r4,lr}
;;;303    {
;;;304        setTotalPower(FALSE);
0004ec  e3a00000          MOV      r0,#0
0004f0  ebfffffe          BL       setTotalPower
;;;305        sysDelay(1000/portTICK_RATE_MS);
0004f4  e3a00064          MOV      r0,#0x64
0004f8  ebfffffe          BL       sysDelay
;;;306        setTotalPower(TRUE);
0004fc  e3a00001          MOV      r0,#1
000500  ebfffffe          BL       setTotalPower
;;;307        sysDelay(1000/portTICK_RATE_MS);
000504  e3a00064          MOV      r0,#0x64
000508  ebfffffe          BL       sysDelay
;;;308    }
00050c  e8bd8010          POP      {r4,pc}
                  |L1.1296|
000510  2d2d2045          DCB      "-- EPDSetPower ON --\n",0
000514  50445365
000518  74506f77
00051c  6572204f
000520  4e202d2d
000524  0a00    
000526  00                DCB      0
000527  00                DCB      0
                  |L1.1320|
000528  2d2d2045          DCB      "-- EPDSetPower OFF --\n",0
00052c  50445365
000530  74506f77
000534  6572204f
000538  4646202d
00053c  2d0a00  
00053f  00                DCB      0
                  |L1.1344|
000540  2d2d2045          DCB      "-- EPDReset --\n",0
000544  50445265
000548  73657420
00054c  2d2d0a00
                          ENDP

                  LCDWaitForReady PROC
;;;392    }
;;;393    static BOOL LCDWaitForReady(void)
000550  e92d4070          PUSH     {r4-r6,lr}
;;;394    {
;;;395        //terninalPrintf("epdbadFlag = %d\r\n",epdbadFlag);
;;;396        //terninalPrintf("epdopenFlag = %d\r\n",epdopenFlag);
;;;397    
;;;398        if((epdbadFlag == TRUE) || (epdopenFlag == FALSE))
000554  e59f025c          LDR      r0,|L1.1976|
000558  e5d00000          LDRB     r0,[r0,#0]  ; epdbadFlag
00055c  e3500001          CMP      r0,#1
000560  0a000003          BEQ      |L1.1396|
000564  e59f0250          LDR      r0,|L1.1980|
000568  e5d00000          LDRB     r0,[r0,#0]  ; epdopenFlag
00056c  e3500000          CMP      r0,#0
000570  1a000001          BNE      |L1.1404|
                  |L1.1396|
;;;399            return TRUE;
000574  e3a00001          MOV      r0,#1
                  |L1.1400|
;;;400        
;;;401    
;;;402        //int timers = 3500/portTICK_RATE_MS;
;;;403        int timers = 5000/portTICK_RATE_MS;
;;;404        
;;;405        while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0)
;;;406        {
;;;407            //sysprintf("{%d}", 500-timers);
;;;408    
;;;409            
;;;410            if(timers-- == 0)
;;;411            {
;;;412    
;;;413                terninalPrintf("badEPD\r\n");
;;;414                epdbadFlag = TRUE;
;;;415                
;;;416                epdbadCounter++;
;;;417                if(epdbadCounter >= 3)
;;;418                    epdbadCounter = 3;
;;;419                    
;;;420                sysprintf("\r\n ##  LCDWaitForReady timeout  ##\n");
;;;421                //terninalPrintf("LCDWaitForReady timeout\r\n");
;;;422                //terninalPrintf("PI9 = %d.\r\n",GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT));
;;;423                waitTimeoutCounter++;
;;;424                BuzzerPlay(500, 200, 2, TRUE);
;;;425                #if(1)
;;;426                reinitEpd();
;;;427                #else
;;;428                setTotalPower(FALSE);            
;;;429                vTaskDelay(200/portTICK_RATE_MS);  
;;;430                setTotalPower(TRUE);             
;;;431                vTaskDelay(500/portTICK_RATE_MS);
;;;432                #endif
;;;433                
;;;434                timers = 0;
;;;435                //if(pEpdReinitCallbackFunc != NULL)
;;;436                //    pEpdReinitCallbackFunc();
;;;437                
;;;438                
;;;439                /*
;;;440                if (getflashvalue(1) != 0x49)
;;;441                {   
;;;442                    terninalPrintf("EPDflashError\r\n");
;;;443                    hwtestEDPflashBurn();
;;;444                    //flashErrorFlag = TRUE;
;;;445                }*/
;;;446                
;;;447                int flashErrorCounter = 0;
;;;448                uint8_t tempbyte;
;;;449                tempbyte = getflashvalue(0);
;;;450                //terninalPrintf("tempbyte = %02x\r\n",tempbyte);
;;;451                
;;;452                
;;;453                while (tempbyte != 0x49)
;;;454                {   
;;;455                    flashErrorCounter++;
;;;456                    if(flashErrorCounter >= 3)
;;;457                    {
;;;458                        terninalPrintf("EPDflash Error\r\n");
;;;459                        break;
;;;460                        //hwtestEDPflashBurn();
;;;461                    }
;;;462                    tempbyte = getflashvalue(0);
;;;463                    //terninalPrintf("tempbyte = %02x\r\n",tempbyte);
;;;464                    vTaskDelay(100/portTICK_RATE_MS);
;;;465                }
;;;466                
;;;467                if(tempbyte == 0x49)
;;;468                    epdbadFlag = FALSE;
;;;469                
;;;470                //terninalPrintf("toggleEPDswitch.\r\n");
;;;471                
;;;472                
;;;473                
;;;474                
;;;475                //toggleEPDswitch(TRUE); //diable hot swap 20200629 by Steven
;;;476                
;;;477                //terninalPrintf("toggleEPDswitch finish.\r\n");
;;;478                
;;;479    
;;;480                
;;;481                
;;;482                EPDSetBacklight(FALSE);
;;;483                //terninalPrintf("EPDShowBGScreen.\r\n");
;;;484                
;;;485                //terninalPrintf("PI9 = %d.\r\n",GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT));
;;;486                /*
;;;487                if(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0)
;;;488                {
;;;489                    epdbadFlag = TRUE;
;;;490                    terninalPrintf("PI9 fail.\r\n");
;;;491                    return FALSE;
;;;492                }  */
;;;493                //terninalPrintf("VCOM = %d.\r\n",IT8951GetVCOM());
;;;494                
;;;495                
;;;496                /*
;;;497                if(readMBtestFunc())
;;;498                {}
;;;499                else
;;;500                {
;;;501                    EPDShowBGScreen(EPD_PICT_ALL_BLACK_INDEX, TRUE); 
;;;502                    EPDShowBGScreen(EPD_PICT_ALL_WHITE_INDEX, TRUE);
;;;503                }
;;;504                
;;;505                */  //diable hot swap 20200629 by Steven
;;;506                
;;;507                //terninalPrintf("PI9 ok.\r\n");
;;;508                if( epdbadCounter >= 3 )
;;;509                {
;;;510                    if(readAssemblyTestFunc())
;;;511                    {
;;;512                        epdbadCounter = 0;
;;;513                        hwtestEDPflashBurnLite();
;;;514                    }
;;;515                    else
;;;516                        epdbadFlag = TRUE;
;;;517                }
;;;518                
;;;519                return FALSE;
;;;520            }
;;;521            #if(FREERTOS_USE_1000MHZ)
;;;522            vTaskDelay(1/portTICK_RATE_MS); 
;;;523            #else
;;;524            //#error
;;;525            vTaskDelay(10/portTICK_RATE_MS); 
;;;526            #endif
;;;527        };
;;;528        
;;;529        //if(xTaskGetTickCount() != mTick)
;;;530        //    sysprintf("\r\n{%d}\r\n", xTaskGetTickCount() - mTick);
;;;531        
;;;532    
;;;533        //epdbadCounter = 0;
;;;534        return TRUE;
;;;535    }
000578  e8bd8070          POP      {r4-r6,pc}
                  |L1.1404|
00057c  e3a06f7d          MOV      r6,#0x1f4             ;403
000580  ea00004e          B        |L1.1728|
                  |L1.1412|
000584  e1b00006          MOVS     r0,r6                 ;410
000588  e2466001          SUB      r6,r6,#1              ;410
00058c  1a000048          BNE      |L1.1716|
000590  e28f0f8a          ADR      r0,|L1.1984|
000594  ebfffffe          BL       terninalPrintf
000598  e3a00001          MOV      r0,#1                 ;414
00059c  e59f1214          LDR      r1,|L1.1976|
0005a0  e5c10000          STRB     r0,[r1,#0]            ;414  ; epdbadFlag
0005a4  e59f0220          LDR      r0,|L1.1996|
0005a8  e5900000          LDR      r0,[r0,#0]            ;416  ; epdbadCounter
0005ac  e2800001          ADD      r0,r0,#1              ;416
0005b0  e59f1214          LDR      r1,|L1.1996|
0005b4  e5810000          STR      r0,[r1,#0]            ;416  ; epdbadCounter
0005b8  e2810000          ADD      r0,r1,#0              ;417
0005bc  e5900000          LDR      r0,[r0,#0]            ;417  ; epdbadCounter
0005c0  e3500003          CMP      r0,#3                 ;417
0005c4  ba000001          BLT      |L1.1488|
0005c8  e3a00003          MOV      r0,#3                 ;418
0005cc  e5810000          STR      r0,[r1,#0]            ;418  ; epdbadCounter
                  |L1.1488|
0005d0  e28f0f7e          ADR      r0,|L1.2000|
0005d4  ebfffffe          BL       sysprintf
0005d8  e59f0214          LDR      r0,|L1.2036|
0005dc  e5900000          LDR      r0,[r0,#0]            ;423  ; waitTimeoutCounter
0005e0  e2800001          ADD      r0,r0,#1              ;423
0005e4  e59f1208          LDR      r1,|L1.2036|
0005e8  e5810000          STR      r0,[r1,#0]            ;423  ; waitTimeoutCounter
0005ec  e3a03001          MOV      r3,#1                 ;424
0005f0  e3a02002          MOV      r2,#2                 ;424
0005f4  e3a010c8          MOV      r1,#0xc8              ;424
0005f8  e3a00f7d          MOV      r0,#0x1f4             ;424
0005fc  ebfffffe          BL       BuzzerPlay
000600  ebfffffe          BL       reinitEpd
000604  e3a06000          MOV      r6,#0                 ;434
000608  e3a05000          MOV      r5,#0                 ;447
00060c  e3a00000          MOV      r0,#0                 ;449
000610  ebfffffe          BL       getflashvalue
000614  e1a04000          MOV      r4,r0                 ;449
000618  ea00000a          B        |L1.1608|
                  |L1.1564|
00061c  e2855001          ADD      r5,r5,#1              ;455
000620  e3550003          CMP      r5,#3                 ;456
000624  ba000002          BLT      |L1.1588|
000628  e28f0f72          ADR      r0,|L1.2040|
00062c  ebfffffe          BL       terninalPrintf
000630  ea000006          B        |L1.1616|
                  |L1.1588|
000634  e3a00000          MOV      r0,#0                 ;462
000638  ebfffffe          BL       getflashvalue
00063c  e1a04000          MOV      r4,r0                 ;462
000640  e3a0000a          MOV      r0,#0xa               ;464
000644  ebfffffe          BL       vTaskDelay
                  |L1.1608|
000648  e3540049          CMP      r4,#0x49              ;453
00064c  1afffff2          BNE      |L1.1564|
                  |L1.1616|
000650  e1a00000          MOV      r0,r0                 ;459
000654  e3540049          CMP      r4,#0x49              ;467
000658  1a000002          BNE      |L1.1640|
00065c  e3a00000          MOV      r0,#0                 ;468
000660  e59f1150          LDR      r1,|L1.1976|
000664  e5c10000          STRB     r0,[r1,#0]            ;468  ; epdbadFlag
                  |L1.1640|
000668  e3a00000          MOV      r0,#0                 ;482
00066c  ebfffffe          BL       EPDSetBacklight
000670  e59f0154          LDR      r0,|L1.1996|
000674  e5900000          LDR      r0,[r0,#0]            ;508  ; epdbadCounter
000678  e3500003          CMP      r0,#3                 ;508
00067c  ba00000a          BLT      |L1.1708|
000680  ebfffffe          BL       readAssemblyTestFunc
000684  e3500000          CMP      r0,#0                 ;510
000688  0a000004          BEQ      |L1.1696|
00068c  e3a00000          MOV      r0,#0                 ;512
000690  e59f1134          LDR      r1,|L1.1996|
000694  e5810000          STR      r0,[r1,#0]            ;512  ; epdbadCounter
000698  ebfffffe          BL       hwtestEDPflashBurnLite
00069c  ea000002          B        |L1.1708|
                  |L1.1696|
0006a0  e3a00001          MOV      r0,#1                 ;516
0006a4  e59f110c          LDR      r1,|L1.1976|
0006a8  e5c10000          STRB     r0,[r1,#0]            ;516  ; epdbadFlag
                  |L1.1708|
0006ac  e3a00000          MOV      r0,#0                 ;519
0006b0  eaffffb0          B        |L1.1400|
                  |L1.1716|
0006b4  e1a00000          MOV      r0,r0                 ;520
0006b8  e3a00001          MOV      r0,#1                 ;525
0006bc  ebfffffe          BL       vTaskDelay
                  |L1.1728|
0006c0  e3a01c02          MOV      r1,#0x200             ;405
0006c4  e1a00001          MOV      r0,r1                 ;405
0006c8  ebfffffe          BL       GPIO_ReadBit
0006cc  e3500000          CMP      r0,#0                 ;405
0006d0  0affffab          BEQ      |L1.1412|
0006d4  e3a00001          MOV      r0,#1                 ;534
0006d8  eaffffa6          B        |L1.1400|
;;;536    
                          ENDP

                  WriteCmdCode PROC
;;;537    static BOOL WriteCmdCode (int wCmd,int len)
0006dc  e92d4070          PUSH     {r4-r6,lr}
;;;538    {
0006e0  e1a04000          MOV      r4,r0
0006e4  e1a05001          MOV      r5,r1
;;;539        //sysprintf("Write cmd start!!\n");
;;;540        //wait ready.
;;;541        if(LCDWaitForReady() == FALSE) 
0006e8  ebfffffe          BL       LCDWaitForReady
0006ec  e3500000          CMP      r0,#0
0006f0  1a000001          BNE      |L1.1788|
;;;542            return FALSE;
0006f4  e3a00000          MOV      r0,#0
                  |L1.1784|
;;;543    
;;;544        //cs set low.
;;;545        pSpiInterface->activeCSFunc(TRUE);
;;;546    
;;;547        //spi write preamble.
;;;548        pSpiInterface->writeFunc(0, 0x60);
;;;549        pSpiInterface->writeFunc(0, 0x00);
;;;550    
;;;551        //wait ready.
;;;552        if(LCDWaitForReady() == FALSE) 
;;;553            return FALSE;
;;;554    
;;;555        //send cmd. 0x0302
;;;556        pSpiInterface->writeFunc(0, (char)(wCmd>>8));
;;;557        pSpiInterface->writeFunc(0, (char)wCmd);
;;;558    
;;;559        //cs set high.
;;;560        pSpiInterface->activeCSFunc(FALSE);
;;;561        //sysprintf("Write cmd over.!!\n");
;;;562        
;;;563        if(LCDWaitForReady() == FALSE) 
;;;564            return FALSE;
;;;565        
;;;566        return TRUE;
;;;567    }
0006f8  e8bd8070          POP      {r4-r6,pc}
                  |L1.1788|
0006fc  e51f04a4          LDR      r0,|L1.608|
000700  e5900000          LDR      r0,[r0,#0]            ;545  ; pSpiInterface
000704  e590100c          LDR      r1,[r0,#0xc]          ;545
000708  e3a00001          MOV      r0,#1                 ;545
00070c  e12fff31          BLX      r1                    ;545
000710  e51f04b8          LDR      r0,|L1.608|
000714  e5900000          LDR      r0,[r0,#0]            ;548  ; pSpiInterface
000718  e3a01060          MOV      r1,#0x60              ;548
00071c  e5902004          LDR      r2,[r0,#4]            ;548
000720  e3a00000          MOV      r0,#0                 ;548
000724  e12fff32          BLX      r2                    ;548
000728  e51f04d0          LDR      r0,|L1.608|
00072c  e5900000          LDR      r0,[r0,#0]            ;549  ; pSpiInterface
000730  e3a01000          MOV      r1,#0                 ;549
000734  e5902004          LDR      r2,[r0,#4]            ;549
000738  e1a00001          MOV      r0,r1                 ;549
00073c  e12fff32          BLX      r2                    ;549
000740  ebfffffe          BL       LCDWaitForReady
000744  e3500000          CMP      r0,#0                 ;552
000748  1a000001          BNE      |L1.1876|
00074c  e3a00000          MOV      r0,#0                 ;553
000750  eaffffe8          B        |L1.1784|
                  |L1.1876|
000754  e1a00804          LSL      r0,r4,#16             ;556
000758  e1a01c20          LSR      r1,r0,#24             ;556
00075c  e51f0504          LDR      r0,|L1.608|
000760  e5900000          LDR      r0,[r0,#0]            ;556  ; pSpiInterface
000764  e5902004          LDR      r2,[r0,#4]            ;556
000768  e3a00000          MOV      r0,#0                 ;556
00076c  e12fff32          BLX      r2                    ;556
000770  e20410ff          AND      r1,r4,#0xff           ;557
000774  e51f051c          LDR      r0,|L1.608|
000778  e5900000          LDR      r0,[r0,#0]            ;557  ; pSpiInterface
00077c  e5902004          LDR      r2,[r0,#4]            ;557
000780  e3a00000          MOV      r0,#0                 ;557
000784  e12fff32          BLX      r2                    ;557
000788  e51f0530          LDR      r0,|L1.608|
00078c  e5900000          LDR      r0,[r0,#0]            ;560  ; pSpiInterface
000790  e590100c          LDR      r1,[r0,#0xc]          ;560
000794  e3a00000          MOV      r0,#0                 ;560
000798  e12fff31          BLX      r1                    ;560
00079c  ebfffffe          BL       LCDWaitForReady
0007a0  e3500000          CMP      r0,#0                 ;563
0007a4  1a000001          BNE      |L1.1968|
0007a8  e3a00000          MOV      r0,#0                 ;564
0007ac  eaffffd1          B        |L1.1784|
                  |L1.1968|
0007b0  e3a00001          MOV      r0,#1                 ;566
0007b4  eaffffcf          B        |L1.1784|
                  |L1.1976|
                          DCD      epdbadFlag
                  |L1.1980|
                          DCD      epdopenFlag
                  |L1.1984|
0007c0  62616445          DCB      "badEPD\r\n",0
0007c4  50440d0a
0007c8  00      
0007c9  00                DCB      0
0007ca  00                DCB      0
0007cb  00                DCB      0
                  |L1.1996|
                          DCD      epdbadCounter
                  |L1.2000|
0007d0  0d0a2023          DCB      "\r\n ##  LCDWaitForReady timeout  ##\n",0
0007d4  2320204c
0007d8  43445761
0007dc  6974466f
0007e0  72526561
0007e4  64792074
0007e8  696d656f
0007ec  75742020
0007f0  23230a00
                  |L1.2036|
                          DCD      waitTimeoutCounter
                  |L1.2040|
0007f8  45504466          DCB      "EPDflash Error\r\n",0
0007fc  6c617368
000800  20457272
000804  6f720d0a
000808  00      
000809  00                DCB      0
00080a  00                DCB      0
00080b  00                DCB      0
                          ENDP

                  EPDEnterSleep PROC
;;;152    
;;;153    static void EPDEnterSleep(void)
00080c  e92d4010          PUSH     {r4,lr}
;;;154    {
;;;155        if(sleepEnteredFlag == FALSE)
000810  e59f0444          LDR      r0,|L1.3164|
000814  e5d00000          LDRB     r0,[r0,#0]  ; sleepEnteredFlag
000818  e3500000          CMP      r0,#0
00081c  1a00000d          BNE      |L1.2136|
;;;156        {
;;;157            if(sleepFunctionFlag)
000820  e59f0438          LDR      r0,|L1.3168|
000824  e5d00000          LDRB     r0,[r0,#0]  ; sleepFunctionFlag
000828  e3500000          CMP      r0,#0
00082c  0a000009          BEQ      |L1.2136|
;;;158            {
;;;159                //sysprintf("\r\n-- EPD : SLEEP --\r\n");
;;;160                WriteCmdCode(IT8951_TCON_SLEEP,2);   
000830  e3a01002          MOV      r1,#2
000834  e3a00003          MOV      r0,#3
000838  ebfffffe          BL       WriteCmdCode
;;;161                pSpiInterface->resetPin();  
00083c  e51f15e4          LDR      r1,|L1.608|
000840  e5911000          LDR      r1,[r1,#0]  ; pSpiInterface
000844  e5910014          LDR      r0,[r1,#0x14]
000848  e12fff30          BLX      r0
;;;162                sleepEnteredFlag = TRUE;
00084c  e3a00001          MOV      r0,#1
000850  e59f1404          LDR      r1,|L1.3164|
000854  e5c10000          STRB     r0,[r1,#0]  ; sleepEnteredFlag
                  |L1.2136|
;;;163            }
;;;164        }
;;;165    }
000858  e8bd8010          POP      {r4,pc}
;;;166    static void EPDExitSleep(void)
                          ENDP

                  EPDExitSleep PROC
00085c  e92d4010          PUSH     {r4,lr}
;;;167    {
;;;168        if(sleepEnteredFlag)
000860  e59f03f4          LDR      r0,|L1.3164|
000864  e5d00000          LDRB     r0,[r0,#0]  ; sleepEnteredFlag
000868  e3500000          CMP      r0,#0
00086c  0a000009          BEQ      |L1.2200|
;;;169        {
;;;170            //sysprintf("\r\n-- EPD : RUN --\r\n");
;;;171            pSpiInterface->setPin();   
000870  e51f1618          LDR      r1,|L1.608|
000874  e5911000          LDR      r1,[r1,#0]  ; pSpiInterface
000878  e5910010          LDR      r0,[r1,#0x10]
00087c  e12fff30          BLX      r0
;;;172            WriteCmdCode(IT8951_TCON_SYS_RUN,2); 
000880  e3a01002          MOV      r1,#2
000884  e3a00001          MOV      r0,#1
000888  ebfffffe          BL       WriteCmdCode
;;;173            sleepEnteredFlag = FALSE;
00088c  e3a00000          MOV      r0,#0
000890  e59f13c4          LDR      r1,|L1.3164|
000894  e5c10000          STRB     r0,[r1,#0]  ; sleepEnteredFlag
                  |L1.2200|
;;;174        }
;;;175    }
000898  e8bd8010          POP      {r4,pc}
;;;176    static BOOL epdDrvPreOffCallback(int flag)
                          ENDP

                  EPDGetBacklight PROC
;;;2011   
;;;2012   BOOL EPDGetBacklight(void)
00089c  e92d4010          PUSH     {r4,lr}
;;;2013   {         
;;;2014       //sysprintf("-- EPDGetBacklight --\n"); 
;;;2015       if(GPIO_ReadBit(BACK_LIGHT_PIN_PORT, BACK_LIGHT_PORT_BIT))    
0008a0  e3a01901          MOV      r1,#0x4000
0008a4  e3a000c0          MOV      r0,#0xc0
0008a8  ebfffffe          BL       GPIO_ReadBit
0008ac  e3500000          CMP      r0,#0
0008b0  0a000001          BEQ      |L1.2236|
;;;2016           return TRUE;
0008b4  e3a00001          MOV      r0,#1
                  |L1.2232|
;;;2017       else
;;;2018           return FALSE;
;;;2019   }
0008b8  e8bd8010          POP      {r4,pc}
                  |L1.2236|
0008bc  e3a00000          MOV      r0,#0                 ;2018
0008c0  eafffffc          B        |L1.2232|
;;;2020   void EPDReSetBacklightTimeout(time_t time)
                          ENDP

                  epdDrvPreOffCallback PROC
;;;175    }
;;;176    static BOOL epdDrvPreOffCallback(int flag)
0008c4  e92d4010          PUSH     {r4,lr}
;;;177    {
0008c8  e1a04000          MOV      r4,r0
;;;178        //BOOL reVal = TRUE;
;;;179        //return reVal;
;;;180        if(EPDGetBacklight())
0008cc  ebfffffe          BL       EPDGetBacklight
0008d0  e3500000          CMP      r0,#0
0008d4  0a000001          BEQ      |L1.2272|
;;;181        {
;;;182            return FALSE;
0008d8  e3a00000          MOV      r0,#0
                  |L1.2268|
;;;183        }
;;;184        else
;;;185        {
;;;186            return TRUE;
;;;187        }
;;;188    }
0008dc  e8bd8010          POP      {r4,pc}
                  |L1.2272|
0008e0  e3a00001          MOV      r0,#1                 ;186
0008e4  eafffffc          B        |L1.2268|
;;;189    static BOOL epdDrvOffCallback(int flag)
                          ENDP

                  epdDrvOffCallback PROC
0008e8  e92d4010          PUSH     {r4,lr}
;;;190    {
0008ec  e1a04000          MOV      r4,r0
;;;191        //#if(ENABLE_SLEEP_FUNCTION)
;;;192        //#else
;;;193        EPDSetBacklight(FALSE);
0008f0  e3a00000          MOV      r0,#0
0008f4  ebfffffe          BL       EPDSetBacklight
;;;194        xSemaphoreTake(xSemaphore, portMAX_DELAY);     
0008f8  e3a03000          MOV      r3,#0
0008fc  e3e02000          MVN      r2,#0
000900  e1a01003          MOV      r1,r3
000904  e59f0358          LDR      r0,|L1.3172|
000908  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00090c  ebfffffe          BL       xQueueGenericReceive
;;;195        EPDEnterSleep();    
000910  ebfffffe          BL       EPDEnterSleep
;;;196        xSemaphoreGive(xSemaphore);  
000914  e3a03000          MOV      r3,#0
000918  e1a02003          MOV      r2,r3
00091c  e1a01003          MOV      r1,r3
000920  e59f033c          LDR      r0,|L1.3172|
000924  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
000928  ebfffffe          BL       xQueueGenericSend
;;;197        //#endif
;;;198    //setTotalPower(FALSE);    
;;;199        return TRUE;    
00092c  e3a00001          MOV      r0,#1
;;;200    }
000930  e8bd8010          POP      {r4,pc}
;;;201    static BOOL epdDrvOnCallback(int flag)
                          ENDP

                  epdDrvOnCallback PROC
000934  e1a01000          MOV      r1,r0
;;;202    {
;;;203    //setTotalPower(TRUE);  
;;;204        #if(ENABLE_SLEEP_FUNCTION)
;;;205        #else
;;;206        xSemaphoreTake(xSemaphore, portMAX_DELAY); 
;;;207        EPDExitSleep();
;;;208        xSemaphoreGive(xSemaphore); 
;;;209        #endif
;;;210        return TRUE; 
000938  e3a00001          MOV      r0,#1
;;;211    }
00093c  e12fff1e          BX       lr
;;;212    static BOOL epdDrvCheckStatus(int flag)
                          ENDP

                  epdDrvCheckStatus PROC
000940  e92d4010          PUSH     {r4,lr}
;;;213    {
000944  e1a04000          MOV      r4,r0
;;;214        if(EPDGetBacklight())
000948  ebfffffe          BL       EPDGetBacklight
00094c  e3500000          CMP      r0,#0
000950  0a000001          BEQ      |L1.2396|
;;;215        {
;;;216            return FALSE;
000954  e3a00000          MOV      r0,#0
                  |L1.2392|
;;;217        }
;;;218        else
;;;219        {
;;;220            return TRUE;
;;;221        }
;;;222    }
000958  e8bd8010          POP      {r4,pc}
                  |L1.2396|
00095c  e3a00001          MOV      r0,#1                 ;220
000960  eafffffc          B        |L1.2392|
;;;223    
                          ENDP

                  hwInit PROC
;;;309    
;;;310    static BOOL hwInit(void)
000964  e92d4010          PUSH     {r4,lr}
;;;311    {
;;;312        outpw(REG_CLK_PCLKEN0,inpw(REG_CLK_PCLKEN0) | (1<<3)); //Enable GPIO engin clock.
000968  e3a0020b          MOV      r0,#0xb0000000
00096c  e5900218          LDR      r0,[r0,#0x218]
000970  e3800008          ORR      r0,r0,#8
000974  e3a0120b          MOV      r1,#0xb0000000
000978  e5810218          STR      r0,[r1,#0x218]
;;;313    
;;;314        /* Set MFP_GPD14 to output (backlight) */
;;;315        outpw(REG_SYS_GPD_MFPH,(inpw(REG_SYS_GPD_MFPH) & ~(0xF<<24)));
00097c  e3a0020b          MOV      r0,#0xb0000000
000980  e590008c          LDR      r0,[r0,#0x8c]
000984  e3c0040f          BIC      r0,r0,#0xf000000
000988  e581008c          STR      r0,[r1,#0x8c]
;;;316        GPIO_OpenBit(BACK_LIGHT_PIN_PORT, BACK_LIGHT_PORT_BIT, DIR_OUTPUT, NO_PULL_UP);    
00098c  e3a03000          MOV      r3,#0
000990  e3a02001          MOV      r2,#1
000994  e3a01901          MOV      r1,#0x4000
000998  e3a000c0          MOV      r0,#0xc0
00099c  ebfffffe          BL       GPIO_OpenBit
;;;317        GPIO_SetBit(BACK_LIGHT_PIN_PORT, BACK_LIGHT_PORT_BIT);  
0009a0  e3a01901          MOV      r1,#0x4000
0009a4  e3a000c0          MOV      r0,#0xc0
0009a8  ebfffffe          BL       GPIO_SetBit
;;;318        
;;;319        //GPI1 Power pin
;;;320        outpw(REG_SYS_GPI_MFPL,(inpw(REG_SYS_GPI_MFPL) & ~(0xF<<4)) | (0x0<<4));
0009ac  e3a0020b          MOV      r0,#0xb0000000
0009b0  e59000b0          LDR      r0,[r0,#0xb0]
0009b4  e3c000f0          BIC      r0,r0,#0xf0
0009b8  e3a0120b          MOV      r1,#0xb0000000
0009bc  e58100b0          STR      r0,[r1,#0xb0]
;;;321        GPIO_OpenBit(POWER_PIN_PORT, POWER_PORT_BIT, DIR_OUTPUT, NO_PULL_UP);  
0009c0  e3a03000          MOV      r3,#0
0009c4  e3a02001          MOV      r2,#1
0009c8  e3a01002          MOV      r1,#2
0009cc  e3a00c02          MOV      r0,#0x200
0009d0  ebfffffe          BL       GPIO_OpenBit
;;;322        
;;;323        //RDY Pin
;;;324        //GPIO_OpenBit(READY_PIN_PORT, READY_PORT_BIT, DIR_INPUT, NO_PULL_UP);  
;;;325        GPIO_OpenBit(READY_PIN_PORT, READY_PORT_BIT, DIR_INPUT, PULL_UP);  //20200519 solve EPD flash error by Steven
0009d4  e3a03001          MOV      r3,#1
0009d8  e3a02000          MOV      r2,#0
0009dc  e3a01c02          MOV      r1,#0x200
0009e0  e1a00001          MOV      r0,r1
0009e4  ebfffffe          BL       GPIO_OpenBit
;;;326        
;;;327        //GPI0 reset pin
;;;328        outpw(REG_SYS_GPI_MFPL,(inpw(REG_SYS_GPI_MFPL) & ~(0xF<<0)) | (0x0<<0));
0009e8  e3a0020b          MOV      r0,#0xb0000000
0009ec  e59000b0          LDR      r0,[r0,#0xb0]
0009f0  e3c0000f          BIC      r0,r0,#0xf
0009f4  e3a0120b          MOV      r1,#0xb0000000
0009f8  e58100b0          STR      r0,[r1,#0xb0]
;;;329        GPIO_OpenBit(RESET_PIN_PORT, RESET_PORT_BIT, DIR_OUTPUT, NO_PULL_UP);
0009fc  e3a03000          MOV      r3,#0
000a00  e3a02001          MOV      r2,#1
000a04  e1a01002          MOV      r1,r2
000a08  e3a00c02          MOV      r0,#0x200
000a0c  ebfffffe          BL       GPIO_OpenBit
;;;330        GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT); 
000a10  e3a01001          MOV      r1,#1
000a14  e3a00c02          MOV      r0,#0x200
000a18  ebfffffe          BL       GPIO_SetBit
;;;331        
;;;332        EPDSetBacklight(TRUE);
000a1c  e3a00001          MOV      r0,#1
000a20  ebfffffe          BL       EPDSetBacklight
;;;333        
;;;334        reinitEpd();    
000a24  ebfffffe          BL       reinitEpd
;;;335        return TRUE;
000a28  e3a00001          MOV      r0,#1
;;;336    }
000a2c  e8bd8010          POP      {r4,pc}
;;;337    extern BOOL SysGetBooted(void);
                          ENDP

                  vLedBackLightTask PROC
;;;338    static void vLedBackLightTask( void *pvParameters )
000a30  e28f0e23          ADR      r0,|L1.3176|
;;;339    {
;;;340        //vTaskDelay(2000/portTICK_RATE_MS); 
;;;341        sysprintf("vLedBackLightTask Going...\r\n");     
000a34  ebfffffe          BL       sysprintf
;;;342        while(SysGetBooted() == FALSE)
000a38  ea000001          B        |L1.2628|
                  |L1.2620|
;;;343        {
;;;344            vTaskDelay(500/portTICK_RATE_MS);
000a3c  e3a00032          MOV      r0,#0x32
000a40  ebfffffe          BL       vTaskDelay
                  |L1.2628|
000a44  ebfffffe          BL       SysGetBooted
000a48  e3500000          CMP      r0,#0                 ;342
000a4c  0afffffa          BEQ      |L1.2620|
;;;345        }
;;;346        threadBackLightWaitTime = 5000/portTICK_RATE_MS;
000a50  e3a00f7d          MOV      r0,#0x1f4
000a54  e59f122c          LDR      r1,|L1.3208|
000a58  e5810000          STR      r0,[r1,#0]  ; threadBackLightWaitTime
;;;347        for(;;)
000a5c  e1a00000          MOV      r0,r0
                  |L1.2656|
;;;348        {     
;;;349            BaseType_t reval = xSemaphoreTake(xBackLightSemaphore, threadBackLightWaitTime);         
000a60  e3a03000          MOV      r3,#0
000a64  e59f021c          LDR      r0,|L1.3208|
000a68  e1a01003          MOV      r1,r3
000a6c  e5902000          LDR      r2,[r0,#0]  ; threadBackLightWaitTime
000a70  e59f0214          LDR      r0,|L1.3212|
000a74  e5900000          LDR      r0,[r0,#0]  ; xBackLightSemaphore
000a78  ebfffffe          BL       xQueueGenericReceive
000a7c  e1a04000          MOV      r4,r0
;;;350            if(reval != pdTRUE)
000a80  e3540001          CMP      r4,#1
000a84  0a000006          BEQ      |L1.2724|
;;;351            {//timeout
;;;352                terninalPrintf("vLedBackLightTask Error!!\r\n");
000a88  e28f0c02          ADR      r0,|L1.3216|
000a8c  ebfffffe          BL       terninalPrintf
;;;353                threadBackLightWaitTime = portMAX_DELAY;
000a90  e3e00000          MVN      r0,#0
000a94  e59f11ec          LDR      r1,|L1.3208|
000a98  e5810000          STR      r0,[r1,#0]  ; threadBackLightWaitTime
;;;354                EPDSetBacklight(FALSE);
000a9c  e3a00000          MOV      r0,#0
000aa0  ebfffffe          BL       EPDSetBacklight
                  |L1.2724|
;;;355            }
;;;356            else
;;;357            {
;;;358            }  
;;;359        }
000aa4  eaffffed          B        |L1.2656|
;;;360       
;;;361    }
;;;362    static BOOL swInit(void)
                          ENDP

                  swInit PROC
000aa8  e92d401c          PUSH     {r2-r4,lr}
;;;363    {
;;;364        PowerRegCallback(&epdDrvPowerCallabck);
000aac  e59f01f8          LDR      r0,|L1.3244|
000ab0  ebfffffe          BL       PowerRegCallback
;;;365        xSemaphore = xSemaphoreCreateMutex();  
000ab4  e3a00001          MOV      r0,#1
000ab8  ebfffffe          BL       xQueueCreateMutex
000abc  e59f11a0          LDR      r1,|L1.3172|
000ac0  e5810000          STR      r0,[r1,#0]  ; xSemaphore
;;;366        xBackLightSemaphore = xSemaphoreCreateBinary();
000ac4  e3a02003          MOV      r2,#3
000ac8  e3a01000          MOV      r1,#0
000acc  e3a00001          MOV      r0,#1
000ad0  ebfffffe          BL       xQueueGenericCreate
000ad4  e59f11b0          LDR      r1,|L1.3212|
000ad8  e5810000          STR      r0,[r1,#0]  ; xBackLightSemaphore
;;;367        xTaskCreate( vLedBackLightTask, "vLedBackLightTask", 1024, NULL, EPD_BACK_LIGHT_THREAD_PROI, NULL );
000adc  e3a00000          MOV      r0,#0
000ae0  e3a01001          MOV      r1,#1
000ae4  e58d0004          STR      r0,[sp,#4]
000ae8  e1a03000          MOV      r3,r0
000aec  e3a02b01          MOV      r2,#0x400
000af0  e58d1000          STR      r1,[sp,#0]
000af4  e28f1f6d          ADR      r1,|L1.3248|
000af8  e59f01c4          LDR      r0,|L1.3268|
000afc  ebfffffe          BL       xTaskCreate
;;;368        return TRUE;
000b00  e3a00001          MOV      r0,#1
;;;369    }
000b04  e8bd801c          POP      {r2-r4,pc}
;;;370    
                          ENDP

                  LCDWaitForReadyEx PROC
;;;371    static BOOL LCDWaitForReadyEx(void)
000b08  e92d4010          PUSH     {r4,lr}
;;;372    {
;;;373        //terninalPrintf("epdbadFlag = %d\r\n",epdbadFlag);
;;;374        //terninalPrintf("epdopenFlag = %d\r\n",epdopenFlag);
;;;375        if((epdbadFlag == TRUE) || (epdopenFlag == FALSE))
000b0c  e51f035c          LDR      r0,|L1.1976|
000b10  e5d00000          LDRB     r0,[r0,#0]  ; epdbadFlag
000b14  e3500001          CMP      r0,#1
000b18  0a000003          BEQ      |L1.2860|
000b1c  e51f0368          LDR      r0,|L1.1980|
000b20  e5d00000          LDRB     r0,[r0,#0]  ; epdopenFlag
000b24  e3500000          CMP      r0,#0
000b28  1a000001          BNE      |L1.2868|
                  |L1.2860|
;;;376            return TRUE;
000b2c  e3a00001          MOV      r0,#1
                  |L1.2864|
;;;377        
;;;378        //int timeOut = 60000000;
;;;379        int timeOut = 15000;
;;;380        
;;;381        while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0)
;;;382        {
;;;383            if(timeOut-- ==0)
;;;384            {
;;;385                epdbadFlag = TRUE;
;;;386                //BuzzerPlay(500, 200, 2, TRUE);
;;;387                return FALSE;
;;;388            }
;;;389            vTaskDelay(1/portTICK_RATE_MS);
;;;390        }
;;;391        return TRUE;
;;;392    }
000b30  e8bd8010          POP      {r4,pc}
                  |L1.2868|
000b34  e59f418c          LDR      r4,|L1.3272|
000b38  ea000009          B        |L1.2916|
                  |L1.2876|
000b3c  e1b00004          MOVS     r0,r4                 ;383
000b40  e2444001          SUB      r4,r4,#1              ;383
000b44  1a000004          BNE      |L1.2908|
000b48  e3a00001          MOV      r0,#1                 ;385
000b4c  e51f139c          LDR      r1,|L1.1976|
000b50  e5c10000          STRB     r0,[r1,#0]            ;385  ; epdbadFlag
000b54  e3a00000          MOV      r0,#0                 ;387
000b58  eafffff4          B        |L1.2864|
                  |L1.2908|
000b5c  e3a00000          MOV      r0,#0                 ;389
000b60  ebfffffe          BL       vTaskDelay
                  |L1.2916|
000b64  e3a01c02          MOV      r1,#0x200             ;381
000b68  e1a00001          MOV      r0,r1                 ;381
000b6c  ebfffffe          BL       GPIO_ReadBit
000b70  e3500000          CMP      r0,#0                 ;381
000b74  0afffff0          BEQ      |L1.2876|
000b78  e3a00001          MOV      r0,#1                 ;391
000b7c  eaffffeb          B        |L1.2864|
;;;393    static BOOL LCDWaitForReady(void)
                          ENDP

                  WriteData PROC
;;;567    }
;;;568    static BOOL WriteData(int data,int len)
000b80  e92d4070          PUSH     {r4-r6,lr}
;;;569    {
000b84  e1a04000          MOV      r4,r0
000b88  e1a05001          MOV      r5,r1
;;;570        if(LCDWaitForReady() == FALSE) 
000b8c  ebfffffe          BL       LCDWaitForReady
000b90  e3500000          CMP      r0,#0
000b94  1a000001          BNE      |L1.2976|
;;;571            return FALSE;
000b98  e3a00000          MOV      r0,#0
                  |L1.2972|
;;;572        //cs set low
;;;573        pSpiInterface->activeCSFunc(TRUE);
;;;574    
;;;575        //send write data preamble.
;;;576        pSpiInterface->writeFunc(0, 0x00);
;;;577        pSpiInterface->writeFunc(0, 0x00);
;;;578    
;;;579        if(LCDWaitForReady() == FALSE) 
;;;580            return FALSE;
;;;581    
;;;582        //Send Data
;;;583        pSpiInterface->writeFunc(0, (char)(data>>8));
;;;584        pSpiInterface->writeFunc(0, (char)data);
;;;585    
;;;586        //cs set high.
;;;587        pSpiInterface->activeCSFunc(FALSE);
;;;588        
;;;589        if(LCDWaitForReady() == FALSE) 
;;;590            return FALSE;
;;;591        
;;;592        return TRUE;
;;;593    }
000b9c  e8bd8070          POP      {r4-r6,pc}
                  |L1.2976|
000ba0  e51f0948          LDR      r0,|L1.608|
000ba4  e5900000          LDR      r0,[r0,#0]            ;573  ; pSpiInterface
000ba8  e590100c          LDR      r1,[r0,#0xc]          ;573
000bac  e3a00001          MOV      r0,#1                 ;573
000bb0  e12fff31          BLX      r1                    ;573
000bb4  e51f095c          LDR      r0,|L1.608|
000bb8  e5900000          LDR      r0,[r0,#0]            ;576  ; pSpiInterface
000bbc  e3a01000          MOV      r1,#0                 ;576
000bc0  e5902004          LDR      r2,[r0,#4]            ;576
000bc4  e1a00001          MOV      r0,r1                 ;576
000bc8  e12fff32          BLX      r2                    ;576
000bcc  e51f0974          LDR      r0,|L1.608|
000bd0  e5900000          LDR      r0,[r0,#0]            ;577  ; pSpiInterface
000bd4  e3a01000          MOV      r1,#0                 ;577
000bd8  e5902004          LDR      r2,[r0,#4]            ;577
000bdc  e1a00001          MOV      r0,r1                 ;577
000be0  e12fff32          BLX      r2                    ;577
000be4  ebfffffe          BL       LCDWaitForReady
000be8  e3500000          CMP      r0,#0                 ;579
000bec  1a000001          BNE      |L1.3064|
000bf0  e3a00000          MOV      r0,#0                 ;580
000bf4  eaffffe8          B        |L1.2972|
                  |L1.3064|
000bf8  e1a00804          LSL      r0,r4,#16             ;583
000bfc  e1a01c20          LSR      r1,r0,#24             ;583
000c00  e51f09a8          LDR      r0,|L1.608|
000c04  e5900000          LDR      r0,[r0,#0]            ;583  ; pSpiInterface
000c08  e5902004          LDR      r2,[r0,#4]            ;583
000c0c  e3a00000          MOV      r0,#0                 ;583
000c10  e12fff32          BLX      r2                    ;583
000c14  e20410ff          AND      r1,r4,#0xff           ;584
000c18  e51f09c0          LDR      r0,|L1.608|
000c1c  e5900000          LDR      r0,[r0,#0]            ;584  ; pSpiInterface
000c20  e5902004          LDR      r2,[r0,#4]            ;584
000c24  e3a00000          MOV      r0,#0                 ;584
000c28  e12fff32          BLX      r2                    ;584
000c2c  e51f09d4          LDR      r0,|L1.608|
000c30  e5900000          LDR      r0,[r0,#0]            ;587  ; pSpiInterface
000c34  e590100c          LDR      r1,[r0,#0xc]          ;587
000c38  e3a00000          MOV      r0,#0                 ;587
000c3c  e12fff31          BLX      r1                    ;587
000c40  ebfffffe          BL       LCDWaitForReady
000c44  e3500000          CMP      r0,#0                 ;589
000c48  1a000001          BNE      |L1.3156|
000c4c  e3a00000          MOV      r0,#0                 ;590
000c50  eaffffd1          B        |L1.2972|
                  |L1.3156|
000c54  e3a00001          MOV      r0,#1                 ;592
000c58  eaffffcf          B        |L1.2972|
                  |L1.3164|
                          DCD      sleepEnteredFlag
                  |L1.3168|
                          DCD      sleepFunctionFlag
                  |L1.3172|
                          DCD      xSemaphore
                  |L1.3176|
000c68  764c6564          DCB      "vLedBackLightTask Going...\r\n",0
000c6c  4261636b
000c70  4c696768
000c74  74546173
000c78  6b20476f
000c7c  696e672e
000c80  2e2e0d0a
000c84  00      
000c85  00                DCB      0
000c86  00                DCB      0
000c87  00                DCB      0
                  |L1.3208|
                          DCD      threadBackLightWaitTime
                  |L1.3212|
                          DCD      xBackLightSemaphore
                  |L1.3216|
000c90  764c6564          DCB      "vLedBackLightTask Error!!\r\n",0
000c94  4261636b
000c98  4c696768
000c9c  74546173
000ca0  6b204572
000ca4  726f7221
000ca8  210d0a00
                  |L1.3244|
                          DCD      epdDrvPowerCallabck
                  |L1.3248|
000cb0  764c6564          DCB      "vLedBackLightTask",0
000cb4  4261636b
000cb8  4c696768
000cbc  74546173
000cc0  6b00    
000cc2  00                DCB      0
000cc3  00                DCB      0
                  |L1.3268|
                          DCD      vLedBackLightTask
                  |L1.3272|
                          DCD      0x00003a98
                          ENDP

                  ReadDataEx PROC
;;;595    
;;;596    static TWord ReadDataEx(int len)
000ccc  e92d407c          PUSH     {r2-r6,lr}
;;;597    {
000cd0  e1a06000          MOV      r6,r0
;;;598        uint32_t rBuff[2];
;;;599        TWord buffer;
;;;600        int wCmd = 0x1000;
000cd4  e3a05a01          MOV      r5,#0x1000
;;;601        //sysprintf("Read cmd start.!!\n");
;;;602        
;;;603        //wait ready.
;;;604        if(LCDWaitForReady() == FALSE) 
000cd8  ebfffffe          BL       LCDWaitForReady
000cdc  e3500000          CMP      r0,#0
000ce0  1a000001          BNE      |L1.3308|
;;;605            return 0xFF;
000ce4  e3a000ff          MOV      r0,#0xff
                  |L1.3304|
;;;606        //cs set low.
;;;607        pSpiInterface->activeCSFunc(TRUE);
;;;608    
;;;609        //spi write preamble.
;;;610        pSpiInterface->writeFunc(0, (char)(wCmd>>8));
;;;611        pSpiInterface->writeFunc(0, (char)wCmd);
;;;612    
;;;613        
;;;614        if(LCDWaitForReady() == FALSE) 
;;;615            return 0xFF; //FALSE;
;;;616        
;;;617        pSpiInterface->writeFunc(0, 0x00);
;;;618        rBuff[0] = pSpiInterface->readFunc(0);
;;;619        pSpiInterface->writeFunc(0, 0x00);
;;;620        rBuff[1] = pSpiInterface->readFunc(0);
;;;621    
;;;622        //if(LCDWaitForReady() == FALSE) 
;;;623            //return 0x0;
;;;624        
;;;625        //Read Data.
;;;626        //pSpiInterface->writeFunc(0, 0x00);
;;;627        //pSpiInterface->readFunc(0);
;;;628    
;;;629    
;;;630        if(LCDWaitForReady() == FALSE)
;;;631            return 0xFF;
;;;632        
;;;633        //pSpiInterface->writeFunc(0, 0x00);
;;;634        //pSpiInterface->readFunc(0);
;;;635        //pSpiInterface->readFunc(0);
;;;636        pSpiInterface->writeFunc(0, 0x00);
;;;637        rBuff[0] = pSpiInterface->readFunc(0);
;;;638        pSpiInterface->writeFunc(0, 0x00);
;;;639        rBuff[1] = pSpiInterface->readFunc(0);
;;;640        
;;;641        //combine
;;;642        buffer = ((rBuff[1]&0xff) | ((rBuff[0]&0xff)<<8));
;;;643    
;;;644        //cs set high.
;;;645        pSpiInterface->activeCSFunc(FALSE);
;;;646        return buffer;
;;;647    }  
000ce8  e8bd807c          POP      {r2-r6,pc}
                  |L1.3308|
000cec  e51f0a94          LDR      r0,|L1.608|
000cf0  e5900000          LDR      r0,[r0,#0]            ;607  ; pSpiInterface
000cf4  e590100c          LDR      r1,[r0,#0xc]          ;607
000cf8  e3a00001          MOV      r0,#1                 ;607
000cfc  e12fff31          BLX      r1                    ;607
000d00  e1a00805          LSL      r0,r5,#16             ;610
000d04  e1a01c20          LSR      r1,r0,#24             ;610
000d08  e51f0ab0          LDR      r0,|L1.608|
000d0c  e5900000          LDR      r0,[r0,#0]            ;610  ; pSpiInterface
000d10  e5902004          LDR      r2,[r0,#4]            ;610
000d14  e3a00000          MOV      r0,#0                 ;610
000d18  e12fff32          BLX      r2                    ;610
000d1c  e20510ff          AND      r1,r5,#0xff           ;611
000d20  e51f0ac8          LDR      r0,|L1.608|
000d24  e5900000          LDR      r0,[r0,#0]            ;611  ; pSpiInterface
000d28  e5902004          LDR      r2,[r0,#4]            ;611
000d2c  e3a00000          MOV      r0,#0                 ;611
000d30  e12fff32          BLX      r2                    ;611
000d34  ebfffffe          BL       LCDWaitForReady
000d38  e3500000          CMP      r0,#0                 ;614
000d3c  1a000001          BNE      |L1.3400|
000d40  e3a000ff          MOV      r0,#0xff              ;615
000d44  eaffffe7          B        |L1.3304|
                  |L1.3400|
000d48  e51f0af0          LDR      r0,|L1.608|
000d4c  e5900000          LDR      r0,[r0,#0]            ;617  ; pSpiInterface
000d50  e3a01000          MOV      r1,#0                 ;617
000d54  e5902004          LDR      r2,[r0,#4]            ;617
000d58  e1a00001          MOV      r0,r1                 ;617
000d5c  e12fff32          BLX      r2                    ;617
000d60  e51f0b08          LDR      r0,|L1.608|
000d64  e5900000          LDR      r0,[r0,#0]            ;618  ; pSpiInterface
000d68  e5901008          LDR      r1,[r0,#8]            ;618
000d6c  e3a00000          MOV      r0,#0                 ;618
000d70  e12fff31          BLX      r1                    ;618
000d74  e58d0000          STR      r0,[sp,#0]            ;618
000d78  e51f0b20          LDR      r0,|L1.608|
000d7c  e5900000          LDR      r0,[r0,#0]            ;619  ; pSpiInterface
000d80  e3a01000          MOV      r1,#0                 ;619
000d84  e5902004          LDR      r2,[r0,#4]            ;619
000d88  e1a00001          MOV      r0,r1                 ;619
000d8c  e12fff32          BLX      r2                    ;619
000d90  e51f0b38          LDR      r0,|L1.608|
000d94  e5900000          LDR      r0,[r0,#0]            ;620  ; pSpiInterface
000d98  e5901008          LDR      r1,[r0,#8]            ;620
000d9c  e3a00000          MOV      r0,#0                 ;620
000da0  e12fff31          BLX      r1                    ;620
000da4  e58d0004          STR      r0,[sp,#4]            ;620
000da8  ebfffffe          BL       LCDWaitForReady
000dac  e3500000          CMP      r0,#0                 ;630
000db0  1a000001          BNE      |L1.3516|
000db4  e3a000ff          MOV      r0,#0xff              ;631
000db8  eaffffca          B        |L1.3304|
                  |L1.3516|
000dbc  e51f0b64          LDR      r0,|L1.608|
000dc0  e5900000          LDR      r0,[r0,#0]            ;636  ; pSpiInterface
000dc4  e3a01000          MOV      r1,#0                 ;636
000dc8  e5902004          LDR      r2,[r0,#4]            ;636
000dcc  e1a00001          MOV      r0,r1                 ;636
000dd0  e12fff32          BLX      r2                    ;636
000dd4  e51f0b7c          LDR      r0,|L1.608|
000dd8  e5900000          LDR      r0,[r0,#0]            ;637  ; pSpiInterface
000ddc  e5901008          LDR      r1,[r0,#8]            ;637
000de0  e3a00000          MOV      r0,#0                 ;637
000de4  e12fff31          BLX      r1                    ;637
000de8  e58d0000          STR      r0,[sp,#0]            ;637
000dec  e51f0b94          LDR      r0,|L1.608|
000df0  e5900000          LDR      r0,[r0,#0]            ;638  ; pSpiInterface
000df4  e3a01000          MOV      r1,#0                 ;638
000df8  e5902004          LDR      r2,[r0,#4]            ;638
000dfc  e1a00001          MOV      r0,r1                 ;638
000e00  e12fff32          BLX      r2                    ;638
000e04  e51f0bac          LDR      r0,|L1.608|
000e08  e5900000          LDR      r0,[r0,#0]            ;639  ; pSpiInterface
000e0c  e5901008          LDR      r1,[r0,#8]            ;639
000e10  e3a00000          MOV      r0,#0                 ;639
000e14  e12fff31          BLX      r1                    ;639
000e18  e58d0004          STR      r0,[sp,#4]            ;639
000e1c  e59d0004          LDR      r0,[sp,#4]            ;642
000e20  e20000ff          AND      r0,r0,#0xff           ;642
000e24  e59d1000          LDR      r1,[sp,#0]            ;642
000e28  e20110ff          AND      r1,r1,#0xff           ;642
000e2c  e1804401          ORR      r4,r0,r1,LSL #8       ;642
000e30  e51f0bd8          LDR      r0,|L1.608|
000e34  e5900000          LDR      r0,[r0,#0]            ;645  ; pSpiInterface
000e38  e590100c          LDR      r1,[r0,#0xc]          ;645
000e3c  e3a00000          MOV      r0,#0                 ;645
000e40  e12fff31          BLX      r1                    ;645
000e44  e1a00004          MOV      r0,r4                 ;646
000e48  eaffffa6          B        |L1.3304|
;;;648    
                          ENDP

                  ReadData PROC
;;;651    
;;;652    static TWord ReadData(int len)
000e4c  e92d407c          PUSH     {r2-r6,lr}
;;;653    {
000e50  e1a06000          MOV      r6,r0
;;;654        uint32_t rBuff[2];
;;;655        TWord buffer;
;;;656        int wCmd = 0x1000;
000e54  e3a05a01          MOV      r5,#0x1000
;;;657        //sysprintf("Read cmd start.!!\n");
;;;658        
;;;659        //wait ready.
;;;660        if(LCDWaitForReady() == FALSE) 
000e58  ebfffffe          BL       LCDWaitForReady
000e5c  e3500000          CMP      r0,#0
000e60  1a000001          BNE      |L1.3692|
;;;661            return 0x0;
000e64  e3a00000          MOV      r0,#0
                  |L1.3688|
;;;662        //cs set low.
;;;663        pSpiInterface->activeCSFunc(TRUE);
;;;664    
;;;665        //spi write preamble.
;;;666        pSpiInterface->writeFunc(0, (char)(wCmd>>8));
;;;667        pSpiInterface->readFunc(0);
;;;668        
;;;669        if(LCDWaitForReady() == FALSE) 
;;;670            return FALSE;
;;;671        
;;;672        pSpiInterface->writeFunc(0, (char)wCmd);
;;;673        pSpiInterface->readFunc(0);
;;;674    
;;;675    
;;;676        if(LCDWaitForReady() == FALSE) 
;;;677            return 0x0;
;;;678        
;;;679        //Read Data.
;;;680        pSpiInterface->writeFunc(0, 0x00);
;;;681        pSpiInterface->readFunc(0);
;;;682        rBuff[0] = pSpiInterface->readFunc(0);
;;;683    
;;;684        if(LCDWaitForReady() == FALSE)
;;;685            return 0x0;
;;;686        
;;;687        pSpiInterface->writeFunc(0, 0x00);
;;;688        pSpiInterface->readFunc(0);
;;;689        rBuff[1] = pSpiInterface->readFunc(0);
;;;690        
;;;691        //combine
;;;692        buffer = ((rBuff[1]&0xff) | ((rBuff[0]&0xff)<<8));
;;;693    
;;;694        //cs set high.
;;;695        pSpiInterface->activeCSFunc(FALSE);
;;;696        return buffer;
;;;697    }  
000e68  e8bd807c          POP      {r2-r6,pc}
                  |L1.3692|
000e6c  e51f0c14          LDR      r0,|L1.608|
000e70  e5900000          LDR      r0,[r0,#0]            ;663  ; pSpiInterface
000e74  e590100c          LDR      r1,[r0,#0xc]          ;663
000e78  e3a00001          MOV      r0,#1                 ;663
000e7c  e12fff31          BLX      r1                    ;663
000e80  e1a00805          LSL      r0,r5,#16             ;666
000e84  e1a01c20          LSR      r1,r0,#24             ;666
000e88  e51f0c30          LDR      r0,|L1.608|
000e8c  e5900000          LDR      r0,[r0,#0]            ;666  ; pSpiInterface
000e90  e5902004          LDR      r2,[r0,#4]            ;666
000e94  e3a00000          MOV      r0,#0                 ;666
000e98  e12fff32          BLX      r2                    ;666
000e9c  e51f0c44          LDR      r0,|L1.608|
000ea0  e5900000          LDR      r0,[r0,#0]            ;667  ; pSpiInterface
000ea4  e5901008          LDR      r1,[r0,#8]            ;667
000ea8  e3a00000          MOV      r0,#0                 ;667
000eac  e12fff31          BLX      r1                    ;667
000eb0  ebfffffe          BL       LCDWaitForReady
000eb4  e3500000          CMP      r0,#0                 ;669
000eb8  1a000001          BNE      |L1.3780|
000ebc  e3a00000          MOV      r0,#0                 ;670
000ec0  eaffffe8          B        |L1.3688|
                  |L1.3780|
000ec4  e20510ff          AND      r1,r5,#0xff           ;672
000ec8  e51f0c70          LDR      r0,|L1.608|
000ecc  e5900000          LDR      r0,[r0,#0]            ;672  ; pSpiInterface
000ed0  e5902004          LDR      r2,[r0,#4]            ;672
000ed4  e3a00000          MOV      r0,#0                 ;672
000ed8  e12fff32          BLX      r2                    ;672
000edc  e51f0c84          LDR      r0,|L1.608|
000ee0  e5900000          LDR      r0,[r0,#0]            ;673  ; pSpiInterface
000ee4  e5901008          LDR      r1,[r0,#8]            ;673
000ee8  e3a00000          MOV      r0,#0                 ;673
000eec  e12fff31          BLX      r1                    ;673
000ef0  ebfffffe          BL       LCDWaitForReady
000ef4  e3500000          CMP      r0,#0                 ;676
000ef8  1a000001          BNE      |L1.3844|
000efc  e3a00000          MOV      r0,#0                 ;677
000f00  eaffffd8          B        |L1.3688|
                  |L1.3844|
000f04  e51f0cac          LDR      r0,|L1.608|
000f08  e5900000          LDR      r0,[r0,#0]            ;680  ; pSpiInterface
000f0c  e3a01000          MOV      r1,#0                 ;680
000f10  e5902004          LDR      r2,[r0,#4]            ;680
000f14  e1a00001          MOV      r0,r1                 ;680
000f18  e12fff32          BLX      r2                    ;680
000f1c  e51f0cc4          LDR      r0,|L1.608|
000f20  e5900000          LDR      r0,[r0,#0]            ;681  ; pSpiInterface
000f24  e5901008          LDR      r1,[r0,#8]            ;681
000f28  e3a00000          MOV      r0,#0                 ;681
000f2c  e12fff31          BLX      r1                    ;681
000f30  e51f0cd8          LDR      r0,|L1.608|
000f34  e5900000          LDR      r0,[r0,#0]            ;682  ; pSpiInterface
000f38  e5901008          LDR      r1,[r0,#8]            ;682
000f3c  e3a00000          MOV      r0,#0                 ;682
000f40  e12fff31          BLX      r1                    ;682
000f44  e58d0000          STR      r0,[sp,#0]            ;682
000f48  ebfffffe          BL       LCDWaitForReady
000f4c  e3500000          CMP      r0,#0                 ;684
000f50  1a000001          BNE      |L1.3932|
000f54  e3a00000          MOV      r0,#0                 ;685
000f58  eaffffc2          B        |L1.3688|
                  |L1.3932|
000f5c  e51f0d04          LDR      r0,|L1.608|
000f60  e5900000          LDR      r0,[r0,#0]            ;687  ; pSpiInterface
000f64  e3a01000          MOV      r1,#0                 ;687
000f68  e5902004          LDR      r2,[r0,#4]            ;687
000f6c  e1a00001          MOV      r0,r1                 ;687
000f70  e12fff32          BLX      r2                    ;687
000f74  e51f0d1c          LDR      r0,|L1.608|
000f78  e5900000          LDR      r0,[r0,#0]            ;688  ; pSpiInterface
000f7c  e5901008          LDR      r1,[r0,#8]            ;688
000f80  e3a00000          MOV      r0,#0                 ;688
000f84  e12fff31          BLX      r1                    ;688
000f88  e51f0d30          LDR      r0,|L1.608|
000f8c  e5900000          LDR      r0,[r0,#0]            ;689  ; pSpiInterface
000f90  e5901008          LDR      r1,[r0,#8]            ;689
000f94  e3a00000          MOV      r0,#0                 ;689
000f98  e12fff31          BLX      r1                    ;689
000f9c  e58d0004          STR      r0,[sp,#4]            ;689
000fa0  e59d0004          LDR      r0,[sp,#4]            ;692
000fa4  e20000ff          AND      r0,r0,#0xff           ;692
000fa8  e59d1000          LDR      r1,[sp,#0]            ;692
000fac  e20110ff          AND      r1,r1,#0xff           ;692
000fb0  e1804401          ORR      r4,r0,r1,LSL #8       ;692
000fb4  e51f0d5c          LDR      r0,|L1.608|
000fb8  e5900000          LDR      r0,[r0,#0]            ;695  ; pSpiInterface
000fbc  e590100c          LDR      r1,[r0,#0xc]          ;695
000fc0  e3a00000          MOV      r0,#0                 ;695
000fc4  e12fff31          BLX      r1                    ;695
000fc8  e1a00004          MOV      r0,r4                 ;696
000fcc  eaffffa5          B        |L1.3688|
;;;698    
                          ENDP

                  ReadVersionData PROC
;;;707     //                     TWord * buffer5,TWord * buffer6,TWord * buffer7,TWord * buffer8)
;;;708     static TWord ReadVersionData(TWord * readbuffer)
000fd0  e92d4070          PUSH     {r4-r6,lr}
;;;709    {
000fd4  e24dd0a8          SUB      sp,sp,#0xa8
000fd8  e1a05000          MOV      r5,r0
;;;710        uint32_t rBuff[42];
;;;711        TWord buffer;
;;;712        int wCmd = 0x1000;
000fdc  e3a06a01          MOV      r6,#0x1000
;;;713        //sysprintf("Read cmd start.!!\n");
;;;714        
;;;715        //wait ready.
;;;716        if(LCDWaitForReady() == FALSE) 
000fe0  ebfffffe          BL       LCDWaitForReady
000fe4  e3500000          CMP      r0,#0
000fe8  1a000002          BNE      |L1.4088|
;;;717            return 0x0;
000fec  e3a00000          MOV      r0,#0
                  |L1.4080|
000ff0  e28dd0a8          ADD      sp,sp,#0xa8
;;;718        //cs set low.
;;;719        pSpiInterface->activeCSFunc(TRUE);
;;;720    
;;;721        //spi write preamble.
;;;722        pSpiInterface->writeFunc(0, (char)(wCmd>>8));
;;;723        pSpiInterface->readFunc(0);
;;;724        
;;;725        if(LCDWaitForReady() == FALSE) 
;;;726            return FALSE;
;;;727        
;;;728        pSpiInterface->writeFunc(0, (char)wCmd);
;;;729        pSpiInterface->readFunc(0);
;;;730    
;;;731        for(int i=0 ;i<20;i++)
;;;732        {
;;;733    
;;;734        if(LCDWaitForReady() == FALSE) 
;;;735            return 0x0;
;;;736        
;;;737        //Read Data.
;;;738        pSpiInterface->writeFunc(0, 0x00);
;;;739        pSpiInterface->readFunc(0);
;;;740        rBuff[2*i] = pSpiInterface->readFunc(0);
;;;741    
;;;742        if(LCDWaitForReady() == FALSE)
;;;743            return 0x0;
;;;744        
;;;745        pSpiInterface->writeFunc(0, 0x00);
;;;746        pSpiInterface->readFunc(0);
;;;747        rBuff[2*i+1] = pSpiInterface->readFunc(0);
;;;748        
;;;749        
;;;750        }
;;;751        
;;;752        
;;;753        
;;;754        for(int t=0 ;t<20;t++)
;;;755        {
;;;756            *(readbuffer + t) = ((rBuff[2*(t+1)]&0xff) | ((rBuff[2*(t+1)+1]&0xff)<<8));
;;;757        }
;;;758    
;;;759        
;;;760        //cs set high.
;;;761        pSpiInterface->activeCSFunc(FALSE);
;;;762        return buffer;
;;;763    }
000ff4  e8bd8070          POP      {r4-r6,pc}
                  |L1.4088|
000ff8  e51f0da0          LDR      r0,|L1.608|
000ffc  e5900000          LDR      r0,[r0,#0]            ;719  ; pSpiInterface
001000  e590100c          LDR      r1,[r0,#0xc]          ;719
001004  e3a00001          MOV      r0,#1                 ;719
001008  e12fff31          BLX      r1                    ;719
00100c  e1a00806          LSL      r0,r6,#16             ;722
001010  e1a01c20          LSR      r1,r0,#24             ;722
001014  e51f0dbc          LDR      r0,|L1.608|
001018  e5900000          LDR      r0,[r0,#0]            ;722  ; pSpiInterface
00101c  e5902004          LDR      r2,[r0,#4]            ;722
001020  e3a00000          MOV      r0,#0                 ;722
001024  e12fff32          BLX      r2                    ;722
001028  e51f0dd0          LDR      r0,|L1.608|
00102c  e5900000          LDR      r0,[r0,#0]            ;723  ; pSpiInterface
001030  e5901008          LDR      r1,[r0,#8]            ;723
001034  e3a00000          MOV      r0,#0                 ;723
001038  e12fff31          BLX      r1                    ;723
00103c  ebfffffe          BL       LCDWaitForReady
001040  e3500000          CMP      r0,#0                 ;725
001044  1a000001          BNE      |L1.4176|
001048  e3a00000          MOV      r0,#0                 ;726
00104c  eaffffe7          B        |L1.4080|
                  |L1.4176|
001050  e20610ff          AND      r1,r6,#0xff           ;728
001054  e51f0dfc          LDR      r0,|L1.608|
001058  e5900000          LDR      r0,[r0,#0]            ;728  ; pSpiInterface
00105c  e5902004          LDR      r2,[r0,#4]            ;728
001060  e3a00000          MOV      r0,#0                 ;728
001064  e12fff32          BLX      r2                    ;728
001068  e51f0e10          LDR      r0,|L1.608|
00106c  e5900000          LDR      r0,[r0,#0]            ;729  ; pSpiInterface
001070  e5901008          LDR      r1,[r0,#8]            ;729
001074  e3a00000          MOV      r0,#0                 ;729
001078  e12fff31          BLX      r1                    ;729
00107c  e3a04000          MOV      r4,#0                 ;731
001080  ea00002f          B        |L1.4420|
                  |L1.4228|
001084  ebfffffe          BL       LCDWaitForReady
001088  e3500000          CMP      r0,#0                 ;734
00108c  1a000001          BNE      |L1.4248|
001090  e3a00000          MOV      r0,#0                 ;735
001094  eaffffd5          B        |L1.4080|
                  |L1.4248|
001098  e51f0e40          LDR      r0,|L1.608|
00109c  e5900000          LDR      r0,[r0,#0]            ;738  ; pSpiInterface
0010a0  e3a01000          MOV      r1,#0                 ;738
0010a4  e5902004          LDR      r2,[r0,#4]            ;738
0010a8  e1a00001          MOV      r0,r1                 ;738
0010ac  e12fff32          BLX      r2                    ;738
0010b0  e51f0e58          LDR      r0,|L1.608|
0010b4  e5900000          LDR      r0,[r0,#0]            ;739  ; pSpiInterface
0010b8  e5901008          LDR      r1,[r0,#8]            ;739
0010bc  e3a00000          MOV      r0,#0                 ;739
0010c0  e12fff31          BLX      r1                    ;739
0010c4  e51f0e6c          LDR      r0,|L1.608|
0010c8  e5900000          LDR      r0,[r0,#0]            ;740  ; pSpiInterface
0010cc  e5901008          LDR      r1,[r0,#8]            ;740
0010d0  e3a00000          MOV      r0,#0                 ;740
0010d4  e12fff31          BLX      r1                    ;740
0010d8  e1a01084          LSL      r1,r4,#1              ;740
0010dc  e78d0101          STR      r0,[sp,r1,LSL #2]     ;740
0010e0  ebfffffe          BL       LCDWaitForReady
0010e4  e3500000          CMP      r0,#0                 ;742
0010e8  1a000001          BNE      |L1.4340|
0010ec  e3a00000          MOV      r0,#0                 ;743
0010f0  eaffffbe          B        |L1.4080|
                  |L1.4340|
0010f4  e51f0e9c          LDR      r0,|L1.608|
0010f8  e5900000          LDR      r0,[r0,#0]            ;745  ; pSpiInterface
0010fc  e3a01000          MOV      r1,#0                 ;745
001100  e5902004          LDR      r2,[r0,#4]            ;745
001104  e1a00001          MOV      r0,r1                 ;745
001108  e12fff32          BLX      r2                    ;745
00110c  e51f0eb4          LDR      r0,|L1.608|
001110  e5900000          LDR      r0,[r0,#0]            ;746  ; pSpiInterface
001114  e5901008          LDR      r1,[r0,#8]            ;746
001118  e3a00000          MOV      r0,#0                 ;746
00111c  e12fff31          BLX      r1                    ;746
001120  e51f0ec8          LDR      r0,|L1.608|
001124  e5900000          LDR      r0,[r0,#0]            ;747  ; pSpiInterface
001128  e5901008          LDR      r1,[r0,#8]            ;747
00112c  e3a00000          MOV      r0,#0                 ;747
001130  e12fff31          BLX      r1                    ;747
001134  e1a01084          LSL      r1,r4,#1              ;747
001138  e2811001          ADD      r1,r1,#1              ;747
00113c  e78d0101          STR      r0,[sp,r1,LSL #2]     ;747
001140  e2844001          ADD      r4,r4,#1              ;731
                  |L1.4420|
001144  e3540014          CMP      r4,#0x14              ;731
001148  baffffcd          BLT      |L1.4228|
00114c  e3a00000          MOV      r0,#0                 ;754
001150  ea00000a          B        |L1.4480|
                  |L1.4436|
001154  e2801001          ADD      r1,r0,#1              ;756
001158  e1a01081          LSL      r1,r1,#1              ;756
00115c  e7dd1101          LDRB     r1,[sp,r1,LSL #2]     ;756
001160  e2802001          ADD      r2,r0,#1              ;756
001164  e1a02082          LSL      r2,r2,#1              ;756
001168  e2822001          ADD      r2,r2,#1              ;756
00116c  e7dd2102          LDRB     r2,[sp,r2,LSL #2]     ;756
001170  e1811402          ORR      r1,r1,r2,LSL #8       ;756
001174  e0852080          ADD      r2,r5,r0,LSL #1       ;756
001178  e1c210b0          STRH     r1,[r2,#0]            ;756
00117c  e2800001          ADD      r0,r0,#1              ;754
                  |L1.4480|
001180  e3500014          CMP      r0,#0x14              ;754
001184  bafffff2          BLT      |L1.4436|
001188  e51f0f30          LDR      r0,|L1.608|
00118c  e5900000          LDR      r0,[r0,#0]            ;761  ; pSpiInterface
001190  e590100c          LDR      r1,[r0,#0xc]          ;761
001194  e3a00000          MOV      r0,#0                 ;761
001198  e12fff31          BLX      r1                    ;761
00119c  e1a00007          MOV      r0,r7                 ;762
0011a0  eaffff92          B        |L1.4080|
;;;764    
                          ENDP

                  GetIT8951SystemInfo PROC
;;;772    
;;;773    static BOOL GetIT8951SystemInfo(void)
0011a4  e92d4030          PUSH     {r4,r5,lr}
;;;774    {
0011a8  e24dd02c          SUB      sp,sp,#0x2c
;;;775        int i;
;;;776        I80IT8951DevInfo gstI80DevInfo;
;;;777        TWord* pusWord = (TWord*)&gstI80DevInfo;
0011ac  e28d5004          ADD      r5,sp,#4
;;;778        I80IT8951DevInfo* pstDevInfo;
;;;779        memset(&gstI80DevInfo, 0x0, sizeof(I80IT8951DevInfo));
0011b0  e3a01028          MOV      r1,#0x28
0011b4  e28d0004          ADD      r0,sp,#4
0011b8  ebfffffe          BL       __aeabi_memclr4
;;;780        //Send I80 CMD
;;;781        WriteCmdCode(USDEF_I80_CMD_GET_DEV_INFO, 2);
0011bc  e3a01002          MOV      r1,#2
0011c0  e2810c03          ADD      r0,r1,#0x300
0011c4  ebfffffe          BL       WriteCmdCode
;;;782        //Get System Info
;;;783        
;;;784    
;;;785        //for(i=0; i<sizeof(I80IT8951DevInfo)/2; i++)
;;;786        //for(i=0; i<sizeof(I80IT8951DevInfo)/40; i++)
;;;787        //{
;;;788    
;;;789            
;;;790            //pusWord[i] = ReadData(2);
;;;791            
;;;792            
;;;793            ReadVersionData(pusWord);
0011c8  e1a00005          MOV      r0,r5
0011cc  ebfffffe          BL       ReadVersionData
;;;794            
;;;795            //for(int j=0;j<20;j++)
;;;796           // {
;;;797            //    terninalPrintf ("pusWord[%d] = %04x\r\n",j ,pusWord[j]);
;;;798            //}
;;;799            
;;;800            
;;;801    
;;;802       // }
;;;803        memset((uint8_t*)tempFWVersion,0x00,16);
0011d0  e3a01010          MOV      r1,#0x10
0011d4  e59f0224          LDR      r0,|L1.5120|
0011d8  ebfffffe          BL       __aeabi_memclr
;;;804        memset((uint8_t*)tempLUTVersion,0x00,16);
0011dc  e3a01010          MOV      r1,#0x10
0011e0  e59f021c          LDR      r0,|L1.5124|
0011e4  ebfffffe          BL       __aeabi_memclr
;;;805        if(pusWord[0] == 0xFFFF)
0011e8  e1d500b0          LDRH     r0,[r5,#0]
0011ec  e2401cff          SUB      r1,r0,#0xff00
0011f0  e25110ff          SUBS     r1,r1,#0xff
0011f4  1a000002          BNE      |L1.4612|
;;;806            return FALSE;
0011f8  e3a00000          MOV      r0,#0
                  |L1.4604|
0011fc  e28dd02c          ADD      sp,sp,#0x2c
;;;807        //Show Device information of IT8951
;;;808        pstDevInfo = (I80IT8951DevInfo*)&gstI80DevInfo;
;;;809        sysprintf("Panel(W,H) = (%d,%d)\r\n", pstDevInfo->usPanelW, pstDevInfo->usPanelH );
;;;810        sysprintf("Image Buffer Address = %X\r\n", pstDevInfo->usImgBufAddrL | (pstDevInfo->usImgBufAddrH << 16));
;;;811        
;;;812    #if (ENABLE_BURNIN_TESTER)
;;;813        if ((pstDevInfo->usImgBufAddrL == 0) && (pstDevInfo->usImgBufAddrH == 0)) {
;;;814            SetEpdErrorFlag(TRUE);
;;;815        }
;;;816        if ((pstDevInfo->usImgBufAddrL == 0xFFFF) && (pstDevInfo->usImgBufAddrH == 0xFFFF)) {
;;;817            SetEpdErrorFlag(TRUE);
;;;818        }
;;;819    #endif 
;;;820        
;;;821        //Show Firmware and LUT Version
;;;822    
;;;823        memcpy(tempFWVersion,pstDevInfo->usFWVersion,16);
;;;824        memcpy(tempLUTVersion,pstDevInfo->usLUTVersion,16);
;;;825    
;;;826        //terninalPrintf ("FW VersionOri = [%s]\r\n", pstDevInfo->usFWVersion);
;;;827        //terninalPrintf ("LUT VersionOri = [%s]\r\n", pstDevInfo->usLUTVersion);
;;;828        //terninalPrintf("FW Versiontest = [%s]\r\n", tempFWVersion);
;;;829        //terninalPrintf("LUT Versiontest = [%s]\r\n", tempLUTVersion);
;;;830    		return TRUE;		
;;;831        
;;;832    }
001200  e8bd8030          POP      {r4,r5,pc}
                  |L1.4612|
001204  e28d4004          ADD      r4,sp,#4              ;808
001208  e1d420b2          LDRH     r2,[r4,#2]            ;809
00120c  e1d410b0          LDRH     r1,[r4,#0]            ;809
001210  e28f0e1f          ADR      r0,|L1.5128|
001214  ebfffffe          BL       sysprintf
001218  e1d400b4          LDRH     r0,[r4,#4]            ;810
00121c  e1d420b6          LDRH     r2,[r4,#6]            ;810
001220  e1801802          ORR      r1,r0,r2,LSL #16      ;810
001224  e28f0f7d          ADR      r0,|L1.5152|
001228  ebfffffe          BL       sysprintf
00122c  e1d400b4          LDRH     r0,[r4,#4]            ;813
001230  e3500000          CMP      r0,#0                 ;813
001234  1a000004          BNE      |L1.4684|
001238  e1d400b6          LDRH     r0,[r4,#6]            ;813
00123c  e3500000          CMP      r0,#0                 ;813
001240  1a000001          BNE      |L1.4684|
001244  e3a00001          MOV      r0,#1                 ;814
001248  ebfffffe          BL       SetEpdErrorFlag
                  |L1.4684|
00124c  e1d400b4          LDRH     r0,[r4,#4]            ;816
001250  e2401cff          SUB      r1,r0,#0xff00         ;816
001254  e25110ff          SUBS     r1,r1,#0xff           ;816
001258  1a000005          BNE      |L1.4724|
00125c  e1d400b6          LDRH     r0,[r4,#6]            ;816
001260  e2401cff          SUB      r1,r0,#0xff00         ;816
001264  e25110ff          SUBS     r1,r1,#0xff           ;816
001268  1a000001          BNE      |L1.4724|
00126c  e3a00001          MOV      r0,#1                 ;817
001270  ebfffffe          BL       SetEpdErrorFlag
                  |L1.4724|
001274  e3a02010          MOV      r2,#0x10              ;823
001278  e2841008          ADD      r1,r4,#8              ;823
00127c  e59f017c          LDR      r0,|L1.5120|
001280  ebfffffe          BL       __aeabi_memcpy
001284  e3a02010          MOV      r2,#0x10              ;824
001288  e2841018          ADD      r1,r4,#0x18           ;824
00128c  e59f0170          LDR      r0,|L1.5124|
001290  ebfffffe          BL       __aeabi_memcpy
001294  e3a00001          MOV      r0,#1                 ;830
001298  eaffffd7          B        |L1.4604|
;;;833    
                          ENDP

                  wordSwapBytes PROC
;;;834    
;;;835    static void wordSwapBytes(TWord *singleWord)
00129c  e1a01000          MOV      r1,r0
;;;836    {
;;;837        char *ptrByte = (char *)singleWord;
;;;838        char tempByte = ptrByte[0];
0012a0  e5d12000          LDRB     r2,[r1,#0]
;;;839        ptrByte[0] = ptrByte[1];
0012a4  e5d13001          LDRB     r3,[r1,#1]
0012a8  e5c13000          STRB     r3,[r1,#0]
;;;840        ptrByte[1] = tempByte;
0012ac  e5c12001          STRB     r2,[r1,#1]
;;;841    }
0012b0  e12fff1e          BX       lr
;;;842    
                          ENDP

                  ReadIT8951SystemInfo PROC
;;;884    
;;;885    BOOL ReadIT8951SystemInfo(char* readFWVersion,char* readLUTVersion)
0012b4  e92d4070          PUSH     {r4-r6,lr}
;;;886    {
0012b8  e1a05000          MOV      r5,r0
0012bc  e1a04001          MOV      r4,r1
;;;887        WriteCmdCode(IT8951_TCON_SYS_RUN,2);
0012c0  e3a01002          MOV      r1,#2
0012c4  e3a00001          MOV      r0,#1
0012c8  ebfffffe          BL       WriteCmdCode
;;;888        if(!GetIT8951SystemInfo())
0012cc  ebfffffe          BL       GetIT8951SystemInfo
0012d0  e3500000          CMP      r0,#0
0012d4  1a000001          BNE      |L1.4832|
;;;889            return FALSE;
0012d8  e3a00000          MOV      r0,#0
                  |L1.4828|
;;;890        //GetIT8951SystemInfo();
;;;891        if(readFWVersion != NULL)
;;;892            memcpy(readFWVersion,tempFWVersion,16);
;;;893        if(readLUTVersion != NULL)
;;;894            memcpy(readLUTVersion,tempLUTVersion,16);
;;;895        //readFWVersion = tempFWVersion;
;;;896        //readLUTVersion = tempLUTVersion;
;;;897        //terninalPrintf("FW test = [%s]\r\n", readFWVersion);
;;;898        //terninalPrintf("LUT test = [%s]\r\n", readLUTVersion);
;;;899        return TRUE;
;;;900    }
0012dc  e8bd8070          POP      {r4-r6,pc}
                  |L1.4832|
0012e0  e3550000          CMP      r5,#0                 ;891
0012e4  0a000003          BEQ      |L1.4856|
0012e8  e3a02010          MOV      r2,#0x10              ;892
0012ec  e59f110c          LDR      r1,|L1.5120|
0012f0  e1a00005          MOV      r0,r5                 ;892
0012f4  ebfffffe          BL       __aeabi_memcpy
                  |L1.4856|
0012f8  e3540000          CMP      r4,#0                 ;893
0012fc  0a000003          BEQ      |L1.4880|
001300  e3a02010          MOV      r2,#0x10              ;894
001304  e59f10f8          LDR      r1,|L1.5124|
001308  e1a00004          MOV      r0,r4                 ;894
00130c  ebfffffe          BL       __aeabi_memcpy
                  |L1.4880|
001310  e3a00001          MOV      r0,#1                 ;899
001314  eafffff0          B        |L1.4828|
;;;901    
                          ENDP

                  ReadIT8951SystemInfoLite PROC
;;;902    BOOL ReadIT8951SystemInfoLite(char* readFWVersion,char* readLUTVersion)
001318  e92d4070          PUSH     {r4-r6,lr}
;;;903    {
00131c  e1a05000          MOV      r5,r0
001320  e1a04001          MOV      r4,r1
;;;904        if(tempFWVersion[0] == 0x00)
001324  e59f00d4          LDR      r0,|L1.5120|
001328  e1d000b0          LDRH     r0,[r0,#0]  ; tempFWVersion
00132c  e3500000          CMP      r0,#0
001330  1a000001          BNE      |L1.4924|
;;;905            return FALSE;
001334  e3a00000          MOV      r0,#0
                  |L1.4920|
;;;906        //GetIT8951SystemInfo();
;;;907        if(readFWVersion != NULL)
;;;908            memcpy(readFWVersion,tempFWVersion,16);
;;;909        if(readLUTVersion != NULL)
;;;910            memcpy(readLUTVersion,tempLUTVersion,16);
;;;911        //readFWVersion = tempFWVersion;
;;;912        //readLUTVersion = tempLUTVersion;
;;;913        //terninalPrintf("FW test = [%s]\r\n", readFWVersion);
;;;914        //terninalPrintf("LUT test = [%s]\r\n", readLUTVersion);
;;;915        return TRUE;
;;;916    }
001338  e8bd8070          POP      {r4-r6,pc}
                  |L1.4924|
00133c  e3550000          CMP      r5,#0                 ;907
001340  0a000003          BEQ      |L1.4948|
001344  e3a02010          MOV      r2,#0x10              ;908
001348  e59f10b0          LDR      r1,|L1.5120|
00134c  e1a00005          MOV      r0,r5                 ;908
001350  ebfffffe          BL       __aeabi_memcpy
                  |L1.4948|
001354  e3540000          CMP      r4,#0                 ;909
001358  0a000003          BEQ      |L1.4972|
00135c  e3a02010          MOV      r2,#0x10              ;910
001360  e59f109c          LDR      r1,|L1.5124|
001364  e1a00004          MOV      r0,r4                 ;910
001368  ebfffffe          BL       __aeabi_memcpy
                  |L1.4972|
00136c  e3a00001          MOV      r0,#1                 ;915
001370  eafffff0          B        |L1.4920|
;;;917    
                          ENDP

                  SpiFlash_WaitReadyEx PROC
;;;976    
;;;977    static void SpiFlash_WaitReadyEx(void)
001374  e92d4010          PUSH     {r4,lr}
;;;978    {
;;;979        int counter =  5000/10; 
001378  e3a04f7d          MOV      r4,#0x1f4
;;;980        uint8_t ReturnValue;
;;;981        
;;;982        while((SpiFlash_ReadStatusReg() & 1) != 0)
00137c  ea00000b          B        |L1.5040|
                  |L1.4992|
;;;983        {
;;;984            if(counter-- == 0)
001380  e1b00004          MOVS     r0,r4
001384  e2444001          SUB      r4,r4,#1
001388  1a000006          BNE      |L1.5032|
;;;985            {
;;;986                terninalPrintf("\r\n #################################\r\n"); 
00138c  e59f00a8          LDR      r0,|L1.5180|
001390  ebfffffe          BL       terninalPrintf
;;;987                terninalPrintf(    " ### SpiFlash_WaitReady  break ### \r\n"); 
001394  e59f00a4          LDR      r0,|L1.5184|
001398  ebfffffe          BL       terninalPrintf
;;;988                terninalPrintf(    " ################################# \r\n"); 
00139c  e59f00a0          LDR      r0,|L1.5188|
0013a0  ebfffffe          BL       terninalPrintf
;;;989                break;  
0013a4  ea000004          B        |L1.5052|
                  |L1.5032|
;;;990            }       
;;;991            vTaskDelay(1/portTICK_RATE_MS);  
0013a8  e3a00000          MOV      r0,#0
0013ac  ebfffffe          BL       vTaskDelay
                  |L1.5040|
0013b0  ebfffffe          BL       SpiFlash_ReadStatusReg
0013b4  e3100001          TST      r0,#1                 ;982
0013b8  1afffff0          BNE      |L1.4992|
                  |L1.5052|
0013bc  e1a00000          MOV      r0,r0                 ;989
;;;992        }    
;;;993        
;;;994    }
0013c0  e8bd8010          POP      {r4,pc}
;;;995    
                          ENDP

                  SpiFlash_WaitEraseReady PROC
;;;996    BOOL SpiFlash_WaitEraseReady(void)
0013c4  e92d4010          PUSH     {r4,lr}
;;;997    {
;;;998        int counter =  100; 
0013c8  e3a04064          MOV      r4,#0x64
;;;999        uint8_t ReturnValue;
;;;1000       
;;;1001       while((SpiFlash_ReadStatusReg() & 1) != 0)
0013cc  ea000006          B        |L1.5100|
                  |L1.5072|
;;;1002       {
;;;1003           if(counter-- == 0)
0013d0  e1b00004          MOVS     r0,r4
0013d4  e2444001          SUB      r4,r4,#1
0013d8  1a000001          BNE      |L1.5092|
;;;1004           {
;;;1005               return FALSE;
0013dc  e3a00000          MOV      r0,#0
                  |L1.5088|
;;;1006           }       
;;;1007           vTaskDelay(10/portTICK_RATE_MS);  
;;;1008       }
;;;1009       return TRUE;
;;;1010       
;;;1011   }
0013e0  e8bd8010          POP      {r4,pc}
                  |L1.5092|
0013e4  e3a00001          MOV      r0,#1                 ;1007
0013e8  ebfffffe          BL       vTaskDelay
                  |L1.5100|
0013ec  ebfffffe          BL       SpiFlash_ReadStatusReg
0013f0  e3100001          TST      r0,#1                 ;1001
0013f4  1afffff5          BNE      |L1.5072|
0013f8  e3a00001          MOV      r0,#1                 ;1009
0013fc  eafffff7          B        |L1.5088|
                  |L1.5120|
                          DCD      tempFWVersion
                  |L1.5124|
                          DCD      tempLUTVersion
                  |L1.5128|
001408  50616e65          DCB      "Panel(W,H) = (%d,%d)"
00140c  6c28572c
001410  4829203d
001414  20282564
001418  2c256429
                  |L1.5148|
00141c  0d0a00            DCB      "\r\n",0
00141f  00                DCB      0
                  |L1.5152|
001420  496d6167          DCB      "Image Buffer Address = %X\r\n",0
001424  65204275
001428  66666572
00142c  20416464
001430  72657373
001434  203d2025
001438  580d0a00
                  |L1.5180|
                          DCD      ||.text||+0x268
                  |L1.5184|
                          DCD      ||.text||+0x290
                  |L1.5188|
                          DCD      ||.text||+0x2b8
                          ENDP

                  SpiFlash_NormalPageProgram PROC
;;;1012   
;;;1013   static void SpiFlash_NormalPageProgram(uint32_t StartAddress, uint8_t *u8DataBuffer, int BuffLen)
001448  e92d41f0          PUSH     {r4-r8,lr}
;;;1014   {
00144c  e1a04000          MOV      r4,r0
001450  e1a06001          MOV      r6,r1
001454  e1a07002          MOV      r7,r2
;;;1015       uint32_t i = 0;
001458  e3a05000          MOV      r5,#0
;;;1016   
;;;1017       // /CS: active
;;;1018       pSpiInterface->activeCSFunc(TRUE); 
00145c  e59f0540          LDR      r0,|L1.6564|
001460  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001464  e590100c          LDR      r1,[r0,#0xc]
001468  e3a00001          MOV      r0,#1
00146c  e12fff31          BLX      r1
;;;1019   
;;;1020       // send Command: 0x06, Write enable
;;;1021       pSpiInterface->writeFunc(0, 0x06);
001470  e59f052c          LDR      r0,|L1.6564|
001474  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001478  e3a01006          MOV      r1,#6
00147c  e5902004          LDR      r2,[r0,#4]
001480  e3a00000          MOV      r0,#0
001484  e12fff32          BLX      r2
;;;1022   
;;;1023       // /CS: de-active
;;;1024       pSpiInterface->activeCSFunc(FALSE);
001488  e59f0514          LDR      r0,|L1.6564|
00148c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001490  e590100c          LDR      r1,[r0,#0xc]
001494  e3a00000          MOV      r0,#0
001498  e12fff31          BLX      r1
;;;1025   
;;;1026       //vTaskDelay(1/portTICK_RATE_MS);
;;;1027       // /CS: active
;;;1028       pSpiInterface->activeCSFunc(TRUE); 
00149c  e59f0500          LDR      r0,|L1.6564|
0014a0  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0014a4  e590100c          LDR      r1,[r0,#0xc]
0014a8  e3a00001          MOV      r0,#1
0014ac  e12fff31          BLX      r1
;;;1029   
;;;1030       // send Command: 0x02, Page program
;;;1031       pSpiInterface->writeFunc(0, 0x02);
0014b0  e59f04ec          LDR      r0,|L1.6564|
0014b4  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0014b8  e3a01002          MOV      r1,#2
0014bc  e5902004          LDR      r2,[r0,#4]
0014c0  e3a00000          MOV      r0,#0
0014c4  e12fff32          BLX      r2
;;;1032   
;;;1033       // send 24-bit start address
;;;1034       pSpiInterface->writeFunc(0, (StartAddress>>16) & 0xFF);
0014c8  e1a00404          LSL      r0,r4,#8
0014cc  e1a01c20          LSR      r1,r0,#24
0014d0  e59f04cc          LDR      r0,|L1.6564|
0014d4  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0014d8  e5902004          LDR      r2,[r0,#4]
0014dc  e3a00000          MOV      r0,#0
0014e0  e12fff32          BLX      r2
;;;1035   
;;;1036       pSpiInterface->writeFunc(0, (StartAddress>>8) & 0xFF);
0014e4  e1a00804          LSL      r0,r4,#16
0014e8  e1a01c20          LSR      r1,r0,#24
0014ec  e59f04b0          LDR      r0,|L1.6564|
0014f0  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0014f4  e5902004          LDR      r2,[r0,#4]
0014f8  e3a00000          MOV      r0,#0
0014fc  e12fff32          BLX      r2
;;;1037   
;;;1038       pSpiInterface->writeFunc(0, StartAddress & 0xFF);
001500  e20410ff          AND      r1,r4,#0xff
001504  e59f0498          LDR      r0,|L1.6564|
001508  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00150c  e5902004          LDR      r2,[r0,#4]
001510  e3a00000          MOV      r0,#0
001514  e12fff32          BLX      r2
;;;1039   
;;;1040       // write data
;;;1041       for(i=0; i<BuffLen; i++) {
001518  e1a00000          MOV      r0,r0
00151c  ea000006          B        |L1.5436|
                  |L1.5408|
;;;1042           pSpiInterface->writeFunc(0, u8DataBuffer[i]);
001520  e7d61005          LDRB     r1,[r6,r5]
001524  e59f0478          LDR      r0,|L1.6564|
001528  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00152c  e5902004          LDR      r2,[r0,#4]
001530  e3a00000          MOV      r0,#0
001534  e12fff32          BLX      r2
001538  e2855001          ADD      r5,r5,#1              ;1041
                  |L1.5436|
00153c  e1550007          CMP      r5,r7                 ;1041
001540  3afffff6          BCC      |L1.5408|
;;;1043       }
;;;1044   
;;;1045       // /CS: de-active
;;;1046       pSpiInterface->activeCSFunc(FALSE);
001544  e59f0458          LDR      r0,|L1.6564|
001548  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00154c  e590100c          LDR      r1,[r0,#0xc]
001550  e3a00000          MOV      r0,#0
001554  e12fff31          BLX      r1
;;;1047   }
001558  e8bd81f0          POP      {r4-r8,pc}
;;;1048   static void SpiFlash_NormalSectorProgram(uint32_t StartAddress, uint8_t *u8DataBuffer, int BuffLen)
                          ENDP

                  SpiFlash_NormalSectorProgram PROC
00155c  e92d41f0          PUSH     {r4-r8,lr}
;;;1049   {
001560  e1a05000          MOV      r5,r0
001564  e1a06001          MOV      r6,r1
001568  e1a07002          MOV      r7,r2
;;;1050       uint32_t i = 0;
00156c  e3a04000          MOV      r4,#0
;;;1051       uint32_t tempLen = BuffLen;
001570  e1a08007          MOV      r8,r7
;;;1052       
;;;1053       for(i = 0; i < BuffLen; i = i + SPI_FLASH_EX_PAGE_SIZE)
001574  e1a00000          MOV      r0,r0
001578  ea00000e          B        |L1.5560|
                  |L1.5500|
;;;1054       {
;;;1055   
;;;1056           if(tempLen<=SPI_FLASH_EX_PAGE_SIZE)
00157c  e3580c01          CMP      r8,#0x100
001580  8a000005          BHI      |L1.5532|
;;;1057           {
;;;1058               SpiFlash_WaitReadyEx();
001584  ebfffffe          BL       SpiFlash_WaitReadyEx
;;;1059               SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, tempLen);
001588  e0861004          ADD      r1,r6,r4
00158c  e0850004          ADD      r0,r5,r4
001590  e1a02008          MOV      r2,r8
001594  ebfffffe          BL       SpiFlash_NormalPageProgram
;;;1060               //vTaskDelay(10/portTICK_RATE_MS);
;;;1061               //vTaskDelay(1/100);
;;;1062               //SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, tempLen);
;;;1063               
;;;1064               //SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, tempLen);
;;;1065               //SpiFlash_WaitReady();
;;;1066               //vTaskDelay(1/portTICK_RATE_MS);
;;;1067               //vTaskDelay(1/100);
;;;1068               break;            
001598  ea000008          B        |L1.5568|
                  |L1.5532|
;;;1069           }
;;;1070           else
;;;1071           {
;;;1072               //terninalPrintf("PageProgramCounter = %d\r\n", i);
;;;1073               SpiFlash_WaitReadyEx();
00159c  ebfffffe          BL       SpiFlash_WaitReadyEx
;;;1074               SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, SPI_FLASH_EX_PAGE_SIZE);
0015a0  e0861004          ADD      r1,r6,r4
0015a4  e0850004          ADD      r0,r5,r4
0015a8  e3a02c01          MOV      r2,#0x100
0015ac  ebfffffe          BL       SpiFlash_NormalPageProgram
;;;1075               //vTaskDelay(10/portTICK_RATE_MS);
;;;1076               //vTaskDelay(1/100);
;;;1077               //SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, SPI_FLASH_EX_PAGE_SIZE);
;;;1078               
;;;1079               //SpiFlash_NormalPageProgram(StartAddress + i, u8DataBuffer + i, SPI_FLASH_EX_PAGE_SIZE);
;;;1080               //SpiFlash_WaitReady();
;;;1081               //vTaskDelay(1/portTICK_RATE_MS);
;;;1082               //vTaskDelay(1/100);
;;;1083               tempLen = tempLen - SPI_FLASH_EX_PAGE_SIZE;
0015b0  e2488c01          SUB      r8,r8,#0x100
0015b4  e2844c01          ADD      r4,r4,#0x100          ;1053
                  |L1.5560|
0015b8  e1540007          CMP      r4,r7                 ;1053
0015bc  3affffee          BCC      |L1.5500|
                  |L1.5568|
0015c0  e1a00000          MOV      r0,r0                 ;1068
;;;1084           }
;;;1085           
;;;1086       }   
;;;1087   }
0015c4  e8bd81f0          POP      {r4-r8,pc}
;;;1088   
                          ENDP

                  W25Q64BVBurn PROC
;;;1089   
;;;1090   void W25Q64BVBurn(uint32_t StartAddress, uint8_t *u8DataBuffer, int BuffLen)
0015c8  e92d4070          PUSH     {r4-r6,lr}
;;;1091   {
0015cc  e1a04000          MOV      r4,r0
0015d0  e1a05001          MOV      r5,r1
0015d4  e1a06002          MOV      r6,r2
;;;1092       //GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
;;;1093       //vTaskDelay(10/portTICK_RATE_MS);
;;;1094       //vTaskDelay(15/portTICK_RATE_MS);
;;;1095      
;;;1096       SpiFlash_NormalSectorProgram(StartAddress,u8DataBuffer,BuffLen);
0015d8  e1a02006          MOV      r2,r6
0015dc  e1a01005          MOV      r1,r5
0015e0  e1a00004          MOV      r0,r4
0015e4  ebfffffe          BL       SpiFlash_NormalSectorProgram
;;;1097       
;;;1098       //GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT);
;;;1099       
;;;1100       epdbadFlag = FALSE;
0015e8  e3a00000          MOV      r0,#0
0015ec  e51f1e3c          LDR      r1,|L1.1976|
0015f0  e5c10000          STRB     r0,[r1,#0]  ; epdbadFlag
;;;1101   }
0015f4  e8bd8070          POP      {r4-r6,pc}
;;;1102   
                          ENDP

                  W25Q64BVErase PROC
;;;1103   
;;;1104   void W25Q64BVErase(void)
0015f8  e92d4010          PUSH     {r4,lr}
;;;1105   {   
;;;1106       GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
0015fc  e3a01001          MOV      r1,#1
001600  e3a00c02          MOV      r0,#0x200
001604  ebfffffe          BL       GPIO_ClrBit
;;;1107       vTaskDelay(15/portTICK_RATE_MS);
001608  e3a00001          MOV      r0,#1
00160c  ebfffffe          BL       vTaskDelay
;;;1108       
;;;1109       SpiFlash_WaitReady();
001610  ebfffffe          BL       SpiFlash_WaitReady
;;;1110       
;;;1111       pSpiInterface->activeCSFunc(TRUE);   
001614  e59f0388          LDR      r0,|L1.6564|
001618  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00161c  e590100c          LDR      r1,[r0,#0xc]
001620  e3a00001          MOV      r0,#1
001624  e12fff31          BLX      r1
;;;1112       pSpiInterface->writeFunc(0, 0x06);
001628  e59f0374          LDR      r0,|L1.6564|
00162c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001630  e3a01006          MOV      r1,#6
001634  e5902004          LDR      r2,[r0,#4]
001638  e3a00000          MOV      r0,#0
00163c  e12fff32          BLX      r2
;;;1113       pSpiInterface->activeCSFunc(FALSE); 
001640  e59f035c          LDR      r0,|L1.6564|
001644  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001648  e590100c          LDR      r1,[r0,#0xc]
00164c  e3a00000          MOV      r0,#0
001650  e12fff31          BLX      r1
;;;1114       
;;;1115       
;;;1116       
;;;1117       pSpiInterface->activeCSFunc(TRUE);   
001654  e59f0348          LDR      r0,|L1.6564|
001658  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00165c  e590100c          LDR      r1,[r0,#0xc]
001660  e3a00001          MOV      r0,#1
001664  e12fff31          BLX      r1
;;;1118       
;;;1119       pSpiInterface->writeFunc(0, 0xC7);
001668  e59f0334          LDR      r0,|L1.6564|
00166c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001670  e3a010c7          MOV      r1,#0xc7
001674  e5902004          LDR      r2,[r0,#4]
001678  e3a00000          MOV      r0,#0
00167c  e12fff32          BLX      r2
;;;1120       
;;;1121       
;;;1122       pSpiInterface->activeCSFunc(FALSE);   
001680  e59f031c          LDR      r0,|L1.6564|
001684  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001688  e590100c          LDR      r1,[r0,#0xc]
00168c  e3a00000          MOV      r0,#0
001690  e12fff31          BLX      r1
;;;1123       
;;;1124       SpiFlash_WaitReady();
001694  ebfffffe          BL       SpiFlash_WaitReady
;;;1125       
;;;1126       
;;;1127       GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT); 
001698  e3a01001          MOV      r1,#1
00169c  e3a00c02          MOV      r0,#0x200
0016a0  ebfffffe          BL       GPIO_SetBit
;;;1128       
;;;1129       epdbadFlag = TRUE;
0016a4  e3a00001          MOV      r0,#1
0016a8  e51f1ef8          LDR      r1,|L1.1976|
0016ac  e5c10000          STRB     r0,[r1,#0]  ; epdbadFlag
;;;1130       
;;;1131   }
0016b0  e8bd8010          POP      {r4,pc}
;;;1132   
                          ENDP

                  W25Q64BVquery PROC
;;;1133   
;;;1134   void W25Q64BVquery(int temposition)
0016b4  e92d41f0          PUSH     {r4-r8,lr}
;;;1135   {
0016b8  e1a04000          MOV      r4,r0
;;;1136       int size = 4000;
0016bc  e3a05efa          MOV      r5,#0xfa0
;;;1137       uint8_t buff[size];
0016c0  e1a08005          MOV      r8,r5
0016c4  e1a00008          MOV      r0,r8
0016c8  ebfffffe          BL       malloc
0016cc  e1a06000          MOV      r6,r0
;;;1138   
;;;1139       GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
0016d0  e3a01001          MOV      r1,#1
0016d4  e3a00c02          MOV      r0,#0x200
0016d8  ebfffffe          BL       GPIO_ClrBit
;;;1140       vTaskDelay(10/portTICK_RATE_MS);
0016dc  e3a00001          MOV      r0,#1
0016e0  ebfffffe          BL       vTaskDelay
;;;1141   
;;;1142       SpiFlash_WaitReady();
0016e4  ebfffffe          BL       SpiFlash_WaitReady
;;;1143   
;;;1144       pSpiInterface->activeCSFunc(TRUE);    
0016e8  e59f02b4          LDR      r0,|L1.6564|
0016ec  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0016f0  e590100c          LDR      r1,[r0,#0xc]
0016f4  e3a00001          MOV      r0,#1
0016f8  e12fff31          BLX      r1
;;;1145   
;;;1146       pSpiInterface->writeFunc(0, 0x03);
0016fc  e59f02a0          LDR      r0,|L1.6564|
001700  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001704  e3a01003          MOV      r1,#3
001708  e5902004          LDR      r2,[r0,#4]
00170c  e3a00000          MOV      r0,#0
001710  e12fff32          BLX      r2
;;;1147   
;;;1148       pSpiInterface->writeFunc(0, temposition>>16);
001714  e1a01844          ASR      r1,r4,#16
001718  e59f0284          LDR      r0,|L1.6564|
00171c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001720  e5902004          LDR      r2,[r0,#4]
001724  e3a00000          MOV      r0,#0
001728  e12fff32          BLX      r2
;;;1149       pSpiInterface->writeFunc(0, temposition>>8);
00172c  e1a01444          ASR      r1,r4,#8
001730  e59f026c          LDR      r0,|L1.6564|
001734  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001738  e5902004          LDR      r2,[r0,#4]
00173c  e3a00000          MOV      r0,#0
001740  e12fff32          BLX      r2
;;;1150       pSpiInterface->writeFunc(0, temposition & 0xFF);
001744  e20410ff          AND      r1,r4,#0xff
001748  e59f0254          LDR      r0,|L1.6564|
00174c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001750  e5902004          LDR      r2,[r0,#4]
001754  e3a00000          MOV      r0,#0
001758  e12fff32          BLX      r2
;;;1151   
;;;1152   
;;;1153       for(int i=0;i<size;i++)
00175c  e3a07000          MOV      r7,#0
001760  ea00000c          B        |L1.6040|
                  |L1.5988|
;;;1154       {
;;;1155           pSpiInterface->writeFunc(0, 0x00);
001764  e59f0238          LDR      r0,|L1.6564|
001768  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00176c  e3a01000          MOV      r1,#0
001770  e5902004          LDR      r2,[r0,#4]
001774  e1a00001          MOV      r0,r1
001778  e12fff32          BLX      r2
;;;1156           buff[i] = pSpiInterface->readFunc(0); 
00177c  e59f0220          LDR      r0,|L1.6564|
001780  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001784  e5901008          LDR      r1,[r0,#8]
001788  e3a00000          MOV      r0,#0
00178c  e12fff31          BLX      r1
001790  e7c60007          STRB     r0,[r6,r7]
001794  e2877001          ADD      r7,r7,#1              ;1153
                  |L1.6040|
001798  e1570005          CMP      r7,r5                 ;1153
00179c  bafffff0          BLT      |L1.5988|
;;;1157           
;;;1158       }
;;;1159   
;;;1160   
;;;1161       pSpiInterface->activeCSFunc(FALSE);   
0017a0  e59f01fc          LDR      r0,|L1.6564|
0017a4  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
0017a8  e590100c          LDR      r1,[r0,#0xc]
0017ac  e3a00000          MOV      r0,#0
0017b0  e12fff31          BLX      r1
;;;1162   
;;;1163   
;;;1164       terninalPrintf("buff = ");
0017b4  e28f0f7b          ADR      r0,|L1.6568|
0017b8  ebfffffe          BL       terninalPrintf
;;;1165       for(int i=0;i<size;i++)
0017bc  e3a07000          MOV      r7,#0
0017c0  ea000003          B        |L1.6100|
                  |L1.6084|
;;;1166       {
;;;1167           terninalPrintf("%02x ",buff[i]); 
0017c4  e7d61007          LDRB     r1,[r6,r7]
0017c8  e28f0e1e          ADR      r0,|L1.6576|
0017cc  ebfffffe          BL       terninalPrintf
0017d0  e2877001          ADD      r7,r7,#1              ;1165
                  |L1.6100|
0017d4  e1570005          CMP      r7,r5                 ;1165
0017d8  bafffff9          BLT      |L1.6084|
;;;1168       }
;;;1169       terninalPrintf("\r\n"); 
0017dc  e24f0ff2          ADR      r0,|L1.5148|
0017e0  ebfffffe          BL       terninalPrintf
;;;1170   
;;;1171   
;;;1172       GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT);  
0017e4  e3a01001          MOV      r1,#1
0017e8  e3a00c02          MOV      r0,#0x200
0017ec  ebfffffe          BL       GPIO_SetBit
0017f0  e1a00006          MOV      r0,r6
0017f4  ebfffffe          BL       free
;;;1173   
;;;1174   }
0017f8  e8bd81f0          POP      {r4-r8,pc}
;;;1175   
                          ENDP

                  W25Q64BVdeviceID PROC
;;;1222   
;;;1223   void W25Q64BVdeviceID(void)
0017fc  e92d401c          PUSH     {r2-r4,lr}
;;;1224   {
;;;1225       
;;;1226       uint8_t IDbuff[5];
;;;1227       
;;;1228       GPIO_ClrBit(RESET_PIN_PORT, RESET_PORT_BIT); 
001800  e3a01001          MOV      r1,#1
001804  e3a00c02          MOV      r0,#0x200
001808  ebfffffe          BL       GPIO_ClrBit
;;;1229       vTaskDelay(10/portTICK_RATE_MS);
00180c  e3a00001          MOV      r0,#1
001810  ebfffffe          BL       vTaskDelay
;;;1230       SpiFlash_WaitReady();
001814  ebfffffe          BL       SpiFlash_WaitReady
;;;1231       
;;;1232       pSpiInterface->activeCSFunc(TRUE);    
001818  e59f0184          LDR      r0,|L1.6564|
00181c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001820  e590100c          LDR      r1,[r0,#0xc]
001824  e3a00001          MOV      r0,#1
001828  e12fff31          BLX      r1
;;;1233   
;;;1234       pSpiInterface->writeFunc(0, 0x90);
00182c  e59f0170          LDR      r0,|L1.6564|
001830  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001834  e3a01090          MOV      r1,#0x90
001838  e5902004          LDR      r2,[r0,#4]
00183c  e3a00000          MOV      r0,#0
001840  e12fff32          BLX      r2
;;;1235   
;;;1236       //pSpiInterface->writeFunc(0, temposition>>16);
;;;1237       //pSpiInterface->writeFunc(0, temposition>>8);
;;;1238       //pSpiInterface->writeFunc(0, temposition & 0xFF);
;;;1239   
;;;1240       
;;;1241       for(int i=0;i<5;i++)
001844  e3a04000          MOV      r4,#0
001848  ea00000c          B        |L1.6272|
                  |L1.6220|
;;;1242       {
;;;1243           pSpiInterface->writeFunc(0, 0x00);
00184c  e59f0150          LDR      r0,|L1.6564|
001850  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001854  e3a01000          MOV      r1,#0
001858  e5902004          LDR      r2,[r0,#4]
00185c  e1a00001          MOV      r0,r1
001860  e12fff32          BLX      r2
;;;1244           IDbuff[i] = pSpiInterface->readFunc(0); 
001864  e59f0138          LDR      r0,|L1.6564|
001868  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
00186c  e5901008          LDR      r1,[r0,#8]
001870  e3a00000          MOV      r0,#0
001874  e12fff31          BLX      r1
001878  e7cd0004          STRB     r0,[sp,r4]
00187c  e2844001          ADD      r4,r4,#1              ;1241
                  |L1.6272|
001880  e3540005          CMP      r4,#5                 ;1241
001884  bafffff0          BLT      |L1.6220|
;;;1245           
;;;1246       }
;;;1247       
;;;1248   
;;;1249       pSpiInterface->activeCSFunc(FALSE);   
001888  e59f0114          LDR      r0,|L1.6564|
00188c  e5900000          LDR      r0,[r0,#0]  ; pSpiInterface
001890  e590100c          LDR      r1,[r0,#0xc]
001894  e3a00000          MOV      r0,#0
001898  e12fff31          BLX      r1
;;;1250   
;;;1251   
;;;1252       terninalPrintf("\r\nDeviceID = ");
00189c  e28f0f45          ADR      r0,|L1.6584|
0018a0  ebfffffe          BL       terninalPrintf
;;;1253       for(int i=0;i<5;i++)
0018a4  e3a04000          MOV      r4,#0
0018a8  ea000003          B        |L1.6332|
                  |L1.6316|
;;;1254       {
;;;1255           terninalPrintf("%02x ",IDbuff[i]); 
0018ac  e7dd1004          LDRB     r1,[sp,r4]
0018b0  e28f00f8          ADR      r0,|L1.6576|
0018b4  ebfffffe          BL       terninalPrintf
0018b8  e2844001          ADD      r4,r4,#1              ;1253
                  |L1.6332|
0018bc  e3540005          CMP      r4,#5                 ;1253
0018c0  bafffff9          BLT      |L1.6316|
;;;1256       }
;;;1257       terninalPrintf("\r\n"); 
0018c4  e28f00fc          ADR      r0,|L1.6600|
0018c8  ebfffffe          BL       terninalPrintf
;;;1258       
;;;1259       
;;;1260       GPIO_SetBit(RESET_PIN_PORT, RESET_PORT_BIT);  
0018cc  e3a01001          MOV      r1,#1
0018d0  e3a00c02          MOV      r0,#0x200
0018d4  ebfffffe          BL       GPIO_SetBit
;;;1261   }
0018d8  e8bd801c          POP      {r2-r4,pc}
;;;1262   
                          ENDP

                  setW25Q64BVspecialburn PROC
;;;1263   void setW25Q64BVspecialburn(void)
0018dc  e3a00001          MOV      r0,#1
;;;1264   {
;;;1265       W25Q64BVspecialburnFlag = TRUE;
0018e0  e59f10e4          LDR      r1,|L1.6604|
0018e4  e5c10000          STRB     r0,[r1,#0]  ; W25Q64BVspecialburnFlag
;;;1266   }
0018e8  e12fff1e          BX       lr
;;;1267   
                          ENDP

                  clrW25Q64BVspecialburn PROC
;;;1268   void clrW25Q64BVspecialburn(void)
0018ec  e3a00000          MOV      r0,#0
;;;1269   {
;;;1270       W25Q64BVspecialburnFlag = FALSE;
0018f0  e59f10d4          LDR      r1,|L1.6604|
0018f4  e5c10000          STRB     r0,[r1,#0]  ; W25Q64BVspecialburnFlag
;;;1271   }
0018f8  e12fff1e          BX       lr
;;;1272   
                          ENDP

                  readEPDswitch PROC
;;;1273   BOOL readEPDswitch(void)
0018fc  e59f00cc          LDR      r0,|L1.6608|
;;;1274   {
;;;1275       return epdopenFlag;
001900  e5d00000          LDRB     r0,[r0,#0]  ; epdopenFlag
;;;1276   }
001904  e12fff1e          BX       lr
;;;1277   
                          ENDP

                  toggleEPDswitch PROC
;;;1278   void toggleEPDswitch(BOOL toggleEPDflag)
001908  e92d4010          PUSH     {r4,lr}
;;;1279   {
00190c  e1a04000          MOV      r4,r0
;;;1280       epdopenFlag = toggleEPDflag;
001910  e59f00b8          LDR      r0,|L1.6608|
001914  e5c04000          STRB     r4,[r0,#0]  ; epdopenFlag
;;;1281       epdbadFlag = FALSE;
001918  e3a00000          MOV      r0,#0
00191c  e59f10b0          LDR      r1,|L1.6612|
001920  e5c10000          STRB     r0,[r1,#0]  ; epdbadFlag
;;;1282       if (toggleEPDflag)
001924  e3540000          CMP      r4,#0
001928  0a000001          BEQ      |L1.6452|
;;;1283       {
;;;1284           //pSpiInterface = SpiGetInterface(EPD_SPI);
;;;1285           //pSpiInterface->initFunc();
;;;1286           
;;;1287           
;;;1288           hwInit();
00192c  ebfffffe          BL       hwInit
;;;1289           swInit();
001930  ebfffffe          BL       swInit
                  |L1.6452|
;;;1290       }
;;;1291   }
001934  e8bd8010          POP      {r4,pc}
;;;1292   
                          ENDP

                  LoadImages PROC
;;;1294   //load images from spi
;;;1295   static void LoadImages(unsigned int *data,int len)
001938  e92d4070          PUSH     {r4-r6,lr}
;;;1296   {
00193c  e1a05000          MOV      r5,r0
001940  e1a06001          MOV      r6,r1
;;;1297       int i;
;;;1298       if(len == 0)
001944  e3560000          CMP      r6,#0
001948  1a000000          BNE      |L1.6480|
                  |L1.6476|
;;;1299       {
;;;1300           return;
;;;1301       }
;;;1302       vTaskDelay(15/portTICK_RATE_MS);
;;;1303       #if(ENABLE_SLEEP_FUNCTION)
;;;1304       EPDExitSleep();
;;;1305       
;;;1306       //tickLocalStart = xTaskGetTickCount();
;;;1307       #endif
;;;1308       WriteCmdCode(0x0099,2);
;;;1309   
;;;1310       //tickLocalStart = xTaskGetTickCount();
;;;1311       WriteData(data[0],2);
;;;1312   
;;;1313       //tickLocalStart = xTaskGetTickCount();
;;;1314       for(i=1; i<(len*3+1); i++)
;;;1315       {
;;;1316           WriteData(data[i],2);
;;;1317       }
;;;1318       #if(ENABLE_SLEEP_FUNCTION)
;;;1319   //    EPDEnterSleep();
;;;1320       #endif
;;;1321   }
00194c  e8bd8070          POP      {r4-r6,pc}
                  |L1.6480|
001950  e3a00001          MOV      r0,#1                 ;1302
001954  ebfffffe          BL       vTaskDelay
001958  ebfffffe          BL       EPDExitSleep
00195c  e3a01002          MOV      r1,#2                 ;1308
001960  e3a00099          MOV      r0,#0x99              ;1308
001964  ebfffffe          BL       WriteCmdCode
001968  e3a01002          MOV      r1,#2                 ;1311
00196c  e5950000          LDR      r0,[r5,#0]            ;1311
001970  ebfffffe          BL       WriteData
001974  e3a04001          MOV      r4,#1                 ;1314
001978  ea000003          B        |L1.6540|
                  |L1.6524|
00197c  e7950104          LDR      r0,[r5,r4,LSL #2]     ;1316
001980  e3a01002          MOV      r1,#2                 ;1316
001984  ebfffffe          BL       WriteData
001988  e2844001          ADD      r4,r4,#1              ;1314
                  |L1.6540|
00198c  e0860086          ADD      r0,r6,r6,LSL #1       ;1314
001990  e2800001          ADD      r0,r0,#1              ;1314
001994  e1500004          CMP      r0,r4                 ;1314
001998  cafffff7          BGT      |L1.6524|
00199c  e1a00000          MOV      r0,r0
0019a0  eaffffe9          B        |L1.6476|
                  |L1.6564|
                          DCD      pSpiInterface
                  |L1.6568|
0019a8  62756666          DCB      "buff = ",0
0019ac  203d2000
                  |L1.6576|
0019b0  25303278          DCB      "%02x ",0
0019b4  2000    
0019b6  00                DCB      0
0019b7  00                DCB      0
                  |L1.6584|
0019b8  0d0a4465          DCB      "\r\nDeviceID = ",0
0019bc  76696365
0019c0  4944203d
0019c4  2000    
0019c6  00                DCB      0
0019c7  00                DCB      0
                  |L1.6600|
0019c8  0d0a00            DCB      "\r\n",0
0019cb  00                DCB      0
                  |L1.6604|
                          DCD      W25Q64BVspecialburnFlag
                  |L1.6608|
                          DCD      epdopenFlag
                  |L1.6612|
                          DCD      epdbadFlag
                          ENDP

                  DisplayArea PROC
;;;1322   static void DisplayArea(TWord usX, TWord usY, TWord usW, TWord usH, TWord usDpyMode)
0019d8  e92d5ff0          PUSH     {r4-r12,lr}
;;;1323   {
0019dc  e1a07000          MOV      r7,r0
0019e0  e1a04001          MOV      r4,r1
0019e4  e1a05002          MOV      r5,r2
0019e8  e1a06003          MOV      r6,r3
0019ec  e59d8028          LDR      r8,[sp,#0x28]
;;;1324       TickType_t tickLocalStart = xTaskGetTickCount();
0019f0  ebfffffe          BL       xTaskGetTickCount
0019f4  e1a09000          MOV      r9,r0
;;;1325       BOOL redoFlag = TRUE;
0019f8  e3a0a001          MOV      r10,#1
;;;1326       #if(ENABLE_SLEEP_FUNCTION)
;;;1327       EPDExitSleep();    
0019fc  ebfffffe          BL       EPDExitSleep
;;;1328       #endif
;;;1329       while(redoFlag)
001a00  ea00002b          B        |L1.6836|
                  |L1.6660|
;;;1330       {
;;;1331           redoFlag = FALSE;
001a04  e3a0a000          MOV      r10,#0
;;;1332           //Send I80 Display Command (User defined command of IT8951)
;;;1333           //sysprintf("\n{1}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1334           if(WriteCmdCode(USDEF_I80_CMD_DPY_AREA,2) == FALSE) //0x0034
001a08  e3a01002          MOV      r1,#2
001a0c  e3a00034          MOV      r0,#0x34
001a10  ebfffffe          BL       WriteCmdCode
001a14  e3500000          CMP      r0,#0
001a18  1a000001          BNE      |L1.6692|
;;;1335           {
;;;1336               redoFlag = TRUE;
001a1c  e3a0a001          MOV      r10,#1
;;;1337               goto reDoExit;
001a20  ea000023          B        |L1.6836|
                  |L1.6692|
;;;1338           }
;;;1339           //sysprintf("{2}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1340           //Write arguments
;;;1341           if(WriteData(usX,2) == FALSE)
001a24  e3a01002          MOV      r1,#2
001a28  e1a00007          MOV      r0,r7
001a2c  ebfffffe          BL       WriteData
001a30  e3500000          CMP      r0,#0
001a34  1a000001          BNE      |L1.6720|
;;;1342           {
;;;1343               redoFlag = TRUE;
001a38  e3a0a001          MOV      r10,#1
;;;1344               goto reDoExit;
001a3c  ea00001c          B        |L1.6836|
                  |L1.6720|
;;;1345           }
;;;1346           //sysprintf("{3}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1347           if(WriteData(usY,2) == FALSE)
001a40  e3a01002          MOV      r1,#2
001a44  e1a00004          MOV      r0,r4
001a48  ebfffffe          BL       WriteData
001a4c  e3500000          CMP      r0,#0
001a50  1a000001          BNE      |L1.6748|
;;;1348           {
;;;1349               redoFlag = TRUE;
001a54  e3a0a001          MOV      r10,#1
;;;1350               goto reDoExit;
001a58  ea000015          B        |L1.6836|
                  |L1.6748|
;;;1351           }
;;;1352           //sysprintf("{4}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1353           if(WriteData(usW,2) == FALSE)
001a5c  e3a01002          MOV      r1,#2
001a60  e1a00005          MOV      r0,r5
001a64  ebfffffe          BL       WriteData
001a68  e3500000          CMP      r0,#0
001a6c  1a000001          BNE      |L1.6776|
;;;1354           {
;;;1355               redoFlag = TRUE;
001a70  e3a0a001          MOV      r10,#1
;;;1356               goto reDoExit;
001a74  ea00000e          B        |L1.6836|
                  |L1.6776|
;;;1357           }
;;;1358           //sysprintf("{5}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1359           if(WriteData(usH,2) == FALSE)
001a78  e3a01002          MOV      r1,#2
001a7c  e1a00006          MOV      r0,r6
001a80  ebfffffe          BL       WriteData
001a84  e3500000          CMP      r0,#0
001a88  1a000001          BNE      |L1.6804|
;;;1360           {
;;;1361               redoFlag = TRUE;
001a8c  e3a0a001          MOV      r10,#1
;;;1362               goto reDoExit;
001a90  ea000007          B        |L1.6836|
                  |L1.6804|
;;;1363           }
;;;1364           //sysprintf("{6}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1365           if(WriteData(usDpyMode,2) == FALSE)
001a94  e3a01002          MOV      r1,#2
001a98  e1a00008          MOV      r0,r8
001a9c  ebfffffe          BL       WriteData
001aa0  e3500000          CMP      r0,#0
001aa4  1a000001          BNE      |L1.6832|
;;;1366           {
;;;1367               redoFlag = TRUE;
001aa8  e3a0a001          MOV      r10,#1
;;;1368               goto reDoExit;
001aac  ea000000          B        |L1.6836|
                  |L1.6832|
;;;1369           }
;;;1370           //sysprintf("{7}=[%d]\n", xTaskGetTickCount() - tickLocalStart);  
;;;1371           reDoExit:
001ab0  e1a00000          MOV      r0,r0
                  |L1.6836|
001ab4  e35a0000          CMP      r10,#0                ;1329
001ab8  1affffd1          BNE      |L1.6660|
;;;1372               ;
;;;1373       }
;;;1374       #if(ENABLE_SLEEP_FUNCTION)
;;;1375       EPDEnterSleep();
001abc  ebfffffe          BL       EPDEnterSleep
;;;1376       #endif
;;;1377       sysprintf(" -- {INFO:[%d]} --\n", xTaskGetTickCount() - tickLocalStart);  
001ac0  ebfffffe          BL       xTaskGetTickCount
001ac4  e040b009          SUB      r11,r0,r9
001ac8  e1a0100b          MOV      r1,r11
001acc  e28f0f85          ADR      r0,|L1.7400|
001ad0  ebfffffe          BL       sysprintf
;;;1378   }
001ad4  e8bd9ff0          POP      {r4-r12,pc}
;;;1379   
                          ENDP

                  pow10Ex PROC
;;;1380   static uint32_t pow10Ex(uint8_t pow)
001ad8  e1a01000          MOV      r1,r0
;;;1381   {
;;;1382       uint32_t reval = 1;
001adc  e3a00001          MOV      r0,#1
;;;1383       int i = 0;
001ae0  e3a02000          MOV      r2,#0
;;;1384       for(i = 0; i<pow; i++)
001ae4  e1a00000          MOV      r0,r0
001ae8  ea000002          B        |L1.6904|
                  |L1.6892|
;;;1385       {
;;;1386           reval = reval * 10;
001aec  e0803100          ADD      r3,r0,r0,LSL #2
001af0  e1a00083          LSL      r0,r3,#1
001af4  e2822001          ADD      r2,r2,#1              ;1384
                  |L1.6904|
001af8  e1520001          CMP      r2,r1                 ;1384
001afc  bafffffa          BLT      |L1.6892|
;;;1387       }
;;;1388       return reval;
;;;1389   }
001b00  e12fff1e          BX       lr
;;;1390   static uint8_t hourTmp = 0xff, minsTmp = 0xff;
                          ENDP

                  ShowTime PROC
;;;1391   #define TIME_TOTAL_NUM_POSITION      5
;;;1392   static BOOL ShowTime(uint16_t xPosition, uint16_t yPosition, uint8_t fontType, uint8_t hour, uint8_t mins, BOOL checkFlag)
001b04  e92d4fff          PUSH     {r0-r11,lr}
;;;1393   {
001b08  e24dd04c          SUB      sp,sp,#0x4c
001b0c  e1a07002          MOV      r7,r2
001b10  e1a04003          MOV      r4,r3
001b14  e59d8080          LDR      r8,[sp,#0x80]
;;;1394       uint8_t showNum[TIME_TOTAL_NUM_POSITION];
;;;1395       uint8_t /*fontLineIndex, */fontNumIndex, fontColonIndex, fontWidth;
;;;1396       uint8_t buffIndex = 0;   
001b18  e3a0a000          MOV      r10,#0
;;;1397       int i;
;;;1398       unsigned int buff[3*TIME_TOTAL_NUM_POSITION+1];  
;;;1399       
;;;1400       #if(BUILD_DEBUG_VERSION)
;;;1401       if(reFreshFlag == 2)    
;;;1402           sysprintf("  [INFORMATION] EPD:ShowTime [%02d:%02d] refresh all...\n", hour, mins);  
;;;1403       else
;;;1404           sysprintf("EPD:ShowTime [%02d:%02d]...\n", hour, mins); 
;;;1405       #endif
;;;1406       
;;;1407       if(checkFlag)
001b1c  e59d0084          LDR      r0,[sp,#0x84]
001b20  e3500000          CMP      r0,#0
001b24  0a00000e          BEQ      |L1.7012|
;;;1408       {
;;;1409           if((hourTmp == hour) && (minsTmp == mins))
001b28  e59f01cc          LDR      r0,|L1.7420|
001b2c  e5d00000          LDRB     r0,[r0,#0]  ; hourTmp
001b30  e1500004          CMP      r0,r4
001b34  1a00000a          BNE      |L1.7012|
001b38  e59f01c0          LDR      r0,|L1.7424|
001b3c  e5d00000          LDRB     r0,[r0,#0]  ; minsTmp
001b40  e1500008          CMP      r0,r8
001b44  1a000006          BNE      |L1.7012|
;;;1410           {
;;;1411               sysprintf("EPD:ShowTime [%02d:%02d] ignore...\n", hour, mins); 
001b48  e1a02008          MOV      r2,r8
001b4c  e1a01004          MOV      r1,r4
001b50  e28f0f6b          ADR      r0,|L1.7428|
001b54  ebfffffe          BL       sysprintf
;;;1412               return FALSE;
001b58  e3a00000          MOV      r0,#0
                  |L1.7004|
001b5c  e28dd05c          ADD      sp,sp,#0x5c
;;;1413           }
;;;1414       }
;;;1415       //sysprintf("EPD:ShowTime [%02d:%02d]...\n", hour, mins); 
;;;1416       hourTmp = hour;
;;;1417       minsTmp = mins;
;;;1418       
;;;1419       switch(fontType)
;;;1420       {
;;;1421           case EPD_FONT_TYPE_DEBUG:
;;;1422               //fontLineIndex = EPD_PICT_NUM_DEBUG_INDEX;//EPD_PICT_LINE_BIG_INDEX ?????
;;;1423   //            fontNumIndex = EPD_PICT_NUM_DEBUG_INDEX;
;;;1424   //            fontColonIndex = EPD_PICT_COLON_DEBUG_INDEX;
;;;1425               fontWidth = 12;
;;;1426               break;        
;;;1427           case EPD_FONT_TYPE_SMALL_2:
;;;1428               //fontLineIndex = EPD_PICT_NUM_SMALL_2_INDEX;//EPD_PICT_LINE_BIG_INDEX ?????
;;;1429               fontNumIndex = EPD_PICT_NUM_SMALL_2_INDEX;
;;;1430               fontColonIndex = EPD_PICT_COLON_SMALL_2_INDEX;
;;;1431               fontWidth = 21;
;;;1432               break;
;;;1433           
;;;1434           case EPD_FONT_TYPE_SMALL:
;;;1435               //break;
;;;1436           case EPD_FONT_TYPE_MEDIUM:
;;;1437               //break;        
;;;1438           case EPD_FONT_TYPE_BIG:
;;;1439               //break;         
;;;1440           default:
;;;1441               sysprintf("EPD:ShowTime  not support this font (id:%d)\n", fontType); 
;;;1442               return FALSE;           
;;;1443       }
;;;1444       
;;;1445       showNum[0] = hour/10 + fontNumIndex;
;;;1446       showNum[1] = hour%10 + fontNumIndex;
;;;1447       showNum[2] = fontColonIndex;
;;;1448       showNum[3] = mins/10 + fontNumIndex;
;;;1449       showNum[4] = mins%10 + fontNumIndex;
;;;1450   
;;;1451       buff[0] = TIME_TOTAL_NUM_POSITION;   
;;;1452       
;;;1453       for(i = 0; i<TIME_TOTAL_NUM_POSITION; i++) 
;;;1454       {
;;;1455               buff[++buffIndex] = showNum[i];
;;;1456               buff[++buffIndex] = xPosition - i*fontWidth;         
;;;1457               buff[++buffIndex] = yPosition;
;;;1458       }
;;;1459       #if(0)
;;;1460       for(i = 0; i<buff[0]*3+1; i++) 
;;;1461       {
;;;1462           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;1463       }
;;;1464       #endif
;;;1465       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
;;;1466   
;;;1467       LoadImages(buff, buff[0]);
;;;1468       
;;;1469       xSemaphoreGive(xSemaphore); 
;;;1470       return TRUE;    
;;;1471   }
001b60  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.7012|
001b64  e59f0190          LDR      r0,|L1.7420|
001b68  e5c04000          STRB     r4,[r0,#0]            ;1416  ; hourTmp
001b6c  e59f018c          LDR      r0,|L1.7424|
001b70  e5c08000          STRB     r8,[r0,#0]            ;1417  ; minsTmp
001b74  e3570006          CMP      r7,#6                 ;1419
001b78  308ff107          ADDCC    pc,pc,r7,LSL #2       ;1419
001b7c  ea00000d          B        |L1.7096|
001b80  ea00000c          B        |L1.7096|
001b84  ea00000d          B        |L1.7104|
001b88  ea000005          B        |L1.7076|
001b8c  ea00000c          B        |L1.7108|
001b90  ea00000c          B        |L1.7112|
001b94  eaffffff          B        |L1.7064|
                  |L1.7064|
001b98  e1a00000          MOV      r0,r0                 ;1421
001b9c  e3a0900c          MOV      r9,#0xc               ;1425
001ba0  ea00000d          B        |L1.7132|
                  |L1.7076|
001ba4  e1a00000          MOV      r0,r0                 ;1427
001ba8  e3a05051          MOV      r5,#0x51              ;1429
001bac  e3a0b05b          MOV      r11,#0x5b             ;1430
001bb0  e3a09015          MOV      r9,#0x15              ;1431
001bb4  ea000008          B        |L1.7132|
                  |L1.7096|
001bb8  e1a00000          MOV      r0,r0                 ;1434
001bbc  e1a00000          MOV      r0,r0                 ;1434
                  |L1.7104|
001bc0  e1a00000          MOV      r0,r0                 ;1436
                  |L1.7108|
001bc4  e1a00000          MOV      r0,r0                 ;1438
                  |L1.7112|
001bc8  e1a01007          MOV      r1,r7                 ;1441
001bcc  e28f0f55          ADR      r0,|L1.7464|
001bd0  ebfffffe          BL       sysprintf
001bd4  e3a00000          MOV      r0,#0                 ;1442
001bd8  eaffffdf          B        |L1.7004|
                  |L1.7132|
001bdc  e1a00000          MOV      r0,r0                 ;1426
001be0  e3a0100a          MOV      r1,#0xa               ;1445
001be4  e1a00004          MOV      r0,r4                 ;1445
001be8  ebfffffe          BL       __aeabi_idivmod
001bec  e0800005          ADD      r0,r0,r5              ;1445
001bf0  e5cd0044          STRB     r0,[sp,#0x44]         ;1445
001bf4  e3a0100a          MOV      r1,#0xa               ;1446
001bf8  e1a00004          MOV      r0,r4                 ;1446
001bfc  ebfffffe          BL       __aeabi_idivmod
001c00  e0810005          ADD      r0,r1,r5              ;1446
001c04  e5cd0045          STRB     r0,[sp,#0x45]         ;1446
001c08  e5cdb046          STRB     r11,[sp,#0x46]        ;1447
001c0c  e3a0100a          MOV      r1,#0xa               ;1448
001c10  e1a00008          MOV      r0,r8                 ;1448
001c14  ebfffffe          BL       __aeabi_idivmod
001c18  e0800005          ADD      r0,r0,r5              ;1448
001c1c  e5cd0047          STRB     r0,[sp,#0x47]         ;1448
001c20  e3a0100a          MOV      r1,#0xa               ;1449
001c24  e1a00008          MOV      r0,r8                 ;1449
001c28  ebfffffe          BL       __aeabi_idivmod
001c2c  e0810005          ADD      r0,r1,r5              ;1449
001c30  e5cd0048          STRB     r0,[sp,#0x48]         ;1449
001c34  e3a00005          MOV      r0,#5                 ;1451
001c38  e58d0004          STR      r0,[sp,#4]            ;1451
001c3c  e3a06000          MOV      r6,#0                 ;1453
001c40  ea000015          B        |L1.7324|
                  |L1.7236|
001c44  e28d0044          ADD      r0,sp,#0x44           ;1455
001c48  e7d00006          LDRB     r0,[r0,r6]            ;1455
001c4c  e28a1001          ADD      r1,r10,#1             ;1455
001c50  e20110ff          AND      r1,r1,#0xff           ;1455
001c54  e1a0a001          MOV      r10,r1                ;1455
001c58  e28d2004          ADD      r2,sp,#4              ;1455
001c5c  e7820101          STR      r0,[r2,r1,LSL #2]     ;1455
001c60  e0010996          MUL      r1,r6,r9              ;1456
001c64  e59d004c          LDR      r0,[sp,#0x4c]         ;1456
001c68  e0400001          SUB      r0,r0,r1              ;1456
001c6c  e28a1001          ADD      r1,r10,#1             ;1456
001c70  e20110ff          AND      r1,r1,#0xff           ;1456
001c74  e1a0a001          MOV      r10,r1                ;1456
001c78  e28d2004          ADD      r2,sp,#4              ;1456
001c7c  e7820101          STR      r0,[r2,r1,LSL #2]     ;1456
001c80  e28a1001          ADD      r1,r10,#1             ;1457
001c84  e20110ff          AND      r1,r1,#0xff           ;1457
001c88  e1a0a001          MOV      r10,r1                ;1457
001c8c  e59d0050          LDR      r0,[sp,#0x50]         ;1457
001c90  e28d2004          ADD      r2,sp,#4              ;1457
001c94  e7820101          STR      r0,[r2,r1,LSL #2]     ;1457
001c98  e2866001          ADD      r6,r6,#1              ;1453
                  |L1.7324|
001c9c  e3560005          CMP      r6,#5                 ;1453
001ca0  baffffe7          BLT      |L1.7236|
001ca4  e3a03000          MOV      r3,#0                 ;1465
001ca8  e3e02000          MVN      r2,#0                 ;1465
001cac  e1a01003          MOV      r1,r3                 ;1465
001cb0  e59f00a0          LDR      r0,|L1.7512|
001cb4  e5900000          LDR      r0,[r0,#0]            ;1465  ; xSemaphore
001cb8  ebfffffe          BL       xQueueGenericReceive
001cbc  e59d1004          LDR      r1,[sp,#4]            ;1467
001cc0  e28d0004          ADD      r0,sp,#4              ;1467
001cc4  ebfffffe          BL       LoadImages
001cc8  e3a03000          MOV      r3,#0                 ;1469
001ccc  e1a02003          MOV      r2,r3                 ;1469
001cd0  e1a01003          MOV      r1,r3                 ;1469
001cd4  e59f007c          LDR      r0,|L1.7512|
001cd8  e5900000          LDR      r0,[r0,#0]            ;1469  ; xSemaphore
001cdc  ebfffffe          BL       xQueueGenericSend
001ce0  e3a00001          MOV      r0,#1                 ;1470
001ce4  eaffff9c          B        |L1.7004|
                  |L1.7400|
001ce8  202d2d20          DCB      " -- {INFO:[%d]} --\n",0
001cec  7b494e46
001cf0  4f3a5b25
001cf4  645d7d20
001cf8  2d2d0a00
                  |L1.7420|
                          DCD      hourTmp
                  |L1.7424|
                          DCD      minsTmp
                  |L1.7428|
001d04  4550443a          DCB      "EPD:ShowTime [%02d:%02d] ignore...\n",0
001d08  53686f77
001d0c  54696d65
001d10  205b2530
001d14  32643a25
001d18  3032645d
001d1c  2069676e
001d20  6f72652e
001d24  2e2e0a00
                  |L1.7464|
001d28  4550443a          DCB      "EPD:ShowTime  not support this font (id:%d)\n",0
001d2c  53686f77
001d30  54696d65
001d34  20206e6f
001d38  74207375
001d3c  70706f72
001d40  74207468
001d44  69732066
001d48  6f6e7420
001d4c  2869643a
001d50  2564290a
001d54  00      
001d55  00                DCB      0
001d56  00                DCB      0
001d57  00                DCB      0
                  |L1.7512|
                          DCD      xSemaphore
                          ENDP

                  ShowDate PROC
;;;1474   #define DATE_TOTAL_NUM_POSITION     10
;;;1475   static BOOL ShowDate(uint16_t xPosition, uint16_t yPosition, uint8_t fontType, UINT32 year, UINT32 month, UINT32 day, BOOL checkFlag)
001d5c  e92d4fff          PUSH     {r0-r11,lr}
;;;1476   {
001d60  e24dd094          SUB      sp,sp,#0x94
001d64  e1a06002          MOV      r6,r2
001d68  e1a07003          MOV      r7,r3
001d6c  e1cd8cd8          LDRD     r8,r9,[sp,#0xc8]
;;;1477       uint8_t showNum[DATE_TOTAL_NUM_POSITION];
;;;1478       uint8_t /*fontLineIndex, */fontNumIndex, fontSlashIndex, fontWidth;
;;;1479       uint8_t buffIndex = 0;;
001d70  e3a00000          MOV      r0,#0
001d74  e58d0080          STR      r0,[sp,#0x80]
;;;1480      
;;;1481       int i;
;;;1482       unsigned int buff[3*DATE_TOTAL_NUM_POSITION+1];
;;;1483       
;;;1484       #if(BUILD_DEBUG_VERSION)
;;;1485       sysprintf("EPD:ShowDate [%04d/%02d/%02d]...\n", year, month, day);
;;;1486       #endif
;;;1487       
;;;1488       if(checkFlag)
001d78  e59d00d0          LDR      r0,[sp,#0xd0]
001d7c  e3500000          CMP      r0,#0
001d80  0a00000e          BEQ      |L1.7616|
;;;1489       {
;;;1490           if((yearTmp == year) && (monthTmp == month) && (dayTmp == day))
001d84  e59f0308          LDR      r0,|L1.8340|
001d88  e5900000          LDR      r0,[r0,#0]  ; yearTmp
001d8c  e1500007          CMP      r0,r7
001d90  1a00000a          BNE      |L1.7616|
001d94  e59f02fc          LDR      r0,|L1.8344|
001d98  e5900000          LDR      r0,[r0,#0]  ; monthTmp
001d9c  e1500008          CMP      r0,r8
001da0  1a000006          BNE      |L1.7616|
001da4  e59f02f0          LDR      r0,|L1.8348|
001da8  e5900000          LDR      r0,[r0,#0]  ; dayTmp
001dac  e1500009          CMP      r0,r9
001db0  1a000002          BNE      |L1.7616|
;;;1491           {
;;;1492               //sysprintf("EPD:ShowDate [%04d/%02d/%02d] ignore...\n", year, month, day);
;;;1493               return FALSE;
001db4  e3a00000          MOV      r0,#0
                  |L1.7608|
001db8  e28dd0a4          ADD      sp,sp,#0xa4
;;;1494           }
;;;1495       }
;;;1496       //sysprintf("EPD:ShowDate [%04d/%02d/%02d]...\n", year, month, day);
;;;1497       yearTmp = year;
;;;1498       monthTmp = month;
;;;1499       dayTmp = day;
;;;1500       
;;;1501       switch(fontType)
;;;1502       {
;;;1503           case EPD_FONT_TYPE_DEBUG:
;;;1504               //fontLineIndex = EPD_PICT_NUM_DEBUG_INDEX;//EPD_PICT_LINE_BIG_INDEX ?????
;;;1505   //            fontNumIndex = EPD_PICT_NUM_DEBUG_INDEX;
;;;1506   //            fontSlashIndex = EPD_PICT_SLASH_DEBUG_INDEX;
;;;1507               fontWidth = 12;
;;;1508               break;        
;;;1509           case EPD_FONT_TYPE_SMALL_2:
;;;1510               //fontLineIndex = EPD_PICT_NUM_SMALL_2_INDEX;//EPD_PICT_LINE_BIG_INDEX ?????
;;;1511               fontNumIndex = EPD_PICT_NUM_SMALL_2_INDEX;
;;;1512               fontSlashIndex = EPD_PICT_LINE_SMALL_2_INDEX;
;;;1513               fontWidth = 21;
;;;1514               break;
;;;1515           
;;;1516           case EPD_FONT_TYPE_SMALL:
;;;1517               //break;
;;;1518           case EPD_FONT_TYPE_MEDIUM:
;;;1519               //break;        
;;;1520           case EPD_FONT_TYPE_BIG:
;;;1521               //break;         
;;;1522           default:
;;;1523               sysprintf("EPD:ShowDate  not support this font (id:%d)\n", fontType); 
;;;1524               return FALSE;            
;;;1525       }
;;;1526       
;;;1527       year = year%10000;//??4??
;;;1528       //sysprintf("EPD:ShowDate [%d/%d/%d]...\n", year/1000, year/100  - year/1000*10, year/10   - year/100*10);
;;;1529       showNum[0] = year/1000 + fontNumIndex;
;;;1530       showNum[1] = year/100  - year/1000*10 + fontNumIndex;
;;;1531       showNum[2] = year/10   - year/100*10   + fontNumIndex;
;;;1532       showNum[3] = year%10   + fontNumIndex;
;;;1533       showNum[4] = fontSlashIndex;
;;;1534       showNum[5] = month/10 + fontNumIndex;
;;;1535       showNum[6] = month%10 + fontNumIndex;
;;;1536       showNum[7] = fontSlashIndex;
;;;1537       showNum[8] = day/10 + fontNumIndex;
;;;1538       showNum[9] = day%10 + fontNumIndex;
;;;1539       buff[0] = DATE_TOTAL_NUM_POSITION;   
;;;1540       
;;;1541       for(i = 0; i<DATE_TOTAL_NUM_POSITION; i++) 
;;;1542       {
;;;1543               buff[++buffIndex] = showNum[i];
;;;1544               buff[++buffIndex] = xPosition - i*fontWidth;         
;;;1545               buff[++buffIndex] = yPosition;
;;;1546       }
;;;1547       #if(0)
;;;1548       for(i = 0; i<buff[0]*3+1; i++) 
;;;1549       {
;;;1550           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;1551       }
;;;1552       #endif
;;;1553       xSemaphoreTake(xSemaphore, portMAX_DELAY);     
;;;1554       LoadImages(buff, buff[0]);
;;;1555       xSemaphoreGive(xSemaphore);  
;;;1556       return TRUE;
;;;1557   }
001dbc  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.7616|
001dc0  e59f02cc          LDR      r0,|L1.8340|
001dc4  e5807000          STR      r7,[r0,#0]            ;1497  ; yearTmp
001dc8  e59f02c8          LDR      r0,|L1.8344|
001dcc  e5808000          STR      r8,[r0,#0]            ;1498  ; monthTmp
001dd0  e59f02c4          LDR      r0,|L1.8348|
001dd4  e5809000          STR      r9,[r0,#0]            ;1499  ; dayTmp
001dd8  e3560006          CMP      r6,#6                 ;1501
001ddc  308ff106          ADDCC    pc,pc,r6,LSL #2       ;1501
001de0  ea00000f          B        |L1.7716|
001de4  ea00000e          B        |L1.7716|
001de8  ea00000f          B        |L1.7724|
001dec  ea000006          B        |L1.7692|
001df0  ea00000e          B        |L1.7728|
001df4  ea00000e          B        |L1.7732|
001df8  eaffffff          B        |L1.7676|
                  |L1.7676|
001dfc  e1a00000          MOV      r0,r0                 ;1503
001e00  e3a0000c          MOV      r0,#0xc               ;1507
001e04  e58d0084          STR      r0,[sp,#0x84]         ;1507
001e08  ea00000e          B        |L1.7752|
                  |L1.7692|
001e0c  e1a00000          MOV      r0,r0                 ;1509
001e10  e3a04051          MOV      r4,#0x51              ;1511
001e14  e3a0a05c          MOV      r10,#0x5c             ;1512
001e18  e3a00015          MOV      r0,#0x15              ;1513
001e1c  e58d0084          STR      r0,[sp,#0x84]         ;1513
001e20  ea000008          B        |L1.7752|
                  |L1.7716|
001e24  e1a00000          MOV      r0,r0                 ;1516
001e28  e1a00000          MOV      r0,r0                 ;1516
                  |L1.7724|
001e2c  e1a00000          MOV      r0,r0                 ;1518
                  |L1.7728|
001e30  e1a00000          MOV      r0,r0                 ;1520
                  |L1.7732|
001e34  e1a01006          MOV      r1,r6                 ;1523
001e38  e28f0e26          ADR      r0,|L1.8352|
001e3c  ebfffffe          BL       sysprintf
001e40  e3a00000          MOV      r0,#0                 ;1524
001e44  eaffffdb          B        |L1.7608|
                  |L1.7752|
001e48  e1a00000          MOV      r0,r0                 ;1508
001e4c  e59f127c          LDR      r1,|L1.8400|
001e50  e1a00007          MOV      r0,r7                 ;1527
001e54  ebfffffe          BL       __aeabi_uidivmod
001e58  e1a07001          MOV      r7,r1                 ;1527
001e5c  e3a01ffa          MOV      r1,#0x3e8             ;1529
001e60  e1a00007          MOV      r0,r7                 ;1529
001e64  ebfffffe          BL       __aeabi_uidivmod
001e68  e0800004          ADD      r0,r0,r4              ;1529
001e6c  e5cd0088          STRB     r0,[sp,#0x88]         ;1529
001e70  e3a01064          MOV      r1,#0x64              ;1530
001e74  e1a00007          MOV      r0,r7                 ;1530
001e78  ebfffffe          BL       __aeabi_uidivmod
001e7c  e1a0b000          MOV      r11,r0                ;1530
001e80  e3a01ffa          MOV      r1,#0x3e8             ;1530
001e84  e1a00007          MOV      r0,r7                 ;1530
001e88  ebfffffe          BL       __aeabi_uidivmod
001e8c  e0800100          ADD      r0,r0,r0,LSL #2       ;1530
001e90  e04b0080          SUB      r0,r11,r0,LSL #1      ;1530
001e94  e0800004          ADD      r0,r0,r4              ;1530
001e98  e5cd0089          STRB     r0,[sp,#0x89]         ;1530
001e9c  e3a0100a          MOV      r1,#0xa               ;1531
001ea0  e1a00007          MOV      r0,r7                 ;1531
001ea4  ebfffffe          BL       __aeabi_uidivmod
001ea8  e1a0b000          MOV      r11,r0                ;1531
001eac  e3a01064          MOV      r1,#0x64              ;1531
001eb0  e1a00007          MOV      r0,r7                 ;1531
001eb4  ebfffffe          BL       __aeabi_uidivmod
001eb8  e0800100          ADD      r0,r0,r0,LSL #2       ;1531
001ebc  e04b0080          SUB      r0,r11,r0,LSL #1      ;1531
001ec0  e0800004          ADD      r0,r0,r4              ;1531
001ec4  e5cd008a          STRB     r0,[sp,#0x8a]         ;1531
001ec8  e3a0100a          MOV      r1,#0xa               ;1532
001ecc  e1a00007          MOV      r0,r7                 ;1532
001ed0  ebfffffe          BL       __aeabi_uidivmod
001ed4  e0810004          ADD      r0,r1,r4              ;1532
001ed8  e5cd008b          STRB     r0,[sp,#0x8b]         ;1532
001edc  e5cda08c          STRB     r10,[sp,#0x8c]        ;1533
001ee0  e3a0100a          MOV      r1,#0xa               ;1534
001ee4  e1a00008          MOV      r0,r8                 ;1534
001ee8  ebfffffe          BL       __aeabi_uidivmod
001eec  e0800004          ADD      r0,r0,r4              ;1534
001ef0  e5cd008d          STRB     r0,[sp,#0x8d]         ;1534
001ef4  e3a0100a          MOV      r1,#0xa               ;1535
001ef8  e1a00008          MOV      r0,r8                 ;1535
001efc  ebfffffe          BL       __aeabi_uidivmod
001f00  e0810004          ADD      r0,r1,r4              ;1535
001f04  e5cd008e          STRB     r0,[sp,#0x8e]         ;1535
001f08  e5cda08f          STRB     r10,[sp,#0x8f]        ;1536
001f0c  e3a0100a          MOV      r1,#0xa               ;1537
001f10  e1a00009          MOV      r0,r9                 ;1537
001f14  ebfffffe          BL       __aeabi_uidivmod
001f18  e0800004          ADD      r0,r0,r4              ;1537
001f1c  e5cd0090          STRB     r0,[sp,#0x90]         ;1537
001f20  e3a0100a          MOV      r1,#0xa               ;1538
001f24  e1a00009          MOV      r0,r9                 ;1538
001f28  ebfffffe          BL       __aeabi_uidivmod
001f2c  e0810004          ADD      r0,r1,r4              ;1538
001f30  e5cd0091          STRB     r0,[sp,#0x91]         ;1538
001f34  e3a0000a          MOV      r0,#0xa               ;1539
001f38  e58d0004          STR      r0,[sp,#4]            ;1539
001f3c  e3a05000          MOV      r5,#0                 ;1541
001f40  ea000019          B        |L1.8108|
                  |L1.8004|
001f44  e28d0088          ADD      r0,sp,#0x88           ;1543
001f48  e7d01005          LDRB     r1,[r0,r5]            ;1543
001f4c  e59d0080          LDR      r0,[sp,#0x80]         ;1543
001f50  e2800001          ADD      r0,r0,#1              ;1543
001f54  e20000ff          AND      r0,r0,#0xff           ;1543
001f58  e58d0080          STR      r0,[sp,#0x80]         ;1543
001f5c  e28d2004          ADD      r2,sp,#4              ;1543
001f60  e7821100          STR      r1,[r2,r0,LSL #2]     ;1543
001f64  e59d0084          LDR      r0,[sp,#0x84]         ;1544
001f68  e0010095          MUL      r1,r5,r0              ;1544
001f6c  e59d0094          LDR      r0,[sp,#0x94]         ;1544
001f70  e0401001          SUB      r1,r0,r1              ;1544
001f74  e59d0080          LDR      r0,[sp,#0x80]         ;1544
001f78  e2800001          ADD      r0,r0,#1              ;1544
001f7c  e20000ff          AND      r0,r0,#0xff           ;1544
001f80  e58d0080          STR      r0,[sp,#0x80]         ;1544
001f84  e28d2004          ADD      r2,sp,#4              ;1544
001f88  e7821100          STR      r1,[r2,r0,LSL #2]     ;1544
001f8c  e59d1080          LDR      r1,[sp,#0x80]         ;1545
001f90  e2811001          ADD      r1,r1,#1              ;1545
001f94  e20110ff          AND      r1,r1,#0xff           ;1545
001f98  e59d0098          LDR      r0,[sp,#0x98]         ;1545
001f9c  e58d1080          STR      r1,[sp,#0x80]         ;1545
001fa0  e28d2004          ADD      r2,sp,#4              ;1545
001fa4  e7820101          STR      r0,[r2,r1,LSL #2]     ;1545
001fa8  e2855001          ADD      r5,r5,#1              ;1541
                  |L1.8108|
001fac  e355000a          CMP      r5,#0xa               ;1541
001fb0  baffffe3          BLT      |L1.8004|
001fb4  e3a03000          MOV      r3,#0                 ;1553
001fb8  e3e02000          MVN      r2,#0                 ;1553
001fbc  e1a01003          MOV      r1,r3                 ;1553
001fc0  e51f0270          LDR      r0,|L1.7512|
001fc4  e5900000          LDR      r0,[r0,#0]            ;1553  ; xSemaphore
001fc8  ebfffffe          BL       xQueueGenericReceive
001fcc  e59d1004          LDR      r1,[sp,#4]            ;1554
001fd0  e28d0004          ADD      r0,sp,#4              ;1554
001fd4  ebfffffe          BL       LoadImages
001fd8  e3a03000          MOV      r3,#0                 ;1555
001fdc  e1a02003          MOV      r2,r3                 ;1555
001fe0  e1a01003          MOV      r1,r3                 ;1555
001fe4  e51f0294          LDR      r0,|L1.7512|
001fe8  e5900000          LDR      r0,[r0,#0]            ;1555  ; xSemaphore
001fec  ebfffffe          BL       xQueueGenericSend
001ff0  e3a00001          MOV      r0,#1                 ;1556
001ff4  eaffff6f          B        |L1.7608|
;;;1558   
                          ENDP

                  EPDDrawUpperLine PROC
;;;1560   static positionInfo upperLinePositionInfo = {EPD_PICT_UPPER_LINE_INDEX, 54, 504};
;;;1561   void EPDDrawUpperLine(BOOL reFreshFlag)
001ff8  e92d4010          PUSH     {r4,lr}
;;;1562   {
001ffc  e24dd018          SUB      sp,sp,#0x18
002000  e1a04000          MOV      r4,r0
;;;1563       unsigned int buff[3*1+1];  
;;;1564       buff[0] = 1;    
002004  e3a00001          MOV      r0,#1
002008  e58d0008          STR      r0,[sp,#8]
;;;1565       buff[1] = EPD_PICT_UPPER_LINE_INDEX;
00200c  e3a00085          MOV      r0,#0x85
002010  e58d000c          STR      r0,[sp,#0xc]
;;;1566       buff[2] = upperLinePositionInfo.xPos;
002014  e59f00b8          LDR      r0,|L1.8404|
002018  ebfffffe          BL       __aeabi_uread4
00201c  e58d0010          STR      r0,[sp,#0x10]
;;;1567       buff[3] = upperLinePositionInfo.yPos; 
002020  e59f00b0          LDR      r0,|L1.8408|
002024  ebfffffe          BL       __aeabi_uread4
002028  e58d0014          STR      r0,[sp,#0x14]
;;;1568       
;;;1569       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
00202c  e3a03000          MOV      r3,#0
002030  e3e02000          MVN      r2,#0
002034  e1a01003          MOV      r1,r3
002038  e51f02e8          LDR      r0,|L1.7512|
00203c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
002040  ebfffffe          BL       xQueueGenericReceive
;;;1570       LoadImages(buff, buff[0]);
002044  e59d1008          LDR      r1,[sp,#8]
002048  e28d0008          ADD      r0,sp,#8
00204c  ebfffffe          BL       LoadImages
;;;1571       if(reFreshFlag)
002050  e3540000          CMP      r4,#0
002054  0a000006          BEQ      |L1.8308|
;;;1572           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
002058  e3a00001          MOV      r0,#1
00205c  e58d0000          STR      r0,[sp,#0]
002060  e59f3074          LDR      r3,|L1.8412|
002064  e3a02b01          MOV      r2,#0x400
002068  e3a01000          MOV      r1,#0
00206c  e1a00001          MOV      r0,r1
002070  ebfffffe          BL       DisplayArea
                  |L1.8308|
;;;1573       xSemaphoreGive(xSemaphore);  
002074  e3a03000          MOV      r3,#0
002078  e1a02003          MOV      r2,r3
00207c  e1a01003          MOV      r1,r3
002080  e51f0330          LDR      r0,|L1.7512|
002084  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
002088  ebfffffe          BL       xQueueGenericSend
;;;1574   }
00208c  e28dd018          ADD      sp,sp,#0x18
002090  e8bd8010          POP      {r4,pc}
                  |L1.8340|
                          DCD      yearTmp
                  |L1.8344|
                          DCD      monthTmp
                  |L1.8348|
                          DCD      dayTmp
                  |L1.8352|
0020a0  4550443a          DCB      "EPD:ShowDate  not support this font (id:%d)\n",0
0020a4  53686f77
0020a8  44617465
0020ac  20206e6f
0020b0  74207375
0020b4  70706f72
0020b8  74207468
0020bc  69732066
0020c0  6f6e7420
0020c4  2869643a
0020c8  2564290a
0020cc  00      
0020cd  00                DCB      0
0020ce  00                DCB      0
0020cf  00                DCB      0
                  |L1.8400|
                          DCD      0x00002710
                  |L1.8404|
                          DCD      upperLinePositionInfo+0x4
                  |L1.8408|
                          DCD      upperLinePositionInfo+0x8
                  |L1.8412|
                          DCD      0x000002f6
                          ENDP

                  calculateBannerLinePositionInfo PROC
;;;1582   static bannerLinePositionInfo  mBannerLinePositionInfo;
;;;1583   static BOOL calculateBannerLinePositionInfo(void)
0020e0  e92d4010          PUSH     {r4,lr}
;;;1584   {
;;;1585       mBannerLinePositionInfo.itemNum = mBannerPositionInfo.carEnableNum + 1;
0020e4  e59f023c          LDR      r0,|L1.9000|
0020e8  ebfffffe          BL       __aeabi_uread4
0020ec  e2804001          ADD      r4,r0,#1
0020f0  e59f1234          LDR      r1,|L1.9004|
0020f4  e1a00004          MOV      r0,r4
0020f8  ebfffffe          BL       __aeabi_uwrite4
;;;1586       memcpy(&mBannerLinePositionInfo.info[0], &upperLinePositionInfo, sizeof(positionInfo));
0020fc  e3a0200c          MOV      r2,#0xc
002100  e59f1228          LDR      r1,|L1.9008|
002104  e59f0228          LDR      r0,|L1.9012|
002108  ebfffffe          BL       __aeabi_memcpy
;;;1587       memcpy(&mBannerLinePositionInfo.info[1], mBannerPositionInfo.info, sizeof(positionInfo)*mBannerPositionInfo.carEnableNum);
00210c  e59f0214          LDR      r0,|L1.9000|
002110  ebfffffe          BL       __aeabi_uread4
002114  e0800080          ADD      r0,r0,r0,LSL #1
002118  e1a04100          LSL      r4,r0,#2
00211c  e1a02004          MOV      r2,r4
002120  e59f1210          LDR      r1,|L1.9016|
002124  e59f0210          LDR      r0,|L1.9020|
002128  ebfffffe          BL       __aeabi_memcpy
;;;1588       return TRUE;
00212c  e3a00001          MOV      r0,#1
;;;1589   }
002130  e8bd8010          POP      {r4,pc}
;;;1590   
                          ENDP

                  calculateContainPositionInfo PROC
;;;1601   #define BOARD_2_HEIGHT_POSITION       -425
;;;1602   static BOOL calculateContainPositionInfo(uint8_t boardEnableNumber)
002134  e92d41f0          PUSH     {r4-r8,lr}
;;;1603   {    
002138  e1a05000          MOV      r5,r0
;;;1604       int i;
;;;1605       int targetWidth = 0, targetHight = 0;
00213c  e3a06000          MOV      r6,#0
002140  e3a07000          MOV      r7,#0
;;;1606       #if(SHOW_POSITION_DEBUG)
;;;1607       sysprintf("calculateContainPositionInfo: boardEnableNumber = %d\r\n", boardEnableNumber); 
;;;1608       #endif
;;;1609       if((boardEnableNumber > CAR_ITEM_MAX_NUM) || (boardEnableNumber < 1))
002144  e3550006          CMP      r5,#6
002148  ca000001          BGT      |L1.8532|
00214c  e3550001          CMP      r5,#1
002150  aa000004          BGE      |L1.8552|
                  |L1.8532|
;;;1610       {
;;;1611           sysprintf("calculateContainPositionInfo fail: boardEnableNumber = %d\r\n", boardEnableNumber); 
002154  e1a01005          MOV      r1,r5
002158  e28f0e1e          ADR      r0,|L1.9024|
00215c  ebfffffe          BL       sysprintf
;;;1612           return FALSE;
002160  e3a00000          MOV      r0,#0
                  |L1.8548|
;;;1613       }
;;;1614       mContainPositionInfo.boardEnableNum = boardEnableNumber;  
;;;1615       for(i = 0; i<mContainPositionInfo.boardEnableNum; i++) 
;;;1616       {
;;;1617           
;;;1618           if(i == 0)
;;;1619           {
;;;1620               mContainPositionInfo.info[i].xPos = BOARD_START_X_POSITION; 
;;;1621               switch(boardEnableNumber)
;;;1622               {
;;;1623                   case 1:
;;;1624                   case 2:
;;;1625                       mContainPositionInfo.info[i].yPos = BOARD_2_START_Y_POSITION; 
;;;1626                       break;
;;;1627                   case 3:
;;;1628                   case 4:
;;;1629                       mContainPositionInfo.info[i].yPos = BOARD_4_START_Y_POSITION; 
;;;1630                       break;
;;;1631                   default:
;;;1632                       mContainPositionInfo.info[i].yPos = BOARD_START_Y_POSITION; 
;;;1633                       break;
;;;1634               }
;;;1635               //mContainPositionInfo.info[i].yPos = BOARD_START_Y_POSITION; 
;;;1636           }
;;;1637           else
;;;1638           {
;;;1639               mContainPositionInfo.info[i].xPos = mContainPositionInfo.info[i-1].xPos + targetWidth; 
;;;1640               mContainPositionInfo.info[i].yPos = mContainPositionInfo.info[i-1].yPos + targetHight; 
;;;1641               
;;;1642           }
;;;1643   //        mContainPositionInfo.info[i].bmpId = EPD_PICT_BOARD_L_INDEX;//EPD_PICT_BOARD_INDEX;
;;;1644           if(i%2 == 0)
;;;1645           {
;;;1646               targetWidth = BOARD_WIDTH_POSITION;
;;;1647               targetHight = 0;
;;;1648           }
;;;1649           else
;;;1650           {
;;;1651               targetWidth = -BOARD_WIDTH_POSITION;
;;;1652               switch(boardEnableNumber)
;;;1653               {
;;;1654                   case 1:
;;;1655                   case 2:
;;;1656                       targetHight = BOARD_2_HEIGHT_POSITION;
;;;1657                       break;
;;;1658                   case 3:
;;;1659                   case 4:
;;;1660                       targetHight = BOARD_4_HEIGHT_POSITION;
;;;1661                       break;
;;;1662                   default:
;;;1663                       targetHight = BOARD_HEIGHT_POSITION;
;;;1664                       break;
;;;1665               }
;;;1666               
;;;1667           }
;;;1668           
;;;1669           #if(SHOW_POSITION_DEBUG)      
;;;1670           sysprintf("mContainPositionInfo[%d]: [%d: (%03d, %03d)]\r\n", i, mContainPositionInfo.info[i].bmpId, mContainPositionInfo.info[i].xPos, mContainPositionInfo.info[i].yPos); 
;;;1671           #endif
;;;1672       }
;;;1673       
;;;1674       return TRUE;
;;;1675   }
002164  e8bd81f0          POP      {r4-r8,pc}
                  |L1.8552|
002168  e59f120c          LDR      r1,|L1.9084|
00216c  e1a00005          MOV      r0,r5                 ;1614
002170  ebfffffe          BL       __aeabi_uwrite4
002174  e3a04000          MOV      r4,#0                 ;1615
002178  ea000064          B        |L1.8976|
                  |L1.8572|
00217c  e3540000          CMP      r4,#0                 ;1618
002180  1a000029          BNE      |L1.8748|
002184  e0840084          ADD      r0,r4,r4,LSL #1       ;1620
002188  e59f21f0          LDR      r2,|L1.9088|
00218c  e0820100          ADD      r0,r2,r0,LSL #2       ;1620
002190  e2801004          ADD      r1,r0,#4              ;1620
002194  e59f01e8          LDR      r0,|L1.9092|
002198  ebfffffe          BL       __aeabi_uwrite4
00219c  e3550001          CMP      r5,#1                 ;1621
0021a0  0a000006          BEQ      |L1.8640|
0021a4  e3550002          CMP      r5,#2                 ;1621
0021a8  0a000006          BEQ      |L1.8648|
0021ac  e3550003          CMP      r5,#3                 ;1621
0021b0  0a00000b          BEQ      |L1.8676|
0021b4  e3550004          CMP      r5,#4                 ;1621
0021b8  1a000012          BNE      |L1.8712|
0021bc  ea00000a          B        |L1.8684|
                  |L1.8640|
0021c0  e1a00000          MOV      r0,r0                 ;1623
0021c4  e1a00000          MOV      r0,r0                 ;1624
                  |L1.8648|
0021c8  e0840084          ADD      r0,r4,r4,LSL #1       ;1625
0021cc  e59f21ac          LDR      r2,|L1.9088|
0021d0  e0820100          ADD      r0,r2,r0,LSL #2       ;1625
0021d4  e2801008          ADD      r1,r0,#8              ;1625
0021d8  e3a00050          MOV      r0,#0x50              ;1625
0021dc  ebfffffe          BL       __aeabi_uwrite4
0021e0  ea000010          B        |L1.8744|
                  |L1.8676|
0021e4  e1a00000          MOV      r0,r0                 ;1627
0021e8  e1a00000          MOV      r0,r0                 ;1628
                  |L1.8684|
0021ec  e0840084          ADD      r0,r4,r4,LSL #1       ;1629
0021f0  e59f2188          LDR      r2,|L1.9088|
0021f4  e0820100          ADD      r0,r2,r0,LSL #2       ;1629
0021f8  e2801008          ADD      r1,r0,#8              ;1629
0021fc  e3a00f49          MOV      r0,#0x124             ;1629
002200  ebfffffe          BL       __aeabi_uwrite4
002204  ea000007          B        |L1.8744|
                  |L1.8712|
002208  e1a00000          MOV      r0,r0                 ;1631
00220c  e0840084          ADD      r0,r4,r4,LSL #1       ;1632
002210  e59f2168          LDR      r2,|L1.9088|
002214  e0820100          ADD      r0,r2,r0,LSL #2       ;1632
002218  e2801008          ADD      r1,r0,#8              ;1632
00221c  e59f0164          LDR      r0,|L1.9096|
002220  ebfffffe          BL       __aeabi_uwrite4
002224  e1a00000          MOV      r0,r0                 ;1633
                  |L1.8744|
002228  ea000019          B        |L1.8852|
                  |L1.8748|
00222c  e2441001          SUB      r1,r4,#1              ;1639
002230  e0811081          ADD      r1,r1,r1,LSL #1       ;1639
002234  e59f2144          LDR      r2,|L1.9088|
002238  e0821101          ADD      r1,r2,r1,LSL #2       ;1639
00223c  e2810004          ADD      r0,r1,#4              ;1639
002240  ebfffffe          BL       __aeabi_uread4
002244  e0808006          ADD      r8,r0,r6              ;1639
002248  e0840084          ADD      r0,r4,r4,LSL #1       ;1639
00224c  e59f212c          LDR      r2,|L1.9088|
002250  e0820100          ADD      r0,r2,r0,LSL #2       ;1639
002254  e2801004          ADD      r1,r0,#4              ;1639
002258  e1a00008          MOV      r0,r8                 ;1639
00225c  ebfffffe          BL       __aeabi_uwrite4
002260  e2441001          SUB      r1,r4,#1              ;1640
002264  e0811081          ADD      r1,r1,r1,LSL #1       ;1640
002268  e59f2110          LDR      r2,|L1.9088|
00226c  e0821101          ADD      r1,r2,r1,LSL #2       ;1640
002270  e2810008          ADD      r0,r1,#8              ;1640
002274  ebfffffe          BL       __aeabi_uread4
002278  e0808007          ADD      r8,r0,r7              ;1640
00227c  e0840084          ADD      r0,r4,r4,LSL #1       ;1640
002280  e59f20f8          LDR      r2,|L1.9088|
002284  e0820100          ADD      r0,r2,r0,LSL #2       ;1640
002288  e2801008          ADD      r1,r0,#8              ;1640
00228c  e1a00008          MOV      r0,r8                 ;1640
002290  ebfffffe          BL       __aeabi_uwrite4
                  |L1.8852|
002294  e1a00004          MOV      r0,r4                 ;1644
002298  e0841fa0          ADD      r1,r4,r0,LSR #31      ;1644
00229c  e1a010c1          ASR      r1,r1,#1              ;1644
0022a0  e0541081          SUBS     r1,r4,r1,LSL #1       ;1644
0022a4  1a000002          BNE      |L1.8884|
0022a8  e59f60dc          LDR      r6,|L1.9100|
0022ac  e3a07000          MOV      r7,#0                 ;1647
0022b0  ea000015          B        |L1.8972|
                  |L1.8884|
0022b4  e59f60d4          LDR      r6,|L1.9104|
0022b8  e3550001          CMP      r5,#1                 ;1652
0022bc  0a000006          BEQ      |L1.8924|
0022c0  e3550002          CMP      r5,#2                 ;1652
0022c4  0a000006          BEQ      |L1.8932|
0022c8  e3550003          CMP      r5,#3                 ;1652
0022cc  0a000006          BEQ      |L1.8940|
0022d0  e3550004          CMP      r5,#4                 ;1652
0022d4  1a000008          BNE      |L1.8956|
0022d8  ea000005          B        |L1.8948|
                  |L1.8924|
0022dc  e1a00000          MOV      r0,r0                 ;1654
0022e0  e1a00000          MOV      r0,r0                 ;1655
                  |L1.8932|
0022e4  e3e07f6a          MVN      r7,#0x1a8             ;1656
0022e8  ea000006          B        |L1.8968|
                  |L1.8940|
0022ec  e1a00000          MOV      r0,r0                 ;1658
0022f0  e1a00000          MOV      r0,r0                 ;1659
                  |L1.8948|
0022f4  e3e070d3          MVN      r7,#0xd3              ;1660
0022f8  ea000002          B        |L1.8968|
                  |L1.8956|
0022fc  e1a00000          MOV      r0,r0                 ;1662
002300  e3e07089          MVN      r7,#0x89              ;1663
002304  e1a00000          MOV      r0,r0                 ;1664
                  |L1.8968|
002308  e1a00000          MOV      r0,r0                 ;1657
                  |L1.8972|
00230c  e2844001          ADD      r4,r4,#1              ;1615
                  |L1.8976|
002310  e59f0064          LDR      r0,|L1.9084|
002314  ebfffffe          BL       __aeabi_uread4
002318  e1500004          CMP      r0,r4                 ;1615
00231c  8affff96          BHI      |L1.8572|
002320  e3a00001          MOV      r0,#1                 ;1674
002324  eaffff8e          B        |L1.8548|
                  |L1.9000|
                          DCD      mBannerPositionInfo
                  |L1.9004|
                          DCD      mBannerLinePositionInfo
                  |L1.9008|
                          DCD      upperLinePositionInfo
                  |L1.9012|
                          DCD      mBannerLinePositionInfo+0x4
                  |L1.9016|
                          DCD      mBannerPositionInfo+0x4
                  |L1.9020|
                          DCD      mBannerLinePositionInfo+0x10
                  |L1.9024|
002340  63616c63          DCB      "calculateContainPositionInfo fail: boardEnableNumber = "
002344  756c6174
002348  65436f6e
00234c  7461696e
002350  506f7369
002354  74696f6e
002358  496e666f
00235c  20666169
002360  6c3a2062
002364  6f617264
002368  456e6162
00236c  6c654e75
002370  6d626572
002374  203d20  
002377  25640d0a          DCB      "%d\r\n",0
00237b  00      
                  |L1.9084|
                          DCD      mContainPositionInfo
                  |L1.9088|
                          DCD      mContainPositionInfo+0x4
                  |L1.9092|
                          DCD      0x000001ab
                  |L1.9096|
                          DCD      0x0000016e
                  |L1.9100|
                          DCD      0xfffffe8a
                  |L1.9104|
                          DCD      0x00000176
                          ENDP

                  calculateContainNumberPositionInfo PROC
;;;1686   #define BOARD_NUMBER_2_HEIGHT_POSITION       -425
;;;1687   static BOOL calculateContainNumberPositionInfo(uint8_t boardEnableNumber)
002394  e92d41f0          PUSH     {r4-r8,lr}
;;;1688   {    
002398  e1a05000          MOV      r5,r0
;;;1689       int i;
;;;1690       int targetWidth = 0, targetHight = 0;
00239c  e3a06000          MOV      r6,#0
0023a0  e3a07000          MOV      r7,#0
;;;1691       #if(SHOW_POSITION_DEBUG)
;;;1692       sysprintf("calculateContainNumberPositionInfo: boardEnableNumber = %d\r\n", boardEnableNumber); 
;;;1693       #endif
;;;1694       if((boardEnableNumber > CAR_ITEM_MAX_NUM) || (boardEnableNumber < 1))
0023a4  e3550006          CMP      r5,#6
0023a8  ca000001          BGT      |L1.9140|
0023ac  e3550001          CMP      r5,#1
0023b0  aa000004          BGE      |L1.9160|
                  |L1.9140|
;;;1695       {
;;;1696           sysprintf("calculateContainNumberPositionInfo fail: boardEnableNumber = %d\r\n", boardEnableNumber); 
0023b4  e1a01005          MOV      r1,r5
0023b8  e59f043c          LDR      r0,|L1.10236|
0023bc  ebfffffe          BL       sysprintf
;;;1697           return FALSE;
0023c0  e3a00000          MOV      r0,#0
                  |L1.9156|
;;;1698       }
;;;1699       mContainNumberPositionInfo.boardEnableNum = boardEnableNumber;  
;;;1700       for(i = 0; i<mContainNumberPositionInfo.boardEnableNum; i++) 
;;;1701       {
;;;1702           
;;;1703           if(i == 0)
;;;1704           {
;;;1705               mContainNumberPositionInfo.info[i].xPos = BOARD_NUMBER_START_X_POSITION; 
;;;1706               switch(boardEnableNumber)
;;;1707               {
;;;1708                   case 1:
;;;1709                   case 2:
;;;1710                       mContainNumberPositionInfo.info[i].yPos = BOARD_NUMBER_2_START_Y_POSITION; 
;;;1711                       break;
;;;1712                   case 3:
;;;1713                   case 4:
;;;1714                       mContainNumberPositionInfo.info[i].yPos = BOARD_NUMBER_4_START_Y_POSITION; 
;;;1715                       break;
;;;1716                   default:
;;;1717                       mContainNumberPositionInfo.info[i].yPos = BOARD_NUMBER_START_Y_POSITION; 
;;;1718                       break;
;;;1719               }
;;;1720               //mContainNumberPositionInfo.info[i].yPos = BOARD_NUMBER_START_Y_POSITION; 
;;;1721           }
;;;1722           else
;;;1723           {
;;;1724               mContainNumberPositionInfo.info[i].xPos = mContainNumberPositionInfo.info[i-1].xPos + targetWidth; 
;;;1725               mContainNumberPositionInfo.info[i].yPos = mContainNumberPositionInfo.info[i-1].yPos + targetHight; 
;;;1726               
;;;1727           }
;;;1728           mContainNumberPositionInfo.info[i].bmpId = EPD_PICT_NUM_SMALL_2_INDEX + i + 1;
;;;1729           if(i%2 == 0)
;;;1730           {
;;;1731               targetWidth = BOARD_NUMBER_WIDTH_POSITION;
;;;1732               targetHight = 0;
;;;1733           }
;;;1734           else
;;;1735           {
;;;1736               targetWidth = -BOARD_NUMBER_WIDTH_POSITION;
;;;1737               
;;;1738               switch(boardEnableNumber)
;;;1739               {
;;;1740                   case 1:
;;;1741                   case 2:
;;;1742                       targetHight = BOARD_NUMBER_2_HEIGHT_POSITION;
;;;1743                       break;
;;;1744                   case 3:
;;;1745                   case 4:
;;;1746                       targetHight = BOARD_NUMBER_4_HEIGHT_POSITION;
;;;1747                       break;
;;;1748                   default:
;;;1749                       targetHight = BOARD_NUMBER_HEIGHT_POSITION;
;;;1750                       break;
;;;1751               }            
;;;1752           }       
;;;1753           #if(SHOW_POSITION_DEBUG)      
;;;1754           sysprintf("mContainNumberPositionInfo[%d]: [%d: (%03d, %03d)]\r\n", i, mContainNumberPositionInfo.info[i].bmpId, mContainNumberPositionInfo.info[i].xPos, mContainNumberPositionInfo.info[i].yPos); 
;;;1755           #endif
;;;1756       }
;;;1757       
;;;1758       return TRUE;
;;;1759   }
0023c4  e8bd81f0          POP      {r4-r8,pc}
                  |L1.9160|
0023c8  e59f1430          LDR      r1,|L1.10240|
0023cc  e1a00005          MOV      r0,r5                 ;1699
0023d0  ebfffffe          BL       __aeabi_uwrite4
0023d4  e3a04000          MOV      r4,#0                 ;1700
0023d8  ea000069          B        |L1.9604|
                  |L1.9180|
0023dc  e3540000          CMP      r4,#0                 ;1703
0023e0  1a000029          BNE      |L1.9356|
0023e4  e0840084          ADD      r0,r4,r4,LSL #1       ;1705
0023e8  e59f2414          LDR      r2,|L1.10244|
0023ec  e0820100          ADD      r0,r2,r0,LSL #2       ;1705
0023f0  e2801004          ADD      r1,r0,#4              ;1705
0023f4  e59f040c          LDR      r0,|L1.10248|
0023f8  ebfffffe          BL       __aeabi_uwrite4
0023fc  e3550001          CMP      r5,#1                 ;1706
002400  0a000006          BEQ      |L1.9248|
002404  e3550002          CMP      r5,#2                 ;1706
002408  0a000006          BEQ      |L1.9256|
00240c  e3550003          CMP      r5,#3                 ;1706
002410  0a00000b          BEQ      |L1.9284|
002414  e3550004          CMP      r5,#4                 ;1706
002418  1a000012          BNE      |L1.9320|
00241c  ea00000a          B        |L1.9292|
                  |L1.9248|
002420  e1a00000          MOV      r0,r0                 ;1708
002424  e1a00000          MOV      r0,r0                 ;1709
                  |L1.9256|
002428  e0840084          ADD      r0,r4,r4,LSL #1       ;1710
00242c  e59f23d0          LDR      r2,|L1.10244|
002430  e0820100          ADD      r0,r2,r0,LSL #2       ;1710
002434  e2801008          ADD      r1,r0,#8              ;1710
002438  e3a00058          MOV      r0,#0x58              ;1710
00243c  ebfffffe          BL       __aeabi_uwrite4
002440  ea000010          B        |L1.9352|
                  |L1.9284|
002444  e1a00000          MOV      r0,r0                 ;1712
002448  e1a00000          MOV      r0,r0                 ;1713
                  |L1.9292|
00244c  e0840084          ADD      r0,r4,r4,LSL #1       ;1714
002450  e59f23ac          LDR      r2,|L1.10244|
002454  e0820100          ADD      r0,r2,r0,LSL #2       ;1714
002458  e2801008          ADD      r1,r0,#8              ;1714
00245c  e3a00f4b          MOV      r0,#0x12c             ;1714
002460  ebfffffe          BL       __aeabi_uwrite4
002464  ea000007          B        |L1.9352|
                  |L1.9320|
002468  e1a00000          MOV      r0,r0                 ;1716
00246c  e0840084          ADD      r0,r4,r4,LSL #1       ;1717
002470  e59f238c          LDR      r2,|L1.10244|
002474  e0820100          ADD      r0,r2,r0,LSL #2       ;1717
002478  e2801008          ADD      r1,r0,#8              ;1717
00247c  e51f00f4          LDR      r0,|L1.9104|
002480  ebfffffe          BL       __aeabi_uwrite4
002484  e1a00000          MOV      r0,r0                 ;1718
                  |L1.9352|
002488  ea000019          B        |L1.9460|
                  |L1.9356|
00248c  e2441001          SUB      r1,r4,#1              ;1724
002490  e0811081          ADD      r1,r1,r1,LSL #1       ;1724
002494  e59f2368          LDR      r2,|L1.10244|
002498  e0821101          ADD      r1,r2,r1,LSL #2       ;1724
00249c  e2810004          ADD      r0,r1,#4              ;1724
0024a0  ebfffffe          BL       __aeabi_uread4
0024a4  e0808006          ADD      r8,r0,r6              ;1724
0024a8  e0840084          ADD      r0,r4,r4,LSL #1       ;1724
0024ac  e59f2350          LDR      r2,|L1.10244|
0024b0  e0820100          ADD      r0,r2,r0,LSL #2       ;1724
0024b4  e2801004          ADD      r1,r0,#4              ;1724
0024b8  e1a00008          MOV      r0,r8                 ;1724
0024bc  ebfffffe          BL       __aeabi_uwrite4
0024c0  e2441001          SUB      r1,r4,#1              ;1725
0024c4  e0811081          ADD      r1,r1,r1,LSL #1       ;1725
0024c8  e59f2334          LDR      r2,|L1.10244|
0024cc  e0821101          ADD      r1,r2,r1,LSL #2       ;1725
0024d0  e2810008          ADD      r0,r1,#8              ;1725
0024d4  ebfffffe          BL       __aeabi_uread4
0024d8  e0808007          ADD      r8,r0,r7              ;1725
0024dc  e0840084          ADD      r0,r4,r4,LSL #1       ;1725
0024e0  e59f231c          LDR      r2,|L1.10244|
0024e4  e0820100          ADD      r0,r2,r0,LSL #2       ;1725
0024e8  e2801008          ADD      r1,r0,#8              ;1725
0024ec  e1a00008          MOV      r0,r8                 ;1725
0024f0  ebfffffe          BL       __aeabi_uwrite4
                  |L1.9460|
0024f4  e0842084          ADD      r2,r4,r4,LSL #1       ;1728
0024f8  e59f3304          LDR      r3,|L1.10244|
0024fc  e0831102          ADD      r1,r3,r2,LSL #2       ;1728
002500  e2840052          ADD      r0,r4,#0x52           ;1728
002504  ebfffffe          BL       __aeabi_uwrite4
002508  e1a00004          MOV      r0,r4                 ;1729
00250c  e0841fa0          ADD      r1,r4,r0,LSR #31      ;1729
002510  e1a010c1          ASR      r1,r1,#1              ;1729
002514  e0541081          SUBS     r1,r4,r1,LSL #1       ;1729
002518  1a000002          BNE      |L1.9512|
00251c  e3e0602c          MVN      r6,#0x2c              ;1731
002520  e3a07000          MOV      r7,#0                 ;1732
002524  ea000015          B        |L1.9600|
                  |L1.9512|
002528  e3a0602d          MOV      r6,#0x2d              ;1736
00252c  e3550001          CMP      r5,#1                 ;1738
002530  0a000006          BEQ      |L1.9552|
002534  e3550002          CMP      r5,#2                 ;1738
002538  0a000006          BEQ      |L1.9560|
00253c  e3550003          CMP      r5,#3                 ;1738
002540  0a000006          BEQ      |L1.9568|
002544  e3550004          CMP      r5,#4                 ;1738
002548  1a000008          BNE      |L1.9584|
00254c  ea000005          B        |L1.9576|
                  |L1.9552|
002550  e1a00000          MOV      r0,r0                 ;1740
002554  e1a00000          MOV      r0,r0                 ;1741
                  |L1.9560|
002558  e3e07f6a          MVN      r7,#0x1a8             ;1742
00255c  ea000006          B        |L1.9596|
                  |L1.9568|
002560  e1a00000          MOV      r0,r0                 ;1744
002564  e1a00000          MOV      r0,r0                 ;1745
                  |L1.9576|
002568  e3e070d4          MVN      r7,#0xd4              ;1746
00256c  ea000002          B        |L1.9596|
                  |L1.9584|
002570  e1a00000          MOV      r0,r0                 ;1748
002574  e3e07089          MVN      r7,#0x89              ;1749
002578  e1a00000          MOV      r0,r0                 ;1750
                  |L1.9596|
00257c  e1a00000          MOV      r0,r0                 ;1743
                  |L1.9600|
002580  e2844001          ADD      r4,r4,#1              ;1700
                  |L1.9604|
002584  e59f0274          LDR      r0,|L1.10240|
002588  ebfffffe          BL       __aeabi_uread4
00258c  e1500004          CMP      r0,r4                 ;1700
002590  8affff91          BHI      |L1.9180|
002594  e3a00001          MOV      r0,#1                 ;1758
002598  eaffff89          B        |L1.9156|
;;;1760   
                          ENDP

                  calculateDepositTimePositionInfo PROC
;;;1774   #define DEPOSIT_TIME_2_HEIGHT_POSITION       -425
;;;1775   static BOOL calculateDepositTimePositionInfo(uint8_t boardEnableNumber)
00259c  e92d5ffc          PUSH     {r2-r12,lr}
;;;1776   {
0025a0  e1a04000          MOV      r4,r0
;;;1777       int i, j;
;;;1778       int targetWidth = 0, targetHight = 0;
0025a4  e3a0a000          MOV      r10,#0
0025a8  e3a00000          MOV      r0,#0
0025ac  e58d0004          STR      r0,[sp,#4]
;;;1779       int targetWidth2 = 0;
0025b0  e58d0000          STR      r0,[sp,#0]
;;;1780       int xBase = 0, yBase = 0;
0025b4  e3a08000          MOV      r8,#0
0025b8  e3a09000          MOV      r9,#0
;;;1781       #if(SHOW_POSITION_DEBUG)
;;;1782       sysprintf("calculateDepositTimePositionInfo: boardEnableNumber = %d\r\n", boardEnableNumber); 
;;;1783       #endif
;;;1784       if((boardEnableNumber > CAR_ITEM_MAX_NUM) || (boardEnableNumber < 1))
0025bc  e3540006          CMP      r4,#6
0025c0  ca000001          BGT      |L1.9676|
0025c4  e3540001          CMP      r4,#1
0025c8  aa000004          BGE      |L1.9696|
                  |L1.9676|
;;;1785       {
;;;1786           sysprintf("calculateDepositTimePositionInfo fail: boardEnableNumber = %d\r\n", boardEnableNumber); 
0025cc  e1a01004          MOV      r1,r4
0025d0  e28f0f8d          ADR      r0,|L1.10252|
0025d4  ebfffffe          BL       sysprintf
;;;1787           return FALSE;
0025d8  e3a00000          MOV      r0,#0
                  |L1.9692|
;;;1788       }
;;;1789       mDepositTimeAllPositionInfo.depositTimeEnableNum = boardEnableNumber * DEPOSIT_TIME_DIGITAL_NUM;  
;;;1790       for(i = 0; i</*mDepositTimeAllPositionInfo.depositTimeEnableNum*/boardEnableNumber; i++) 
;;;1791       {
;;;1792           if(i == 0)
;;;1793           {
;;;1794               xBase = DEPOSIT_TIME_START_X_POSITION; 
;;;1795               switch(boardEnableNumber)
;;;1796               {
;;;1797                   case 1:
;;;1798                   case 2:
;;;1799                       yBase = DEPOSIT_TIME_2_START_Y_POSITION; 
;;;1800                       break;
;;;1801                   case 3:
;;;1802                   case 4:
;;;1803                       yBase = DEPOSIT_TIME_4_START_Y_POSITION; 
;;;1804                       break;
;;;1805                   default:
;;;1806                       yBase = DEPOSIT_TIME_START_Y_POSITION; 
;;;1807                       break;
;;;1808               }   
;;;1809               //yBase = DEPOSIT_TIME_START_Y_POSITION; 
;;;1810           }
;;;1811           else
;;;1812           {
;;;1813               xBase = xBase + targetWidth; 
;;;1814               yBase = yBase + targetHight;                 
;;;1815           }
;;;1816           targetWidth2 = 0;
;;;1817           for(j = 0; j<DEPOSIT_TIME_DIGITAL_NUM; j++) 
;;;1818           {
;;;1819               uint8_t targetIndex = DEPOSIT_TIME_DIGITAL_NUM*i+j;
;;;1820               if(j == 0)
;;;1821               {
;;;1822                   mDepositTimeAllPositionInfo.info[targetIndex].xPos = xBase; 
;;;1823                   mDepositTimeAllPositionInfo.info[targetIndex].yPos = yBase; 
;;;1824               }
;;;1825               else
;;;1826               {
;;;1827                   mDepositTimeAllPositionInfo.info[targetIndex].xPos = mDepositTimeAllPositionInfo.info[targetIndex-1].xPos + targetWidth2; 
;;;1828                   mDepositTimeAllPositionInfo.info[targetIndex].yPos = mDepositTimeAllPositionInfo.info[targetIndex-1].yPos;                 
;;;1829               }
;;;1830               #if(1)
;;;1831               if(j == 1)
;;;1832               {                
;;;1833                   targetWidth2 = DEPOSIT_TIME_COLON_FONT_WIDTH + DEPOSIT_TIME_FONT_WIDTH;
;;;1834               }
;;;1835               else
;;;1836               {                
;;;1837                   targetWidth2 = DEPOSIT_TIME_FONT_WIDTH;
;;;1838               }
;;;1839               mDepositTimeAllPositionInfo.info[targetIndex].bmpId = EPD_PICT_NUM_BIG_INDEX;
;;;1840               #else
;;;1841               if(j == 1)
;;;1842               {
;;;1843                   mDepositTimeAllPositionInfo.info[targetIndex].bmpId = EPD_PICT_NUM_BIG_INDEX + i + j;
;;;1844                   targetWidth2 = DEPOSIT_TIME_COLON_FONT_WIDTH + DEPOSIT_TIME_FONT_WIDTH;
;;;1845               }
;;;1846               else if(j == 2)
;;;1847               {
;;;1848                   mDepositTimeAllPositionInfo.info[targetIndex].bmpId = EPD_PICT_NUM_BIG_INDEX + i + j;
;;;1849                   targetWidth2 = DEPOSIT_TIME_FONT_WIDTH;
;;;1850               }
;;;1851               else
;;;1852               {
;;;1853                   mDepositTimeAllPositionInfo.info[targetIndex].bmpId = EPD_PICT_NUM_BIG_INDEX + i + j;
;;;1854                   targetWidth2 = DEPOSIT_TIME_FONT_WIDTH;
;;;1855               }
;;;1856               #endif
;;;1857               #if(SHOW_POSITION_DEBUG)            
;;;1858               sysprintf("mDepositTimeAllPositionInfo[%d]: [%d: (%03d, %03d)]\r\n", targetIndex, mDepositTimeAllPositionInfo.info[targetIndex].bmpId, mDepositTimeAllPositionInfo.info[targetIndex].xPos, mDepositTimeAllPositionInfo.info[targetIndex].yPos); 
;;;1859               #endif
;;;1860               
;;;1861           }
;;;1862           
;;;1863           if(i%2 == 0)
;;;1864           {
;;;1865               targetWidth = DEPOSIT_TIME_WIDTH_POSITION;
;;;1866               targetHight = 0;
;;;1867           }
;;;1868           else
;;;1869           {
;;;1870               targetWidth = -DEPOSIT_TIME_WIDTH_POSITION;
;;;1871               switch(boardEnableNumber)
;;;1872               {
;;;1873                   case 1:
;;;1874                   case 2:
;;;1875                       targetHight = DEPOSIT_TIME_2_HEIGHT_POSITION;
;;;1876                       break;
;;;1877                   case 3:
;;;1878                   case 4:
;;;1879                       targetHight = DEPOSIT_TIME_4_HEIGHT_POSITION;
;;;1880                       break;
;;;1881                   default:
;;;1882                       targetHight = DEPOSIT_TIME_HEIGHT_POSITION;
;;;1883                       break;
;;;1884               }      
;;;1885               //targetHight = DEPOSIT_TIME_HEIGHT_POSITION;
;;;1886           }
;;;1887           
;;;1888       }
;;;1889       
;;;1890       return TRUE;
;;;1891   }
0025dc  e8bd9ffc          POP      {r2-r12,pc}
                  |L1.9696|
0025e0  e1a00104          LSL      r0,r4,#2              ;1789
0025e4  e59f1260          LDR      r1,|L1.10316|
0025e8  ebfffffe          BL       __aeabi_uwrite4
0025ec  e3a05000          MOV      r5,#0                 ;1790
0025f0  ea00007d          B        |L1.10220|
                  |L1.9716|
0025f4  e3550000          CMP      r5,#0                 ;1792
0025f8  1a000015          BNE      |L1.9812|
0025fc  e59f824c          LDR      r8,|L1.10320|
002600  e3540001          CMP      r4,#1                 ;1795
002604  0a000006          BEQ      |L1.9764|
002608  e3540002          CMP      r4,#2                 ;1795
00260c  0a000006          BEQ      |L1.9772|
002610  e3540003          CMP      r4,#3                 ;1795
002614  0a000006          BEQ      |L1.9780|
002618  e3540004          CMP      r4,#4                 ;1795
00261c  1a000008          BNE      |L1.9796|
002620  ea000005          B        |L1.9788|
                  |L1.9764|
002624  e1a00000          MOV      r0,r0                 ;1797
002628  e1a00000          MOV      r0,r0                 ;1798
                  |L1.9772|
00262c  e3a090df          MOV      r9,#0xdf              ;1799
002630  ea000006          B        |L1.9808|
                  |L1.9780|
002634  e1a00000          MOV      r0,r0                 ;1801
002638  e1a00000          MOV      r0,r0                 ;1802
                  |L1.9788|
00263c  e59f9210          LDR      r9,|L1.10324|
002640  ea000002          B        |L1.9808|
                  |L1.9796|
002644  e1a00000          MOV      r0,r0                 ;1805
002648  e59f9208          LDR      r9,|L1.10328|
00264c  e1a00000          MOV      r0,r0                 ;1807
                  |L1.9808|
002650  ea000002          B        |L1.9824|
                  |L1.9812|
002654  e088800a          ADD      r8,r8,r10             ;1813
002658  e59d0004          LDR      r0,[sp,#4]            ;1814
00265c  e0899000          ADD      r9,r9,r0              ;1814
                  |L1.9824|
002660  e3a00000          MOV      r0,#0                 ;1816
002664  e58d0000          STR      r0,[sp,#0]            ;1816
002668  e3a07000          MOV      r7,#0                 ;1817
00266c  ea000039          B        |L1.10072|
                  |L1.9840|
002670  e3a00004          MOV      r0,#4                 ;1819
002674  e0207095          MLA      r0,r5,r0,r7           ;1819
002678  e20060ff          AND      r6,r0,#0xff           ;1819
00267c  e3570000          CMP      r7,#0                 ;1820
002680  1a00000c          BNE      |L1.9912|
002684  e0860086          ADD      r0,r6,r6,LSL #1       ;1822
002688  e59f21cc          LDR      r2,|L1.10332|
00268c  e0820100          ADD      r0,r2,r0,LSL #2       ;1822
002690  e2801004          ADD      r1,r0,#4              ;1822
002694  e1a00008          MOV      r0,r8                 ;1822
002698  ebfffffe          BL       __aeabi_uwrite4
00269c  e0860086          ADD      r0,r6,r6,LSL #1       ;1823
0026a0  e59f21b4          LDR      r2,|L1.10332|
0026a4  e0820100          ADD      r0,r2,r0,LSL #2       ;1823
0026a8  e2801008          ADD      r1,r0,#8              ;1823
0026ac  e1a00009          MOV      r0,r9                 ;1823
0026b0  ebfffffe          BL       __aeabi_uwrite4
0026b4  ea00001a          B        |L1.10020|
                  |L1.9912|
0026b8  e2461001          SUB      r1,r6,#1              ;1827
0026bc  e0811081          ADD      r1,r1,r1,LSL #1       ;1827
0026c0  e59f2194          LDR      r2,|L1.10332|
0026c4  e0821101          ADD      r1,r2,r1,LSL #2       ;1827
0026c8  e2810004          ADD      r0,r1,#4              ;1827
0026cc  ebfffffe          BL       __aeabi_uread4
0026d0  e59d1000          LDR      r1,[sp,#0]            ;1827
0026d4  e080b001          ADD      r11,r0,r1             ;1827
0026d8  e0860086          ADD      r0,r6,r6,LSL #1       ;1827
0026dc  e59f2178          LDR      r2,|L1.10332|
0026e0  e0820100          ADD      r0,r2,r0,LSL #2       ;1827
0026e4  e2801004          ADD      r1,r0,#4              ;1827
0026e8  e1a0000b          MOV      r0,r11                ;1827
0026ec  ebfffffe          BL       __aeabi_uwrite4
0026f0  e2461001          SUB      r1,r6,#1              ;1828
0026f4  e0811081          ADD      r1,r1,r1,LSL #1       ;1828
0026f8  e59f215c          LDR      r2,|L1.10332|
0026fc  e0821101          ADD      r1,r2,r1,LSL #2       ;1828
002700  e2810008          ADD      r0,r1,#8              ;1828
002704  ebfffffe          BL       __aeabi_uread4
002708  e1a0b000          MOV      r11,r0                ;1828
00270c  e0860086          ADD      r0,r6,r6,LSL #1       ;1828
002710  e59f2144          LDR      r2,|L1.10332|
002714  e0820100          ADD      r0,r2,r0,LSL #2       ;1828
002718  e2801008          ADD      r1,r0,#8              ;1828
00271c  e1a0000b          MOV      r0,r11                ;1828
002720  ebfffffe          BL       __aeabi_uwrite4
                  |L1.10020|
002724  e3570001          CMP      r7,#1                 ;1831
002728  1a000002          BNE      |L1.10040|
00272c  e3e00076          MVN      r0,#0x76              ;1833
002730  e58d0000          STR      r0,[sp,#0]            ;1833
002734  ea000001          B        |L1.10048|
                  |L1.10040|
002738  e3e0003f          MVN      r0,#0x3f              ;1837
00273c  e58d0000          STR      r0,[sp,#0]            ;1837
                  |L1.10048|
002740  e0860086          ADD      r0,r6,r6,LSL #1       ;1839
002744  e59f2110          LDR      r2,|L1.10332|
002748  e0821100          ADD      r1,r2,r0,LSL #2       ;1839
00274c  e3a0002a          MOV      r0,#0x2a              ;1839
002750  ebfffffe          BL       __aeabi_uwrite4
002754  e2877001          ADD      r7,r7,#1              ;1817
                  |L1.10072|
002758  e3570004          CMP      r7,#4                 ;1817
00275c  baffffc3          BLT      |L1.9840|
002760  e1a00005          MOV      r0,r5                 ;1863
002764  e0851fa0          ADD      r1,r5,r0,LSR #31      ;1863
002768  e1a010c1          ASR      r1,r1,#1              ;1863
00276c  e0551081          SUBS     r1,r5,r1,LSL #1       ;1863
002770  1a000003          BNE      |L1.10116|
002774  e59fa0e4          LDR      r10,|L1.10336|
002778  e3a00000          MOV      r0,#0                 ;1866
00277c  e58d0004          STR      r0,[sp,#4]            ;1866
002780  ea000018          B        |L1.10216|
                  |L1.10116|
002784  e59fa0d8          LDR      r10,|L1.10340|
002788  e3540001          CMP      r4,#1                 ;1871
00278c  0a000006          BEQ      |L1.10156|
002790  e3540002          CMP      r4,#2                 ;1871
002794  0a000006          BEQ      |L1.10164|
002798  e3540003          CMP      r4,#3                 ;1871
00279c  0a000007          BEQ      |L1.10176|
0027a0  e3540004          CMP      r4,#4                 ;1871
0027a4  1a00000a          BNE      |L1.10196|
0027a8  ea000006          B        |L1.10184|
                  |L1.10156|
0027ac  e1a00000          MOV      r0,r0                 ;1873
0027b0  e1a00000          MOV      r0,r0                 ;1874
                  |L1.10164|
0027b4  e3e00f6a          MVN      r0,#0x1a8             ;1875
0027b8  e58d0004          STR      r0,[sp,#4]            ;1875
0027bc  ea000008          B        |L1.10212|
                  |L1.10176|
0027c0  e1a00000          MOV      r0,r0                 ;1877
0027c4  e1a00000          MOV      r0,r0                 ;1878
                  |L1.10184|
0027c8  e3e000d4          MVN      r0,#0xd4              ;1879
0027cc  e58d0004          STR      r0,[sp,#4]            ;1879
0027d0  ea000003          B        |L1.10212|
                  |L1.10196|
0027d4  e1a00000          MOV      r0,r0                 ;1881
0027d8  e3e00089          MVN      r0,#0x89              ;1882
0027dc  e58d0004          STR      r0,[sp,#4]            ;1882
0027e0  e1a00000          MOV      r0,r0                 ;1883
                  |L1.10212|
0027e4  e1a00000          MOV      r0,r0                 ;1876
                  |L1.10216|
0027e8  e2855001          ADD      r5,r5,#1              ;1790
                  |L1.10220|
0027ec  e1550004          CMP      r5,r4                 ;1790
0027f0  baffff7f          BLT      |L1.9716|
0027f4  e3a00001          MOV      r0,#1                 ;1890
0027f8  eaffff77          B        |L1.9692|
                  |L1.10236|
                          DCD      ||.constdata||
                  |L1.10240|
                          DCD      mContainNumberPositionInfo
                  |L1.10244|
                          DCD      mContainNumberPositionInfo+0x4
                  |L1.10248|
                          DCD      0x000001b5
                  |L1.10252|
00280c  63616c63          DCB      "calculateDepositTimePositionInfo fail: boardEnableNumbe"
002810  756c6174
002814  65446570
002818  6f736974
00281c  54696d65
002820  506f7369
002824  74696f6e
002828  496e666f
00282c  20666169
002830  6c3a2062
002834  6f617264
002838  456e6162
00283c  6c654e75
002840  6d6265  
002843  72203d20          DCB      "r = %d\r\n",0
002847  25640d0a
00284b  00      
                  |L1.10316|
                          DCD      mDepositTimeAllPositionInfo
                  |L1.10320|
                          DCD      0x000002c1
                  |L1.10324|
                          DCD      0x00000163
                  |L1.10328|
                          DCD      0x00000186
                  |L1.10332|
                          DCD      mDepositTimeAllPositionInfo+0x4
                  |L1.10336|
                          DCD      0xfffffe81
                  |L1.10340|
                          DCD      0x0000017f
                          ENDP

                  EPDDrawString PROC
;;;2590   #define Y_HEIGHT  44
;;;2591   int EPDDrawString(BOOL refresh,char* string,unsigned int x_Pos,unsigned int y_Pos)
002868  e92d4fff          PUSH     {r0-r11,lr}
;;;2592   {
00286c  e24dd00c          SUB      sp,sp,#0xc
002870  e1a07001          MOV      r7,r1
002874  e1a09002          MOV      r9,r2
002878  e1a0a003          MOV      r10,r3
;;;2593       xSemaphoreTake(xSemaphore, portMAX_DELAY);
00287c  e3a03000          MOV      r3,#0
002880  e3e02000          MVN      r2,#0
002884  e1a01003          MOV      r1,r3
002888  e51f0b38          LDR      r0,|L1.7512|
00288c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
002890  ebfffffe          BL       xQueueGenericReceive
;;;2594       
;;;2595       if(!initFlag)
002894  e59f0bac          LDR      r0,|L1.13384|
002898  e5d00000          LDRB     r0,[r0,#0]  ; initFlag
00289c  e3500000          CMP      r0,#0
0028a0  1a000002          BNE      |L1.10416|
;;;2596       {
;;;2597           return FALSE;
0028a4  e3a00000          MOV      r0,#0
                  |L1.10408|
0028a8  e28dd01c          ADD      sp,sp,#0x1c
;;;2598       }
;;;2599       if(LCDWaitForReady() == FALSE) 
;;;2600           return FALSE;
;;;2601       static positionStringInfo mPositionMsgInfoTmp={0};
;;;2602       unsigned int* buff = (unsigned int*)&mPositionMsgInfoTmp;
;;;2603       unsigned int stringLength,buffIndex=0;
;;;2604       unsigned int nowrow=0,nowcursor=0;
;;;2605       
;;;2606       stringLength = strlen(string);
;;;2607       #if(SHOW_TIME_DEBUG)
;;;2608       TickType_t tickLocalStart= xTaskGetTickCount();
;;;2609       #endif
;;;2610       
;;;2611       for(int i=0;i<stringLength;i++){
;;;2612           //space//
;;;2613           if(*(string+i)==' ' || *(string+i)==0x5F)
;;;2614           {
;;;2615               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_EMPTY;
;;;2616               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2617               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2618               nowcursor+=28;
;;;2619               buffIndex++;
;;;2620           }
;;;2621           //A to Z//
;;;2622           else if(*(string+i)>='A'&&*(string+i)<='Z')
;;;2623           {
;;;2624               mPositionMsgInfoTmp.info[buffIndex].bmpId =(*(string+i)-'A') + EPD_PICT_UPPER_A;
;;;2625               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2626               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2627               nowcursor+=32;
;;;2628               buffIndex++;
;;;2629           }
;;;2630           //a to z//
;;;2631           else if(*(string+i)>='a'&&*(string+i)<='z')
;;;2632           {
;;;2633               mPositionMsgInfoTmp.info[buffIndex].bmpId =(*(string+i)-'a') + EPD_PICT_LOWER_A;
;;;2634               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2635               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2636               nowcursor+=28;
;;;2637               buffIndex++;
;;;2638           }
;;;2639           //0 to 9//
;;;2640           else if(*(string+i)>='0'&&*(string+i)<='9')
;;;2641           {
;;;2642               mPositionMsgInfoTmp.info[buffIndex].bmpId =(*(string+i)-'0') + EPD_PICT_NUM_SMALL_2_INDEX;
;;;2643               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2644               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2645               nowcursor+=28;
;;;2646               buffIndex++;
;;;2647           }
;;;2648           //  :  //
;;;2649           else if(*(string+i)==':')
;;;2650           {
;;;2651               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_COLON_SMALL_2_INDEX;
;;;2652               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2653               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2654               nowcursor+=28;
;;;2655               buffIndex++;
;;;2656           }
;;;2657           //  -  //
;;;2658           else if(*(string+i)=='-')
;;;2659           {
;;;2660               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_LINE_SMALL_2_INDEX;
;;;2661               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2662               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2663   
;;;2664               nowcursor+=28;
;;;2665               buffIndex++;
;;;2666           }
;;;2667           else if(*(string+i)=='.')
;;;2668           {
;;;2669               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_POINT_SMALL_2_INDEX;
;;;2670               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2671               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2672               nowcursor+=28;
;;;2673               buffIndex++;
;;;2674           }
;;;2675           //  \  //
;;;2676           else if(*(string+i)=='\\')
;;;2677           {
;;;2678               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_SLASH_SMALL_2_INDEX;
;;;2679               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2680               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2681               nowcursor+=28;
;;;2682               buffIndex++;
;;;2683           }
;;;2684           
;;;2685           //Left Key//
;;;2686           else if(*(string+i)==KEYPAD_ONE_CHAR)
;;;2687           {
;;;2688               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_ONE;
;;;2689               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2690               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2691               nowcursor+=28;
;;;2692               buffIndex++;
;;;2693           }
;;;2694           //Right Key//
;;;2695           else if(*(string+i)==KEYPAD_TWO_CHAR)
;;;2696           {
;;;2697               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_TWO;
;;;2698               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2699               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2700               nowcursor+=28;
;;;2701               buffIndex++;
;;;2702           }
;;;2703           //Plus Key//
;;;2704           else if(*(string+i)==KEYPAD_THREE_CHAR)
;;;2705           {
;;;2706               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_THREE;
;;;2707               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2708               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2709               nowcursor+=28;
;;;2710               buffIndex++;
;;;2711           }
;;;2712           
;;;2713           //Real Plus Key//
;;;2714           else if((uint8_t)*(string+i)==KEYPAD_REAL_PLUS_CHAR)
;;;2715           {
;;;2716               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_PLUS;
;;;2717               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2718               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2719               nowcursor+=28;
;;;2720               buffIndex++;
;;;2721           }
;;;2722           
;;;2723           //Minus Key//
;;;2724           else if(*(string+i)==KEYPAD_FOUR_CHAR)
;;;2725           {
;;;2726               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_FOUR;
;;;2727               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2728               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2729               nowcursor+=28;
;;;2730               buffIndex++;
;;;2731           }
;;;2732           //Confirm Key//
;;;2733           else if(*(string+i)==KEYPAD_FIVE_CHAR)
;;;2734           {
;;;2735   					//mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_EPD_PICT_KEY_CONFIRM;
;;;2736               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_FIVE;
;;;2737               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2738               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2739               nowcursor+=28;
;;;2740               buffIndex++;
;;;2741           }
;;;2742           //Card Key//
;;;2743           else if(*(string+i)==KEYPAD_SIX_CHAR)
;;;2744           {
;;;2745               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_SIX;
;;;2746               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2747               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2748               nowcursor+=28;
;;;2749               buffIndex++;
;;;2750           }
;;;2751           //  #   //
;;;2752           else if(*(string+i)=='#')
;;;2753           {
;;;2754               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_0X23_24;
;;;2755               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2756               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2757               nowcursor+=28;
;;;2758               buffIndex++;
;;;2759           }
;;;2760           //  $   //
;;;2761           else if(*(string+i)=='$')
;;;2762           {
;;;2763               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_LINE_SMALL_2_I_INDEX;
;;;2764               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2765               //mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2766               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2767               nowcursor+=28;
;;;2768               buffIndex++;
;;;2769           }
;;;2770           /*
;;;2771           //  ~   //
;;;2772           else if(*(string+i)=='~')
;;;2773           {
;;;2774               mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_LINE_SMALL_2_INDEX;
;;;2775               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2776               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2777               nowcursor+=28;
;;;2778               buffIndex++;
;;;2779           } 
;;;2780           */
;;;2781           //ENTER//
;;;2782           else if(*(string+i)=='\n')
;;;2783           {
;;;2784               nowrow++;
;;;2785               nowcursor=0;
;;;2786           }
;;;2787           if(buffIndex==(MAX_LOAD_IMG-1)||i==stringLength-1)
;;;2788           {
;;;2789               mPositionMsgInfoTmp.itemNum = buffIndex;
;;;2790               LoadImages(buff, mPositionMsgInfoTmp.itemNum);
;;;2791               buffIndex=0;
;;;2792           }
;;;2793           //???????????????? WTF
;;;2794           //xSemaphoreGive(xSemaphore);
;;;2795       }
;;;2796       nowrow++;
;;;2797       mPositionMsgInfoTmp.itemNum=buffIndex;
;;;2798       //???????????????? WTF
;;;2799       //xSemaphoreTake(xSemaphore, portMAX_DELAY);
;;;2800       //LoadImages(buff, mPositionMsgInfoTmp.itemNum);
;;;2801       if(refresh)
;;;2802       {
;;;2803           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
;;;2804       }
;;;2805       xSemaphoreGive(xSemaphore);
;;;2806       
;;;2807       #if(SHOW_TIME_DEBUG)
;;;2808       sysprintf(" [INFO EPD] <EPDDrawContainByID>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2809       #endif
;;;2810       return nowcursor+x_Pos;
;;;2811   }
0028ac  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.10416|
0028b0  ebfffffe          BL       LCDWaitForReady
0028b4  e3500000          CMP      r0,#0                 ;2599
0028b8  1a000001          BNE      |L1.10436|
0028bc  e3a00000          MOV      r0,#0                 ;2600
0028c0  eafffff8          B        |L1.10408|
                  |L1.10436|
0028c4  e59f0b80          LDR      r0,|L1.13388|
0028c8  e58d0008          STR      r0,[sp,#8]            ;2602
0028cc  e3a04000          MOV      r4,#0                 ;2603
0028d0  e3a08000          MOV      r8,#0                 ;2604
0028d4  e3a05000          MOV      r5,#0                 ;2604
0028d8  e1a00007          MOV      r0,r7                 ;2606
0028dc  ebfffffe          BL       strlen
0028e0  e1a0b000          MOV      r11,r0                ;2606
0028e4  e3a06000          MOV      r6,#0                 ;2611
0028e8  ea0001d4          B        |L1.12352|
                  |L1.10476|
0028ec  e7d70006          LDRB     r0,[r7,r6]            ;2613
0028f0  e3500020          CMP      r0,#0x20              ;2613
0028f4  0a000002          BEQ      |L1.10500|
0028f8  e7d70006          LDRB     r0,[r7,r6]            ;2613
0028fc  e350005f          CMP      r0,#0x5f              ;2613
002900  1a000015          BNE      |L1.10588|
                  |L1.10500|
002904  e0840084          ADD      r0,r4,r4,LSL #1       ;2615
002908  e59f2b40          LDR      r2,|L1.13392|
00290c  e0821100          ADD      r1,r2,r0,LSL #2       ;2615
002910  e3a000d3          MOV      r0,#0xd3              ;2615
002914  ebfffffe          BL       __aeabi_uwrite4
002918  e0842084          ADD      r2,r4,r4,LSL #1       ;2616
00291c  e59f3b2c          LDR      r3,|L1.13392|
002920  e0832102          ADD      r2,r3,r2,LSL #2       ;2616
002924  e2821004          ADD      r1,r2,#4              ;2616
002928  e0850009          ADD      r0,r5,r9              ;2616
00292c  ebfffffe          BL       __aeabi_uwrite4
002930  e0842084          ADD      r2,r4,r4,LSL #1       ;2617
002934  e59f3b14          LDR      r3,|L1.13392|
002938  e0832102          ADD      r2,r3,r2,LSL #2       ;2617
00293c  e2821008          ADD      r1,r2,#8              ;2617
002940  e0882188          ADD      r2,r8,r8,LSL #3       ;2617
002944  e0822208          ADD      r2,r2,r8,LSL #4       ;2617
002948  e08a0082          ADD      r0,r10,r2,LSL #1      ;2617
00294c  ebfffffe          BL       __aeabi_uwrite4
002950  e285501c          ADD      r5,r5,#0x1c           ;2618
002954  e2844001          ADD      r4,r4,#1              ;2619
002958  ea0001a8          B        |L1.12288|
                  |L1.10588|
00295c  e7d70006          LDRB     r0,[r7,r6]            ;2622
002960  e3500041          CMP      r0,#0x41              ;2622
002964  ba000019          BLT      |L1.10704|
002968  e7d70006          LDRB     r0,[r7,r6]            ;2622
00296c  e350005a          CMP      r0,#0x5a              ;2622
002970  ca000016          BGT      |L1.10704|
002974  e0842084          ADD      r2,r4,r4,LSL #1       ;2624
002978  e59f3ad0          LDR      r3,|L1.13392|
00297c  e0831102          ADD      r1,r3,r2,LSL #2       ;2624
002980  e7d72006          LDRB     r2,[r7,r6]            ;2624
002984  e2820075          ADD      r0,r2,#0x75           ;2624
002988  ebfffffe          BL       __aeabi_uwrite4
00298c  e0842084          ADD      r2,r4,r4,LSL #1       ;2625
002990  e59f3ab8          LDR      r3,|L1.13392|
002994  e0832102          ADD      r2,r3,r2,LSL #2       ;2625
002998  e2821004          ADD      r1,r2,#4              ;2625
00299c  e0850009          ADD      r0,r5,r9              ;2625
0029a0  ebfffffe          BL       __aeabi_uwrite4
0029a4  e0842084          ADD      r2,r4,r4,LSL #1       ;2626
0029a8  e59f3aa0          LDR      r3,|L1.13392|
0029ac  e0832102          ADD      r2,r3,r2,LSL #2       ;2626
0029b0  e2821008          ADD      r1,r2,#8              ;2626
0029b4  e0882188          ADD      r2,r8,r8,LSL #3       ;2626
0029b8  e0822208          ADD      r2,r2,r8,LSL #4       ;2626
0029bc  e08a0082          ADD      r0,r10,r2,LSL #1      ;2626
0029c0  ebfffffe          BL       __aeabi_uwrite4
0029c4  e2855020          ADD      r5,r5,#0x20           ;2627
0029c8  e2844001          ADD      r4,r4,#1              ;2628
0029cc  ea00018b          B        |L1.12288|
                  |L1.10704|
0029d0  e7d70006          LDRB     r0,[r7,r6]            ;2631
0029d4  e3500061          CMP      r0,#0x61              ;2631
0029d8  ba000019          BLT      |L1.10820|
0029dc  e7d70006          LDRB     r0,[r7,r6]            ;2631
0029e0  e350007a          CMP      r0,#0x7a              ;2631
0029e4  ca000016          BGT      |L1.10820|
0029e8  e0842084          ADD      r2,r4,r4,LSL #1       ;2633
0029ec  e59f3a5c          LDR      r3,|L1.13392|
0029f0  e0831102          ADD      r1,r3,r2,LSL #2       ;2633
0029f4  e7d72006          LDRB     r2,[r7,r6]            ;2633
0029f8  e2820074          ADD      r0,r2,#0x74           ;2633
0029fc  ebfffffe          BL       __aeabi_uwrite4
002a00  e0842084          ADD      r2,r4,r4,LSL #1       ;2634
002a04  e59f3a44          LDR      r3,|L1.13392|
002a08  e0832102          ADD      r2,r3,r2,LSL #2       ;2634
002a0c  e2821004          ADD      r1,r2,#4              ;2634
002a10  e0850009          ADD      r0,r5,r9              ;2634
002a14  ebfffffe          BL       __aeabi_uwrite4
002a18  e0842084          ADD      r2,r4,r4,LSL #1       ;2635
002a1c  e59f3a2c          LDR      r3,|L1.13392|
002a20  e0832102          ADD      r2,r3,r2,LSL #2       ;2635
002a24  e2821008          ADD      r1,r2,#8              ;2635
002a28  e0882188          ADD      r2,r8,r8,LSL #3       ;2635
002a2c  e0822208          ADD      r2,r2,r8,LSL #4       ;2635
002a30  e08a0082          ADD      r0,r10,r2,LSL #1      ;2635
002a34  ebfffffe          BL       __aeabi_uwrite4
002a38  e285501c          ADD      r5,r5,#0x1c           ;2636
002a3c  e2844001          ADD      r4,r4,#1              ;2637
002a40  ea00016e          B        |L1.12288|
                  |L1.10820|
002a44  e7d70006          LDRB     r0,[r7,r6]            ;2640
002a48  e3500030          CMP      r0,#0x30              ;2640
002a4c  ba000019          BLT      |L1.10936|
002a50  e7d70006          LDRB     r0,[r7,r6]            ;2640
002a54  e3500039          CMP      r0,#0x39              ;2640
002a58  ca000016          BGT      |L1.10936|
002a5c  e0842084          ADD      r2,r4,r4,LSL #1       ;2642
002a60  e59f39e8          LDR      r3,|L1.13392|
002a64  e0831102          ADD      r1,r3,r2,LSL #2       ;2642
002a68  e7d72006          LDRB     r2,[r7,r6]            ;2642
002a6c  e2820021          ADD      r0,r2,#0x21           ;2642
002a70  ebfffffe          BL       __aeabi_uwrite4
002a74  e0842084          ADD      r2,r4,r4,LSL #1       ;2643
002a78  e59f39d0          LDR      r3,|L1.13392|
002a7c  e0832102          ADD      r2,r3,r2,LSL #2       ;2643
002a80  e2821004          ADD      r1,r2,#4              ;2643
002a84  e0850009          ADD      r0,r5,r9              ;2643
002a88  ebfffffe          BL       __aeabi_uwrite4
002a8c  e0842084          ADD      r2,r4,r4,LSL #1       ;2644
002a90  e59f39b8          LDR      r3,|L1.13392|
002a94  e0832102          ADD      r2,r3,r2,LSL #2       ;2644
002a98  e2821008          ADD      r1,r2,#8              ;2644
002a9c  e0882188          ADD      r2,r8,r8,LSL #3       ;2644
002aa0  e0822208          ADD      r2,r2,r8,LSL #4       ;2644
002aa4  e08a0082          ADD      r0,r10,r2,LSL #1      ;2644
002aa8  ebfffffe          BL       __aeabi_uwrite4
002aac  e285501c          ADD      r5,r5,#0x1c           ;2645
002ab0  e2844001          ADD      r4,r4,#1              ;2646
002ab4  ea000151          B        |L1.12288|
                  |L1.10936|
002ab8  e7d70006          LDRB     r0,[r7,r6]            ;2649
002abc  e350003a          CMP      r0,#0x3a              ;2649
002ac0  1a000015          BNE      |L1.11036|
002ac4  e0840084          ADD      r0,r4,r4,LSL #1       ;2651
002ac8  e59f2980          LDR      r2,|L1.13392|
002acc  e0821100          ADD      r1,r2,r0,LSL #2       ;2651
002ad0  e3a0005b          MOV      r0,#0x5b              ;2651
002ad4  ebfffffe          BL       __aeabi_uwrite4
002ad8  e0842084          ADD      r2,r4,r4,LSL #1       ;2652
002adc  e59f396c          LDR      r3,|L1.13392|
002ae0  e0832102          ADD      r2,r3,r2,LSL #2       ;2652
002ae4  e2821004          ADD      r1,r2,#4              ;2652
002ae8  e0850009          ADD      r0,r5,r9              ;2652
002aec  ebfffffe          BL       __aeabi_uwrite4
002af0  e0842084          ADD      r2,r4,r4,LSL #1       ;2653
002af4  e59f3954          LDR      r3,|L1.13392|
002af8  e0832102          ADD      r2,r3,r2,LSL #2       ;2653
002afc  e2821008          ADD      r1,r2,#8              ;2653
002b00  e0882188          ADD      r2,r8,r8,LSL #3       ;2653
002b04  e0822208          ADD      r2,r2,r8,LSL #4       ;2653
002b08  e08a0082          ADD      r0,r10,r2,LSL #1      ;2653
002b0c  ebfffffe          BL       __aeabi_uwrite4
002b10  e285501c          ADD      r5,r5,#0x1c           ;2654
002b14  e2844001          ADD      r4,r4,#1              ;2655
002b18  ea000138          B        |L1.12288|
                  |L1.11036|
002b1c  e7d70006          LDRB     r0,[r7,r6]            ;2658
002b20  e350002d          CMP      r0,#0x2d              ;2658
002b24  1a000015          BNE      |L1.11136|
002b28  e0840084          ADD      r0,r4,r4,LSL #1       ;2660
002b2c  e59f291c          LDR      r2,|L1.13392|
002b30  e0821100          ADD      r1,r2,r0,LSL #2       ;2660
002b34  e3a0005c          MOV      r0,#0x5c              ;2660
002b38  ebfffffe          BL       __aeabi_uwrite4
002b3c  e0842084          ADD      r2,r4,r4,LSL #1       ;2661
002b40  e59f3908          LDR      r3,|L1.13392|
002b44  e0832102          ADD      r2,r3,r2,LSL #2       ;2661
002b48  e2821004          ADD      r1,r2,#4              ;2661
002b4c  e0850009          ADD      r0,r5,r9              ;2661
002b50  ebfffffe          BL       __aeabi_uwrite4
002b54  e0842084          ADD      r2,r4,r4,LSL #1       ;2662
002b58  e59f38f0          LDR      r3,|L1.13392|
002b5c  e0832102          ADD      r2,r3,r2,LSL #2       ;2662
002b60  e2821008          ADD      r1,r2,#8              ;2662
002b64  e0882188          ADD      r2,r8,r8,LSL #3       ;2662
002b68  e0822208          ADD      r2,r2,r8,LSL #4       ;2662
002b6c  e08a0082          ADD      r0,r10,r2,LSL #1      ;2662
002b70  ebfffffe          BL       __aeabi_uwrite4
002b74  e285501c          ADD      r5,r5,#0x1c           ;2664
002b78  e2844001          ADD      r4,r4,#1              ;2665
002b7c  ea00011f          B        |L1.12288|
                  |L1.11136|
002b80  e7d70006          LDRB     r0,[r7,r6]            ;2667
002b84  e350002e          CMP      r0,#0x2e              ;2667
002b88  1a000015          BNE      |L1.11236|
002b8c  e0840084          ADD      r0,r4,r4,LSL #1       ;2669
002b90  e59f28b8          LDR      r2,|L1.13392|
002b94  e0821100          ADD      r1,r2,r0,LSL #2       ;2669
002b98  e3a0005e          MOV      r0,#0x5e              ;2669
002b9c  ebfffffe          BL       __aeabi_uwrite4
002ba0  e0842084          ADD      r2,r4,r4,LSL #1       ;2670
002ba4  e59f38a4          LDR      r3,|L1.13392|
002ba8  e0832102          ADD      r2,r3,r2,LSL #2       ;2670
002bac  e2821004          ADD      r1,r2,#4              ;2670
002bb0  e0850009          ADD      r0,r5,r9              ;2670
002bb4  ebfffffe          BL       __aeabi_uwrite4
002bb8  e0842084          ADD      r2,r4,r4,LSL #1       ;2671
002bbc  e59f388c          LDR      r3,|L1.13392|
002bc0  e0832102          ADD      r2,r3,r2,LSL #2       ;2671
002bc4  e2821008          ADD      r1,r2,#8              ;2671
002bc8  e0882188          ADD      r2,r8,r8,LSL #3       ;2671
002bcc  e0822208          ADD      r2,r2,r8,LSL #4       ;2671
002bd0  e08a0082          ADD      r0,r10,r2,LSL #1      ;2671
002bd4  ebfffffe          BL       __aeabi_uwrite4
002bd8  e285501c          ADD      r5,r5,#0x1c           ;2672
002bdc  e2844001          ADD      r4,r4,#1              ;2673
002be0  ea000106          B        |L1.12288|
                  |L1.11236|
002be4  e7d70006          LDRB     r0,[r7,r6]            ;2676
002be8  e350005c          CMP      r0,#0x5c              ;2676
002bec  1a000015          BNE      |L1.11336|
002bf0  e0840084          ADD      r0,r4,r4,LSL #1       ;2678
002bf4  e59f2854          LDR      r2,|L1.13392|
002bf8  e0821100          ADD      r1,r2,r0,LSL #2       ;2678
002bfc  e3a0005d          MOV      r0,#0x5d              ;2678
002c00  ebfffffe          BL       __aeabi_uwrite4
002c04  e0842084          ADD      r2,r4,r4,LSL #1       ;2679
002c08  e59f3840          LDR      r3,|L1.13392|
002c0c  e0832102          ADD      r2,r3,r2,LSL #2       ;2679
002c10  e2821004          ADD      r1,r2,#4              ;2679
002c14  e0850009          ADD      r0,r5,r9              ;2679
002c18  ebfffffe          BL       __aeabi_uwrite4
002c1c  e0842084          ADD      r2,r4,r4,LSL #1       ;2680
002c20  e59f3828          LDR      r3,|L1.13392|
002c24  e0832102          ADD      r2,r3,r2,LSL #2       ;2680
002c28  e2821008          ADD      r1,r2,#8              ;2680
002c2c  e0882188          ADD      r2,r8,r8,LSL #3       ;2680
002c30  e0822208          ADD      r2,r2,r8,LSL #4       ;2680
002c34  e08a0082          ADD      r0,r10,r2,LSL #1      ;2680
002c38  ebfffffe          BL       __aeabi_uwrite4
002c3c  e285501c          ADD      r5,r5,#0x1c           ;2681
002c40  e2844001          ADD      r4,r4,#1              ;2682
002c44  ea0000ed          B        |L1.12288|
                  |L1.11336|
002c48  e7d70006          LDRB     r0,[r7,r6]            ;2686
002c4c  e350003c          CMP      r0,#0x3c              ;2686
002c50  1a000016          BNE      |L1.11440|
002c54  e0840084          ADD      r0,r4,r4,LSL #1       ;2688
002c58  e59f27f0          LDR      r2,|L1.13392|
002c5c  e0821100          ADD      r1,r2,r0,LSL #2       ;2688
002c60  e3a000f9          MOV      r0,#0xf9              ;2688
002c64  ebfffffe          BL       __aeabi_uwrite4
002c68  e0842084          ADD      r2,r4,r4,LSL #1       ;2689
002c6c  e59f37dc          LDR      r3,|L1.13392|
002c70  e0832102          ADD      r2,r3,r2,LSL #2       ;2689
002c74  e2821004          ADD      r1,r2,#4              ;2689
002c78  e0850009          ADD      r0,r5,r9              ;2689
002c7c  ebfffffe          BL       __aeabi_uwrite4
002c80  e0842084          ADD      r2,r4,r4,LSL #1       ;2690
002c84  e59f37c4          LDR      r3,|L1.13392|
002c88  e0832102          ADD      r2,r3,r2,LSL #2       ;2690
002c8c  e2821008          ADD      r1,r2,#8              ;2690
002c90  e0882188          ADD      r2,r8,r8,LSL #3       ;2690
002c94  e0822208          ADD      r2,r2,r8,LSL #4       ;2690
002c98  e28a300a          ADD      r3,r10,#0xa           ;2690
002c9c  e0830082          ADD      r0,r3,r2,LSL #1       ;2690
002ca0  ebfffffe          BL       __aeabi_uwrite4
002ca4  e285501c          ADD      r5,r5,#0x1c           ;2691
002ca8  e2844001          ADD      r4,r4,#1              ;2692
002cac  ea0000d3          B        |L1.12288|
                  |L1.11440|
002cb0  e7d70006          LDRB     r0,[r7,r6]            ;2695
002cb4  e350003e          CMP      r0,#0x3e              ;2695
002cb8  1a000016          BNE      |L1.11544|
002cbc  e0840084          ADD      r0,r4,r4,LSL #1       ;2697
002cc0  e59f2788          LDR      r2,|L1.13392|
002cc4  e0821100          ADD      r1,r2,r0,LSL #2       ;2697
002cc8  e3a000fa          MOV      r0,#0xfa              ;2697
002ccc  ebfffffe          BL       __aeabi_uwrite4
002cd0  e0842084          ADD      r2,r4,r4,LSL #1       ;2698
002cd4  e59f3774          LDR      r3,|L1.13392|
002cd8  e0832102          ADD      r2,r3,r2,LSL #2       ;2698
002cdc  e2821004          ADD      r1,r2,#4              ;2698
002ce0  e0850009          ADD      r0,r5,r9              ;2698
002ce4  ebfffffe          BL       __aeabi_uwrite4
002ce8  e0842084          ADD      r2,r4,r4,LSL #1       ;2699
002cec  e59f375c          LDR      r3,|L1.13392|
002cf0  e0832102          ADD      r2,r3,r2,LSL #2       ;2699
002cf4  e2821008          ADD      r1,r2,#8              ;2699
002cf8  e0882188          ADD      r2,r8,r8,LSL #3       ;2699
002cfc  e0822208          ADD      r2,r2,r8,LSL #4       ;2699
002d00  e28a300a          ADD      r3,r10,#0xa           ;2699
002d04  e0830082          ADD      r0,r3,r2,LSL #1       ;2699
002d08  ebfffffe          BL       __aeabi_uwrite4
002d0c  e285501c          ADD      r5,r5,#0x1c           ;2700
002d10  e2844001          ADD      r4,r4,#1              ;2701
002d14  ea0000b9          B        |L1.12288|
                  |L1.11544|
002d18  e7d70006          LDRB     r0,[r7,r6]            ;2704
002d1c  e350002b          CMP      r0,#0x2b              ;2704
002d20  1a000016          BNE      |L1.11648|
002d24  e0840084          ADD      r0,r4,r4,LSL #1       ;2706
002d28  e59f2720          LDR      r2,|L1.13392|
002d2c  e0821100          ADD      r1,r2,r0,LSL #2       ;2706
002d30  e3a000fb          MOV      r0,#0xfb              ;2706
002d34  ebfffffe          BL       __aeabi_uwrite4
002d38  e0842084          ADD      r2,r4,r4,LSL #1       ;2707
002d3c  e59f370c          LDR      r3,|L1.13392|
002d40  e0832102          ADD      r2,r3,r2,LSL #2       ;2707
002d44  e2821004          ADD      r1,r2,#4              ;2707
002d48  e0850009          ADD      r0,r5,r9              ;2707
002d4c  ebfffffe          BL       __aeabi_uwrite4
002d50  e0842084          ADD      r2,r4,r4,LSL #1       ;2708
002d54  e59f36f4          LDR      r3,|L1.13392|
002d58  e0832102          ADD      r2,r3,r2,LSL #2       ;2708
002d5c  e2821008          ADD      r1,r2,#8              ;2708
002d60  e0882188          ADD      r2,r8,r8,LSL #3       ;2708
002d64  e0822208          ADD      r2,r2,r8,LSL #4       ;2708
002d68  e28a300a          ADD      r3,r10,#0xa           ;2708
002d6c  e0830082          ADD      r0,r3,r2,LSL #1       ;2708
002d70  ebfffffe          BL       __aeabi_uwrite4
002d74  e285501c          ADD      r5,r5,#0x1c           ;2709
002d78  e2844001          ADD      r4,r4,#1              ;2710
002d7c  ea00009f          B        |L1.12288|
                  |L1.11648|
002d80  e7d70006          LDRB     r0,[r7,r6]            ;2714
002d84  e35000d3          CMP      r0,#0xd3              ;2714
002d88  1a000016          BNE      |L1.11752|
002d8c  e0840084          ADD      r0,r4,r4,LSL #1       ;2716
002d90  e59f26b8          LDR      r2,|L1.13392|
002d94  e0821100          ADD      r1,r2,r0,LSL #2       ;2716
002d98  e3a000f3          MOV      r0,#0xf3              ;2716
002d9c  ebfffffe          BL       __aeabi_uwrite4
002da0  e0842084          ADD      r2,r4,r4,LSL #1       ;2717
002da4  e59f36a4          LDR      r3,|L1.13392|
002da8  e0832102          ADD      r2,r3,r2,LSL #2       ;2717
002dac  e2821004          ADD      r1,r2,#4              ;2717
002db0  e0850009          ADD      r0,r5,r9              ;2717
002db4  ebfffffe          BL       __aeabi_uwrite4
002db8  e0842084          ADD      r2,r4,r4,LSL #1       ;2718
002dbc  e59f368c          LDR      r3,|L1.13392|
002dc0  e0832102          ADD      r2,r3,r2,LSL #2       ;2718
002dc4  e2821008          ADD      r1,r2,#8              ;2718
002dc8  e0882188          ADD      r2,r8,r8,LSL #3       ;2718
002dcc  e0822208          ADD      r2,r2,r8,LSL #4       ;2718
002dd0  e28a300a          ADD      r3,r10,#0xa           ;2718
002dd4  e0830082          ADD      r0,r3,r2,LSL #1       ;2718
002dd8  ebfffffe          BL       __aeabi_uwrite4
002ddc  e285501c          ADD      r5,r5,#0x1c           ;2719
002de0  e2844001          ADD      r4,r4,#1              ;2720
002de4  ea000085          B        |L1.12288|
                  |L1.11752|
002de8  e7d70006          LDRB     r0,[r7,r6]            ;2724
002dec  e350003d          CMP      r0,#0x3d              ;2724
002df0  1a000016          BNE      |L1.11856|
002df4  e0840084          ADD      r0,r4,r4,LSL #1       ;2726
002df8  e59f2650          LDR      r2,|L1.13392|
002dfc  e0821100          ADD      r1,r2,r0,LSL #2       ;2726
002e00  e3a000fc          MOV      r0,#0xfc              ;2726
002e04  ebfffffe          BL       __aeabi_uwrite4
002e08  e0842084          ADD      r2,r4,r4,LSL #1       ;2727
002e0c  e59f363c          LDR      r3,|L1.13392|
002e10  e0832102          ADD      r2,r3,r2,LSL #2       ;2727
002e14  e2821004          ADD      r1,r2,#4              ;2727
002e18  e0850009          ADD      r0,r5,r9              ;2727
002e1c  ebfffffe          BL       __aeabi_uwrite4
002e20  e0842084          ADD      r2,r4,r4,LSL #1       ;2728
002e24  e59f3624          LDR      r3,|L1.13392|
002e28  e0832102          ADD      r2,r3,r2,LSL #2       ;2728
002e2c  e2821008          ADD      r1,r2,#8              ;2728
002e30  e0882188          ADD      r2,r8,r8,LSL #3       ;2728
002e34  e0822208          ADD      r2,r2,r8,LSL #4       ;2728
002e38  e28a300a          ADD      r3,r10,#0xa           ;2728
002e3c  e0830082          ADD      r0,r3,r2,LSL #1       ;2728
002e40  ebfffffe          BL       __aeabi_uwrite4
002e44  e285501c          ADD      r5,r5,#0x1c           ;2729
002e48  e2844001          ADD      r4,r4,#1              ;2730
002e4c  ea00006b          B        |L1.12288|
                  |L1.11856|
002e50  e7d70006          LDRB     r0,[r7,r6]            ;2733
002e54  e350007b          CMP      r0,#0x7b              ;2733
002e58  1a000016          BNE      |L1.11960|
002e5c  e0840084          ADD      r0,r4,r4,LSL #1       ;2736
002e60  e59f25e8          LDR      r2,|L1.13392|
002e64  e0821100          ADD      r1,r2,r0,LSL #2       ;2736
002e68  e3a000fd          MOV      r0,#0xfd              ;2736
002e6c  ebfffffe          BL       __aeabi_uwrite4
002e70  e0842084          ADD      r2,r4,r4,LSL #1       ;2737
002e74  e59f35d4          LDR      r3,|L1.13392|
002e78  e0832102          ADD      r2,r3,r2,LSL #2       ;2737
002e7c  e2821004          ADD      r1,r2,#4              ;2737
002e80  e0850009          ADD      r0,r5,r9              ;2737
002e84  ebfffffe          BL       __aeabi_uwrite4
002e88  e0842084          ADD      r2,r4,r4,LSL #1       ;2738
002e8c  e59f35bc          LDR      r3,|L1.13392|
002e90  e0832102          ADD      r2,r3,r2,LSL #2       ;2738
002e94  e2821008          ADD      r1,r2,#8              ;2738
002e98  e0882188          ADD      r2,r8,r8,LSL #3       ;2738
002e9c  e0822208          ADD      r2,r2,r8,LSL #4       ;2738
002ea0  e28a300a          ADD      r3,r10,#0xa           ;2738
002ea4  e0830082          ADD      r0,r3,r2,LSL #1       ;2738
002ea8  ebfffffe          BL       __aeabi_uwrite4
002eac  e285501c          ADD      r5,r5,#0x1c           ;2739
002eb0  e2844001          ADD      r4,r4,#1              ;2740
002eb4  ea000051          B        |L1.12288|
                  |L1.11960|
002eb8  e7d70006          LDRB     r0,[r7,r6]            ;2743
002ebc  e350007d          CMP      r0,#0x7d              ;2743
002ec0  1a000016          BNE      |L1.12064|
002ec4  e0840084          ADD      r0,r4,r4,LSL #1       ;2745
002ec8  e59f2580          LDR      r2,|L1.13392|
002ecc  e0821100          ADD      r1,r2,r0,LSL #2       ;2745
002ed0  e3a000fe          MOV      r0,#0xfe              ;2745
002ed4  ebfffffe          BL       __aeabi_uwrite4
002ed8  e0842084          ADD      r2,r4,r4,LSL #1       ;2746
002edc  e59f356c          LDR      r3,|L1.13392|
002ee0  e0832102          ADD      r2,r3,r2,LSL #2       ;2746
002ee4  e2821004          ADD      r1,r2,#4              ;2746
002ee8  e0850009          ADD      r0,r5,r9              ;2746
002eec  ebfffffe          BL       __aeabi_uwrite4
002ef0  e0842084          ADD      r2,r4,r4,LSL #1       ;2747
002ef4  e59f3554          LDR      r3,|L1.13392|
002ef8  e0832102          ADD      r2,r3,r2,LSL #2       ;2747
002efc  e2821008          ADD      r1,r2,#8              ;2747
002f00  e0882188          ADD      r2,r8,r8,LSL #3       ;2747
002f04  e0822208          ADD      r2,r2,r8,LSL #4       ;2747
002f08  e28a300a          ADD      r3,r10,#0xa           ;2747
002f0c  e0830082          ADD      r0,r3,r2,LSL #1       ;2747
002f10  ebfffffe          BL       __aeabi_uwrite4
002f14  e285501c          ADD      r5,r5,#0x1c           ;2748
002f18  e2844001          ADD      r4,r4,#1              ;2749
002f1c  ea000037          B        |L1.12288|
                  |L1.12064|
002f20  e7d70006          LDRB     r0,[r7,r6]            ;2752
002f24  e3500023          CMP      r0,#0x23              ;2752
002f28  1a000016          BNE      |L1.12168|
002f2c  e0840084          ADD      r0,r4,r4,LSL #1       ;2754
002f30  e59f2518          LDR      r2,|L1.13392|
002f34  e0821100          ADD      r1,r2,r0,LSL #2       ;2754
002f38  e3a000d2          MOV      r0,#0xd2              ;2754
002f3c  ebfffffe          BL       __aeabi_uwrite4
002f40  e0842084          ADD      r2,r4,r4,LSL #1       ;2755
002f44  e59f3504          LDR      r3,|L1.13392|
002f48  e0832102          ADD      r2,r3,r2,LSL #2       ;2755
002f4c  e2821004          ADD      r1,r2,#4              ;2755
002f50  e0850009          ADD      r0,r5,r9              ;2755
002f54  ebfffffe          BL       __aeabi_uwrite4
002f58  e0842084          ADD      r2,r4,r4,LSL #1       ;2756
002f5c  e59f34ec          LDR      r3,|L1.13392|
002f60  e0832102          ADD      r2,r3,r2,LSL #2       ;2756
002f64  e2821008          ADD      r1,r2,#8              ;2756
002f68  e0882188          ADD      r2,r8,r8,LSL #3       ;2756
002f6c  e0822208          ADD      r2,r2,r8,LSL #4       ;2756
002f70  e28a300a          ADD      r3,r10,#0xa           ;2756
002f74  e0830082          ADD      r0,r3,r2,LSL #1       ;2756
002f78  ebfffffe          BL       __aeabi_uwrite4
002f7c  e285501c          ADD      r5,r5,#0x1c           ;2757
002f80  e2844001          ADD      r4,r4,#1              ;2758
002f84  ea00001d          B        |L1.12288|
                  |L1.12168|
002f88  e7d70006          LDRB     r0,[r7,r6]            ;2761
002f8c  e3500024          CMP      r0,#0x24              ;2761
002f90  1a000015          BNE      |L1.12268|
002f94  e0840084          ADD      r0,r4,r4,LSL #1       ;2763
002f98  e59f24b0          LDR      r2,|L1.13392|
002f9c  e0821100          ADD      r1,r2,r0,LSL #2       ;2763
002fa0  e3a0006b          MOV      r0,#0x6b              ;2763
002fa4  ebfffffe          BL       __aeabi_uwrite4
002fa8  e0842084          ADD      r2,r4,r4,LSL #1       ;2764
002fac  e59f349c          LDR      r3,|L1.13392|
002fb0  e0832102          ADD      r2,r3,r2,LSL #2       ;2764
002fb4  e2821004          ADD      r1,r2,#4              ;2764
002fb8  e0850009          ADD      r0,r5,r9              ;2764
002fbc  ebfffffe          BL       __aeabi_uwrite4
002fc0  e0842084          ADD      r2,r4,r4,LSL #1       ;2766
002fc4  e59f3484          LDR      r3,|L1.13392|
002fc8  e0832102          ADD      r2,r3,r2,LSL #2       ;2766
002fcc  e2821008          ADD      r1,r2,#8              ;2766
002fd0  e0882188          ADD      r2,r8,r8,LSL #3       ;2766
002fd4  e0822208          ADD      r2,r2,r8,LSL #4       ;2766
002fd8  e08a0082          ADD      r0,r10,r2,LSL #1      ;2766
002fdc  ebfffffe          BL       __aeabi_uwrite4
002fe0  e285501c          ADD      r5,r5,#0x1c           ;2767
002fe4  e2844001          ADD      r4,r4,#1              ;2768
002fe8  ea000004          B        |L1.12288|
                  |L1.12268|
002fec  e7d70006          LDRB     r0,[r7,r6]            ;2782
002ff0  e350000a          CMP      r0,#0xa               ;2782
002ff4  1a000001          BNE      |L1.12288|
002ff8  e2888001          ADD      r8,r8,#1              ;2784
002ffc  e3a05000          MOV      r5,#0                 ;2785
                  |L1.12288|
003000  e354001f          CMP      r4,#0x1f              ;2787
003004  0a000002          BEQ      |L1.12308|
003008  e24b0001          SUB      r0,r11,#1             ;2787
00300c  e1500006          CMP      r0,r6                 ;2787
003010  1a000009          BNE      |L1.12348|
                  |L1.12308|
003014  e59f1430          LDR      r1,|L1.13388|
003018  e1a00004          MOV      r0,r4                 ;2789
00301c  ebfffffe          BL       __aeabi_uwrite4
003020  e59f0424          LDR      r0,|L1.13388|
003024  ebfffffe          BL       __aeabi_uread4
003028  e58d0004          STR      r0,[sp,#4]            ;2790
00302c  e1a01000          MOV      r1,r0                 ;2790
003030  e59d0008          LDR      r0,[sp,#8]            ;2790
003034  ebfffffe          BL       LoadImages
003038  e3a04000          MOV      r4,#0                 ;2791
                  |L1.12348|
00303c  e2866001          ADD      r6,r6,#1              ;2611
                  |L1.12352|
003040  e156000b          CMP      r6,r11                ;2611
003044  3afffe28          BCC      |L1.10476|
003048  e2888001          ADD      r8,r8,#1              ;2796
00304c  e59f13f8          LDR      r1,|L1.13388|
003050  e1a00004          MOV      r0,r4                 ;2797
003054  ebfffffe          BL       __aeabi_uwrite4
003058  e59d000c          LDR      r0,[sp,#0xc]          ;2801
00305c  e3500000          CMP      r0,#0                 ;2801
003060  0a000006          BEQ      |L1.12416|
003064  e3a00001          MOV      r0,#1                 ;2803
003068  e58d0000          STR      r0,[sp,#0]            ;2803
00306c  e51f3f98          LDR      r3,|L1.8412|
003070  e3a02b01          MOV      r2,#0x400             ;2803
003074  e3a01000          MOV      r1,#0                 ;2803
003078  e1a00001          MOV      r0,r1                 ;2803
00307c  ebfffffe          BL       DisplayArea
                  |L1.12416|
003080  e3a03000          MOV      r3,#0                 ;2805
003084  e1a02003          MOV      r2,r3                 ;2805
003088  e1a01003          MOV      r1,r3                 ;2805
00308c  e59f03c0          LDR      r0,|L1.13396|
003090  e5900000          LDR      r0,[r0,#0]            ;2805  ; xSemaphore
003094  ebfffffe          BL       xQueueGenericSend
003098  e0850009          ADD      r0,r5,r9              ;2810
00309c  eafffe01          B        |L1.10408|
;;;2812   
                          ENDP

                  EPDDrawDeviceId PROC
;;;2371   
;;;2372   void EPDDrawDeviceId(BOOL reFreshFlag)
0030a0  e92d40f8          PUSH     {r3-r7,lr}
;;;2373   {
0030a4  e1a04000          MOV      r4,r0
;;;2374       unsigned int* buff = (unsigned int*)&PositionDeviceIDInfo;   
0030a8  e59f53a8          LDR      r5,|L1.13400|
;;;2375       #if(SHOW_TIME_DEBUG)
;;;2376       sysprintf(" [INFO EPD] <EPDDrawDeviceId>  Enter (PositionDeviceIDInfo.itemNum = %d).\n", PositionDeviceIDInfo.itemNum); 
;;;2377       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2378       #endif
;;;2379       //calculateDeviceIDPositionInfo(GetMeterPara()->epmid);
;;;2380       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
0030ac  e3a03000          MOV      r3,#0
0030b0  e3e02000          MVN      r2,#0
0030b4  e1a01003          MOV      r1,r3
0030b8  e59f0394          LDR      r0,|L1.13396|
0030bc  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0030c0  ebfffffe          BL       xQueueGenericReceive
;;;2381       LoadImages(buff, PositionDeviceIDInfo.itemNum);
0030c4  e2850000          ADD      r0,r5,#0
0030c8  ebfffffe          BL       __aeabi_uread4
0030cc  e1a06000          MOV      r6,r0
0030d0  e1a01006          MOV      r1,r6
0030d4  e1a00005          MOV      r0,r5
0030d8  ebfffffe          BL       LoadImages
;;;2382       
;;;2383       if(reFreshFlag)
0030dc  e3540000          CMP      r4,#0
0030e0  0a000006          BEQ      |L1.12544|
;;;2384           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
0030e4  e3a00001          MOV      r0,#1
0030e8  e58d0000          STR      r0,[sp,#0]
0030ec  e59f3368          LDR      r3,|L1.13404|
0030f0  e3a02b01          MOV      r2,#0x400
0030f4  e3a01000          MOV      r1,#0
0030f8  e1a00001          MOV      r0,r1
0030fc  ebfffffe          BL       DisplayArea
                  |L1.12544|
;;;2385       
;;;2386       xSemaphoreGive(xSemaphore);
003100  e3a03000          MOV      r3,#0
003104  e1a02003          MOV      r2,r3
003108  e1a01003          MOV      r1,r3
00310c  e59f0340          LDR      r0,|L1.13396|
003110  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003114  ebfffffe          BL       xQueueGenericSend
;;;2387       #if(SHOW_TIME_DEBUG)
;;;2388       sysprintf(" [INFO EPD] <EPDDrawDeviceId>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2389       #endif
;;;2390       
;;;2391   }
003118  e8bd80f8          POP      {r3-r7,pc}
;;;2392   
                          ENDP

                  EPDShowBGScreen PROC
;;;2029   }
;;;2030   void EPDShowBGScreen(int id, BOOL reFreshFlag)
00311c  e92d4030          PUSH     {r4,r5,lr}
;;;2031   {
003120  e24dd014          SUB      sp,sp,#0x14
003124  e1a04000          MOV      r4,r0
003128  e1a05001          MOV      r5,r1
;;;2032       #if(BUILD_DEBUG_VERSION)
;;;2033       sysprintf("\r\n  ~~ EPD:Show ShowBGScreen(%d) !!!\n", id);
;;;2034       #endif
;;;2035       unsigned int buff[3*1+1];  
;;;2036       #if(SHOW_TIME_DEBUG)
;;;2037       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2038       #endif
;;;2039       buff[0] = 1;  
00312c  e3a00001          MOV      r0,#1
003130  e58d0004          STR      r0,[sp,#4]
;;;2040       buff[1] = id;    
003134  e58d4008          STR      r4,[sp,#8]
;;;2041       buff[2] = 0;
003138  e3a00000          MOV      r0,#0
00313c  e58d000c          STR      r0,[sp,#0xc]
;;;2042       buff[3] = 0; 
003140  e58d0010          STR      r0,[sp,#0x10]
;;;2043       xSemaphoreTake(xSemaphore, portMAX_DELAY);
003144  e3a03000          MOV      r3,#0
003148  e3e02000          MVN      r2,#0
00314c  e1a01003          MOV      r1,r3
003150  e59f02fc          LDR      r0,|L1.13396|
003154  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003158  ebfffffe          BL       xQueueGenericReceive
;;;2044       LoadImages(buff, buff[0]);
00315c  e59d1004          LDR      r1,[sp,#4]
003160  e28d0004          ADD      r0,sp,#4
003164  ebfffffe          BL       LoadImages
;;;2045       
;;;2046       if(reFreshFlag)
003168  e3550000          CMP      r5,#0
00316c  0a000006          BEQ      |L1.12684|
;;;2047           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);    
003170  e3a00001          MOV      r0,#1
003174  e58d0000          STR      r0,[sp,#0]
003178  e59f32dc          LDR      r3,|L1.13404|
00317c  e3a02b01          MOV      r2,#0x400
003180  e3a01000          MOV      r1,#0
003184  e1a00001          MOV      r0,r1
003188  ebfffffe          BL       DisplayArea
                  |L1.12684|
;;;2048       xSemaphoreGive(xSemaphore);  
00318c  e3a03000          MOV      r3,#0
003190  e1a02003          MOV      r2,r3
003194  e1a01003          MOV      r1,r3
003198  e59f02b4          LDR      r0,|L1.13396|
00319c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0031a0  ebfffffe          BL       xQueueGenericSend
;;;2049       #if(SHOW_TIME_DEBUG)
;;;2050       sysprintf(" [INFO EPD] <EPDShowBGScreen>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2051       #endif
;;;2052       if(id == EPD_PICT_ALL_WHITE_INDEX)
0031a4  e3540003          CMP      r4,#3
0031a8  1a000001          BNE      |L1.12724|
;;;2053           EPDDrawDeviceId(FALSE); 
0031ac  e3a00000          MOV      r0,#0
0031b0  ebfffffe          BL       EPDDrawDeviceId
                  |L1.12724|
;;;2054   }
0031b4  e28dd014          ADD      sp,sp,#0x14
0031b8  e8bd8030          POP      {r4,r5,pc}
;;;2055   
                          ENDP

                  EpdDrvInit PROC
;;;1896   /*-----------------------------------------*/
;;;1897   BOOL EpdDrvInit(BOOL testModeFlag)
0031bc  e92d4010          PUSH     {r4,lr}
;;;1898   {   
0031c0  e24dd030          SUB      sp,sp,#0x30
0031c4  e1a04000          MOV      r4,r0
;;;1899       if(initFlag){
0031c8  e59f0278          LDR      r0,|L1.13384|
0031cc  e5d00000          LDRB     r0,[r0,#0]  ; initFlag
0031d0  e3500000          CMP      r0,#0
0031d4  0a000002          BEQ      |L1.12772|
;;;1900           return TRUE;
0031d8  e3a00001          MOV      r0,#1
                  |L1.12764|
0031dc  e28dd030          ADD      sp,sp,#0x30
;;;1901       }
;;;1902       //terninalPrintf("EpdInit!!\r\n");
;;;1903       sysprintf("EpdInit!!\n");
;;;1904       pSpiInterface = SpiGetInterface(EPD_SPI);
;;;1905       if(pSpiInterface == NULL)
;;;1906       {
;;;1907           //terninalPrintf("EpdInit ERROR (pSpiInterface == NULL)!!\r\n");
;;;1908           sysprintf("EpdInit ERROR (pSpiInterface == NULL)!!\n");
;;;1909           return FALSE;
;;;1910       }
;;;1911       if(pSpiInterface->initFunc() == FALSE)
;;;1912       {
;;;1913           //terninalPrintf("EpdInit ERROR (initFunc false)!!\r\n");
;;;1914           sysprintf("EpdInit ERROR (initFunc false)!!\n");
;;;1915           return FALSE;
;;;1916       }
;;;1917       if(hwInit() == FALSE)
;;;1918       {
;;;1919           //terninalPrintf("EpdInit ERROR (hwInit false)!!\r\n");
;;;1920           sysprintf("EpdInit ERROR (hwInit false)!!\n");
;;;1921           return FALSE;
;;;1922       }
;;;1923       if(initFlag == FALSE)
;;;1924       {    if(swInit() == FALSE)
;;;1925           {
;;;1926               //terninalPrintf("EpdInit ERROR (swInit false)!!\r\n");
;;;1927               sysprintf("EpdInit ERROR (swInit false)!!\n");
;;;1928               return FALSE;
;;;1929           }
;;;1930       }
;;;1931       
;;;1932       
;;;1933   		//setTotalPower(TRUE);
;;;1934       WriteCmdCode(IT8951_TCON_SYS_RUN,2);
;;;1935       if(GetIT8951SystemInfo()  == FALSE)
;;;1936       {
;;;1937           //terninalPrintf("EpdInit FALSE!!\r\n");
;;;1938           initFlag = TRUE;
;;;1939           return FALSE;
;;;1940       }
;;;1941       /*
;;;1942       if((GPIO_ReadBit(GPIOJ, BIT0)) && (!GPIO_ReadBit(GPIOJ, BIT1)) )
;;;1943       {
;;;1944           if(readEPDswitch() == TRUE)
;;;1945           {
;;;1946               toggleEPDswitch(FALSE);
;;;1947           }
;;;1948       }
;;;1949       */
;;;1950       
;;;1951       
;;;1952       //IT8951WriteReg(I80CPCR, 0x0001);
;;;1953       //IT8951WriteReg(UP0SR, 0x0001);
;;;1954       
;;;1955       
;;;1956       //terninalPrintf("IT8951GetVCOM = %d \r\n",IT8951GetVCOM());
;;;1957       //IT8951WriteReg(I80CPCR, 0x0001);
;;;1958       //IT8951SetVCOM(50);
;;;1959       
;;;1960       //int tempVCOM;
;;;1961       //tempVCOM = IT8951GetVCOM();
;;;1962       //terninalPrintf("IT8951GetVCOM = %d \r\n",tempVCOM);
;;;1963       //IT8951SetVCOM(tempVCOM);
;;;1964       
;;;1965       if(readMBtestFunc())
;;;1966       {}
;;;1967       else
;;;1968       {
;;;1969           EPDShowBGScreen(EPD_PICT_ALL_BLACK_INDEX, TRUE); 
;;;1970           EPDShowBGScreen(EPD_PICT_ALL_WHITE_INDEX, TRUE); 
;;;1971           EPDShowBGScreen(EPD_PICT_INDEX_INIT, TRUE);
;;;1972       }
;;;1973       
;;;1974       //sysprintf("EpdInit OK!!\n"); 
;;;1975       //terninalPrintf("EpdInit OK!!\r\n");
;;;1976       initFlag = TRUE; 
;;;1977       
;;;1978       if(readMBtestFunc())
;;;1979       {}
;;;1980       else
;;;1981       {
;;;1982           char versionString[35]; 
;;;1983           //sprintf(versionString,"Ver. %d.%02d.%02d  build:%d",MAJOR_VERSION, MINOR_VERSION, REVISION_VERSION, BUILD_VERSION_EPD);  
;;;1984           sprintf(versionString,"Ver. %d.%02d.%02d  build:%u",MAJOR_VERSION, MINOR_VERSION, REVISION_VERSION, dataCode);
;;;1985           EPDDrawString(TRUE,versionString,100,700);
;;;1986       }
;;;1987       
;;;1988       if(testModeFlag)
;;;1989       {
;;;1990           //setTotalPower(FALSE);
;;;1991       //    WriteCmdCode(IT8951_TCON_SLEEP,2); 
;;;1992       }
;;;1993       return TRUE;
;;;1994   }
0031e0  e8bd8010          POP      {r4,pc}
                  |L1.12772|
0031e4  e28f0f9d          ADR      r0,|L1.13408|
0031e8  ebfffffe          BL       sysprintf
0031ec  e3a00001          MOV      r0,#1                 ;1904
0031f0  ebfffffe          BL       SpiGetInterface
0031f4  e59f1270          LDR      r1,|L1.13420|
0031f8  e5810000          STR      r0,[r1,#0]            ;1904  ; pSpiInterface
0031fc  e2810000          ADD      r0,r1,#0              ;1905
003200  e5900000          LDR      r0,[r0,#0]            ;1905  ; pSpiInterface
003204  e3500000          CMP      r0,#0                 ;1905
003208  1a000003          BNE      |L1.12828|
00320c  e28f0f97          ADR      r0,|L1.13424|
003210  ebfffffe          BL       sysprintf
003214  e3a00000          MOV      r0,#0                 ;1909
003218  eaffffef          B        |L1.12764|
                  |L1.12828|
00321c  e59f1248          LDR      r1,|L1.13420|
003220  e5911000          LDR      r1,[r1,#0]            ;1911  ; pSpiInterface
003224  e5910000          LDR      r0,[r1,#0]            ;1911
003228  e12fff30          BLX      r0                    ;1911
00322c  e3500000          CMP      r0,#0                 ;1911
003230  1a000003          BNE      |L1.12868|
003234  e28f0e26          ADR      r0,|L1.13468|
003238  ebfffffe          BL       sysprintf
00323c  e3a00000          MOV      r0,#0                 ;1915
003240  eaffffe5          B        |L1.12764|
                  |L1.12868|
003244  ebfffffe          BL       hwInit
003248  e3500000          CMP      r0,#0                 ;1917
00324c  1a000003          BNE      |L1.12896|
003250  e28f0f9a          ADR      r0,|L1.13504|
003254  ebfffffe          BL       sysprintf
003258  e3a00000          MOV      r0,#0                 ;1921
00325c  eaffffde          B        |L1.12764|
                  |L1.12896|
003260  e59f01e0          LDR      r0,|L1.13384|
003264  e5d00000          LDRB     r0,[r0,#0]            ;1923  ; initFlag
003268  e3500000          CMP      r0,#0                 ;1923
00326c  1a000006          BNE      |L1.12940|
003270  ebfffffe          BL       swInit
003274  e3500000          CMP      r0,#0                 ;1924
003278  1a000003          BNE      |L1.12940|
00327c  e28f0f97          ADR      r0,|L1.13536|
003280  ebfffffe          BL       sysprintf
003284  e3a00000          MOV      r0,#0                 ;1928
003288  eaffffd3          B        |L1.12764|
                  |L1.12940|
00328c  e3a01002          MOV      r1,#2                 ;1934
003290  e3a00001          MOV      r0,#1                 ;1934
003294  ebfffffe          BL       WriteCmdCode
003298  ebfffffe          BL       GetIT8951SystemInfo
00329c  e3500000          CMP      r0,#0                 ;1935
0032a0  1a000004          BNE      |L1.12984|
0032a4  e3a00001          MOV      r0,#1                 ;1938
0032a8  e59f1198          LDR      r1,|L1.13384|
0032ac  e5c10000          STRB     r0,[r1,#0]            ;1938  ; initFlag
0032b0  e3a00000          MOV      r0,#0                 ;1939
0032b4  eaffffc8          B        |L1.12764|
                  |L1.12984|
0032b8  ebfffffe          BL       readMBtestFunc
0032bc  e3500000          CMP      r0,#0                 ;1965
0032c0  1a000008          BNE      |L1.13032|
0032c4  e3a01001          MOV      r1,#1                 ;1969
0032c8  e3a00004          MOV      r0,#4                 ;1969
0032cc  ebfffffe          BL       EPDShowBGScreen
0032d0  e3a01001          MOV      r1,#1                 ;1970
0032d4  e3a00003          MOV      r0,#3                 ;1970
0032d8  ebfffffe          BL       EPDShowBGScreen
0032dc  e3a01001          MOV      r1,#1                 ;1971
0032e0  e3a00006          MOV      r0,#6                 ;1971
0032e4  ebfffffe          BL       EPDShowBGScreen
                  |L1.13032|
0032e8  e3a00001          MOV      r0,#1                 ;1976
0032ec  e59f1154          LDR      r1,|L1.13384|
0032f0  e5c10000          STRB     r0,[r1,#0]            ;1976  ; initFlag
0032f4  ebfffffe          BL       readMBtestFunc
0032f8  e3500000          CMP      r0,#0                 ;1978
0032fc  1a00000f          BNE      |L1.13120|
003300  e59f01f8          LDR      r0,|L1.13568|
003304  e5900000          LDR      r0,[r0,#0]            ;1984  ; dataCode
003308  e3a01007          MOV      r1,#7                 ;1984
00330c  e3a03009          MOV      r3,#9                 ;1984
003310  e3a02001          MOV      r2,#1                 ;1984
003314  e58d1000          STR      r1,[sp,#0]            ;1984
003318  e28f1f79          ADR      r1,|L1.13572|
00331c  e58d0004          STR      r0,[sp,#4]            ;1984
003320  e28d000c          ADD      r0,sp,#0xc            ;1984
003324  ebfffffe          BL       __2sprintf
003328  e3a03faf          MOV      r3,#0x2bc             ;1985
00332c  e3a02064          MOV      r2,#0x64              ;1985
003330  e28d100c          ADD      r1,sp,#0xc            ;1985
003334  e3a00001          MOV      r0,#1                 ;1985
003338  ebfffffe          BL       EPDDrawString
00333c  e1a00000          MOV      r0,r0                 ;1986
                  |L1.13120|
003340  e3a00001          MOV      r0,#1                 ;1993
003344  eaffffa4          B        |L1.12764|
;;;1995   
                          ENDP

                  EPDIT8951Test PROC
;;;1996   BOOL EPDIT8951Test(void)
003348  e92d4010          PUSH     {r4,lr}
;;;1997   {
;;;1998       WriteCmdCode(IT8951_TCON_SYS_RUN,2);
00334c  e3a01002          MOV      r1,#2
003350  e3a00001          MOV      r0,#1
003354  ebfffffe          BL       WriteCmdCode
;;;1999       return GetIT8951SystemInfo();
003358  ebfffffe          BL       GetIT8951SystemInfo
;;;2000   }
00335c  e8bd8010          POP      {r4,pc}
;;;2001   
                          ENDP

                  EPDReSetBacklightTimeout PROC
;;;2019   }
;;;2020   void EPDReSetBacklightTimeout(time_t time)
003360  e92d4010          PUSH     {r4,lr}
;;;2021   {
003364  e1a04000          MOV      r4,r0
;;;2022       threadBackLightWaitTime = time;
003368  e59f01b0          LDR      r0,|L1.13600|
00336c  e5804000          STR      r4,[r0,#0]  ; threadBackLightWaitTime
;;;2023       xSemaphoreGive(xBackLightSemaphore);
003370  e3a03000          MOV      r3,#0
003374  e1a02003          MOV      r2,r3
003378  e1a01003          MOV      r1,r3
00337c  e59f01a0          LDR      r0,|L1.13604|
003380  e5900000          LDR      r0,[r0,#0]  ; xBackLightSemaphore
003384  ebfffffe          BL       xQueueGenericSend
;;;2024       EPDSetBacklight(TRUE);
003388  e3a00001          MOV      r0,#1
00338c  ebfffffe          BL       EPDSetBacklight
;;;2025   }
003390  e8bd8010          POP      {r4,pc}
;;;2026   void EPDSetReinitCallbackFunc(epdReinitCallbackFunc callback)
                          ENDP

                  EPDSetReinitCallbackFunc PROC
003394  e59f118c          LDR      r1,|L1.13608|
;;;2027   {
;;;2028       pEpdReinitCallbackFunc = callback;
003398  e5810000          STR      r0,[r1,#0]  ; pEpdReinitCallbackFunc
;;;2029   }
00339c  e12fff1e          BX       lr
;;;2030   void EPDShowBGScreen(int id, BOOL reFreshFlag)
                          ENDP

                  EPDShowBGScreenEx PROC
;;;2056   
;;;2057   void EPDShowBGScreenEx(int id, BOOL reFreshFlag,TWord usW, TWord usH)
0033a0  e92d40f0          PUSH     {r4-r7,lr}
;;;2058   {
0033a4  e24dd014          SUB      sp,sp,#0x14
0033a8  e1a04000          MOV      r4,r0
0033ac  e1a05001          MOV      r5,r1
0033b0  e1a06002          MOV      r6,r2
0033b4  e1a07003          MOV      r7,r3
;;;2059       #if(BUILD_DEBUG_VERSION)
;;;2060       sysprintf("\r\n  ~~ EPD:Show ShowBGScreen(%d) !!!\n", id);
;;;2061       #endif
;;;2062       unsigned int buff[3*1+1];  
;;;2063       #if(SHOW_TIME_DEBUG)
;;;2064       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2065       #endif
;;;2066       buff[0] = 1;  
0033b8  e3a00001          MOV      r0,#1
0033bc  e58d0004          STR      r0,[sp,#4]
;;;2067       buff[1] = id;    
0033c0  e58d4008          STR      r4,[sp,#8]
;;;2068       buff[2] = 0;
0033c4  e3a00000          MOV      r0,#0
0033c8  e58d000c          STR      r0,[sp,#0xc]
;;;2069       buff[3] = 0; 
0033cc  e58d0010          STR      r0,[sp,#0x10]
;;;2070       xSemaphoreTake(xSemaphore, portMAX_DELAY);
0033d0  e3a03000          MOV      r3,#0
0033d4  e3e02000          MVN      r2,#0
0033d8  e1a01003          MOV      r1,r3
0033dc  e59f0070          LDR      r0,|L1.13396|
0033e0  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0033e4  ebfffffe          BL       xQueueGenericReceive
;;;2071       LoadImages(buff, buff[0]);
0033e8  e59d1004          LDR      r1,[sp,#4]
0033ec  e28d0004          ADD      r0,sp,#4
0033f0  ebfffffe          BL       LoadImages
;;;2072       
;;;2073       if(reFreshFlag)
0033f4  e3550000          CMP      r5,#0
0033f8  0a000006          BEQ      |L1.13336|
;;;2074           //DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
;;;2075             DisplayArea(0,0,usW,usH,1);
0033fc  e3a00001          MOV      r0,#1
003400  e1a03007          MOV      r3,r7
003404  e1a02006          MOV      r2,r6
003408  e3a01000          MOV      r1,#0
00340c  e58d0000          STR      r0,[sp,#0]
003410  e1a00001          MOV      r0,r1
003414  ebfffffe          BL       DisplayArea
                  |L1.13336|
;;;2076       xSemaphoreGive(xSemaphore);  
003418  e3a03000          MOV      r3,#0
00341c  e1a02003          MOV      r2,r3
003420  e1a01003          MOV      r1,r3
003424  e59f0028          LDR      r0,|L1.13396|
003428  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00342c  ebfffffe          BL       xQueueGenericSend
;;;2077       #if(SHOW_TIME_DEBUG)
;;;2078       sysprintf(" [INFO EPD] <EPDShowBGScreen>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2079       #endif
;;;2080       if(id == EPD_PICT_ALL_WHITE_INDEX)
003430  e3540003          CMP      r4,#3
003434  1a000001          BNE      |L1.13376|
;;;2081           EPDDrawDeviceId(FALSE); 
003438  e3a00000          MOV      r0,#0
00343c  ebfffffe          BL       EPDDrawDeviceId
                  |L1.13376|
;;;2082   }
003440  e28dd014          ADD      sp,sp,#0x14
003444  e8bd80f0          POP      {r4-r7,pc}
                  |L1.13384|
                          DCD      initFlag
                  |L1.13388|
                          DCD      mPositionMsgInfoTmp
                  |L1.13392|
                          DCD      mPositionMsgInfoTmp+0x4
                  |L1.13396|
                          DCD      xSemaphore
                  |L1.13400|
                          DCD      PositionDeviceIDInfo
                  |L1.13404|
                          DCD      0x000002f6
                  |L1.13408|
003460  45706449          DCB      "EpdInit!!\n",0
003464  6e697421
003468  210a00  
00346b  00                DCB      0
                  |L1.13420|
                          DCD      pSpiInterface
                  |L1.13424|
003470  45706449          DCB      "EpdInit ERROR (pSpiInterface == NULL)!!\n",0
003474  6e697420
003478  4552524f
00347c  52202870
003480  53706949
003484  6e746572
003488  66616365
00348c  203d3d20
003490  4e554c4c
003494  2921210a
003498  00      
003499  00                DCB      0
00349a  00                DCB      0
00349b  00                DCB      0
                  |L1.13468|
00349c  45706449          DCB      "EpdInit ERROR (initFunc false)!!\n",0
0034a0  6e697420
0034a4  4552524f
0034a8  52202869
0034ac  6e697446
0034b0  756e6320
0034b4  66616c73
0034b8  65292121
0034bc  0a00    
0034be  00                DCB      0
0034bf  00                DCB      0
                  |L1.13504|
0034c0  45706449          DCB      "EpdInit ERROR (hwInit false)!!\n",0
0034c4  6e697420
0034c8  4552524f
0034cc  52202868
0034d0  77496e69
0034d4  74206661
0034d8  6c736529
0034dc  21210a00
                  |L1.13536|
0034e0  45706449          DCB      "EpdInit ERROR (swInit false)!!\n",0
0034e4  6e697420
0034e8  4552524f
0034ec  52202873
0034f0  77496e69
0034f4  74206661
0034f8  6c736529
0034fc  21210a00
                  |L1.13568|
                          DCD      dataCode
                  |L1.13572|
003504  5665722e          DCB      "Ver. %d.%02d.%02d  build:%u",0
003508  2025642e
00350c  25303264
003510  2e253032
003514  64202062
003518  75696c64
00351c  3a257500
                  |L1.13600|
                          DCD      threadBackLightWaitTime
                  |L1.13604|
                          DCD      xBackLightSemaphore
                  |L1.13608|
                          DCD      pEpdReinitCallbackFunc
                          ENDP

                  calculateDeviceIDPositionInfo PROC
;;;2092   #define DEVICE_ID_Y                      40
;;;2093   void calculateDeviceIDPositionInfo(int32_t id)
00352c  e92d47f0          PUSH     {r4-r10,lr}
;;;2094   {
003530  e1a05000          MOV      r5,r0
;;;2095       int i;
;;;2096       //sysprintf("EPD:calculateDeviceIDPositionInfo: 0x%04x...\n", id);   
;;;2097       PositionDeviceIDInfo.itemNum = DEVICE_ID_DIGITAL_NUM;
003534  e51f10e4          LDR      r1,|L1.13400|
003538  e3a00008          MOV      r0,#8
00353c  ebfffffe          BL       __aeabi_uwrite4
;;;2098       for(i = 0; i<DEVICE_ID_DIGITAL_NUM; i++) 
003540  e3a04000          MOV      r4,#0
003544  ea00004b          B        |L1.13944|
                  |L1.13640|
;;;2099       {
;;;2100           uint8_t targetValue = DEVICE_ID_DIGITAL_NUM - 1 - i;
003548  e2640007          RSB      r0,r4,#7
00354c  e20060ff          AND      r6,r0,#0xff
;;;2101           //sysprintf(" --> check : %d, %d(%d) \n", id, pow10Ex(targetValue));
;;;2102           if(id >= pow10Ex(targetValue))
003550  e1a00006          MOV      r0,r6
003554  ebfffffe          BL       pow10Ex
003558  e1500005          CMP      r0,r5
00355c  8a000016          BHI      |L1.13756|
;;;2103           {                    
;;;2104               //sysprintf(" --> [%d]: targetValue = %d, [%d:%d] (%d: %d) \n ", i, targetValue, 
;;;2105               //                        id/pow10Ex(targetValue), (id/pow10Ex(targetValue + 1))*10, pow10Ex(targetValue), pow10Ex(targetValue + 1));
;;;2106               PositionDeviceIDInfo.info[i].bmpId = id/pow10Ex(targetValue) - (id/pow10Ex(targetValue + 1))*10 + DEVICE_ID_FONT_NUM_INDEX;             
003560  e1a00006          MOV      r0,r6
003564  ebfffffe          BL       pow10Ex
003568  e1a08000          MOV      r8,r0
00356c  e1a01008          MOV      r1,r8
003570  e1a00005          MOV      r0,r5
003574  ebfffffe          BL       __aeabi_uidivmod
003578  e1a09000          MOV      r9,r0
00357c  e2861001          ADD      r1,r6,#1
003580  e20100ff          AND      r0,r1,#0xff
003584  ebfffffe          BL       pow10Ex
003588  e1a08000          MOV      r8,r0
00358c  e1a01008          MOV      r1,r8
003590  e1a00005          MOV      r0,r5
003594  ebfffffe          BL       __aeabi_uidivmod
003598  e0800100          ADD      r0,r0,r0,LSL #2
00359c  e0490080          SUB      r0,r9,r0,LSL #1
0035a0  e2807051          ADD      r7,r0,#0x51
0035a4  e0840084          ADD      r0,r4,r4,LSL #1
0035a8  e59f2390          LDR      r2,|L1.14656|
0035ac  e0821100          ADD      r1,r2,r0,LSL #2
0035b0  e1a00007          MOV      r0,r7
0035b4  ebfffffe          BL       __aeabi_uwrite4
0035b8  ea000004          B        |L1.13776|
                  |L1.13756|
;;;2107               
;;;2108           }
;;;2109           else
;;;2110           {
;;;2111               PositionDeviceIDInfo.info[i].bmpId = 0 + DEVICE_ID_FONT_NUM_INDEX;             
0035bc  e0840084          ADD      r0,r4,r4,LSL #1
0035c0  e59f2378          LDR      r2,|L1.14656|
0035c4  e0821100          ADD      r1,r2,r0,LSL #2
0035c8  e3a00051          MOV      r0,#0x51
0035cc  ebfffffe          BL       __aeabi_uwrite4
                  |L1.13776|
;;;2112           }
;;;2113               
;;;2114           if(i == 0)
0035d0  e3540000          CMP      r4,#0
0035d4  1a00000c          BNE      |L1.13836|
;;;2115           {     
;;;2116               PositionDeviceIDInfo.info[i].xPos = DEVICE_ID_X;
0035d8  e0840084          ADD      r0,r4,r4,LSL #1
0035dc  e59f235c          LDR      r2,|L1.14656|
0035e0  e0820100          ADD      r0,r2,r0,LSL #2
0035e4  e2801004          ADD      r1,r0,#4
0035e8  e3a000e6          MOV      r0,#0xe6
0035ec  ebfffffe          BL       __aeabi_uwrite4
;;;2117               PositionDeviceIDInfo.info[i].yPos = DEVICE_ID_Y;
0035f0  e0840084          ADD      r0,r4,r4,LSL #1
0035f4  e59f2344          LDR      r2,|L1.14656|
0035f8  e0820100          ADD      r0,r2,r0,LSL #2
0035fc  e2801008          ADD      r1,r0,#8
003600  e3a00028          MOV      r0,#0x28
003604  ebfffffe          BL       __aeabi_uwrite4
003608  ea000019          B        |L1.13940|
                  |L1.13836|
;;;2118           }
;;;2119           else
;;;2120           {
;;;2121               PositionDeviceIDInfo.info[i].xPos = PositionDeviceIDInfo.info[i-1].xPos + (unsigned int)DEVICE_ID_FONT_WIDTH;
00360c  e2441001          SUB      r1,r4,#1
003610  e0811081          ADD      r1,r1,r1,LSL #1
003614  e59f2324          LDR      r2,|L1.14656|
003618  e0821101          ADD      r1,r2,r1,LSL #2
00361c  e2810004          ADD      r0,r1,#4
003620  ebfffffe          BL       __aeabi_uread4
003624  e2407017          SUB      r7,r0,#0x17
003628  e0840084          ADD      r0,r4,r4,LSL #1
00362c  e59f230c          LDR      r2,|L1.14656|
003630  e0820100          ADD      r0,r2,r0,LSL #2
003634  e2801004          ADD      r1,r0,#4
003638  e1a00007          MOV      r0,r7
00363c  ebfffffe          BL       __aeabi_uwrite4
;;;2122               PositionDeviceIDInfo.info[i].yPos = PositionDeviceIDInfo.info[i-1].yPos;
003640  e2441001          SUB      r1,r4,#1
003644  e0811081          ADD      r1,r1,r1,LSL #1
003648  e59f22f0          LDR      r2,|L1.14656|
00364c  e0821101          ADD      r1,r2,r1,LSL #2
003650  e2810008          ADD      r0,r1,#8
003654  ebfffffe          BL       __aeabi_uread4
003658  e1a07000          MOV      r7,r0
00365c  e0840084          ADD      r0,r4,r4,LSL #1
003660  e59f22d8          LDR      r2,|L1.14656|
003664  e0820100          ADD      r0,r2,r0,LSL #2
003668  e2801008          ADD      r1,r0,#8
00366c  e1a00007          MOV      r0,r7
003670  ebfffffe          BL       __aeabi_uwrite4
                  |L1.13940|
003674  e2844001          ADD      r4,r4,#1              ;2098
                  |L1.13944|
003678  e3540008          CMP      r4,#8                 ;2098
00367c  baffffb1          BLT      |L1.13640|
;;;2123           }
;;;2124           //sysprintf(" -!!-> [%d]: bmpId = %d, [%d:%d] \n ", i, PositionDeviceIDInfo.info[i].bmpId, PositionDeviceIDInfo.info[i].xPos, PositionDeviceIDInfo.info[i].yPos);
;;;2125       }
;;;2126   }
003680  e8bd87f0          POP      {r4-r10,pc}
;;;2127   
                          ENDP

                  EPDShowErrorID PROC
;;;2135   #define ERROR_ID_TOTAL_NUM_POSITION     4
;;;2136   void EPDShowErrorID(uint16_t id)
003684  e92d4070          PUSH     {r4-r6,lr}
;;;2137   {
003688  e24dd040          SUB      sp,sp,#0x40
00368c  e1a04000          MOV      r4,r0
;;;2138       sysprintf("EPD:ShowErrorID 0x%04x...\n", id);   
003690  e1a01004          MOV      r1,r4
003694  e28f0faa          ADR      r0,|L1.14660|
003698  ebfffffe          BL       sysprintf
;;;2139       uint8_t showNum[ERROR_ID_TOTAL_NUM_POSITION];
;;;2140       uint8_t buffIndex = 0;;   
00369c  e3a06000          MOV      r6,#0
;;;2141       int i;
;;;2142       unsigned int buff[3*ERROR_ID_TOTAL_NUM_POSITION+1];
;;;2143       sysprintf("EPD:ShowErrorID 0x%x, 0x%x, 0x%x, 0x%x...\n", (id>>12)&0xf, (id>>8)&0xf, (id>>4)&0xf, (id>>0)&0xf);
0036a0  e204000f          AND      r0,r4,#0xf
0036a4  e58d0000          STR      r0,[sp,#0]
0036a8  e3a0000f          MOV      r0,#0xf
0036ac  e0003244          AND      r3,r0,r4,ASR #4
0036b0  e0002444          AND      r2,r0,r4,ASR #8
0036b4  e0001644          AND      r1,r0,r4,ASR #12
0036b8  e28f0e2a          ADR      r0,|L1.14688|
0036bc  ebfffffe          BL       sysprintf
;;;2144       //showNum[0] = ERROR_ID_FONT_NUM_INDEX;
;;;2145       //showNum[1] = ERROR_ID_FONT_X_INDEX;
;;;2146       showNum[0] = ((id>>12)&0xf) + ERROR_ID_FONT_NUM_INDEX;
0036c0  e3a0000f          MOV      r0,#0xf
0036c4  e0000644          AND      r0,r0,r4,ASR #12
0036c8  e2800009          ADD      r0,r0,#9
0036cc  e5cd003c          STRB     r0,[sp,#0x3c]
;;;2147       showNum[1] = ((id>>8)&0xf) + ERROR_ID_FONT_NUM_INDEX;
0036d0  e3a0000f          MOV      r0,#0xf
0036d4  e0000444          AND      r0,r0,r4,ASR #8
0036d8  e2800009          ADD      r0,r0,#9
0036dc  e5cd003d          STRB     r0,[sp,#0x3d]
;;;2148       showNum[2] = ((id>>4)&0xf) + ERROR_ID_FONT_NUM_INDEX;
0036e0  e3a0000f          MOV      r0,#0xf
0036e4  e0000244          AND      r0,r0,r4,ASR #4
0036e8  e2800009          ADD      r0,r0,#9
0036ec  e5cd003e          STRB     r0,[sp,#0x3e]
;;;2149       showNum[3] = ((id>>0)&0xf) + ERROR_ID_FONT_NUM_INDEX;
0036f0  e204000f          AND      r0,r4,#0xf
0036f4  e2800009          ADD      r0,r0,#9
0036f8  e5cd003f          STRB     r0,[sp,#0x3f]
;;;2150       buff[0] = ERROR_ID_TOTAL_NUM_POSITION;   
0036fc  e3a00004          MOV      r0,#4
003700  e58d0008          STR      r0,[sp,#8]
;;;2151       
;;;2152       for(i = 0; i<ERROR_ID_TOTAL_NUM_POSITION; i++) 
003704  e3a05000          MOV      r5,#0
003708  ea000015          B        |L1.14180|
                  |L1.14092|
;;;2153       {
;;;2154               buff[++buffIndex] = showNum[i];
00370c  e28d003c          ADD      r0,sp,#0x3c
003710  e7d00005          LDRB     r0,[r0,r5]
003714  e2861001          ADD      r1,r6,#1
003718  e20110ff          AND      r1,r1,#0xff
00371c  e1a06001          MOV      r6,r1
003720  e28d2008          ADD      r2,sp,#8
003724  e7820101          STR      r0,[r2,r1,LSL #2]
;;;2155               buff[++buffIndex] = ERROR_ID_X - i*ERROR_ID_FONT_WIDTH;         
003728  e0850085          ADD      r0,r5,r5,LSL #1
00372c  e59f1258          LDR      r1,|L1.14732|
003730  e0410200          SUB      r0,r1,r0,LSL #4
003734  e2861001          ADD      r1,r6,#1
003738  e20110ff          AND      r1,r1,#0xff
00373c  e1a06001          MOV      r6,r1
003740  e28d2008          ADD      r2,sp,#8
003744  e7820101          STR      r0,[r2,r1,LSL #2]
;;;2156               buff[++buffIndex] = ERROR_ID_Y;
003748  e3a000aa          MOV      r0,#0xaa
00374c  e2861001          ADD      r1,r6,#1
003750  e20110ff          AND      r1,r1,#0xff
003754  e1a06001          MOV      r6,r1
003758  e28d2008          ADD      r2,sp,#8
00375c  e7820101          STR      r0,[r2,r1,LSL #2]
003760  e2855001          ADD      r5,r5,#1              ;2152
                  |L1.14180|
003764  e3550004          CMP      r5,#4                 ;2152
003768  baffffe7          BLT      |L1.14092|
;;;2157       }
;;;2158       #if(0)
;;;2159       for(i = 0; i<buff[0]*3+1; i++) 
;;;2160       {
;;;2161           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;2162       }
;;;2163       #endif
;;;2164       xSemaphoreTake(xSemaphore, portMAX_DELAY);
00376c  e3a03000          MOV      r3,#0
003770  e3e02000          MVN      r2,#0
003774  e1a01003          MOV      r1,r3
003778  e51f032c          LDR      r0,|L1.13396|
00377c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003780  ebfffffe          BL       xQueueGenericReceive
;;;2165       LoadImages(buff, buff[0]);    
003784  e59d1008          LDR      r1,[sp,#8]
003788  e28d0008          ADD      r0,sp,#8
00378c  ebfffffe          BL       LoadImages
;;;2166       DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);      
003790  e3a00001          MOV      r0,#1
003794  e58d0000          STR      r0,[sp,#0]
003798  e51f3344          LDR      r3,|L1.13404|
00379c  e3a02b01          MOV      r2,#0x400
0037a0  e3a01000          MOV      r1,#0
0037a4  e1a00001          MOV      r0,r1
0037a8  ebfffffe          BL       DisplayArea
;;;2167       xSemaphoreGive(xSemaphore);   
0037ac  e3a03000          MOV      r3,#0
0037b0  e1a02003          MOV      r2,r3
0037b4  e1a01003          MOV      r1,r3
0037b8  e51f036c          LDR      r0,|L1.13396|
0037bc  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0037c0  ebfffffe          BL       xQueueGenericSend
;;;2168   }
0037c4  e28dd040          ADD      sp,sp,#0x40
0037c8  e8bd8070          POP      {r4-r6,pc}
;;;2169   
                          ENDP

                  ShowExpired PROC
;;;2176   #define EXPIRED_TOTAL_NUM_POSITION                   2
;;;2177   void ShowExpired(uint8_t id, BOOL leftShow, BOOL rightShow, BOOL reFreshFlag)
0037cc  e92d41f0          PUSH     {r4-r8,lr}
;;;2178   {
0037d0  e24dd020          SUB      sp,sp,#0x20
0037d4  e1a05000          MOV      r5,r0
0037d8  e1a06001          MOV      r6,r1
0037dc  e1a07002          MOV      r7,r2
0037e0  e1a08003          MOV      r8,r3
;;;2179       
;;;2180   //    uint8_t showNum[EXPIRED_TOTAL_NUM_POSITION];
;;;2181       #if(BUILD_DEBUG_VERSION)
;;;2182       sysprintf("EPD:ShowExpired [left:%02d] : [right:%02d] ...\n", leftId, rightId );
;;;2183       #endif
;;;2184   
;;;2185   //    int i;
;;;2186       unsigned int buff[3*EXPIRED_TOTAL_NUM_POSITION+1];
;;;2187       uint8_t buffIndex = 0;
0037e4  e3a04000          MOV      r4,#0
;;;2188       buff[0] = 0;
0037e8  e3a00000          MOV      r0,#0
0037ec  e58d0004          STR      r0,[sp,#4]
;;;2189   
;;;2190       if(!leftShow && !rightShow)
0037f0  e3560000          CMP      r6,#0
0037f4  1a000005          BNE      |L1.14352|
0037f8  e3570000          CMP      r7,#0
0037fc  1a000003          BNE      |L1.14352|
;;;2191       {
;;;2192           sysprintf("EPD:ShowExpired ignore!!!!\r\n");
003800  e28f0f62          ADR      r0,|L1.14736|
003804  ebfffffe          BL       sysprintf
                  |L1.14344|
;;;2193           return;
;;;2194       }
;;;2195       if(leftShow)
;;;2196       {
;;;2197           buff[++buffIndex] = id;
;;;2198           buff[++buffIndex] = EXPIRED_LEFT_X;  
;;;2199           buff[++buffIndex] = EXPIRED_LEFT_Y; 
;;;2200           buff[0] = buff[0] + 1;
;;;2201       }
;;;2202       
;;;2203       if(rightShow)
;;;2204       {
;;;2205           buff[++buffIndex] = id;
;;;2206           buff[++buffIndex] = EXPIRED_RIGHT_X;  
;;;2207           buff[++buffIndex] = EXPIRED_RIGHT_Y; 
;;;2208           buff[0] = buff[0] + 1;
;;;2209       }
;;;2210   
;;;2211       #if(BUILD_DEBUG_VERSION)
;;;2212       sysprintf("EPD:ShowExpired [top %02d:%02d] - [down %02d:%02d]...\n", leftVol1, leftVol2, rightVol1, rightVol2);
;;;2213       #endif
;;;2214       #if(0)
;;;2215       for(i = 0; i<buff[0]*3+1; i++) 
;;;2216       {
;;;2217           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;2218       }
;;;2219       #endif
;;;2220       if(buff[0] == 0)
;;;2221       {
;;;2222           sysprintf("EPD:ShowExpired ignore 2!!!!\r\n");
;;;2223           return;
;;;2224       }
;;;2225       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
;;;2226       LoadImages(buff, buff[0]);
;;;2227       if(reFreshFlag)
;;;2228           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
;;;2229       xSemaphoreGive(xSemaphore);  
;;;2230   }
003808  e28dd020          ADD      sp,sp,#0x20
00380c  e8bd81f0          POP      {r4-r8,pc}
                  |L1.14352|
003810  e3560000          CMP      r6,#0                 ;2195
003814  0a000013          BEQ      |L1.14440|
003818  e2840001          ADD      r0,r4,#1              ;2197
00381c  e20000ff          AND      r0,r0,#0xff           ;2197
003820  e1a04000          MOV      r4,r0                 ;2197
003824  e28d1004          ADD      r1,sp,#4              ;2197
003828  e7815100          STR      r5,[r1,r0,LSL #2]     ;2197
00382c  e59f017c          LDR      r0,|L1.14768|
003830  e2841001          ADD      r1,r4,#1              ;2198
003834  e20110ff          AND      r1,r1,#0xff           ;2198
003838  e1a04001          MOV      r4,r1                 ;2198
00383c  e28d2004          ADD      r2,sp,#4              ;2198
003840  e7820101          STR      r0,[r2,r1,LSL #2]     ;2198
003844  e240007b          SUB      r0,r0,#0x7b           ;2199
003848  e2841001          ADD      r1,r4,#1              ;2199
00384c  e20110ff          AND      r1,r1,#0xff           ;2199
003850  e1a04001          MOV      r4,r1                 ;2199
003854  e28d2004          ADD      r2,sp,#4              ;2199
003858  e7820101          STR      r0,[r2,r1,LSL #2]     ;2199
00385c  e59d0004          LDR      r0,[sp,#4]            ;2200
003860  e2800001          ADD      r0,r0,#1              ;2200
003864  e58d0004          STR      r0,[sp,#4]            ;2200
                  |L1.14440|
003868  e3570000          CMP      r7,#0                 ;2203
00386c  0a000013          BEQ      |L1.14528|
003870  e2840001          ADD      r0,r4,#1              ;2205
003874  e20000ff          AND      r0,r0,#0xff           ;2205
003878  e1a04000          MOV      r4,r0                 ;2205
00387c  e28d1004          ADD      r1,sp,#4              ;2205
003880  e7815100          STR      r5,[r1,r0,LSL #2]     ;2205
003884  e3a0005d          MOV      r0,#0x5d              ;2206
003888  e2841001          ADD      r1,r4,#1              ;2206
00388c  e20110ff          AND      r1,r1,#0xff           ;2206
003890  e1a04001          MOV      r4,r1                 ;2206
003894  e28d2004          ADD      r2,sp,#4              ;2206
003898  e7820101          STR      r0,[r2,r1,LSL #2]     ;2206
00389c  e59f0110          LDR      r0,|L1.14772|
0038a0  e2841001          ADD      r1,r4,#1              ;2207
0038a4  e20110ff          AND      r1,r1,#0xff           ;2207
0038a8  e1a04001          MOV      r4,r1                 ;2207
0038ac  e28d2004          ADD      r2,sp,#4              ;2207
0038b0  e7820101          STR      r0,[r2,r1,LSL #2]     ;2207
0038b4  e59d0004          LDR      r0,[sp,#4]            ;2208
0038b8  e2800001          ADD      r0,r0,#1              ;2208
0038bc  e58d0004          STR      r0,[sp,#4]            ;2208
                  |L1.14528|
0038c0  e59d0004          LDR      r0,[sp,#4]            ;2220
0038c4  e3500000          CMP      r0,#0                 ;2220
0038c8  1a000002          BNE      |L1.14552|
0038cc  e28f00e4          ADR      r0,|L1.14776|
0038d0  ebfffffe          BL       sysprintf
0038d4  eaffffcb          B        |L1.14344|
                  |L1.14552|
0038d8  e3a03000          MOV      r3,#0                 ;2225
0038dc  e3e02000          MVN      r2,#0                 ;2225
0038e0  e1a01003          MOV      r1,r3                 ;2225
0038e4  e51f0498          LDR      r0,|L1.13396|
0038e8  e5900000          LDR      r0,[r0,#0]            ;2225  ; xSemaphore
0038ec  ebfffffe          BL       xQueueGenericReceive
0038f0  e59d1004          LDR      r1,[sp,#4]            ;2226
0038f4  e28d0004          ADD      r0,sp,#4              ;2226
0038f8  ebfffffe          BL       LoadImages
0038fc  e3580000          CMP      r8,#0                 ;2227
003900  0a000006          BEQ      |L1.14624|
003904  e3a00001          MOV      r0,#1                 ;2228
003908  e58d0000          STR      r0,[sp,#0]            ;2228
00390c  e51f34b8          LDR      r3,|L1.13404|
003910  e3a02b01          MOV      r2,#0x400             ;2228
003914  e3a01000          MOV      r1,#0                 ;2228
003918  e1a00001          MOV      r0,r1                 ;2228
00391c  ebfffffe          BL       DisplayArea
                  |L1.14624|
003920  e3a03000          MOV      r3,#0                 ;2229
003924  e1a02003          MOV      r2,r3                 ;2229
003928  e1a01003          MOV      r1,r3                 ;2229
00392c  e51f04e0          LDR      r0,|L1.13396|
003930  e5900000          LDR      r0,[r0,#0]            ;2229  ; xSemaphore
003934  ebfffffe          BL       xQueueGenericSend
003938  e1a00000          MOV      r0,r0
00393c  eaffffb1          B        |L1.14344|
                  |L1.14656|
                          DCD      PositionDeviceIDInfo+0x4
                  |L1.14660|
003944  4550443a          DCB      "EPD:ShowErrorID 0x%04x...\n",0
003948  53686f77
00394c  4572726f
003950  72494420
003954  30782530
003958  34782e2e
00395c  2e0a00  
00395f  00                DCB      0
                  |L1.14688|
003960  4550443a          DCB      "EPD:ShowErrorID 0x%x, 0x%x, 0x%x, 0x%x...\n",0
003964  53686f77
003968  4572726f
00396c  72494420
003970  30782578
003974  2c203078
003978  25782c20
00397c  30782578
003980  2c203078
003984  25782e2e
003988  2e0a00  
00398b  00                DCB      0
                  |L1.14732|
                          DCD      0x0000014f
                  |L1.14736|
003990  4550443a          DCB      "EPD:ShowExpired ignore!!!!\r\n",0
003994  53686f77
003998  45787069
00399c  72656420
0039a0  69676e6f
0039a4  72652121
0039a8  21210d0a
0039ac  00      
0039ad  00                DCB      0
0039ae  00                DCB      0
0039af  00                DCB      0
                  |L1.14768|
                          DCD      0x000001d9
                  |L1.14772|
                          DCD      0x0000015e
                  |L1.14776|
0039b8  4550443a          DCB      "EPD:ShowExpired ignore 2!!!!\r\n",0
0039bc  53686f77
0039c0  45787069
0039c4  72656420
0039c8  69676e6f
0039cc  72652032
0039d0  21212121
0039d4  0d0a00  
0039d7  00                DCB      0
                          ENDP

                  UpdateClock PROC
;;;2237   #define CURRENT_DATE_Y                      40
;;;2238   void UpdateClock(BOOL reFreshFlag, BOOL checkFlag)
0039d8  e92d41f0          PUSH     {r4-r8,lr}
;;;2239   {   
0039dc  e24dd040          SUB      sp,sp,#0x40
0039e0  e1a07000          MOV      r7,r0
0039e4  e1a05001          MOV      r5,r1
;;;2240       int counter = 0;
0039e8  e3a04000          MOV      r4,#0
;;;2241       BOOL timeReval, dateReval;
;;;2242       RTC_TIME_DATA_T pt;
;;;2243       #if(SHOW_TIME_DEBUG)
;;;2244       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2245       #endif
;;;2246       while(counter<5)
0039ec  ea00003a          B        |L1.15068|
                  |L1.14832|
;;;2247       {
;;;2248           if(E_RTC_SUCCESS == RTC_Read(RTC_CURRENT_TIME, &pt))
0039f0  e28d1010          ADD      r1,sp,#0x10
0039f4  e3a00000          MOV      r0,#0
0039f8  ebfffffe          BL       RTC_Read
0039fc  e3500000          CMP      r0,#0
003a00  1a00002c          BNE      |L1.15032|
;;;2249           {
;;;2250               #if(BUILD_DEBUG_VERSION)
;;;2251               sysprintf("RTC_CURRENT_TIME: [%04d/%02d/%02d %02d:%02d:%02d (%d)  u8cClockDisplay = %d, u8cAmPm =%d]\r\n",
;;;2252                                                       pt.u32Year, pt.u32cMonth, pt.u32cDay, 
;;;2253                                                       pt.u32cHour, pt.u32cMinute, pt.u32cSecond, pt.u32cDayOfWeek, pt.u8cClockDisplay, pt.u8cAmPm); 
;;;2254               #endif        
;;;2255               timeReval = ShowTime(CURRENT_TIME_X, CURRENT_TIME_Y, EPD_FONT_TYPE_SMALL_2, pt.u32cHour, pt.u32cMinute, checkFlag);
003a04  e59d0018          LDR      r0,[sp,#0x18]
003a08  e20000ff          AND      r0,r0,#0xff
003a0c  e88d0021          STM      sp,{r0,r5}
003a10  e59d001c          LDR      r0,[sp,#0x1c]
003a14  e20030ff          AND      r3,r0,#0xff
003a18  e3a02002          MOV      r2,#2
003a1c  e3a01028          MOV      r1,#0x28
003a20  e3a00f82          MOV      r0,#0x208
003a24  ebfffffe          BL       ShowTime
003a28  e1a08000          MOV      r8,r0
;;;2256               dateReval = ShowDate(CURRENT_DATE_X, CURRENT_DATE_Y, EPD_FONT_TYPE_SMALL_2, pt.u32Year, pt.u32cMonth, pt.u32cDay, checkFlag);  
003a2c  e59d0028          LDR      r0,[sp,#0x28]
003a30  e59d1024          LDR      r1,[sp,#0x24]
003a34  e88d0023          STM      sp,{r0,r1,r5}
003a38  e3a02002          MOV      r2,#2
003a3c  e3a01028          MOV      r1,#0x28
003a40  e2820fbb          ADD      r0,r2,#0x2ec
003a44  e59d302c          LDR      r3,[sp,#0x2c]
003a48  ebfffffe          BL       ShowDate
003a4c  e1a06000          MOV      r6,r0
;;;2257               
;;;2258               if(timeReval || dateReval || reFreshFlag)
003a50  e3580000          CMP      r8,#0
003a54  1a000003          BNE      |L1.14952|
003a58  e3560000          CMP      r6,#0
003a5c  1a000001          BNE      |L1.14952|
003a60  e3570000          CMP      r7,#0
003a64  0a000012          BEQ      |L1.15028|
                  |L1.14952|
;;;2259               {
;;;2260                   xSemaphoreTake(xSemaphore, portMAX_DELAY);  
003a68  e3a03000          MOV      r3,#0
003a6c  e3e02000          MVN      r2,#0
003a70  e1a01003          MOV      r1,r3
003a74  e51f0628          LDR      r0,|L1.13396|
003a78  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003a7c  ebfffffe          BL       xQueueGenericReceive
;;;2261                   DisplayArea(0,0,800,600, 1); 
003a80  e3a00001          MOV      r0,#1
003a84  e3a03f96          MOV      r3,#0x258
003a88  e3a02e32          MOV      r2,#0x320
003a8c  e3a01000          MOV      r1,#0
003a90  e58d0000          STR      r0,[sp,#0]
003a94  e1a00001          MOV      r0,r1
003a98  ebfffffe          BL       DisplayArea
;;;2262                   xSemaphoreGive(xSemaphore);  
003a9c  e3a03000          MOV      r3,#0
003aa0  e1a02003          MOV      r2,r3
003aa4  e1a01003          MOV      r1,r3
003aa8  e51f065c          LDR      r0,|L1.13396|
003aac  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003ab0  ebfffffe          BL       xQueueGenericSend
                  |L1.15028|
;;;2263               }
;;;2264   
;;;2265               //epd backlite
;;;2266               #if(0)
;;;2267               #warning just for test
;;;2268               if((pt.u32cHour > 6) && (pt.u32cHour < 18))
;;;2269                   EPDSetBacklight(FALSE);
;;;2270               else
;;;2271                   EPDSetBacklight(TRUE);
;;;2272               #endif
;;;2273               break;
003ab4  ea00000a          B        |L1.15076|
                  |L1.15032|
;;;2274           }  
;;;2275           else
;;;2276           {
;;;2277               sysprintf(" [ERROR EPD] <UpdateClock>  ignore, RTC_Read error[counter = %d].\n", counter); 
003ab8  e1a01004          MOV      r1,r4
003abc  e59f02ac          LDR      r0,|L1.15728|
003ac0  ebfffffe          BL       sysprintf
;;;2278              BuzzerPlay(100, 500, counter, TRUE);
003ac4  e20420ff          AND      r2,r4,#0xff
003ac8  e3a03001          MOV      r3,#1
003acc  e3a01f7d          MOV      r1,#0x1f4
003ad0  e3a00064          MOV      r0,#0x64
003ad4  ebfffffe          BL       BuzzerPlay
;;;2279               counter++;
003ad8  e2844001          ADD      r4,r4,#1
                  |L1.15068|
003adc  e3540005          CMP      r4,#5                 ;2246
003ae0  baffffc2          BLT      |L1.14832|
                  |L1.15076|
003ae4  e1a00000          MOV      r0,r0                 ;2273
;;;2280           }
;;;2281       }
;;;2282       if(counter>=5)
003ae8  e3540005          CMP      r4,#5
003aec  ba000009          BLT      |L1.15128|
;;;2283       {
;;;2284          BuzzerPlay(500, 500, 1, TRUE);
003af0  e3a03001          MOV      r3,#1
003af4  e1a02003          MOV      r2,r3
003af8  e3a01f7d          MOV      r1,#0x1f4
003afc  e1a00001          MOV      r0,r1
003b00  ebfffffe          BL       BuzzerPlay
;;;2285          BuzzerPlay(100, 100, 1, TRUE);
003b04  e3a03001          MOV      r3,#1
003b08  e1a02003          MOV      r2,r3
003b0c  e3a01064          MOV      r1,#0x64
003b10  e1a00001          MOV      r0,r1
003b14  ebfffffe          BL       BuzzerPlay
                  |L1.15128|
;;;2286       }
;;;2287       #if(SHOW_TIME_DEBUG)
;;;2288       sysprintf(" [INFO EPD] <UpdateClock>  [%d].\n", xTaskGetTickCount() - tickLocalStart);   
;;;2289       #endif    
;;;2290   }
003b18  e28dd040          ADD      sp,sp,#0x40
003b1c  e8bd81f0          POP      {r4-r8,pc}
;;;2291   
                          ENDP

                  calculatePreparePositionInfo PROC
;;;2293   
;;;2294   BOOL calculatePreparePositionInfo(uint8_t meterPosition, uint8_t carEnableNumber)
003b20  e92d47f0          PUSH     {r4-r10,lr}
;;;2295   {
003b24  e1a06000          MOV      r6,r0
003b28  e1a05001          MOV      r5,r1
;;;2296       uint8_t carIndex = 0;
003b2c  e3a07000          MOV      r7,#0
;;;2297       int i;
;;;2298       int targetWidth = 0;
003b30  e3a08000          MOV      r8,#0
;;;2299       #if(SHOW_POSITION_DEBUG)
;;;2300       sysprintf("calculateBannerPositionInfo: meterPosition = %d, carEnableNumber = %d\r\n", meterPosition, carEnableNumber); 
;;;2301       #endif
;;;2302       if((carEnableNumber > CAR_ITEM_MAX_NUM) || (carEnableNumber < 1))
003b34  e3550006          CMP      r5,#6
003b38  ca000001          BGT      |L1.15172|
003b3c  e3550001          CMP      r5,#1
003b40  aa000004          BGE      |L1.15192|
                  |L1.15172|
;;;2303       {
;;;2304           sysprintf("calculateBannerPositionInfo fail: carEnableNumber = %d\r\n", carEnableNumber); 
003b44  e1a01005          MOV      r1,r5
003b48  e28f0f89          ADR      r0,|L1.15732|
003b4c  ebfffffe          BL       sysprintf
;;;2305           return FALSE;
003b50  e3a00000          MOV      r0,#0
                  |L1.15188|
;;;2306       }
;;;2307       if(meterPosition > carEnableNumber)
;;;2308       {
;;;2309           sysprintf("calculateBannerPositionInfo fail: meterPosition = %d(%d)\r\n", meterPosition, carEnableNumber); 
;;;2310           return FALSE;
;;;2311       }
;;;2312       mBannerPositionInfo.carEnableNum = carEnableNumber + 1;  
;;;2313       for(i = 0; i<mBannerPositionInfo.carEnableNum; i++) 
;;;2314       {
;;;2315           
;;;2316           if(i == 0)
;;;2317           {
;;;2318               mBannerPositionInfo.info[i].xPos = BANNER_START_X_POSITION; 
;;;2319               mBannerPositionInfo.info[i].yPos = BANNER_START_Y_POSITION; 
;;;2320           }
;;;2321           else
;;;2322           {
;;;2323               mBannerPositionInfo.info[i].xPos = mBannerPositionInfo.info[i-1].xPos + targetWidth; 
;;;2324               mBannerPositionInfo.info[i].yPos = BANNER_START_Y_POSITION;
;;;2325               
;;;2326           }
;;;2327           if(meterPosition == i)
;;;2328           {
;;;2329               mBannerPositionInfo.info[i].bmpId = EPD_PICT_METER_INDEX;
;;;2330               if(i == 0)
;;;2331               {//meter b@ Ne
;;;2332                   mBannerPositionInfo.info[i].xPos = mBannerPositionInfo.info[i].xPos + 50; 
;;;2333               }
;;;2334           }
;;;2335           else
;;;2336           {
;;;2337               mBannerPositionInfo.info[i].bmpId = EPD_PICT_CAR1_INDEX + carIndex;
;;;2338               carIndex++;
;;;2339           }
;;;2340           
;;;2341           if(meterPosition == (i+1))
;;;2342           {
;;;2343               
;;;2344               targetWidth = BANNER_METER_WIDTH_POSITION;
;;;2345           }
;;;2346           else
;;;2347           {
;;;2348               
;;;2349               targetWidth = BANNER_CARD_WIDTH_POSITION;
;;;2350           }
;;;2351           #if(SHOW_POSITION_DEBUG)
;;;2352           sysprintf("BannerPositionInfo[%d]: [%d: (%03d, %03d)]\r\n", i, mBannerPositionInfo.info[i].bmpId, mBannerPositionInfo.info[i].xPos, mBannerPositionInfo.info[i].yPos);
;;;2353           #endif        
;;;2354       }
;;;2355       
;;;2356       if(calculateContainPositionInfo(carEnableNumber))
;;;2357       {
;;;2358           if(calculateContainNumberPositionInfo(carEnableNumber))
;;;2359           {
;;;2360               if(calculateDepositTimePositionInfo(carEnableNumber))
;;;2361               {
;;;2362                   //if(calculateAllItemInfo())
;;;2363                   {
;;;2364                       return calculateBannerLinePositionInfo();
;;;2365                   }
;;;2366               }
;;;2367           }
;;;2368       }  
;;;2369       return FALSE;
;;;2370   }
003b54  e8bd87f0          POP      {r4-r10,pc}
                  |L1.15192|
003b58  e1560005          CMP      r6,r5                 ;2307
003b5c  da000005          BLE      |L1.15224|
003b60  e1a02005          MOV      r2,r5                 ;2309
003b64  e1a01006          MOV      r1,r6                 ;2309
003b68  e28f0d09          ADR      r0,|L1.15792|
003b6c  ebfffffe          BL       sysprintf
003b70  e3a00000          MOV      r0,#0                 ;2310
003b74  eafffff6          B        |L1.15188|
                  |L1.15224|
003b78  e59f126c          LDR      r1,|L1.15852|
003b7c  e2850001          ADD      r0,r5,#1              ;2312
003b80  ebfffffe          BL       __aeabi_uwrite4
003b84  e3a04000          MOV      r4,#0                 ;2313
003b88  ea000045          B        |L1.15524|
                  |L1.15244|
003b8c  e3540000          CMP      r4,#0                 ;2316
003b90  1a00000c          BNE      |L1.15304|
003b94  e0840084          ADD      r0,r4,r4,LSL #1       ;2318
003b98  e59f2250          LDR      r2,|L1.15856|
003b9c  e0820100          ADD      r0,r2,r0,LSL #2       ;2318
003ba0  e2801004          ADD      r1,r0,#4              ;2318
003ba4  e3a00fa7          MOV      r0,#0x29c             ;2318
003ba8  ebfffffe          BL       __aeabi_uwrite4
003bac  e0840084          ADD      r0,r4,r4,LSL #1       ;2319
003bb0  e59f2238          LDR      r2,|L1.15856|
003bb4  e0820100          ADD      r0,r2,r0,LSL #2       ;2319
003bb8  e2801008          ADD      r1,r0,#8              ;2319
003bbc  e59f0230          LDR      r0,|L1.15860|
003bc0  ebfffffe          BL       __aeabi_uwrite4
003bc4  ea000012          B        |L1.15380|
                  |L1.15304|
003bc8  e2441001          SUB      r1,r4,#1              ;2323
003bcc  e0811081          ADD      r1,r1,r1,LSL #1       ;2323
003bd0  e59f2218          LDR      r2,|L1.15856|
003bd4  e0821101          ADD      r1,r2,r1,LSL #2       ;2323
003bd8  e2810004          ADD      r0,r1,#4              ;2323
003bdc  ebfffffe          BL       __aeabi_uread4
003be0  e0809008          ADD      r9,r0,r8              ;2323
003be4  e0840084          ADD      r0,r4,r4,LSL #1       ;2323
003be8  e59f2200          LDR      r2,|L1.15856|
003bec  e0820100          ADD      r0,r2,r0,LSL #2       ;2323
003bf0  e2801004          ADD      r1,r0,#4              ;2323
003bf4  e1a00009          MOV      r0,r9                 ;2323
003bf8  ebfffffe          BL       __aeabi_uwrite4
003bfc  e0840084          ADD      r0,r4,r4,LSL #1       ;2324
003c00  e59f21e8          LDR      r2,|L1.15856|
003c04  e0820100          ADD      r0,r2,r0,LSL #2       ;2324
003c08  e2801008          ADD      r1,r0,#8              ;2324
003c0c  e59f01e0          LDR      r0,|L1.15860|
003c10  ebfffffe          BL       __aeabi_uwrite4
                  |L1.15380|
003c14  e1560004          CMP      r6,r4                 ;2327
003c18  1a000013          BNE      |L1.15468|
003c1c  e0840084          ADD      r0,r4,r4,LSL #1       ;2329
003c20  e59f21c8          LDR      r2,|L1.15856|
003c24  e0821100          ADD      r1,r2,r0,LSL #2       ;2329
003c28  e3a00084          MOV      r0,#0x84              ;2329
003c2c  ebfffffe          BL       __aeabi_uwrite4
003c30  e3540000          CMP      r4,#0                 ;2330
003c34  1a000013          BNE      |L1.15496|
003c38  e0841084          ADD      r1,r4,r4,LSL #1       ;2332
003c3c  e59f21ac          LDR      r2,|L1.15856|
003c40  e0821101          ADD      r1,r2,r1,LSL #2       ;2332
003c44  e2810004          ADD      r0,r1,#4              ;2332
003c48  ebfffffe          BL       __aeabi_uread4
003c4c  e2809032          ADD      r9,r0,#0x32           ;2332
003c50  e0840084          ADD      r0,r4,r4,LSL #1       ;2332
003c54  e59f2194          LDR      r2,|L1.15856|
003c58  e0820100          ADD      r0,r2,r0,LSL #2       ;2332
003c5c  e2801004          ADD      r1,r0,#4              ;2332
003c60  e1a00009          MOV      r0,r9                 ;2332
003c64  ebfffffe          BL       __aeabi_uwrite4
003c68  ea000006          B        |L1.15496|
                  |L1.15468|
003c6c  e0842084          ADD      r2,r4,r4,LSL #1       ;2337
003c70  e59f3178          LDR      r3,|L1.15856|
003c74  e0831102          ADD      r1,r3,r2,LSL #2       ;2337
003c78  e2870078          ADD      r0,r7,#0x78           ;2337
003c7c  ebfffffe          BL       __aeabi_uwrite4
003c80  e2870001          ADD      r0,r7,#1              ;2338
003c84  e20070ff          AND      r7,r0,#0xff           ;2338
                  |L1.15496|
003c88  e2840001          ADD      r0,r4,#1              ;2341
003c8c  e1560000          CMP      r6,r0                 ;2341
003c90  1a000001          BNE      |L1.15516|
003c94  e3e08021          MVN      r8,#0x21              ;2344
003c98  ea000000          B        |L1.15520|
                  |L1.15516|
003c9c  e3e0806d          MVN      r8,#0x6d              ;2349
                  |L1.15520|
003ca0  e2844001          ADD      r4,r4,#1              ;2313
                  |L1.15524|
003ca4  e59f0140          LDR      r0,|L1.15852|
003ca8  ebfffffe          BL       __aeabi_uread4
003cac  e1500004          CMP      r0,r4                 ;2313
003cb0  8affffb5          BHI      |L1.15244|
003cb4  e1a00005          MOV      r0,r5                 ;2356
003cb8  ebfffffe          BL       calculateContainPositionInfo
003cbc  e3500000          CMP      r0,#0                 ;2356
003cc0  0a000009          BEQ      |L1.15596|
003cc4  e1a00005          MOV      r0,r5                 ;2358
003cc8  ebfffffe          BL       calculateContainNumberPositionInfo
003ccc  e3500000          CMP      r0,#0                 ;2358
003cd0  0a000005          BEQ      |L1.15596|
003cd4  e1a00005          MOV      r0,r5                 ;2360
003cd8  ebfffffe          BL       calculateDepositTimePositionInfo
003cdc  e3500000          CMP      r0,#0                 ;2360
003ce0  0a000001          BEQ      |L1.15596|
003ce4  ebfffffe          BL       calculateBannerLinePositionInfo
003ce8  eaffff99          B        |L1.15188|
                  |L1.15596|
003cec  e3a00000          MOV      r0,#0                 ;2369
003cf0  eaffff97          B        |L1.15188|
;;;2371   
                          ENDP

                  EPDDrawBanner PROC
;;;2392   
;;;2393   void EPDDrawBanner(BOOL reFreshFlag)
003cf4  e92d40f8          PUSH     {r3-r7,lr}
;;;2394   {
003cf8  e1a04000          MOV      r4,r0
;;;2395       unsigned int* buff = (unsigned int*)&mBannerPositionInfo;
003cfc  e59f50e8          LDR      r5,|L1.15852|
;;;2396       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
003d00  e3a03000          MOV      r3,#0
003d04  e3e02000          MVN      r2,#0
003d08  e1a01003          MOV      r1,r3
003d0c  e51f08c0          LDR      r0,|L1.13396|
003d10  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003d14  ebfffffe          BL       xQueueGenericReceive
;;;2397       LoadImages(buff, mBannerPositionInfo.carEnableNum);
003d18  e2850000          ADD      r0,r5,#0
003d1c  ebfffffe          BL       __aeabi_uread4
003d20  e1a06000          MOV      r6,r0
003d24  e1a01006          MOV      r1,r6
003d28  e1a00005          MOV      r0,r5
003d2c  ebfffffe          BL       LoadImages
;;;2398       
;;;2399       if(reFreshFlag)
003d30  e3540000          CMP      r4,#0
003d34  0a000006          BEQ      |L1.15700|
;;;2400           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
003d38  e3a00001          MOV      r0,#1
003d3c  e58d0000          STR      r0,[sp,#0]
003d40  e51f38ec          LDR      r3,|L1.13404|
003d44  e3a02b01          MOV      r2,#0x400
003d48  e3a01000          MOV      r1,#0
003d4c  e1a00001          MOV      r0,r1
003d50  ebfffffe          BL       DisplayArea
                  |L1.15700|
;;;2401       
;;;2402       xSemaphoreGive(xSemaphore);  
003d54  e3a03000          MOV      r3,#0
003d58  e1a02003          MOV      r2,r3
003d5c  e1a01003          MOV      r1,r3
003d60  e51f0914          LDR      r0,|L1.13396|
003d64  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003d68  ebfffffe          BL       xQueueGenericSend
;;;2403   }
003d6c  e8bd80f8          POP      {r3-r7,pc}
                  |L1.15728|
                          DCD      ||.constdata||+0x44
                  |L1.15732|
003d74  63616c63          DCB      "calculateBannerPositionInfo fail: carEnableNumber = %d\r"
003d78  756c6174
003d7c  6542616e
003d80  6e657250
003d84  6f736974
003d88  696f6e49
003d8c  6e666f20
003d90  6661696c
003d94  3a206361
003d98  72456e61
003d9c  626c654e
003da0  756d6265
003da4  72203d20
003da8  25640d  
003dab  0a00              DCB      "\n",0
003dad  00                DCB      0
003dae  00                DCB      0
003daf  00                DCB      0
                  |L1.15792|
003db0  63616c63          DCB      "calculateBannerPositionInfo fail: meterPosition = %d(%d"
003db4  756c6174
003db8  6542616e
003dbc  6e657250
003dc0  6f736974
003dc4  696f6e49
003dc8  6e666f20
003dcc  6661696c
003dd0  3a206d65
003dd4  74657250
003dd8  6f736974
003ddc  696f6e20
003de0  3d202564
003de4  282564  
003de7  290d0a00          DCB      ")\r\n",0
003deb  00                DCB      0
                  |L1.15852|
                          DCD      mBannerPositionInfo
                  |L1.15856|
                          DCD      mBannerPositionInfo+0x4
                  |L1.15860|
                          DCD      0x000001fd
                          ENDP

                  EPDDrawBannerLine PROC
;;;2404   
;;;2405   void EPDDrawBannerLine(BOOL reFreshFlag)
003df8  e92d40f8          PUSH     {r3-r7,lr}
;;;2406   {
003dfc  e1a04000          MOV      r4,r0
;;;2407       unsigned int* buff = (unsigned int*)&mBannerLinePositionInfo;
003e00  e59f5f20          LDR      r5,|L1.19752|
;;;2408       #if(SHOW_TIME_DEBUG)
;;;2409       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2410       #endif
;;;2411       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
003e04  e3a03000          MOV      r3,#0
003e08  e3e02000          MVN      r2,#0
003e0c  e1a01003          MOV      r1,r3
003e10  e51f09c4          LDR      r0,|L1.13396|
003e14  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003e18  ebfffffe          BL       xQueueGenericReceive
;;;2412       LoadImages(buff, mBannerLinePositionInfo.itemNum);
003e1c  e2850000          ADD      r0,r5,#0
003e20  ebfffffe          BL       __aeabi_uread4
003e24  e1a06000          MOV      r6,r0
003e28  e1a01006          MOV      r1,r6
003e2c  e1a00005          MOV      r0,r5
003e30  ebfffffe          BL       LoadImages
;;;2413       
;;;2414       if(reFreshFlag)
003e34  e3540000          CMP      r4,#0
003e38  0a000006          BEQ      |L1.15960|
;;;2415           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
003e3c  e3a00001          MOV      r0,#1
003e40  e58d0000          STR      r0,[sp,#0]
003e44  e51f39f0          LDR      r3,|L1.13404|
003e48  e3a02b01          MOV      r2,#0x400
003e4c  e3a01000          MOV      r1,#0
003e50  e1a00001          MOV      r0,r1
003e54  ebfffffe          BL       DisplayArea
                  |L1.15960|
;;;2416       
;;;2417       xSemaphoreGive(xSemaphore);  
003e58  e3a03000          MOV      r3,#0
003e5c  e1a02003          MOV      r2,r3
003e60  e1a01003          MOV      r1,r3
003e64  e51f0a18          LDR      r0,|L1.13396|
003e68  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
003e6c  ebfffffe          BL       xQueueGenericSend
;;;2418       #if(SHOW_TIME_DEBUG)
;;;2419       sysprintf(" [INFO EPD] <EPDDrawBannerLine>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2420       #endif
;;;2421   }
003e70  e8bd80f8          POP      {r3-r7,pc}
;;;2422   
                          ENDP

                  getIDFromTime PROC
;;;3486   #define SEL_DEPOSIT_TIME_TOP_FONT_COLON_INDEX       EPD_PICT_COLON_BIG_INDEX
;;;3487   BOOL getIDFromTime(time_t time, timeIdInfo* info)
003e74  e92d41f0          PUSH     {r4-r8,lr}
;;;3488   {
003e78  e1a07000          MOV      r7,r0
003e7c  e1a04001          MOV      r4,r1
;;;3489       uint8_t hour, mins;
;;;3490       if(time == 0)
003e80  e3570000          CMP      r7,#0
003e84  1a000002          BNE      |L1.16020|
;;;3491       {
;;;3492           //return FALSE;
;;;3493           hour = 0;
003e88  e3a05000          MOV      r5,#0
;;;3494           mins = 0;
003e8c  e3a06000          MOV      r6,#0
003e90  ea000010          B        |L1.16088|
                  |L1.16020|
;;;3495       }
;;;3496       else
;;;3497       {
;;;3498           hour = (time/60)/60;
003e94  e3a0103c          MOV      r1,#0x3c
003e98  e1a00007          MOV      r0,r7
003e9c  ebfffffe          BL       __aeabi_uidivmod
003ea0  e1a08000          MOV      r8,r0
003ea4  e3a0103c          MOV      r1,#0x3c
003ea8  ebfffffe          BL       __aeabi_uidivmod
003eac  e20050ff          AND      r5,r0,#0xff
;;;3499           if(hour > 99)
003eb0  e3550063          CMP      r5,#0x63
003eb4  da000000          BLE      |L1.16060|
;;;3500           {
;;;3501               hour = 99;
003eb8  e3a05063          MOV      r5,#0x63
                  |L1.16060|
;;;3502           }
;;;3503           mins = (time/60)%60;
003ebc  e3a0103c          MOV      r1,#0x3c
003ec0  e1a00007          MOV      r0,r7
003ec4  ebfffffe          BL       __aeabi_uidivmod
003ec8  e1a08000          MOV      r8,r0
003ecc  e3a0103c          MOV      r1,#0x3c
003ed0  ebfffffe          BL       __aeabi_uidivmod
003ed4  e1a06001          MOV      r6,r1
                  |L1.16088|
;;;3504       }
;;;3505               
;;;3506       info->id[0] = hour/10 + SEL_DEPOSIT_TIME_TOP_FONT_NUM_INDEX;
003ed8  e3a0100a          MOV      r1,#0xa
003edc  e1a00005          MOV      r0,r5
003ee0  ebfffffe          BL       __aeabi_idivmod
003ee4  e280002a          ADD      r0,r0,#0x2a
003ee8  e5c40000          STRB     r0,[r4,#0]
;;;3507       info->id[1] = hour%10 + SEL_DEPOSIT_TIME_TOP_FONT_NUM_INDEX;
003eec  e3a0100a          MOV      r1,#0xa
003ef0  e1a00005          MOV      r0,r5
003ef4  ebfffffe          BL       __aeabi_idivmod
003ef8  e281002a          ADD      r0,r1,#0x2a
003efc  e5c40001          STRB     r0,[r4,#1]
;;;3508       info->id[2] = SEL_DEPOSIT_TIME_TOP_FONT_COLON_INDEX;
003f00  e3a00034          MOV      r0,#0x34
003f04  e5c40002          STRB     r0,[r4,#2]
;;;3509       info->id[3] = mins/10 + SEL_DEPOSIT_TIME_TOP_FONT_NUM_INDEX;
003f08  e3a0100a          MOV      r1,#0xa
003f0c  e1a00006          MOV      r0,r6
003f10  ebfffffe          BL       __aeabi_idivmod
003f14  e280002a          ADD      r0,r0,#0x2a
003f18  e5c40003          STRB     r0,[r4,#3]
;;;3510       info->id[4] = mins%10 + SEL_DEPOSIT_TIME_TOP_FONT_NUM_INDEX;
003f1c  e3a0100a          MOV      r1,#0xa
003f20  e1a00006          MOV      r0,r6
003f24  ebfffffe          BL       __aeabi_idivmod
003f28  e281002a          ADD      r0,r1,#0x2a
003f2c  e5c40004          STRB     r0,[r4,#4]
;;;3511       return TRUE;
003f30  e3a00001          MOV      r0,#1
;;;3512   }  
003f34  e8bd81f0          POP      {r4-r8,pc}
;;;3513   #define TIME_START_X_POSITION     530
                          ENDP

                  SetDepositTimeBmpIdInfo PROC
;;;2424   
;;;2425   void SetDepositTimeBmpIdInfo(uint8_t index, time_t time)
003f38  e92d407c          PUSH     {r2-r6,lr}
;;;2426   {
003f3c  e1a05000          MOV      r5,r0
003f40  e1a06001          MOV      r6,r1
;;;2427       timeIdInfo idInfo;
;;;2428       uint8_t targetIndex = DEPOSIT_TIME_DIGITAL_NUM*index;
003f44  e1a00d05          LSL      r0,r5,#26
003f48  e1a04c20          LSR      r4,r0,#24
;;;2429       if(getIDFromTime(time, &idInfo))
003f4c  e1a0100d          MOV      r1,sp
003f50  e1a00006          MOV      r0,r6
003f54  ebfffffe          BL       getIDFromTime
003f58  e3500000          CMP      r0,#0
003f5c  0a000016          BEQ      |L1.16316|
;;;2430       {    
;;;2431           mDepositTimeAllPositionInfo.info[targetIndex].bmpId = idInfo.id[0];
003f60  e0842084          ADD      r2,r4,r4,LSL #1
003f64  e59f3dc0          LDR      r3,|L1.19756|
003f68  e0831102          ADD      r1,r3,r2,LSL #2
003f6c  e5dd0000          LDRB     r0,[sp,#0]
003f70  ebfffffe          BL       __aeabi_uwrite4
;;;2432           mDepositTimeAllPositionInfo.info[targetIndex+1].bmpId = idInfo.id[1];
003f74  e2842001          ADD      r2,r4,#1
003f78  e0822082          ADD      r2,r2,r2,LSL #1
003f7c  e59f3da8          LDR      r3,|L1.19756|
003f80  e0831102          ADD      r1,r3,r2,LSL #2
003f84  e5dd0001          LDRB     r0,[sp,#1]
003f88  ebfffffe          BL       __aeabi_uwrite4
;;;2433           mDepositTimeAllPositionInfo.info[targetIndex+2].bmpId = idInfo.id[3];
003f8c  e2842002          ADD      r2,r4,#2
003f90  e0822082          ADD      r2,r2,r2,LSL #1
003f94  e59f3d90          LDR      r3,|L1.19756|
003f98  e0831102          ADD      r1,r3,r2,LSL #2
003f9c  e5dd0003          LDRB     r0,[sp,#3]
003fa0  ebfffffe          BL       __aeabi_uwrite4
;;;2434           mDepositTimeAllPositionInfo.info[targetIndex+3].bmpId = idInfo.id[4];                    
003fa4  e2842003          ADD      r2,r4,#3
003fa8  e0822082          ADD      r2,r2,r2,LSL #1
003fac  e59f3d78          LDR      r3,|L1.19756|
003fb0  e0831102          ADD      r1,r3,r2,LSL #2
003fb4  e5dd0004          LDRB     r0,[sp,#4]
003fb8  ebfffffe          BL       __aeabi_uwrite4
                  |L1.16316|
;;;2435       }
;;;2436   }
003fbc  e8bd807c          POP      {r2-r6,pc}
;;;2437   
                          ENDP

                  EPDDrawContainByID PROC
;;;2504   
;;;2505   void EPDDrawContainByID(BOOL reFreshFlag, uint8_t id)
003fc0  e92d4070          PUSH     {r4-r6,lr}
;;;2506   {
003fc4  e24dd018          SUB      sp,sp,#0x18
003fc8  e1a04000          MOV      r4,r0
003fcc  e1a05001          MOV      r5,r1
;;;2507       positionSingleInfo mPositionSingleInfoTmp;
;;;2508       
;;;2509       unsigned int* buff = (unsigned int*)&mPositionSingleInfoTmp;   
003fd0  e28d6008          ADD      r6,sp,#8
;;;2510       #if(SHOW_TIME_DEBUG)
;;;2511       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2512       #endif
;;;2513       mPositionSingleInfoTmp.itemNum = 1;
003fd4  e3a00001          MOV      r0,#1
003fd8  e58d0008          STR      r0,[sp,#8]
;;;2514       
;;;2515       mPositionSingleInfoTmp.info.bmpId = id;
003fdc  e58d500c          STR      r5,[sp,#0xc]
;;;2516       mPositionSingleInfoTmp.info.xPos = 45;
003fe0  e3a0002d          MOV      r0,#0x2d
003fe4  e58d0010          STR      r0,[sp,#0x10]
;;;2517       mPositionSingleInfoTmp.info.yPos = 74;
003fe8  e3a0004a          MOV      r0,#0x4a
003fec  e58d0014          STR      r0,[sp,#0x14]
;;;2518       
;;;2519       xSemaphoreTake(xSemaphore, portMAX_DELAY);
003ff0  e3a03000          MOV      r3,#0
003ff4  e3e02000          MVN      r2,#0
003ff8  e1a01003          MOV      r1,r3
003ffc  e51f0bb0          LDR      r0,|L1.13396|
004000  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
004004  ebfffffe          BL       xQueueGenericReceive
;;;2520       LoadImages(buff, mPositionSingleInfoTmp.itemNum);
004008  e1a00006          MOV      r0,r6
00400c  e59d1008          LDR      r1,[sp,#8]
004010  ebfffffe          BL       LoadImages
;;;2521       if(reFreshFlag)
004014  e3540000          CMP      r4,#0
004018  0a000006          BEQ      |L1.16440|
;;;2522           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
00401c  e3a00001          MOV      r0,#1
004020  e58d0000          STR      r0,[sp,#0]
004024  e51f3bd0          LDR      r3,|L1.13404|
004028  e3a02b01          MOV      r2,#0x400
00402c  e3a01000          MOV      r1,#0
004030  e1a00001          MOV      r0,r1
004034  ebfffffe          BL       DisplayArea
                  |L1.16440|
;;;2523       xSemaphoreGive(xSemaphore);
004038  e3a03000          MOV      r3,#0
00403c  e1a02003          MOV      r2,r3
004040  e1a01003          MOV      r1,r3
004044  e51f0bf8          LDR      r0,|L1.13396|
004048  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00404c  ebfffffe          BL       xQueueGenericSend
;;;2524       #if(SHOW_TIME_DEBUG)
;;;2525       sysprintf(" [INFO EPD] <EPDDrawContainByID>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2526       #endif    
;;;2527   }
004050  e28dd018          ADD      sp,sp,#0x18
004054  e8bd8070          POP      {r4-r6,pc}
;;;2528   
                          ENDP

                  EPDDrawContainBG PROC
;;;2475   */
;;;2476   void EPDDrawContainBG(BOOL reFreshFlag)
004058  e92d4070          PUSH     {r4-r6,lr}
;;;2477   {
00405c  e1a05000          MOV      r5,r0
;;;2478       uint8_t id;
;;;2479       switch(mContainPositionInfo.boardEnableNum)
004060  e59f0cc8          LDR      r0,|L1.19760|
004064  ebfffffe          BL       __aeabi_uread4
004068  e3500007          CMP      r0,#7
00406c  308ff100          ADDCC    pc,pc,r0,LSL #2
004070  ea000013          B        |L1.16580|
004074  ea000012          B        |L1.16580|
004078  ea000004          B        |L1.16528|
00407c  ea000005          B        |L1.16536|
004080  ea000007          B        |L1.16548|
004084  ea000008          B        |L1.16556|
004088  ea000009          B        |L1.16564|
00408c  ea00000a          B        |L1.16572|
                  |L1.16528|
;;;2480       {
;;;2481           case 1:
004090  e1a00000          MOV      r0,r0
;;;2482   //            id = EPD_PICT_CONTAIN_BG_2_1_INDEX;
;;;2483               break;
004094  ea00000c          B        |L1.16588|
                  |L1.16536|
;;;2484           case 2:
004098  e1a00000          MOV      r0,r0
;;;2485               id = EPD_PICT_CONTAIN_BG_2_INDEX;
00409c  e3a040a3          MOV      r4,#0xa3
;;;2486               break;
0040a0  ea000009          B        |L1.16588|
                  |L1.16548|
;;;2487           case 3:
0040a4  e1a00000          MOV      r0,r0
;;;2488   //            id = EPD_PICT_CONTAIN_BG_4_3_INDEX;
;;;2489               break;
0040a8  ea000007          B        |L1.16588|
                  |L1.16556|
;;;2490           case 4:
0040ac  e1a00000          MOV      r0,r0
;;;2491   //            id = EPD_PICT_CONTAIN_BG_4_INDEX;
;;;2492               break;
0040b0  ea000005          B        |L1.16588|
                  |L1.16564|
;;;2493           case 5:
0040b4  e1a00000          MOV      r0,r0
;;;2494   //            id = EPD_PICT_CONTAIN_BG_6_5_INDEX;
;;;2495               break;
0040b8  ea000003          B        |L1.16588|
                  |L1.16572|
;;;2496           case 6:
0040bc  e1a00000          MOV      r0,r0
;;;2497   //            id = EPD_PICT_CONTAIN_BG_6_INDEX;
;;;2498               break;
0040c0  ea000001          B        |L1.16588|
                  |L1.16580|
;;;2499           default:
0040c4  e1a00000          MOV      r0,r0
                  |L1.16584|
;;;2500               return;
;;;2501       }
;;;2502       EPDDrawContainByID(reFreshFlag, id);   
;;;2503   }
0040c8  e8bd8070          POP      {r4-r6,pc}
                  |L1.16588|
0040cc  e1a00000          MOV      r0,r0                 ;2483
0040d0  e1a01004          MOV      r1,r4                 ;2502
0040d4  e1a00005          MOV      r0,r5                 ;2502
0040d8  ebfffffe          BL       EPDDrawContainByID
0040dc  e1a00000          MOV      r0,r0
0040e0  eafffff8          B        |L1.16584|
;;;2504   
                          ENDP

                  EPDDrawContainByIDPos PROC
;;;2528   
;;;2529   void EPDDrawContainByIDPos(BOOL reFreshFlag, uint8_t id,unsigned int x_Pos,unsigned int y_Pos)
0040e4  e92d41f0          PUSH     {r4-r8,lr}
;;;2530   {
0040e8  e24dd018          SUB      sp,sp,#0x18
0040ec  e1a04000          MOV      r4,r0
0040f0  e1a05001          MOV      r5,r1
0040f4  e1a06002          MOV      r6,r2
0040f8  e1a07003          MOV      r7,r3
;;;2531       if(!initFlag){
0040fc  e51f0cbc          LDR      r0,|L1.13384|
004100  e5d00000          LDRB     r0,[r0,#0]  ; initFlag
004104  e3500000          CMP      r0,#0
004108  1a000001          BNE      |L1.16660|
                  |L1.16652|
;;;2532           return;
;;;2533       }
;;;2534       positionSingleInfo mPositionSingleInfoTmp;
;;;2535       unsigned int* buff = (unsigned int*)&mPositionSingleInfoTmp;   
;;;2536       #if(SHOW_TIME_DEBUG)
;;;2537       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2538       #endif
;;;2539       mPositionSingleInfoTmp.itemNum = 1;
;;;2540       
;;;2541       mPositionSingleInfoTmp.info.bmpId = id;
;;;2542       mPositionSingleInfoTmp.info.xPos = x_Pos;
;;;2543       mPositionSingleInfoTmp.info.yPos = y_Pos;
;;;2544       
;;;2545       xSemaphoreTake(xSemaphore, portMAX_DELAY);
;;;2546       LoadImages(buff, mPositionSingleInfoTmp.itemNum);
;;;2547       if(reFreshFlag)
;;;2548       {
;;;2549           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
;;;2550       }
;;;2551       xSemaphoreGive(xSemaphore);
;;;2552       #if(SHOW_TIME_DEBUG)
;;;2553       sysprintf(" [INFO EPD] <EPDDrawContainByID>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2554       #endif    
;;;2555   }
00410c  e28dd018          ADD      sp,sp,#0x18
004110  e8bd81f0          POP      {r4-r8,pc}
                  |L1.16660|
004114  e28d8008          ADD      r8,sp,#8              ;2535
004118  e3a00001          MOV      r0,#1                 ;2539
00411c  e58d0008          STR      r0,[sp,#8]            ;2539
004120  e58d500c          STR      r5,[sp,#0xc]          ;2541
004124  e58d6010          STR      r6,[sp,#0x10]         ;2542
004128  e58d7014          STR      r7,[sp,#0x14]         ;2543
00412c  e3a03000          MOV      r3,#0                 ;2545
004130  e3e02000          MVN      r2,#0                 ;2545
004134  e1a01003          MOV      r1,r3                 ;2545
004138  e51f0cec          LDR      r0,|L1.13396|
00413c  e5900000          LDR      r0,[r0,#0]            ;2545  ; xSemaphore
004140  ebfffffe          BL       xQueueGenericReceive
004144  e1a00008          MOV      r0,r8                 ;2546
004148  e59d1008          LDR      r1,[sp,#8]            ;2546
00414c  ebfffffe          BL       LoadImages
004150  e3540000          CMP      r4,#0                 ;2547
004154  0a000006          BEQ      |L1.16756|
004158  e3a00001          MOV      r0,#1                 ;2549
00415c  e58d0000          STR      r0,[sp,#0]            ;2549
004160  e51f3d0c          LDR      r3,|L1.13404|
004164  e3a02b01          MOV      r2,#0x400             ;2549
004168  e3a01000          MOV      r1,#0                 ;2549
00416c  e1a00001          MOV      r0,r1                 ;2549
004170  ebfffffe          BL       DisplayArea
                  |L1.16756|
004174  e3a03000          MOV      r3,#0                 ;2551
004178  e1a02003          MOV      r2,r3                 ;2551
00417c  e1a01003          MOV      r1,r3                 ;2551
004180  e51f0d34          LDR      r0,|L1.13396|
004184  e5900000          LDR      r0,[r0,#0]            ;2551  ; xSemaphore
004188  ebfffffe          BL       xQueueGenericSend
00418c  e1a00000          MOV      r0,r0
004190  eaffffdd          B        |L1.16652|
;;;2556   void EPDDrawMulti(BOOL reFreshFlag, uint8_t id,unsigned int x_Pos,unsigned int y_Pos)
                          ENDP

                  EPDDrawMulti PROC
004194  e92d41f0          PUSH     {r4-r8,lr}
;;;2557   {
004198  e24ddf62          SUB      sp,sp,#0x188
00419c  e1a04000          MOV      r4,r0
0041a0  e1a05001          MOV      r5,r1
0041a4  e1a06002          MOV      r6,r2
0041a8  e1a07003          MOV      r7,r3
;;;2558       positionMultiInfo mPositionMultiInfoTmp;
;;;2559       static int count_i=0;
;;;2560       unsigned int* buff = (unsigned int*)&mPositionMultiInfoTmp;    
0041ac  e28d8004          ADD      r8,sp,#4
;;;2561       #if(SHOW_TIME_DEBUG)
;;;2562       TickType_t tickLocalStart = xTaskGetTickCount();
;;;2563       #endif
;;;2564       mPositionMultiInfoTmp.itemNum = count_i+1;
0041b0  e59f0b7c          LDR      r0,|L1.19764|
0041b4  e5900000          LDR      r0,[r0,#0]  ; count_i
0041b8  e2800001          ADD      r0,r0,#1
0041bc  e58d0004          STR      r0,[sp,#4]
;;;2565       
;;;2566       mPositionMultiInfoTmp.info[count_i].bmpId = id;
0041c0  e59f0b6c          LDR      r0,|L1.19764|
0041c4  e5900000          LDR      r0,[r0,#0]  ; count_i
0041c8  e0800080          ADD      r0,r0,r0,LSL #1
0041cc  e28d1008          ADD      r1,sp,#8
0041d0  e7815100          STR      r5,[r1,r0,LSL #2]
;;;2567       mPositionMultiInfoTmp.info[count_i].xPos = x_Pos;
0041d4  e59f0b58          LDR      r0,|L1.19764|
0041d8  e5900000          LDR      r0,[r0,#0]  ; count_i
0041dc  e0800080          ADD      r0,r0,r0,LSL #1
0041e0  e28d1008          ADD      r1,sp,#8
0041e4  e0810100          ADD      r0,r1,r0,LSL #2
0041e8  e5806004          STR      r6,[r0,#4]
;;;2568       mPositionMultiInfoTmp.info[count_i].yPos = y_Pos;
0041ec  e59f0b40          LDR      r0,|L1.19764|
0041f0  e5900000          LDR      r0,[r0,#0]  ; count_i
0041f4  e0800080          ADD      r0,r0,r0,LSL #1
0041f8  e28d1008          ADD      r1,sp,#8
0041fc  e0810100          ADD      r0,r1,r0,LSL #2
004200  e5807008          STR      r7,[r0,#8]
;;;2569       count_i++;
004204  e59f0b28          LDR      r0,|L1.19764|
004208  e5900000          LDR      r0,[r0,#0]  ; count_i
00420c  e2800001          ADD      r0,r0,#1
004210  e59f1b1c          LDR      r1,|L1.19764|
004214  e5810000          STR      r0,[r1,#0]  ; count_i
;;;2570       
;;;2571       xSemaphoreTake(xSemaphore, portMAX_DELAY);
004218  e3a03000          MOV      r3,#0
00421c  e3e02000          MVN      r2,#0
004220  e1a01003          MOV      r1,r3
004224  e51f0dd8          LDR      r0,|L1.13396|
004228  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00422c  ebfffffe          BL       xQueueGenericReceive
;;;2572       if(reFreshFlag)
004230  e3540000          CMP      r4,#0
004234  0a00000d          BEQ      |L1.17008|
;;;2573       {
;;;2574           LoadImages(buff, mPositionMultiInfoTmp.itemNum);
004238  e1a00008          MOV      r0,r8
00423c  e59d1004          LDR      r1,[sp,#4]
004240  ebfffffe          BL       LoadImages
;;;2575           count_i=0;
004244  e3a00000          MOV      r0,#0
004248  e59f1ae4          LDR      r1,|L1.19764|
00424c  e5810000          STR      r0,[r1,#0]  ; count_i
;;;2576           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
004250  e3a00001          MOV      r0,#1
004254  e58d0000          STR      r0,[sp,#0]
004258  e51f3e04          LDR      r3,|L1.13404|
00425c  e3a02b01          MOV      r2,#0x400
004260  e3a01000          MOV      r1,#0
004264  e1a00001          MOV      r0,r1
004268  ebfffffe          BL       DisplayArea
00426c  ea000009          B        |L1.17048|
                  |L1.17008|
;;;2577       }
;;;2578       else if(count_i==(MAX_LOAD_IMG-1))
004270  e59f0abc          LDR      r0,|L1.19764|
004274  e5900000          LDR      r0,[r0,#0]  ; count_i
004278  e350001f          CMP      r0,#0x1f
00427c  1a000005          BNE      |L1.17048|
;;;2579       {
;;;2580           LoadImages(buff, mPositionMultiInfoTmp.itemNum);
004280  e1a00008          MOV      r0,r8
004284  e59d1004          LDR      r1,[sp,#4]
004288  ebfffffe          BL       LoadImages
;;;2581           count_i=0;
00428c  e3a00000          MOV      r0,#0
004290  e59f1a9c          LDR      r1,|L1.19764|
004294  e5810000          STR      r0,[r1,#0]  ; count_i
                  |L1.17048|
;;;2582       }
;;;2583       
;;;2584       xSemaphoreGive(xSemaphore);
004298  e3a03000          MOV      r3,#0
00429c  e1a02003          MOV      r2,r3
0042a0  e1a01003          MOV      r1,r3
0042a4  e51f0e58          LDR      r0,|L1.13396|
0042a8  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0042ac  ebfffffe          BL       xQueueGenericSend
;;;2585       #if(SHOW_TIME_DEBUG)
;;;2586       sysprintf(" [INFO EPD] <EPDDrawS>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;2587       #endif
;;;2588   }
0042b0  e28ddf62          ADD      sp,sp,#0x188
0042b4  e8bd81f0          POP      {r4-r8,pc}
;;;2589   
                          ENDP

                  EPDDrawStringMax PROC
;;;2812   
;;;2813   void EPDDrawStringMax(BOOL refresh,char* string,unsigned int x_Pos,unsigned int y_Pos,BOOL load)
0042b8  e92d400f          PUSH     {r0-r3,lr}
;;;2814   {
0042bc  e24dd024          SUB      sp,sp,#0x24
;;;2815       xSemaphoreTake(xSemaphore, portMAX_DELAY);
0042c0  e3a03000          MOV      r3,#0
0042c4  e3e02000          MVN      r2,#0
0042c8  e1a01003          MOV      r1,r3
0042cc  e51f0e80          LDR      r0,|L1.13396|
0042d0  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0042d4  ebfffffe          BL       xQueueGenericReceive
;;;2816       
;;;2817       if(!initFlag)
0042d8  e51f0e98          LDR      r0,|L1.13384|
0042dc  e5d00000          LDRB     r0,[r0,#0]  ; initFlag
0042e0  e3500000          CMP      r0,#0
0042e4  1a000001          BNE      |L1.17136|
                  |L1.17128|
;;;2818       {
;;;2819           return;
;;;2820       }
;;;2821       static positionStringInfo mPositionMsgInfoTmp={0};
;;;2822       unsigned int* buff = (unsigned int*)&mPositionMsgInfoTmp;
;;;2823       static unsigned int buffIndex=0;
;;;2824       unsigned int nowrow = 0,nowcursor = 0;
;;;2825       unsigned int strLen = strlen(string);
;;;2826       #if(SHOW_TIME_DEBUG)
;;;2827       TickType_t tickLocalStart= xTaskGetTickCount();
;;;2828       #endif
;;;2829       
;;;2830       for(int i=0;i<strLen;i++)
;;;2831       {
;;;2832           //space//
;;;2833           if(*(string+i)==' ')
;;;2834           {
;;;2835               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_EMPTY;
;;;2836               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2837               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2838               nowcursor+=28;
;;;2839               buffIndex++;
;;;2840           }
;;;2841           //A to Z//
;;;2842           else if(*(string+i)>='A'&&*(string+i)<='Z')
;;;2843           {
;;;2844               mPositionMsgInfoTmp.info[buffIndex].bmpId=(*(string+i)-'A') + EPD_PICT_UPPER_A;
;;;2845               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2846               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2847               nowcursor+=32;
;;;2848               buffIndex++;
;;;2849           }
;;;2850           //a to z//
;;;2851           else if(*(string+i)>='a'&&*(string+i)<='z')
;;;2852           {
;;;2853               mPositionMsgInfoTmp.info[buffIndex].bmpId=(*(string+i)-'a') + EPD_PICT_LOWER_A;
;;;2854               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2855               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2856               nowcursor+=28;
;;;2857               buffIndex++;
;;;2858           }
;;;2859           //0 to 9//
;;;2860           else if(*(string+i)>='0'&&*(string+i)<='9')
;;;2861           {
;;;2862               mPositionMsgInfoTmp.info[buffIndex].bmpId=(*(string+i)-'0') + EPD_PICT_NUM_SMALL_2_INDEX;
;;;2863               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2864               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2865               nowcursor+=28;
;;;2866               buffIndex++;
;;;2867           }
;;;2868           //  :  //
;;;2869           else if(*(string+i)==':')
;;;2870           {
;;;2871               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_COLON_SMALL_2_INDEX;
;;;2872               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2873               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2874               nowcursor+=28;
;;;2875               buffIndex++;
;;;2876           }
;;;2877           //  -  //
;;;2878           else if(*(string+i)=='-')
;;;2879           {
;;;2880               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_LINE_SMALL_2_INDEX;
;;;2881               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2882               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + (nowrow*50);
;;;2883               nowcursor+=28;
;;;2884               buffIndex++;
;;;2885           }
;;;2886           else if(*(string+i)=='.')
;;;2887           {
;;;2888               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_POINT_SMALL_2_INDEX;
;;;2889               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2890               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2891               nowcursor+=28;
;;;2892               buffIndex++;
;;;2893           }
;;;2894           //  \  //
;;;2895           else if(*(string+i)=='\\')
;;;2896           {
;;;2897               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_SLASH_SMALL_2_INDEX;
;;;2898               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2899               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos+ (nowrow*50);
;;;2900               nowcursor+=28;
;;;2901               buffIndex++;
;;;2902           }
;;;2903           
;;;2904           //Left Key//
;;;2905           else if(*(string+i)==KEYPAD_ONE_CHAR)
;;;2906           {
;;;2907               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_ONE;
;;;2908               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2909               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2910               nowcursor+=28;
;;;2911               buffIndex++;
;;;2912           }
;;;2913           //Right Key//
;;;2914           else if(*(string+i)==KEYPAD_TWO_CHAR)
;;;2915           {
;;;2916               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_TWO;
;;;2917               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2918               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2919               nowcursor+=28;
;;;2920               buffIndex++;
;;;2921           }
;;;2922           //Plus Key//
;;;2923           else if(*(string+i)==KEYPAD_THREE_CHAR)
;;;2924           {
;;;2925               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_THREE;
;;;2926               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2927               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2928               nowcursor+=28;
;;;2929               buffIndex++;
;;;2930           }
;;;2931           //Minus Key//
;;;2932           else if(*(string+i)==KEYPAD_FOUR_CHAR)
;;;2933           {
;;;2934               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_FOUR;
;;;2935               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2936               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2937               nowcursor+=28;
;;;2938               buffIndex++;
;;;2939           }
;;;2940           //Confirm Key//
;;;2941           else if(*(string+i)==KEYPAD_FIVE_CHAR)
;;;2942           {
;;;2943   			//mPositionMsgInfoTmp.info[buffIndex].bmpId = EPD_PICT_KEY_EPD_PICT_KEY_CONFIRM;
;;;2944               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_FIVE;
;;;2945               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2946               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2947               nowcursor+=28;
;;;2948               buffIndex++;
;;;2949           }
;;;2950           //Card Key//
;;;2951           else if(*(string+i)==KEYPAD_SIX_CHAR)
;;;2952           {
;;;2953               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_KEY_SIX;
;;;2954               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2955               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2956               nowcursor+=28;
;;;2957               buffIndex++;
;;;2958           }
;;;2959           //  #   //
;;;2960           else if(*(string+i)=='#')
;;;2961           {
;;;2962               mPositionMsgInfoTmp.info[buffIndex].bmpId= EPD_PICT_0X23_24;
;;;2963               mPositionMsgInfoTmp.info[buffIndex].xPos = nowcursor+x_Pos;
;;;2964               mPositionMsgInfoTmp.info[buffIndex].yPos = y_Pos + 10 + (nowrow*50);
;;;2965               nowcursor+=28;
;;;2966               buffIndex++;
;;;2967           }
;;;2968           //ENTER//
;;;2969           else if(*(string+i)=='\n')
;;;2970           {
;;;2971               nowrow++;
;;;2972               nowcursor=0;
;;;2973           }
;;;2974           if(buffIndex==(MAX_LOAD_IMG-1))
;;;2975           {
;;;2976               mPositionMsgInfoTmp.itemNum = buffIndex;
;;;2977               //LoadImages(buff, mPositionMsgInfoTmp.itemNum);
;;;2978               EPDExitSleep();
;;;2979               WriteCmdCode(0x0099,2);
;;;2980               WriteData(buff[0],2);
;;;2981               { 
;;;2982                   if(LCDWaitForReadyEx() == FALSE) 
;;;2983                       return;
;;;2984                   //while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0);
;;;2985                   //cs set low
;;;2986                   pSpiInterface->activeCSFunc(TRUE);
;;;2987   
;;;2988                   //send write data preamble.
;;;2989                   pSpiInterface->writeFunc(0, 0x00);
;;;2990                   pSpiInterface->writeFunc(0, 0x00);
;;;2991                   
;;;2992                   for(int ii=1; ii<((mPositionMsgInfoTmp.itemNum)*3+1); ii++)
;;;2993                   {
;;;2994                       if(LCDWaitForReadyEx() == FALSE)
;;;2995                           return;
;;;2996                       //while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0);
;;;2997                       
;;;2998                       /*1*///WriteData(buff[i],2);
;;;2999                       //Send Data
;;;3000                       pSpiInterface->writeFunc(0, (char)(buff[ii]>>8));
;;;3001                       pSpiInterface->writeFunc(0, (char)buff[ii]);
;;;3002                   }
;;;3003                   //cs set high.
;;;3004                   pSpiInterface->activeCSFunc(FALSE);
;;;3005               }
;;;3006               buffIndex = 0;
;;;3007           }
;;;3008       }
;;;3009       if(buffIndex>0 && load)
;;;3010       {
;;;3011           mPositionMsgInfoTmp.itemNum = buffIndex;
;;;3012           //LoadImages(buff, mPositionMsgInfoTmp.itemNum);
;;;3013           EPDExitSleep();
;;;3014           WriteCmdCode(0x0099,2);
;;;3015           WriteData(buff[0],2);
;;;3016           { 
;;;3017               if(LCDWaitForReadyEx() == FALSE) 
;;;3018                   return;
;;;3019               //while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0);
;;;3020               //cs set low
;;;3021               pSpiInterface->activeCSFunc(TRUE);
;;;3022   
;;;3023               //send write data preamble.
;;;3024               pSpiInterface->writeFunc(0, 0x00);
;;;3025               pSpiInterface->writeFunc(0, 0x00);
;;;3026               
;;;3027               for(int ii=1; ii<((mPositionMsgInfoTmp.itemNum)*3+1); ii++)
;;;3028               {
;;;3029                   if(LCDWaitForReadyEx() == FALSE)
;;;3030                       return;
;;;3031                   //while(GPIO_ReadBit(READY_PIN_PORT,READY_PORT_BIT)==0);
;;;3032                   
;;;3033                   /*1*///WriteData(buff[i],2);
;;;3034                   //Send Data
;;;3035                   pSpiInterface->writeFunc(0, (char)(buff[ii]>>8));
;;;3036                   pSpiInterface->writeFunc(0, (char)buff[ii]);
;;;3037               }
;;;3038               //cs set high.
;;;3039               pSpiInterface->activeCSFunc(FALSE);
;;;3040           }
;;;3041           
;;;3042           buffIndex = 0;
;;;3043       }
;;;3044       mPositionMsgInfoTmp.itemNum=buffIndex;
;;;3045       if(refresh)
;;;3046       {
;;;3047           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);
;;;3048       }
;;;3049       xSemaphoreGive(xSemaphore);
;;;3050       
;;;3051       #if(SHOW_TIME_DEBUG)
;;;3052       sysprintf(" [INFO EPD] <EPDDrawContainByID>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3053       #endif
;;;3054   }
0042e8  e28dd034          ADD      sp,sp,#0x34
0042ec  e49df004          POP      {pc}
                  |L1.17136|
0042f0  e59f0a40          LDR      r0,|L1.19768|
0042f4  e58d0020          STR      r0,[sp,#0x20]         ;2822
0042f8  e3a00000          MOV      r0,#0                 ;2824
0042fc  e58d001c          STR      r0,[sp,#0x1c]         ;2824
004300  e58d0018          STR      r0,[sp,#0x18]         ;2824
004304  e59d0028          LDR      r0,[sp,#0x28]         ;2825
004308  ebfffffe          BL       strlen
00430c  e58d0014          STR      r0,[sp,#0x14]         ;2825
004310  e3a00000          MOV      r0,#0                 ;2830
004314  e58d0010          STR      r0,[sp,#0x10]         ;2830
004318  ea000393          B        |L1.20844|
                  |L1.17180|
00431c  e59d0028          LDR      r0,[sp,#0x28]         ;2833
004320  e59d1010          LDR      r1,[sp,#0x10]         ;2833
004324  e7d00001          LDRB     r0,[r0,r1]            ;2833
004328  e3500020          CMP      r0,#0x20              ;2833
00432c  1a00002d          BNE      |L1.17384|
004330  e59f0a04          LDR      r0,|L1.19772|
004334  e5900000          LDR      r0,[r0,#0]            ;2835  ; buffIndex
004338  e0801080          ADD      r1,r0,r0,LSL #1       ;2835
00433c  e59f09fc          LDR      r0,|L1.19776|
004340  e0800101          ADD      r0,r0,r1,LSL #2       ;2835
004344  e58d000c          STR      r0,[sp,#0xc]          ;2835
004348  e1a01000          MOV      r1,r0                 ;2835
00434c  e3a000d3          MOV      r0,#0xd3              ;2835
004350  ebfffffe          BL       __aeabi_uwrite4
004354  e59f09e0          LDR      r0,|L1.19772|
004358  e5900000          LDR      r0,[r0,#0]            ;2836  ; buffIndex
00435c  e0801080          ADD      r1,r0,r0,LSL #1       ;2836
004360  e59f09d8          LDR      r0,|L1.19776|
004364  e0800101          ADD      r0,r0,r1,LSL #2       ;2836
004368  e2800004          ADD      r0,r0,#4              ;2836
00436c  e58d000c          STR      r0,[sp,#0xc]          ;2836
004370  e59d0018          LDR      r0,[sp,#0x18]         ;2836
004374  e59d102c          LDR      r1,[sp,#0x2c]         ;2836
004378  e0800001          ADD      r0,r0,r1              ;2836
00437c  e58d0008          STR      r0,[sp,#8]            ;2836
004380  e59d100c          LDR      r1,[sp,#0xc]          ;2836
004384  ebfffffe          BL       __aeabi_uwrite4
004388  e59f09ac          LDR      r0,|L1.19772|
00438c  e5900000          LDR      r0,[r0,#0]            ;2837  ; buffIndex
004390  e0800080          ADD      r0,r0,r0,LSL #1       ;2837
004394  e59f19a4          LDR      r1,|L1.19776|
004398  e0810100          ADD      r0,r1,r0,LSL #2       ;2837
00439c  e2800008          ADD      r0,r0,#8              ;2837
0043a0  e58d000c          STR      r0,[sp,#0xc]          ;2837
0043a4  e59d001c          LDR      r0,[sp,#0x1c]         ;2837
0043a8  e0801180          ADD      r1,r0,r0,LSL #3       ;2837
0043ac  e0811200          ADD      r1,r1,r0,LSL #4       ;2837
0043b0  e59d0030          LDR      r0,[sp,#0x30]         ;2837
0043b4  e0800081          ADD      r0,r0,r1,LSL #1       ;2837
0043b8  e58d0008          STR      r0,[sp,#8]            ;2837
0043bc  e59d100c          LDR      r1,[sp,#0xc]          ;2837
0043c0  ebfffffe          BL       __aeabi_uwrite4
0043c4  e59d0018          LDR      r0,[sp,#0x18]         ;2838
0043c8  e280001c          ADD      r0,r0,#0x1c           ;2838
0043cc  e58d0018          STR      r0,[sp,#0x18]         ;2838
0043d0  e59f0964          LDR      r0,|L1.19772|
0043d4  e5900000          LDR      r0,[r0,#0]            ;2839  ; buffIndex
0043d8  e2800001          ADD      r0,r0,#1              ;2839
0043dc  e59f1958          LDR      r1,|L1.19772|
0043e0  e5810000          STR      r0,[r1,#0]            ;2839  ; buffIndex
0043e4  ea0002fc          B        |L1.20444|
                  |L1.17384|
0043e8  e59d0028          LDR      r0,[sp,#0x28]         ;2842
0043ec  e59d1010          LDR      r1,[sp,#0x10]         ;2842
0043f0  e7d00001          LDRB     r0,[r0,r1]            ;2842
0043f4  e3500041          CMP      r0,#0x41              ;2842
0043f8  ba000036          BLT      |L1.17624|
0043fc  e59d0028          LDR      r0,[sp,#0x28]         ;2842
004400  e59d1010          LDR      r1,[sp,#0x10]         ;2842
004404  e7d00001          LDRB     r0,[r0,r1]            ;2842
004408  e350005a          CMP      r0,#0x5a              ;2842
00440c  ca000031          BGT      |L1.17624|
004410  e59f0924          LDR      r0,|L1.19772|
004414  e5900000          LDR      r0,[r0,#0]            ;2844  ; buffIndex
004418  e0800080          ADD      r0,r0,r0,LSL #1       ;2844
00441c  e59f191c          LDR      r1,|L1.19776|
004420  e0810100          ADD      r0,r1,r0,LSL #2       ;2844
004424  e58d000c          STR      r0,[sp,#0xc]          ;2844
004428  e59d0028          LDR      r0,[sp,#0x28]         ;2844
00442c  e59d1010          LDR      r1,[sp,#0x10]         ;2844
004430  e7d00001          LDRB     r0,[r0,r1]            ;2844
004434  e2800075          ADD      r0,r0,#0x75           ;2844
004438  e58d0008          STR      r0,[sp,#8]            ;2844
00443c  e59d100c          LDR      r1,[sp,#0xc]          ;2844
004440  ebfffffe          BL       __aeabi_uwrite4
004444  e59f08f0          LDR      r0,|L1.19772|
004448  e5900000          LDR      r0,[r0,#0]            ;2845  ; buffIndex
00444c  e0801080          ADD      r1,r0,r0,LSL #1       ;2845
004450  e59f08e8          LDR      r0,|L1.19776|
004454  e0800101          ADD      r0,r0,r1,LSL #2       ;2845
004458  e2800004          ADD      r0,r0,#4              ;2845
00445c  e58d000c          STR      r0,[sp,#0xc]          ;2845
004460  e59d0018          LDR      r0,[sp,#0x18]         ;2845
004464  e59d102c          LDR      r1,[sp,#0x2c]         ;2845
004468  e0800001          ADD      r0,r0,r1              ;2845
00446c  e58d0008          STR      r0,[sp,#8]            ;2845
004470  e59d100c          LDR      r1,[sp,#0xc]          ;2845
004474  ebfffffe          BL       __aeabi_uwrite4
004478  e59f08bc          LDR      r0,|L1.19772|
00447c  e5900000          LDR      r0,[r0,#0]            ;2846  ; buffIndex
004480  e0800080          ADD      r0,r0,r0,LSL #1       ;2846
004484  e59f18b4          LDR      r1,|L1.19776|
004488  e0810100          ADD      r0,r1,r0,LSL #2       ;2846
00448c  e2800008          ADD      r0,r0,#8              ;2846
004490  e58d000c          STR      r0,[sp,#0xc]          ;2846
004494  e59d001c          LDR      r0,[sp,#0x1c]         ;2846
004498  e0801180          ADD      r1,r0,r0,LSL #3       ;2846
00449c  e0811200          ADD      r1,r1,r0,LSL #4       ;2846
0044a0  e59d0030          LDR      r0,[sp,#0x30]         ;2846
0044a4  e0800081          ADD      r0,r0,r1,LSL #1       ;2846
0044a8  e58d0008          STR      r0,[sp,#8]            ;2846
0044ac  e59d100c          LDR      r1,[sp,#0xc]          ;2846
0044b0  ebfffffe          BL       __aeabi_uwrite4
0044b4  e59d0018          LDR      r0,[sp,#0x18]         ;2847
0044b8  e2800020          ADD      r0,r0,#0x20           ;2847
0044bc  e58d0018          STR      r0,[sp,#0x18]         ;2847
0044c0  e59f0874          LDR      r0,|L1.19772|
0044c4  e5900000          LDR      r0,[r0,#0]            ;2848  ; buffIndex
0044c8  e2800001          ADD      r0,r0,#1              ;2848
0044cc  e59f1868          LDR      r1,|L1.19772|
0044d0  e5810000          STR      r0,[r1,#0]            ;2848  ; buffIndex
0044d4  ea0002c0          B        |L1.20444|
                  |L1.17624|
0044d8  e59d0028          LDR      r0,[sp,#0x28]         ;2851
0044dc  e59d1010          LDR      r1,[sp,#0x10]         ;2851
0044e0  e7d00001          LDRB     r0,[r0,r1]            ;2851
0044e4  e3500061          CMP      r0,#0x61              ;2851
0044e8  ba000036          BLT      |L1.17864|
0044ec  e59d0028          LDR      r0,[sp,#0x28]         ;2851
0044f0  e59d1010          LDR      r1,[sp,#0x10]         ;2851
0044f4  e7d00001          LDRB     r0,[r0,r1]            ;2851
0044f8  e350007a          CMP      r0,#0x7a              ;2851
0044fc  ca000031          BGT      |L1.17864|
004500  e59f0834          LDR      r0,|L1.19772|
004504  e5900000          LDR      r0,[r0,#0]            ;2853  ; buffIndex
004508  e0800080          ADD      r0,r0,r0,LSL #1       ;2853
00450c  e59f182c          LDR      r1,|L1.19776|
004510  e0810100          ADD      r0,r1,r0,LSL #2       ;2853
004514  e58d000c          STR      r0,[sp,#0xc]          ;2853
004518  e59d0028          LDR      r0,[sp,#0x28]         ;2853
00451c  e59d1010          LDR      r1,[sp,#0x10]         ;2853
004520  e7d00001          LDRB     r0,[r0,r1]            ;2853
004524  e2800074          ADD      r0,r0,#0x74           ;2853
004528  e58d0008          STR      r0,[sp,#8]            ;2853
00452c  e59d100c          LDR      r1,[sp,#0xc]          ;2853
004530  ebfffffe          BL       __aeabi_uwrite4
004534  e59f0800          LDR      r0,|L1.19772|
004538  e5900000          LDR      r0,[r0,#0]            ;2854  ; buffIndex
00453c  e0800080          ADD      r0,r0,r0,LSL #1       ;2854
004540  e59f17f8          LDR      r1,|L1.19776|
004544  e0810100          ADD      r0,r1,r0,LSL #2       ;2854
004548  e2800004          ADD      r0,r0,#4              ;2854
00454c  e58d000c          STR      r0,[sp,#0xc]          ;2854
004550  e59d0018          LDR      r0,[sp,#0x18]         ;2854
004554  e59d102c          LDR      r1,[sp,#0x2c]         ;2854
004558  e0800001          ADD      r0,r0,r1              ;2854
00455c  e58d0008          STR      r0,[sp,#8]            ;2854
004560  e59d100c          LDR      r1,[sp,#0xc]          ;2854
004564  ebfffffe          BL       __aeabi_uwrite4
004568  e59f07cc          LDR      r0,|L1.19772|
00456c  e5900000          LDR      r0,[r0,#0]            ;2855  ; buffIndex
004570  e0801080          ADD      r1,r0,r0,LSL #1       ;2855
004574  e59f07c4          LDR      r0,|L1.19776|
004578  e0800101          ADD      r0,r0,r1,LSL #2       ;2855
00457c  e2800008          ADD      r0,r0,#8              ;2855
004580  e58d000c          STR      r0,[sp,#0xc]          ;2855
004584  e59d001c          LDR      r0,[sp,#0x1c]         ;2855
004588  e0801180          ADD      r1,r0,r0,LSL #3       ;2855
00458c  e0811200          ADD      r1,r1,r0,LSL #4       ;2855
004590  e59d0030          LDR      r0,[sp,#0x30]         ;2855
004594  e0800081          ADD      r0,r0,r1,LSL #1       ;2855
004598  e58d0008          STR      r0,[sp,#8]            ;2855
00459c  e59d100c          LDR      r1,[sp,#0xc]          ;2855
0045a0  ebfffffe          BL       __aeabi_uwrite4
0045a4  e59d0018          LDR      r0,[sp,#0x18]         ;2856
0045a8  e280001c          ADD      r0,r0,#0x1c           ;2856
0045ac  e58d0018          STR      r0,[sp,#0x18]         ;2856
0045b0  e59f0784          LDR      r0,|L1.19772|
0045b4  e5900000          LDR      r0,[r0,#0]            ;2857  ; buffIndex
0045b8  e2800001          ADD      r0,r0,#1              ;2857
0045bc  e59f1778          LDR      r1,|L1.19772|
0045c0  e5810000          STR      r0,[r1,#0]            ;2857  ; buffIndex
0045c4  ea000284          B        |L1.20444|
                  |L1.17864|
0045c8  e59d0028          LDR      r0,[sp,#0x28]         ;2860
0045cc  e59d1010          LDR      r1,[sp,#0x10]         ;2860
0045d0  e7d00001          LDRB     r0,[r0,r1]            ;2860
0045d4  e3500030          CMP      r0,#0x30              ;2860
0045d8  ba000036          BLT      |L1.18104|
0045dc  e59d0028          LDR      r0,[sp,#0x28]         ;2860
0045e0  e59d1010          LDR      r1,[sp,#0x10]         ;2860
0045e4  e7d00001          LDRB     r0,[r0,r1]            ;2860
0045e8  e3500039          CMP      r0,#0x39              ;2860
0045ec  ca000031          BGT      |L1.18104|
0045f0  e59f0744          LDR      r0,|L1.19772|
0045f4  e5900000          LDR      r0,[r0,#0]            ;2862  ; buffIndex
0045f8  e0800080          ADD      r0,r0,r0,LSL #1       ;2862
0045fc  e59f173c          LDR      r1,|L1.19776|
004600  e0810100          ADD      r0,r1,r0,LSL #2       ;2862
004604  e58d000c          STR      r0,[sp,#0xc]          ;2862
004608  e59d0028          LDR      r0,[sp,#0x28]         ;2862
00460c  e59d1010          LDR      r1,[sp,#0x10]         ;2862
004610  e7d00001          LDRB     r0,[r0,r1]            ;2862
004614  e2800021          ADD      r0,r0,#0x21           ;2862
004618  e58d0008          STR      r0,[sp,#8]            ;2862
00461c  e59d100c          LDR      r1,[sp,#0xc]          ;2862
004620  ebfffffe          BL       __aeabi_uwrite4
004624  e59f0710          LDR      r0,|L1.19772|
004628  e5900000          LDR      r0,[r0,#0]            ;2863  ; buffIndex
00462c  e0800080          ADD      r0,r0,r0,LSL #1       ;2863
004630  e59f1708          LDR      r1,|L1.19776|
004634  e0810100          ADD      r0,r1,r0,LSL #2       ;2863
004638  e2800004          ADD      r0,r0,#4              ;2863
00463c  e58d000c          STR      r0,[sp,#0xc]          ;2863
004640  e59d0018          LDR      r0,[sp,#0x18]         ;2863
004644  e59d102c          LDR      r1,[sp,#0x2c]         ;2863
004648  e0800001          ADD      r0,r0,r1              ;2863
00464c  e58d0008          STR      r0,[sp,#8]            ;2863
004650  e59d100c          LDR      r1,[sp,#0xc]          ;2863
004654  ebfffffe          BL       __aeabi_uwrite4
004658  e59f06dc          LDR      r0,|L1.19772|
00465c  e5900000          LDR      r0,[r0,#0]            ;2864  ; buffIndex
004660  e0800080          ADD      r0,r0,r0,LSL #1       ;2864
004664  e59f16d4          LDR      r1,|L1.19776|
004668  e0810100          ADD      r0,r1,r0,LSL #2       ;2864
00466c  e2800008          ADD      r0,r0,#8              ;2864
004670  e58d000c          STR      r0,[sp,#0xc]          ;2864
004674  e59d001c          LDR      r0,[sp,#0x1c]         ;2864
004678  e0801180          ADD      r1,r0,r0,LSL #3       ;2864
00467c  e0811200          ADD      r1,r1,r0,LSL #4       ;2864
004680  e59d0030          LDR      r0,[sp,#0x30]         ;2864
004684  e0800081          ADD      r0,r0,r1,LSL #1       ;2864
004688  e58d0008          STR      r0,[sp,#8]            ;2864
00468c  e59d100c          LDR      r1,[sp,#0xc]          ;2864
004690  ebfffffe          BL       __aeabi_uwrite4
004694  e59d0018          LDR      r0,[sp,#0x18]         ;2865
004698  e280001c          ADD      r0,r0,#0x1c           ;2865
00469c  e58d0018          STR      r0,[sp,#0x18]         ;2865
0046a0  e59f0694          LDR      r0,|L1.19772|
0046a4  e5900000          LDR      r0,[r0,#0]            ;2866  ; buffIndex
0046a8  e2800001          ADD      r0,r0,#1              ;2866
0046ac  e59f1688          LDR      r1,|L1.19772|
0046b0  e5810000          STR      r0,[r1,#0]            ;2866  ; buffIndex
0046b4  ea000248          B        |L1.20444|
                  |L1.18104|
0046b8  e59d0028          LDR      r0,[sp,#0x28]         ;2869
0046bc  e59d1010          LDR      r1,[sp,#0x10]         ;2869
0046c0  e7d00001          LDRB     r0,[r0,r1]            ;2869
0046c4  e350003a          CMP      r0,#0x3a              ;2869
0046c8  1a00002d          BNE      |L1.18308|
0046cc  e59f0668          LDR      r0,|L1.19772|
0046d0  e5900000          LDR      r0,[r0,#0]            ;2871  ; buffIndex
0046d4  e0800080          ADD      r0,r0,r0,LSL #1       ;2871
0046d8  e59f1660          LDR      r1,|L1.19776|
0046dc  e0810100          ADD      r0,r1,r0,LSL #2       ;2871
0046e0  e58d000c          STR      r0,[sp,#0xc]          ;2871
0046e4  e1a01000          MOV      r1,r0                 ;2871
0046e8  e3a0005b          MOV      r0,#0x5b              ;2871
0046ec  ebfffffe          BL       __aeabi_uwrite4
0046f0  e59f0644          LDR      r0,|L1.19772|
0046f4  e5900000          LDR      r0,[r0,#0]            ;2872  ; buffIndex
0046f8  e0800080          ADD      r0,r0,r0,LSL #1       ;2872
0046fc  e59f163c          LDR      r1,|L1.19776|
004700  e0810100          ADD      r0,r1,r0,LSL #2       ;2872
004704  e2800004          ADD      r0,r0,#4              ;2872
004708  e58d000c          STR      r0,[sp,#0xc]          ;2872
00470c  e59d0018          LDR      r0,[sp,#0x18]         ;2872
004710  e59d102c          LDR      r1,[sp,#0x2c]         ;2872
004714  e0800001          ADD      r0,r0,r1              ;2872
004718  e58d0008          STR      r0,[sp,#8]            ;2872
00471c  e59d100c          LDR      r1,[sp,#0xc]          ;2872
004720  ebfffffe          BL       __aeabi_uwrite4
004724  e59f0610          LDR      r0,|L1.19772|
004728  e5900000          LDR      r0,[r0,#0]            ;2873  ; buffIndex
00472c  e0800080          ADD      r0,r0,r0,LSL #1       ;2873
004730  e59f1608          LDR      r1,|L1.19776|
004734  e0810100          ADD      r0,r1,r0,LSL #2       ;2873
004738  e2800008          ADD      r0,r0,#8              ;2873
00473c  e58d000c          STR      r0,[sp,#0xc]          ;2873
004740  e59d001c          LDR      r0,[sp,#0x1c]         ;2873
004744  e0801180          ADD      r1,r0,r0,LSL #3       ;2873
004748  e0811200          ADD      r1,r1,r0,LSL #4       ;2873
00474c  e59d0030          LDR      r0,[sp,#0x30]         ;2873
004750  e0800081          ADD      r0,r0,r1,LSL #1       ;2873
004754  e58d0008          STR      r0,[sp,#8]            ;2873
004758  e59d100c          LDR      r1,[sp,#0xc]          ;2873
00475c  ebfffffe          BL       __aeabi_uwrite4
004760  e59d0018          LDR      r0,[sp,#0x18]         ;2874
004764  e280001c          ADD      r0,r0,#0x1c           ;2874
004768  e58d0018          STR      r0,[sp,#0x18]         ;2874
00476c  e59f05c8          LDR      r0,|L1.19772|
004770  e5900000          LDR      r0,[r0,#0]            ;2875  ; buffIndex
004774  e2800001          ADD      r0,r0,#1              ;2875
004778  e59f15bc          LDR      r1,|L1.19772|
00477c  e5810000          STR      r0,[r1,#0]            ;2875  ; buffIndex
004780  ea000215          B        |L1.20444|
                  |L1.18308|
004784  e59d0028          LDR      r0,[sp,#0x28]         ;2878
004788  e59d1010          LDR      r1,[sp,#0x10]         ;2878
00478c  e7d00001          LDRB     r0,[r0,r1]            ;2878
004790  e350002d          CMP      r0,#0x2d              ;2878
004794  1a00002d          BNE      |L1.18512|
004798  e59f059c          LDR      r0,|L1.19772|
00479c  e5900000          LDR      r0,[r0,#0]            ;2880  ; buffIndex
0047a0  e0800080          ADD      r0,r0,r0,LSL #1       ;2880
0047a4  e59f1594          LDR      r1,|L1.19776|
0047a8  e0810100          ADD      r0,r1,r0,LSL #2       ;2880
0047ac  e58d000c          STR      r0,[sp,#0xc]          ;2880
0047b0  e1a01000          MOV      r1,r0                 ;2880
0047b4  e3a0005c          MOV      r0,#0x5c              ;2880
0047b8  ebfffffe          BL       __aeabi_uwrite4
0047bc  e59f0578          LDR      r0,|L1.19772|
0047c0  e5900000          LDR      r0,[r0,#0]            ;2881  ; buffIndex
0047c4  e0800080          ADD      r0,r0,r0,LSL #1       ;2881
0047c8  e59f1570          LDR      r1,|L1.19776|
0047cc  e0810100          ADD      r0,r1,r0,LSL #2       ;2881
0047d0  e2800004          ADD      r0,r0,#4              ;2881
0047d4  e58d000c          STR      r0,[sp,#0xc]          ;2881
0047d8  e59d0018          LDR      r0,[sp,#0x18]         ;2881
0047dc  e59d102c          LDR      r1,[sp,#0x2c]         ;2881
0047e0  e0800001          ADD      r0,r0,r1              ;2881
0047e4  e58d0008          STR      r0,[sp,#8]            ;2881
0047e8  e59d100c          LDR      r1,[sp,#0xc]          ;2881
0047ec  ebfffffe          BL       __aeabi_uwrite4
0047f0  e59f0544          LDR      r0,|L1.19772|
0047f4  e5900000          LDR      r0,[r0,#0]            ;2882  ; buffIndex
0047f8  e0800080          ADD      r0,r0,r0,LSL #1       ;2882
0047fc  e59f153c          LDR      r1,|L1.19776|
004800  e0810100          ADD      r0,r1,r0,LSL #2       ;2882
004804  e2800008          ADD      r0,r0,#8              ;2882
004808  e58d000c          STR      r0,[sp,#0xc]          ;2882
00480c  e59d001c          LDR      r0,[sp,#0x1c]         ;2882
004810  e0801180          ADD      r1,r0,r0,LSL #3       ;2882
004814  e0811200          ADD      r1,r1,r0,LSL #4       ;2882
004818  e59d0030          LDR      r0,[sp,#0x30]         ;2882
00481c  e0800081          ADD      r0,r0,r1,LSL #1       ;2882
004820  e58d0008          STR      r0,[sp,#8]            ;2882
004824  e59d100c          LDR      r1,[sp,#0xc]          ;2882
004828  ebfffffe          BL       __aeabi_uwrite4
00482c  e59d0018          LDR      r0,[sp,#0x18]         ;2883
004830  e280001c          ADD      r0,r0,#0x1c           ;2883
004834  e58d0018          STR      r0,[sp,#0x18]         ;2883
004838  e59f04fc          LDR      r0,|L1.19772|
00483c  e5900000          LDR      r0,[r0,#0]            ;2884  ; buffIndex
004840  e2800001          ADD      r0,r0,#1              ;2884
004844  e59f14f0          LDR      r1,|L1.19772|
004848  e5810000          STR      r0,[r1,#0]            ;2884  ; buffIndex
00484c  ea0001e2          B        |L1.20444|
                  |L1.18512|
004850  e59d0028          LDR      r0,[sp,#0x28]         ;2886
004854  e59d1010          LDR      r1,[sp,#0x10]         ;2886
004858  e7d00001          LDRB     r0,[r0,r1]            ;2886
00485c  e350002e          CMP      r0,#0x2e              ;2886
004860  1a00002d          BNE      |L1.18716|
004864  e59f04d0          LDR      r0,|L1.19772|
004868  e5900000          LDR      r0,[r0,#0]            ;2888  ; buffIndex
00486c  e0800080          ADD      r0,r0,r0,LSL #1       ;2888
004870  e59f14c8          LDR      r1,|L1.19776|
004874  e0810100          ADD      r0,r1,r0,LSL #2       ;2888
004878  e58d000c          STR      r0,[sp,#0xc]          ;2888
00487c  e1a01000          MOV      r1,r0                 ;2888
004880  e3a0005e          MOV      r0,#0x5e              ;2888
004884  ebfffffe          BL       __aeabi_uwrite4
004888  e59f04ac          LDR      r0,|L1.19772|
00488c  e5900000          LDR      r0,[r0,#0]            ;2889  ; buffIndex
004890  e0801080          ADD      r1,r0,r0,LSL #1       ;2889
004894  e59f04a4          LDR      r0,|L1.19776|
004898  e0800101          ADD      r0,r0,r1,LSL #2       ;2889
00489c  e2800004          ADD      r0,r0,#4              ;2889
0048a0  e58d000c          STR      r0,[sp,#0xc]          ;2889
0048a4  e59d0018          LDR      r0,[sp,#0x18]         ;2889
0048a8  e59d102c          LDR      r1,[sp,#0x2c]         ;2889
0048ac  e0800001          ADD      r0,r0,r1              ;2889
0048b0  e58d0008          STR      r0,[sp,#8]            ;2889
0048b4  e59d100c          LDR      r1,[sp,#0xc]          ;2889
0048b8  ebfffffe          BL       __aeabi_uwrite4
0048bc  e59f0478          LDR      r0,|L1.19772|
0048c0  e5900000          LDR      r0,[r0,#0]            ;2890  ; buffIndex
0048c4  e0801080          ADD      r1,r0,r0,LSL #1       ;2890
0048c8  e59f0470          LDR      r0,|L1.19776|
0048cc  e0800101          ADD      r0,r0,r1,LSL #2       ;2890
0048d0  e2800008          ADD      r0,r0,#8              ;2890
0048d4  e58d000c          STR      r0,[sp,#0xc]          ;2890
0048d8  e59d001c          LDR      r0,[sp,#0x1c]         ;2890
0048dc  e0801180          ADD      r1,r0,r0,LSL #3       ;2890
0048e0  e0811200          ADD      r1,r1,r0,LSL #4       ;2890
0048e4  e59d0030          LDR      r0,[sp,#0x30]         ;2890
0048e8  e0800081          ADD      r0,r0,r1,LSL #1       ;2890
0048ec  e58d0008          STR      r0,[sp,#8]            ;2890
0048f0  e59d100c          LDR      r1,[sp,#0xc]          ;2890
0048f4  ebfffffe          BL       __aeabi_uwrite4
0048f8  e59d0018          LDR      r0,[sp,#0x18]         ;2891
0048fc  e280001c          ADD      r0,r0,#0x1c           ;2891
004900  e58d0018          STR      r0,[sp,#0x18]         ;2891
004904  e59f0430          LDR      r0,|L1.19772|
004908  e5900000          LDR      r0,[r0,#0]            ;2892  ; buffIndex
00490c  e2800001          ADD      r0,r0,#1              ;2892
004910  e59f1424          LDR      r1,|L1.19772|
004914  e5810000          STR      r0,[r1,#0]            ;2892  ; buffIndex
004918  ea0001af          B        |L1.20444|
                  |L1.18716|
00491c  e59d0028          LDR      r0,[sp,#0x28]         ;2895
004920  e59d1010          LDR      r1,[sp,#0x10]         ;2895
004924  e7d00001          LDRB     r0,[r0,r1]            ;2895
004928  e350005c          CMP      r0,#0x5c              ;2895
00492c  1a00002d          BNE      |L1.18920|
004930  e59f0404          LDR      r0,|L1.19772|
004934  e5900000          LDR      r0,[r0,#0]            ;2897  ; buffIndex
004938  e0801080          ADD      r1,r0,r0,LSL #1       ;2897
00493c  e59f03fc          LDR      r0,|L1.19776|
004940  e0800101          ADD      r0,r0,r1,LSL #2       ;2897
004944  e58d000c          STR      r0,[sp,#0xc]          ;2897
004948  e1a01000          MOV      r1,r0                 ;2897
00494c  e3a0005d          MOV      r0,#0x5d              ;2897
004950  ebfffffe          BL       __aeabi_uwrite4
004954  e59f03e0          LDR      r0,|L1.19772|
004958  e5900000          LDR      r0,[r0,#0]            ;2898  ; buffIndex
00495c  e0801080          ADD      r1,r0,r0,LSL #1       ;2898
004960  e59f03d8          LDR      r0,|L1.19776|
004964  e0800101          ADD      r0,r0,r1,LSL #2       ;2898
004968  e2800004          ADD      r0,r0,#4              ;2898
00496c  e58d000c          STR      r0,[sp,#0xc]          ;2898
004970  e59d0018          LDR      r0,[sp,#0x18]         ;2898
004974  e59d102c          LDR      r1,[sp,#0x2c]         ;2898
004978  e0800001          ADD      r0,r0,r1              ;2898
00497c  e58d0008          STR      r0,[sp,#8]            ;2898
004980  e59d100c          LDR      r1,[sp,#0xc]          ;2898
004984  ebfffffe          BL       __aeabi_uwrite4
004988  e59f03ac          LDR      r0,|L1.19772|
00498c  e5900000          LDR      r0,[r0,#0]            ;2899  ; buffIndex
004990  e0801080          ADD      r1,r0,r0,LSL #1       ;2899
004994  e59f03a4          LDR      r0,|L1.19776|
004998  e0800101          ADD      r0,r0,r1,LSL #2       ;2899
00499c  e2800008          ADD      r0,r0,#8              ;2899
0049a0  e58d000c          STR      r0,[sp,#0xc]          ;2899
0049a4  e59d001c          LDR      r0,[sp,#0x1c]         ;2899
0049a8  e0801180          ADD      r1,r0,r0,LSL #3       ;2899
0049ac  e0811200          ADD      r1,r1,r0,LSL #4       ;2899
0049b0  e59d0030          LDR      r0,[sp,#0x30]         ;2899
0049b4  e0800081          ADD      r0,r0,r1,LSL #1       ;2899
0049b8  e58d0008          STR      r0,[sp,#8]            ;2899
0049bc  e59d100c          LDR      r1,[sp,#0xc]          ;2899
0049c0  ebfffffe          BL       __aeabi_uwrite4
0049c4  e59d0018          LDR      r0,[sp,#0x18]         ;2900
0049c8  e280001c          ADD      r0,r0,#0x1c           ;2900
0049cc  e58d0018          STR      r0,[sp,#0x18]         ;2900
0049d0  e59f0364          LDR      r0,|L1.19772|
0049d4  e5900000          LDR      r0,[r0,#0]            ;2901  ; buffIndex
0049d8  e2801001          ADD      r1,r0,#1              ;2901
0049dc  e59f0358          LDR      r0,|L1.19772|
0049e0  e5801000          STR      r1,[r0,#0]            ;2901  ; buffIndex
0049e4  ea00017c          B        |L1.20444|
                  |L1.18920|
0049e8  e59d0028          LDR      r0,[sp,#0x28]         ;2905
0049ec  e59d1010          LDR      r1,[sp,#0x10]         ;2905
0049f0  e7d00001          LDRB     r0,[r0,r1]            ;2905
0049f4  e350003c          CMP      r0,#0x3c              ;2905
0049f8  1a00002e          BNE      |L1.19128|
0049fc  e59f0338          LDR      r0,|L1.19772|
004a00  e5900000          LDR      r0,[r0,#0]            ;2907  ; buffIndex
004a04  e0801080          ADD      r1,r0,r0,LSL #1       ;2907
004a08  e59f0330          LDR      r0,|L1.19776|
004a0c  e0800101          ADD      r0,r0,r1,LSL #2       ;2907
004a10  e58d000c          STR      r0,[sp,#0xc]          ;2907
004a14  e1a01000          MOV      r1,r0                 ;2907
004a18  e3a000f9          MOV      r0,#0xf9              ;2907
004a1c  ebfffffe          BL       __aeabi_uwrite4
004a20  e59f0314          LDR      r0,|L1.19772|
004a24  e5900000          LDR      r0,[r0,#0]            ;2908  ; buffIndex
004a28  e0801080          ADD      r1,r0,r0,LSL #1       ;2908
004a2c  e59f030c          LDR      r0,|L1.19776|
004a30  e0800101          ADD      r0,r0,r1,LSL #2       ;2908
004a34  e2800004          ADD      r0,r0,#4              ;2908
004a38  e58d000c          STR      r0,[sp,#0xc]          ;2908
004a3c  e59d0018          LDR      r0,[sp,#0x18]         ;2908
004a40  e59d102c          LDR      r1,[sp,#0x2c]         ;2908
004a44  e0800001          ADD      r0,r0,r1              ;2908
004a48  e58d0008          STR      r0,[sp,#8]            ;2908
004a4c  e59d100c          LDR      r1,[sp,#0xc]          ;2908
004a50  ebfffffe          BL       __aeabi_uwrite4
004a54  e59f02e0          LDR      r0,|L1.19772|
004a58  e5900000          LDR      r0,[r0,#0]            ;2909  ; buffIndex
004a5c  e0800080          ADD      r0,r0,r0,LSL #1       ;2909
004a60  e59f12d8          LDR      r1,|L1.19776|
004a64  e0810100          ADD      r0,r1,r0,LSL #2       ;2909
004a68  e2800008          ADD      r0,r0,#8              ;2909
004a6c  e58d000c          STR      r0,[sp,#0xc]          ;2909
004a70  e59d001c          LDR      r0,[sp,#0x1c]         ;2909
004a74  e0801180          ADD      r1,r0,r0,LSL #3       ;2909
004a78  e0811200          ADD      r1,r1,r0,LSL #4       ;2909
004a7c  e59d0030          LDR      r0,[sp,#0x30]         ;2909
004a80  e280000a          ADD      r0,r0,#0xa            ;2909
004a84  e0800081          ADD      r0,r0,r1,LSL #1       ;2909
004a88  e58d0008          STR      r0,[sp,#8]            ;2909
004a8c  e59d100c          LDR      r1,[sp,#0xc]          ;2909
004a90  ebfffffe          BL       __aeabi_uwrite4
004a94  e59d0018          LDR      r0,[sp,#0x18]         ;2910
004a98  e280001c          ADD      r0,r0,#0x1c           ;2910
004a9c  e58d0018          STR      r0,[sp,#0x18]         ;2910
004aa0  e59f0294          LDR      r0,|L1.19772|
004aa4  e5900000          LDR      r0,[r0,#0]            ;2911  ; buffIndex
004aa8  e2800001          ADD      r0,r0,#1              ;2911
004aac  e59f1288          LDR      r1,|L1.19772|
004ab0  e5810000          STR      r0,[r1,#0]            ;2911  ; buffIndex
004ab4  ea000148          B        |L1.20444|
                  |L1.19128|
004ab8  e59d0028          LDR      r0,[sp,#0x28]         ;2914
004abc  e59d1010          LDR      r1,[sp,#0x10]         ;2914
004ac0  e7d00001          LDRB     r0,[r0,r1]            ;2914
004ac4  e350003e          CMP      r0,#0x3e              ;2914
004ac8  1a00002e          BNE      |L1.19336|
004acc  e59f0268          LDR      r0,|L1.19772|
004ad0  e5900000          LDR      r0,[r0,#0]            ;2916  ; buffIndex
004ad4  e0800080          ADD      r0,r0,r0,LSL #1       ;2916
004ad8  e59f1260          LDR      r1,|L1.19776|
004adc  e0810100          ADD      r0,r1,r0,LSL #2       ;2916
004ae0  e58d000c          STR      r0,[sp,#0xc]          ;2916
004ae4  e1a01000          MOV      r1,r0                 ;2916
004ae8  e3a000fa          MOV      r0,#0xfa              ;2916
004aec  ebfffffe          BL       __aeabi_uwrite4
004af0  e59f0244          LDR      r0,|L1.19772|
004af4  e5900000          LDR      r0,[r0,#0]            ;2917  ; buffIndex
004af8  e0800080          ADD      r0,r0,r0,LSL #1       ;2917
004afc  e59f123c          LDR      r1,|L1.19776|
004b00  e0810100          ADD      r0,r1,r0,LSL #2       ;2917
004b04  e2800004          ADD      r0,r0,#4              ;2917
004b08  e58d000c          STR      r0,[sp,#0xc]          ;2917
004b0c  e59d0018          LDR      r0,[sp,#0x18]         ;2917
004b10  e59d102c          LDR      r1,[sp,#0x2c]         ;2917
004b14  e0800001          ADD      r0,r0,r1              ;2917
004b18  e58d0008          STR      r0,[sp,#8]            ;2917
004b1c  e59d100c          LDR      r1,[sp,#0xc]          ;2917
004b20  ebfffffe          BL       __aeabi_uwrite4
004b24  e59f0210          LDR      r0,|L1.19772|
004b28  e5900000          LDR      r0,[r0,#0]            ;2918  ; buffIndex
004b2c  e0800080          ADD      r0,r0,r0,LSL #1       ;2918
004b30  e59f1208          LDR      r1,|L1.19776|
004b34  e0810100          ADD      r0,r1,r0,LSL #2       ;2918
004b38  e2800008          ADD      r0,r0,#8              ;2918
004b3c  e58d000c          STR      r0,[sp,#0xc]          ;2918
004b40  e59d001c          LDR      r0,[sp,#0x1c]         ;2918
004b44  e0801180          ADD      r1,r0,r0,LSL #3       ;2918
004b48  e0811200          ADD      r1,r1,r0,LSL #4       ;2918
004b4c  e59d0030          LDR      r0,[sp,#0x30]         ;2918
004b50  e280000a          ADD      r0,r0,#0xa            ;2918
004b54  e0800081          ADD      r0,r0,r1,LSL #1       ;2918
004b58  e58d0008          STR      r0,[sp,#8]            ;2918
004b5c  e59d100c          LDR      r1,[sp,#0xc]          ;2918
004b60  ebfffffe          BL       __aeabi_uwrite4
004b64  e59d0018          LDR      r0,[sp,#0x18]         ;2919
004b68  e280001c          ADD      r0,r0,#0x1c           ;2919
004b6c  e58d0018          STR      r0,[sp,#0x18]         ;2919
004b70  e59f01c4          LDR      r0,|L1.19772|
004b74  e5900000          LDR      r0,[r0,#0]            ;2920  ; buffIndex
004b78  e2800001          ADD      r0,r0,#1              ;2920
004b7c  e59f11b8          LDR      r1,|L1.19772|
004b80  e5810000          STR      r0,[r1,#0]            ;2920  ; buffIndex
004b84  ea000114          B        |L1.20444|
                  |L1.19336|
004b88  e59d0028          LDR      r0,[sp,#0x28]         ;2923
004b8c  e59d1010          LDR      r1,[sp,#0x10]         ;2923
004b90  e7d00001          LDRB     r0,[r0,r1]            ;2923
004b94  e350002b          CMP      r0,#0x2b              ;2923
004b98  1a00002e          BNE      |L1.19544|
004b9c  e59f0198          LDR      r0,|L1.19772|
004ba0  e5900000          LDR      r0,[r0,#0]            ;2925  ; buffIndex
004ba4  e0800080          ADD      r0,r0,r0,LSL #1       ;2925
004ba8  e59f1190          LDR      r1,|L1.19776|
004bac  e0810100          ADD      r0,r1,r0,LSL #2       ;2925
004bb0  e58d000c          STR      r0,[sp,#0xc]          ;2925
004bb4  e1a01000          MOV      r1,r0                 ;2925
004bb8  e3a000fb          MOV      r0,#0xfb              ;2925
004bbc  ebfffffe          BL       __aeabi_uwrite4
004bc0  e59f0174          LDR      r0,|L1.19772|
004bc4  e5900000          LDR      r0,[r0,#0]            ;2926  ; buffIndex
004bc8  e0800080          ADD      r0,r0,r0,LSL #1       ;2926
004bcc  e59f116c          LDR      r1,|L1.19776|
004bd0  e0810100          ADD      r0,r1,r0,LSL #2       ;2926
004bd4  e2800004          ADD      r0,r0,#4              ;2926
004bd8  e58d000c          STR      r0,[sp,#0xc]          ;2926
004bdc  e59d0018          LDR      r0,[sp,#0x18]         ;2926
004be0  e59d102c          LDR      r1,[sp,#0x2c]         ;2926
004be4  e0800001          ADD      r0,r0,r1              ;2926
004be8  e58d0008          STR      r0,[sp,#8]            ;2926
004bec  e59d100c          LDR      r1,[sp,#0xc]          ;2926
004bf0  ebfffffe          BL       __aeabi_uwrite4
004bf4  e59f0140          LDR      r0,|L1.19772|
004bf8  e5900000          LDR      r0,[r0,#0]            ;2927  ; buffIndex
004bfc  e0800080          ADD      r0,r0,r0,LSL #1       ;2927
004c00  e59f1138          LDR      r1,|L1.19776|
004c04  e0810100          ADD      r0,r1,r0,LSL #2       ;2927
004c08  e2800008          ADD      r0,r0,#8              ;2927
004c0c  e58d000c          STR      r0,[sp,#0xc]          ;2927
004c10  e59d001c          LDR      r0,[sp,#0x1c]         ;2927
004c14  e0801180          ADD      r1,r0,r0,LSL #3       ;2927
004c18  e0811200          ADD      r1,r1,r0,LSL #4       ;2927
004c1c  e59d0030          LDR      r0,[sp,#0x30]         ;2927
004c20  e280000a          ADD      r0,r0,#0xa            ;2927
004c24  e0800081          ADD      r0,r0,r1,LSL #1       ;2927
004c28  e58d0008          STR      r0,[sp,#8]            ;2927
004c2c  e59d100c          LDR      r1,[sp,#0xc]          ;2927
004c30  ebfffffe          BL       __aeabi_uwrite4
004c34  e59d0018          LDR      r0,[sp,#0x18]         ;2928
004c38  e280001c          ADD      r0,r0,#0x1c           ;2928
004c3c  e58d0018          STR      r0,[sp,#0x18]         ;2928
004c40  e59f00f4          LDR      r0,|L1.19772|
004c44  e5900000          LDR      r0,[r0,#0]            ;2929  ; buffIndex
004c48  e2800001          ADD      r0,r0,#1              ;2929
004c4c  e59f10e8          LDR      r1,|L1.19772|
004c50  e5810000          STR      r0,[r1,#0]            ;2929  ; buffIndex
004c54  ea0000e0          B        |L1.20444|
                  |L1.19544|
004c58  e59d0028          LDR      r0,[sp,#0x28]         ;2932
004c5c  e59d1010          LDR      r1,[sp,#0x10]         ;2932
004c60  e7d00001          LDRB     r0,[r0,r1]            ;2932
004c64  e350003d          CMP      r0,#0x3d              ;2932
004c68  1a000035          BNE      |L1.19780|
004c6c  e59f00c8          LDR      r0,|L1.19772|
004c70  e5900000          LDR      r0,[r0,#0]            ;2934  ; buffIndex
004c74  e0800080          ADD      r0,r0,r0,LSL #1       ;2934
004c78  e59f10c0          LDR      r1,|L1.19776|
004c7c  e0810100          ADD      r0,r1,r0,LSL #2       ;2934
004c80  e58d000c          STR      r0,[sp,#0xc]          ;2934
004c84  e1a01000          MOV      r1,r0                 ;2934
004c88  e3a000fc          MOV      r0,#0xfc              ;2934
004c8c  ebfffffe          BL       __aeabi_uwrite4
004c90  e59f00a4          LDR      r0,|L1.19772|
004c94  e5900000          LDR      r0,[r0,#0]            ;2935  ; buffIndex
004c98  e0800080          ADD      r0,r0,r0,LSL #1       ;2935
004c9c  e59f109c          LDR      r1,|L1.19776|
004ca0  e0810100          ADD      r0,r1,r0,LSL #2       ;2935
004ca4  e2800004          ADD      r0,r0,#4              ;2935
004ca8  e58d000c          STR      r0,[sp,#0xc]          ;2935
004cac  e59d0018          LDR      r0,[sp,#0x18]         ;2935
004cb0  e59d102c          LDR      r1,[sp,#0x2c]         ;2935
004cb4  e0800001          ADD      r0,r0,r1              ;2935
004cb8  e58d0008          STR      r0,[sp,#8]            ;2935
004cbc  e59d100c          LDR      r1,[sp,#0xc]          ;2935
004cc0  ebfffffe          BL       __aeabi_uwrite4
004cc4  e59f0070          LDR      r0,|L1.19772|
004cc8  e5900000          LDR      r0,[r0,#0]            ;2936  ; buffIndex
004ccc  e0800080          ADD      r0,r0,r0,LSL #1       ;2936
004cd0  e59f1068          LDR      r1,|L1.19776|
004cd4  e0810100          ADD      r0,r1,r0,LSL #2       ;2936
004cd8  e2800008          ADD      r0,r0,#8              ;2936
004cdc  e58d000c          STR      r0,[sp,#0xc]          ;2936
004ce0  e59d001c          LDR      r0,[sp,#0x1c]         ;2936
004ce4  e0801180          ADD      r1,r0,r0,LSL #3       ;2936
004ce8  e0811200          ADD      r1,r1,r0,LSL #4       ;2936
004cec  e59d0030          LDR      r0,[sp,#0x30]         ;2936
004cf0  e280000a          ADD      r0,r0,#0xa            ;2936
004cf4  e0800081          ADD      r0,r0,r1,LSL #1       ;2936
004cf8  e58d0008          STR      r0,[sp,#8]            ;2936
004cfc  e59d100c          LDR      r1,[sp,#0xc]          ;2936
004d00  ebfffffe          BL       __aeabi_uwrite4
004d04  e59d0018          LDR      r0,[sp,#0x18]         ;2937
004d08  e280001c          ADD      r0,r0,#0x1c           ;2937
004d0c  e58d0018          STR      r0,[sp,#0x18]         ;2937
004d10  e59f0024          LDR      r0,|L1.19772|
004d14  e5900000          LDR      r0,[r0,#0]            ;2938  ; buffIndex
004d18  e2800001          ADD      r0,r0,#1              ;2938
004d1c  e59f1018          LDR      r1,|L1.19772|
004d20  e5810000          STR      r0,[r1,#0]            ;2938  ; buffIndex
004d24  ea0000ac          B        |L1.20444|
                  |L1.19752|
                          DCD      mBannerLinePositionInfo
                  |L1.19756|
                          DCD      mDepositTimeAllPositionInfo+0x4
                  |L1.19760|
                          DCD      mContainPositionInfo
                  |L1.19764|
                          DCD      count_i
                  |L1.19768|
                          DCD      |symbol_number.45|
                  |L1.19772|
                          DCD      buffIndex
                  |L1.19776|
                          DCD      |symbol_number.45|+0x4
                  |L1.19780|
004d44  e59d0028          LDR      r0,[sp,#0x28]         ;2941
004d48  e59d1010          LDR      r1,[sp,#0x10]         ;2941
004d4c  e7d00001          LDRB     r0,[r0,r1]            ;2941
004d50  e350007b          CMP      r0,#0x7b              ;2941
004d54  1a00002e          BNE      |L1.19988|
004d58  e51f0024          LDR      r0,|L1.19772|
004d5c  e5900000          LDR      r0,[r0,#0]            ;2944  ; buffIndex
004d60  e0801080          ADD      r1,r0,r0,LSL #1       ;2944
004d64  e51f002c          LDR      r0,|L1.19776|
004d68  e0800101          ADD      r0,r0,r1,LSL #2       ;2944
004d6c  e58d000c          STR      r0,[sp,#0xc]          ;2944
004d70  e1a01000          MOV      r1,r0                 ;2944
004d74  e3a000fd          MOV      r0,#0xfd              ;2944
004d78  ebfffffe          BL       __aeabi_uwrite4
004d7c  e51f0048          LDR      r0,|L1.19772|
004d80  e5900000          LDR      r0,[r0,#0]            ;2945  ; buffIndex
004d84  e0801080          ADD      r1,r0,r0,LSL #1       ;2945
004d88  e51f0050          LDR      r0,|L1.19776|
004d8c  e0800101          ADD      r0,r0,r1,LSL #2       ;2945
004d90  e2800004          ADD      r0,r0,#4              ;2945
004d94  e58d000c          STR      r0,[sp,#0xc]          ;2945
004d98  e59d0018          LDR      r0,[sp,#0x18]         ;2945
004d9c  e59d102c          LDR      r1,[sp,#0x2c]         ;2945
004da0  e0800001          ADD      r0,r0,r1              ;2945
004da4  e58d0008          STR      r0,[sp,#8]            ;2945
004da8  e59d100c          LDR      r1,[sp,#0xc]          ;2945
004dac  ebfffffe          BL       __aeabi_uwrite4
004db0  e51f007c          LDR      r0,|L1.19772|
004db4  e5900000          LDR      r0,[r0,#0]            ;2946  ; buffIndex
004db8  e0801080          ADD      r1,r0,r0,LSL #1       ;2946
004dbc  e51f0084          LDR      r0,|L1.19776|
004dc0  e0800101          ADD      r0,r0,r1,LSL #2       ;2946
004dc4  e2800008          ADD      r0,r0,#8              ;2946
004dc8  e58d000c          STR      r0,[sp,#0xc]          ;2946
004dcc  e59d001c          LDR      r0,[sp,#0x1c]         ;2946
004dd0  e0801180          ADD      r1,r0,r0,LSL #3       ;2946
004dd4  e0811200          ADD      r1,r1,r0,LSL #4       ;2946
004dd8  e59d0030          LDR      r0,[sp,#0x30]         ;2946
004ddc  e280000a          ADD      r0,r0,#0xa            ;2946
004de0  e0800081          ADD      r0,r0,r1,LSL #1       ;2946
004de4  e58d0008          STR      r0,[sp,#8]            ;2946
004de8  e59d100c          LDR      r1,[sp,#0xc]          ;2946
004dec  ebfffffe          BL       __aeabi_uwrite4
004df0  e59d0018          LDR      r0,[sp,#0x18]         ;2947
004df4  e280001c          ADD      r0,r0,#0x1c           ;2947
004df8  e58d0018          STR      r0,[sp,#0x18]         ;2947
004dfc  e51f00c8          LDR      r0,|L1.19772|
004e00  e5900000          LDR      r0,[r0,#0]            ;2948  ; buffIndex
004e04  e2801001          ADD      r1,r0,#1              ;2948
004e08  e51f00d4          LDR      r0,|L1.19772|
004e0c  e5801000          STR      r1,[r0,#0]            ;2948  ; buffIndex
004e10  ea000071          B        |L1.20444|
                  |L1.19988|
004e14  e59d0028          LDR      r0,[sp,#0x28]         ;2951
004e18  e59d1010          LDR      r1,[sp,#0x10]         ;2951
004e1c  e7d00001          LDRB     r0,[r0,r1]            ;2951
004e20  e350007d          CMP      r0,#0x7d              ;2951
004e24  1a00002e          BNE      |L1.20196|
004e28  e51f00f4          LDR      r0,|L1.19772|
004e2c  e5900000          LDR      r0,[r0,#0]            ;2953  ; buffIndex
004e30  e0801080          ADD      r1,r0,r0,LSL #1       ;2953
004e34  e51f00fc          LDR      r0,|L1.19776|
004e38  e0800101          ADD      r0,r0,r1,LSL #2       ;2953
004e3c  e58d000c          STR      r0,[sp,#0xc]          ;2953
004e40  e1a01000          MOV      r1,r0                 ;2953
004e44  e3a000fe          MOV      r0,#0xfe              ;2953
004e48  ebfffffe          BL       __aeabi_uwrite4
004e4c  e51f0118          LDR      r0,|L1.19772|
004e50  e5900000          LDR      r0,[r0,#0]            ;2954  ; buffIndex
004e54  e0801080          ADD      r1,r0,r0,LSL #1       ;2954
004e58  e51f0120          LDR      r0,|L1.19776|
004e5c  e0800101          ADD      r0,r0,r1,LSL #2       ;2954
004e60  e2800004          ADD      r0,r0,#4              ;2954
004e64  e58d000c          STR      r0,[sp,#0xc]          ;2954
004e68  e59d0018          LDR      r0,[sp,#0x18]         ;2954
004e6c  e59d102c          LDR      r1,[sp,#0x2c]         ;2954
004e70  e0800001          ADD      r0,r0,r1              ;2954
004e74  e58d0008          STR      r0,[sp,#8]            ;2954
004e78  e59d100c          LDR      r1,[sp,#0xc]          ;2954
004e7c  ebfffffe          BL       __aeabi_uwrite4
004e80  e51f014c          LDR      r0,|L1.19772|
004e84  e5900000          LDR      r0,[r0,#0]            ;2955  ; buffIndex
004e88  e0800080          ADD      r0,r0,r0,LSL #1       ;2955
004e8c  e51f1154          LDR      r1,|L1.19776|
004e90  e0810100          ADD      r0,r1,r0,LSL #2       ;2955
004e94  e2800008          ADD      r0,r0,#8              ;2955
004e98  e58d000c          STR      r0,[sp,#0xc]          ;2955
004e9c  e59d001c          LDR      r0,[sp,#0x1c]         ;2955
004ea0  e0801180          ADD      r1,r0,r0,LSL #3       ;2955
004ea4  e0811200          ADD      r1,r1,r0,LSL #4       ;2955
004ea8  e59d0030          LDR      r0,[sp,#0x30]         ;2955
004eac  e280000a          ADD      r0,r0,#0xa            ;2955
004eb0  e0800081          ADD      r0,r0,r1,LSL #1       ;2955
004eb4  e58d0008          STR      r0,[sp,#8]            ;2955
004eb8  e59d100c          LDR      r1,[sp,#0xc]          ;2955
004ebc  ebfffffe          BL       __aeabi_uwrite4
004ec0  e59d0018          LDR      r0,[sp,#0x18]         ;2956
004ec4  e280001c          ADD      r0,r0,#0x1c           ;2956
004ec8  e58d0018          STR      r0,[sp,#0x18]         ;2956
004ecc  e51f0198          LDR      r0,|L1.19772|
004ed0  e5900000          LDR      r0,[r0,#0]            ;2957  ; buffIndex
004ed4  e2801001          ADD      r1,r0,#1              ;2957
004ed8  e51f01a4          LDR      r0,|L1.19772|
004edc  e5801000          STR      r1,[r0,#0]            ;2957  ; buffIndex
004ee0  ea00003d          B        |L1.20444|
                  |L1.20196|
004ee4  e59d0028          LDR      r0,[sp,#0x28]         ;2960
004ee8  e59d1010          LDR      r1,[sp,#0x10]         ;2960
004eec  e7d00001          LDRB     r0,[r0,r1]            ;2960
004ef0  e3500023          CMP      r0,#0x23              ;2960
004ef4  1a00002e          BNE      |L1.20404|
004ef8  e51f01c4          LDR      r0,|L1.19772|
004efc  e5900000          LDR      r0,[r0,#0]            ;2962  ; buffIndex
004f00  e0801080          ADD      r1,r0,r0,LSL #1       ;2962
004f04  e51f01cc          LDR      r0,|L1.19776|
004f08  e0800101          ADD      r0,r0,r1,LSL #2       ;2962
004f0c  e58d000c          STR      r0,[sp,#0xc]          ;2962
004f10  e1a01000          MOV      r1,r0                 ;2962
004f14  e3a000d2          MOV      r0,#0xd2              ;2962
004f18  ebfffffe          BL       __aeabi_uwrite4
004f1c  e51f01e8          LDR      r0,|L1.19772|
004f20  e5900000          LDR      r0,[r0,#0]            ;2963  ; buffIndex
004f24  e0801080          ADD      r1,r0,r0,LSL #1       ;2963
004f28  e51f01f0          LDR      r0,|L1.19776|
004f2c  e0800101          ADD      r0,r0,r1,LSL #2       ;2963
004f30  e2800004          ADD      r0,r0,#4              ;2963
004f34  e58d000c          STR      r0,[sp,#0xc]          ;2963
004f38  e59d0018          LDR      r0,[sp,#0x18]         ;2963
004f3c  e59d102c          LDR      r1,[sp,#0x2c]         ;2963
004f40  e0800001          ADD      r0,r0,r1              ;2963
004f44  e58d0008          STR      r0,[sp,#8]            ;2963
004f48  e59d100c          LDR      r1,[sp,#0xc]          ;2963
004f4c  ebfffffe          BL       __aeabi_uwrite4
004f50  e51f021c          LDR      r0,|L1.19772|
004f54  e5900000          LDR      r0,[r0,#0]            ;2964  ; buffIndex
004f58  e0801080          ADD      r1,r0,r0,LSL #1       ;2964
004f5c  e51f0224          LDR      r0,|L1.19776|
004f60  e0800101          ADD      r0,r0,r1,LSL #2       ;2964
004f64  e2800008          ADD      r0,r0,#8              ;2964
004f68  e58d000c          STR      r0,[sp,#0xc]          ;2964
004f6c  e59d001c          LDR      r0,[sp,#0x1c]         ;2964
004f70  e0801180          ADD      r1,r0,r0,LSL #3       ;2964
004f74  e0811200          ADD      r1,r1,r0,LSL #4       ;2964
004f78  e59d0030          LDR      r0,[sp,#0x30]         ;2964
004f7c  e280000a          ADD      r0,r0,#0xa            ;2964
004f80  e0800081          ADD      r0,r0,r1,LSL #1       ;2964
004f84  e58d0008          STR      r0,[sp,#8]            ;2964
004f88  e59d100c          LDR      r1,[sp,#0xc]          ;2964
004f8c  ebfffffe          BL       __aeabi_uwrite4
004f90  e59d0018          LDR      r0,[sp,#0x18]         ;2965
004f94  e280001c          ADD      r0,r0,#0x1c           ;2965
004f98  e58d0018          STR      r0,[sp,#0x18]         ;2965
004f9c  e51f0268          LDR      r0,|L1.19772|
004fa0  e5900000          LDR      r0,[r0,#0]            ;2966  ; buffIndex
004fa4  e2801001          ADD      r1,r0,#1              ;2966
004fa8  e51f0274          LDR      r0,|L1.19772|
004fac  e5801000          STR      r1,[r0,#0]            ;2966  ; buffIndex
004fb0  ea000009          B        |L1.20444|
                  |L1.20404|
004fb4  e59d0028          LDR      r0,[sp,#0x28]         ;2969
004fb8  e59d1010          LDR      r1,[sp,#0x10]         ;2969
004fbc  e7d00001          LDRB     r0,[r0,r1]            ;2969
004fc0  e350000a          CMP      r0,#0xa               ;2969
004fc4  1a000004          BNE      |L1.20444|
004fc8  e59d001c          LDR      r0,[sp,#0x1c]         ;2971
004fcc  e2800001          ADD      r0,r0,#1              ;2971
004fd0  e58d001c          STR      r0,[sp,#0x1c]         ;2971
004fd4  e3a00000          MOV      r0,#0                 ;2972
004fd8  e58d0018          STR      r0,[sp,#0x18]         ;2972
                  |L1.20444|
004fdc  e51f02a8          LDR      r0,|L1.19772|
004fe0  e5900000          LDR      r0,[r0,#0]            ;2974  ; buffIndex
004fe4  e350001f          CMP      r0,#0x1f              ;2974
004fe8  1a00005c          BNE      |L1.20832|
004fec  e51f12bc          LDR      r1,|L1.19768|
004ff0  e51f02bc          LDR      r0,|L1.19772|
004ff4  e5900000          LDR      r0,[r0,#0]            ;2976  ; buffIndex
004ff8  ebfffffe          BL       __aeabi_uwrite4
004ffc  ebfffffe          BL       EPDExitSleep
005000  e3a01002          MOV      r1,#2                 ;2979
005004  e3a00099          MOV      r0,#0x99              ;2979
005008  ebfffffe          BL       WriteCmdCode
00500c  e59d0020          LDR      r0,[sp,#0x20]         ;2980
005010  e5900000          LDR      r0,[r0,#0]            ;2980
005014  e3a01002          MOV      r1,#2                 ;2980
005018  e58d000c          STR      r0,[sp,#0xc]          ;2980
00501c  ebfffffe          BL       WriteData
005020  ebfffffe          BL       LCDWaitForReadyEx
005024  e3500000          CMP      r0,#0                 ;2982
005028  1a000000          BNE      |L1.20528|
00502c  eafffcad          B        |L1.17128|
                  |L1.20528|
005030  e59f0f2c          LDR      r0,|L1.24420|
005034  e5900000          LDR      r0,[r0,#0]            ;2986  ; pSpiInterface
005038  e590000c          LDR      r0,[r0,#0xc]          ;2986
00503c  e58d000c          STR      r0,[sp,#0xc]          ;2986
005040  e3a00001          MOV      r0,#1                 ;2986
005044  e59d100c          LDR      r1,[sp,#0xc]          ;2986
005048  e12fff31          BLX      r1                    ;2986
00504c  e59f0f10          LDR      r0,|L1.24420|
005050  e5900000          LDR      r0,[r0,#0]            ;2989  ; pSpiInterface
005054  e5900004          LDR      r0,[r0,#4]            ;2989
005058  e3a01000          MOV      r1,#0                 ;2989
00505c  e58d000c          STR      r0,[sp,#0xc]          ;2989
005060  e1a00001          MOV      r0,r1                 ;2989
005064  e59d200c          LDR      r2,[sp,#0xc]          ;2989
005068  e12fff32          BLX      r2                    ;2989
00506c  e59f0ef0          LDR      r0,|L1.24420|
005070  e5900000          LDR      r0,[r0,#0]            ;2990  ; pSpiInterface
005074  e5900004          LDR      r0,[r0,#4]            ;2990
005078  e3a01000          MOV      r1,#0                 ;2990
00507c  e58d000c          STR      r0,[sp,#0xc]          ;2990
005080  e1a00001          MOV      r0,r1                 ;2990
005084  e59d200c          LDR      r2,[sp,#0xc]          ;2990
005088  e12fff32          BLX      r2                    ;2990
00508c  e3a00001          MOV      r0,#1                 ;2992
005090  e58d000c          STR      r0,[sp,#0xc]          ;2992
005094  ea000020          B        |L1.20764|
                  |L1.20632|
005098  ebfffffe          BL       LCDWaitForReadyEx
00509c  e3500000          CMP      r0,#0                 ;2994
0050a0  1a000000          BNE      |L1.20648|
0050a4  eafffc8f          B        |L1.17128|
                  |L1.20648|
0050a8  e59d0020          LDR      r0,[sp,#0x20]         ;3000
0050ac  e59d100c          LDR      r1,[sp,#0xc]          ;3000
0050b0  e7900101          LDR      r0,[r0,r1,LSL #2]     ;3000
0050b4  e1a00800          LSL      r0,r0,#16             ;3000
0050b8  e1a00c20          LSR      r0,r0,#24             ;3000
0050bc  e58d0008          STR      r0,[sp,#8]            ;3000
0050c0  e59f0e9c          LDR      r0,|L1.24420|
0050c4  e5900000          LDR      r0,[r0,#0]            ;3000  ; pSpiInterface
0050c8  e5900004          LDR      r0,[r0,#4]            ;3000
0050cc  e58d0004          STR      r0,[sp,#4]            ;3000
0050d0  e3a00000          MOV      r0,#0                 ;3000
0050d4  e59d1008          LDR      r1,[sp,#8]            ;3000
0050d8  e59d2004          LDR      r2,[sp,#4]            ;3000
0050dc  e12fff32          BLX      r2                    ;3000
0050e0  e59d0020          LDR      r0,[sp,#0x20]         ;3001
0050e4  e59d100c          LDR      r1,[sp,#0xc]          ;3001
0050e8  e7d00101          LDRB     r0,[r0,r1,LSL #2]     ;3001
0050ec  e58d0008          STR      r0,[sp,#8]            ;3001
0050f0  e59f0e6c          LDR      r0,|L1.24420|
0050f4  e5900000          LDR      r0,[r0,#0]            ;3001  ; pSpiInterface
0050f8  e5900004          LDR      r0,[r0,#4]            ;3001
0050fc  e58d0004          STR      r0,[sp,#4]            ;3001
005100  e3a00000          MOV      r0,#0                 ;3001
005104  e59d1008          LDR      r1,[sp,#8]            ;3001
005108  e59d2004          LDR      r2,[sp,#4]            ;3001
00510c  e12fff32          BLX      r2                    ;3001
005110  e59d000c          LDR      r0,[sp,#0xc]          ;2992
005114  e2800001          ADD      r0,r0,#1              ;2992
005118  e58d000c          STR      r0,[sp,#0xc]          ;2992
                  |L1.20764|
00511c  e51f03ec          LDR      r0,|L1.19768|
005120  ebfffffe          BL       __aeabi_uread4
005124  e0800080          ADD      r0,r0,r0,LSL #1       ;2992
005128  e2801001          ADD      r1,r0,#1              ;2992
00512c  e59d000c          LDR      r0,[sp,#0xc]          ;2992
005130  e1510000          CMP      r1,r0                 ;2992
005134  8affffd7          BHI      |L1.20632|
005138  e59f0e24          LDR      r0,|L1.24420|
00513c  e5900000          LDR      r0,[r0,#0]            ;3004  ; pSpiInterface
005140  e590000c          LDR      r0,[r0,#0xc]          ;3004
005144  e58d000c          STR      r0,[sp,#0xc]          ;3004
005148  e3a00000          MOV      r0,#0                 ;3004
00514c  e59d100c          LDR      r1,[sp,#0xc]          ;3004
005150  e12fff31          BLX      r1                    ;3004
005154  e3a00000          MOV      r0,#0                 ;3006
005158  e51f1424          LDR      r1,|L1.19772|
00515c  e5810000          STR      r0,[r1,#0]            ;3006  ; buffIndex
                  |L1.20832|
005160  e59d0010          LDR      r0,[sp,#0x10]         ;2830
005164  e2800001          ADD      r0,r0,#1              ;2830
005168  e58d0010          STR      r0,[sp,#0x10]         ;2830
                  |L1.20844|
00516c  e1cd01d0          LDRD     r0,r1,[sp,#0x10]      ;2830
005170  e1500001          CMP      r0,r1                 ;2830
005174  3afffc68          BCC      |L1.17180|
005178  e51f0444          LDR      r0,|L1.19772|
00517c  e5900000          LDR      r0,[r0,#0]            ;3009  ; buffIndex
005180  e3500000          CMP      r0,#0                 ;3009
005184  0a00005f          BEQ      |L1.21256|
005188  e59d0038          LDR      r0,[sp,#0x38]         ;3009
00518c  e3500000          CMP      r0,#0                 ;3009
005190  0a00005c          BEQ      |L1.21256|
005194  e51f1464          LDR      r1,|L1.19768|
005198  e51f0464          LDR      r0,|L1.19772|
00519c  e5900000          LDR      r0,[r0,#0]            ;3011  ; buffIndex
0051a0  ebfffffe          BL       __aeabi_uwrite4
0051a4  ebfffffe          BL       EPDExitSleep
0051a8  e3a01002          MOV      r1,#2                 ;3014
0051ac  e3a00099          MOV      r0,#0x99              ;3014
0051b0  ebfffffe          BL       WriteCmdCode
0051b4  e59d0020          LDR      r0,[sp,#0x20]         ;3015
0051b8  e5900000          LDR      r0,[r0,#0]            ;3015
0051bc  e3a01002          MOV      r1,#2                 ;3015
0051c0  e58d0010          STR      r0,[sp,#0x10]         ;3015
0051c4  ebfffffe          BL       WriteData
0051c8  ebfffffe          BL       LCDWaitForReadyEx
0051cc  e3500000          CMP      r0,#0                 ;3017
0051d0  1a000000          BNE      |L1.20952|
0051d4  eafffc43          B        |L1.17128|
                  |L1.20952|
0051d8  e59f0d84          LDR      r0,|L1.24420|
0051dc  e5900000          LDR      r0,[r0,#0]            ;3021  ; pSpiInterface
0051e0  e590000c          LDR      r0,[r0,#0xc]          ;3021
0051e4  e58d0010          STR      r0,[sp,#0x10]         ;3021
0051e8  e3a00001          MOV      r0,#1                 ;3021
0051ec  e59d1010          LDR      r1,[sp,#0x10]         ;3021
0051f0  e12fff31          BLX      r1                    ;3021
0051f4  e59f0d68          LDR      r0,|L1.24420|
0051f8  e5900000          LDR      r0,[r0,#0]            ;3024  ; pSpiInterface
0051fc  e5900004          LDR      r0,[r0,#4]            ;3024
005200  e3a01000          MOV      r1,#0                 ;3024
005204  e58d0010          STR      r0,[sp,#0x10]         ;3024
005208  e1a00001          MOV      r0,r1                 ;3024
00520c  e59d2010          LDR      r2,[sp,#0x10]         ;3024
005210  e12fff32          BLX      r2                    ;3024
005214  e59f0d48          LDR      r0,|L1.24420|
005218  e5900000          LDR      r0,[r0,#0]            ;3025  ; pSpiInterface
00521c  e5900004          LDR      r0,[r0,#4]            ;3025
005220  e3a01000          MOV      r1,#0                 ;3025
005224  e58d0010          STR      r0,[sp,#0x10]         ;3025
005228  e1a00001          MOV      r0,r1                 ;3025
00522c  e59d2010          LDR      r2,[sp,#0x10]         ;3025
005230  e12fff32          BLX      r2                    ;3025
005234  e3a00001          MOV      r0,#1                 ;3027
005238  e58d0010          STR      r0,[sp,#0x10]         ;3027
00523c  ea000020          B        |L1.21188|
                  |L1.21056|
005240  ebfffffe          BL       LCDWaitForReadyEx
005244  e3500000          CMP      r0,#0                 ;3029
005248  1a000000          BNE      |L1.21072|
00524c  eafffc25          B        |L1.17128|
                  |L1.21072|
005250  e59d0020          LDR      r0,[sp,#0x20]         ;3035
005254  e59d1010          LDR      r1,[sp,#0x10]         ;3035
005258  e7900101          LDR      r0,[r0,r1,LSL #2]     ;3035
00525c  e1a00800          LSL      r0,r0,#16             ;3035
005260  e1a00c20          LSR      r0,r0,#24             ;3035
005264  e58d000c          STR      r0,[sp,#0xc]          ;3035
005268  e59f0cf4          LDR      r0,|L1.24420|
00526c  e5900000          LDR      r0,[r0,#0]            ;3035  ; pSpiInterface
005270  e5900004          LDR      r0,[r0,#4]            ;3035
005274  e58d0008          STR      r0,[sp,#8]            ;3035
005278  e3a00000          MOV      r0,#0                 ;3035
00527c  e59d100c          LDR      r1,[sp,#0xc]          ;3035
005280  e59d2008          LDR      r2,[sp,#8]            ;3035
005284  e12fff32          BLX      r2                    ;3035
005288  e59d0020          LDR      r0,[sp,#0x20]         ;3036
00528c  e59d1010          LDR      r1,[sp,#0x10]         ;3036
005290  e7d00101          LDRB     r0,[r0,r1,LSL #2]     ;3036
005294  e58d000c          STR      r0,[sp,#0xc]          ;3036
005298  e59f0cc4          LDR      r0,|L1.24420|
00529c  e5900000          LDR      r0,[r0,#0]            ;3036  ; pSpiInterface
0052a0  e5900004          LDR      r0,[r0,#4]            ;3036
0052a4  e58d0008          STR      r0,[sp,#8]            ;3036
0052a8  e3a00000          MOV      r0,#0                 ;3036
0052ac  e59d100c          LDR      r1,[sp,#0xc]          ;3036
0052b0  e59d2008          LDR      r2,[sp,#8]            ;3036
0052b4  e12fff32          BLX      r2                    ;3036
0052b8  e59d0010          LDR      r0,[sp,#0x10]         ;3027
0052bc  e2800001          ADD      r0,r0,#1              ;3027
0052c0  e58d0010          STR      r0,[sp,#0x10]         ;3027
                  |L1.21188|
0052c4  e51f0594          LDR      r0,|L1.19768|
0052c8  ebfffffe          BL       __aeabi_uread4
0052cc  e0800080          ADD      r0,r0,r0,LSL #1       ;3027
0052d0  e2801001          ADD      r1,r0,#1              ;3027
0052d4  e59d0010          LDR      r0,[sp,#0x10]         ;3027
0052d8  e1510000          CMP      r1,r0                 ;3027
0052dc  8affffd7          BHI      |L1.21056|
0052e0  e59f0c7c          LDR      r0,|L1.24420|
0052e4  e5900000          LDR      r0,[r0,#0]            ;3039  ; pSpiInterface
0052e8  e590000c          LDR      r0,[r0,#0xc]          ;3039
0052ec  e58d0010          STR      r0,[sp,#0x10]         ;3039
0052f0  e3a00000          MOV      r0,#0                 ;3039
0052f4  e59d1010          LDR      r1,[sp,#0x10]         ;3039
0052f8  e12fff31          BLX      r1                    ;3039
0052fc  e3a00000          MOV      r0,#0                 ;3042
005300  e51f15cc          LDR      r1,|L1.19772|
005304  e5810000          STR      r0,[r1,#0]            ;3042  ; buffIndex
                  |L1.21256|
005308  e51f15d8          LDR      r1,|L1.19768|
00530c  e51f05d8          LDR      r0,|L1.19772|
005310  e5900000          LDR      r0,[r0,#0]            ;3044  ; buffIndex
005314  ebfffffe          BL       __aeabi_uwrite4
005318  e59d0024          LDR      r0,[sp,#0x24]         ;3045
00531c  e3500000          CMP      r0,#0                 ;3045
005320  0a000006          BEQ      |L1.21312|
005324  e3a00001          MOV      r0,#1                 ;3047
005328  e58d0000          STR      r0,[sp,#0]            ;3047
00532c  e59f3c34          LDR      r3,|L1.24424|
005330  e3a02b01          MOV      r2,#0x400             ;3047
005334  e3a01000          MOV      r1,#0                 ;3047
005338  e1a00001          MOV      r0,r1                 ;3047
00533c  ebfffffe          BL       DisplayArea
                  |L1.21312|
005340  e3a03000          MOV      r3,#0                 ;3049
005344  e1a02003          MOV      r2,r3                 ;3049
005348  e1a01003          MOV      r1,r3                 ;3049
00534c  e59f0c18          LDR      r0,|L1.24428|
005350  e5900000          LDR      r0,[r0,#0]            ;3049  ; xSemaphore
005354  ebfffffe          BL       xQueueGenericSend
005358  e1a00000          MOV      r0,r0
00535c  eafffbe1          B        |L1.17128|
;;;3055   
                          ENDP

                  getCarPositionInfoIndex PROC
;;;3056   static uint8_t getCarPositionInfoIndex(uint8_t selectCarId)
005360  e92d4070          PUSH     {r4-r6,lr}
;;;3057   {
005364  e1a05000          MOV      r5,r0
;;;3058       int i;
;;;3059       for(i = 0; i<mBannerPositionInfo.carEnableNum; i++) 
005368  e3a04000          MOV      r4,#0
00536c  ea00000c          B        |L1.21412|
                  |L1.21360|
;;;3060       { 
;;;3061           if(mBannerPositionInfo.info[i].bmpId != EPD_PICT_METER_INDEX)
005370  e0841084          ADD      r1,r4,r4,LSL #1
005374  e59f2bf4          LDR      r2,|L1.24432|
005378  e0820101          ADD      r0,r2,r1,LSL #2
00537c  ebfffffe          BL       __aeabi_uread4
005380  e3500084          CMP      r0,#0x84
005384  0a000005          BEQ      |L1.21408|
;;;3062           {
;;;3063               selectCarId--;
005388  e2450001          SUB      r0,r5,#1
00538c  e20050ff          AND      r5,r0,#0xff
;;;3064               if(selectCarId == 0)
005390  e3550000          CMP      r5,#0
005394  1a000001          BNE      |L1.21408|
;;;3065                   return i;
005398  e20400ff          AND      r0,r4,#0xff
                  |L1.21404|
;;;3066           }  
;;;3067       }
;;;3068       return 0xff;
;;;3069   }
00539c  e8bd8070          POP      {r4-r6,pc}
                  |L1.21408|
0053a0  e2844001          ADD      r4,r4,#1              ;3059
                  |L1.21412|
0053a4  e59f0bc8          LDR      r0,|L1.24436|
0053a8  ebfffffe          BL       __aeabi_uread4
0053ac  e1500004          CMP      r0,r4                 ;3059
0053b0  8affffee          BHI      |L1.21360|
0053b4  e3a000ff          MOV      r0,#0xff              ;3068
0053b8  eafffff7          B        |L1.21404|
;;;3070   void EPDDrawCar(BOOL reFreshFlag, uint8_t selectCarId, BOOL inverseFlag)
                          ENDP

                  EPDDrawCar PROC
0053bc  e92d41f0          PUSH     {r4-r8,lr}
;;;3071   {
0053c0  e24dd018          SUB      sp,sp,#0x18
0053c4  e1a06000          MOV      r6,r0
0053c8  e1a04001          MOV      r4,r1
0053cc  e1a07002          MOV      r7,r2
;;;3072       uint8_t cardPositionInfoIndex;
;;;3073       positionSingleInfo mPositionSingleInfo;
;;;3074       unsigned int* buff = (unsigned int*)&mPositionSingleInfo;
0053d0  e28d8008          ADD      r8,sp,#8
;;;3075       #if(SHOW_TIME_DEBUG)
;;;3076       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3077       #endif
;;;3078       mPositionSingleInfo.itemNum = 1;
0053d4  e3a00001          MOV      r0,#1
0053d8  e58d0008          STR      r0,[sp,#8]
;;;3079       if(inverseFlag)
0053dc  e3570000          CMP      r7,#0
0053e0  0a000002          BEQ      |L1.21488|
;;;3080           mPositionSingleInfo.info.bmpId = selectCarId + EPD_PICT_CAR1_I_INDEX - 1;
0053e4  e284007d          ADD      r0,r4,#0x7d
0053e8  e58d000c          STR      r0,[sp,#0xc]
0053ec  ea000001          B        |L1.21496|
                  |L1.21488|
;;;3081       else
;;;3082           mPositionSingleInfo.info.bmpId = selectCarId + EPD_PICT_CAR1_INDEX - 1;
0053f0  e2840077          ADD      r0,r4,#0x77
0053f4  e58d000c          STR      r0,[sp,#0xc]
                  |L1.21496|
;;;3083       
;;;3084       cardPositionInfoIndex = getCarPositionInfoIndex(selectCarId);
0053f8  e1a00004          MOV      r0,r4
0053fc  ebfffffe          BL       getCarPositionInfoIndex
005400  e1a05000          MOV      r5,r0
;;;3085       
;;;3086       mPositionSingleInfo.info.xPos = mBannerPositionInfo.info[cardPositionInfoIndex].xPos;
005404  e0851085          ADD      r1,r5,r5,LSL #1
005408  e59f2b60          LDR      r2,|L1.24432|
00540c  e0821101          ADD      r1,r2,r1,LSL #2
005410  e2810004          ADD      r0,r1,#4
005414  ebfffffe          BL       __aeabi_uread4
005418  e58d0010          STR      r0,[sp,#0x10]
;;;3087       mPositionSingleInfo.info.yPos = mBannerPositionInfo.info[cardPositionInfoIndex].yPos;
00541c  e0851085          ADD      r1,r5,r5,LSL #1
005420  e59f2b48          LDR      r2,|L1.24432|
005424  e0821101          ADD      r1,r2,r1,LSL #2
005428  e2810008          ADD      r0,r1,#8
00542c  ebfffffe          BL       __aeabi_uread4
005430  e58d0014          STR      r0,[sp,#0x14]
;;;3088       
;;;3089       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
005434  e3a03000          MOV      r3,#0
005438  e3e02000          MVN      r2,#0
00543c  e1a01003          MOV      r1,r3
005440  e59f0b24          LDR      r0,|L1.24428|
005444  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005448  ebfffffe          BL       xQueueGenericReceive
;;;3090       LoadImages(buff, mPositionSingleInfo.itemNum);
00544c  e1a00008          MOV      r0,r8
005450  e59d1008          LDR      r1,[sp,#8]
005454  ebfffffe          BL       LoadImages
;;;3091       
;;;3092       if(reFreshFlag)
005458  e3560000          CMP      r6,#0
00545c  0a000006          BEQ      |L1.21628|
;;;3093           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005460  e3a00001          MOV      r0,#1
005464  e58d0000          STR      r0,[sp,#0]
005468  e59f3af8          LDR      r3,|L1.24424|
00546c  e3a02b01          MOV      r2,#0x400
005470  e3a01000          MOV      r1,#0
005474  e1a00001          MOV      r0,r1
005478  ebfffffe          BL       DisplayArea
                  |L1.21628|
;;;3094       
;;;3095       xSemaphoreGive(xSemaphore); 
00547c  e3a03000          MOV      r3,#0
005480  e1a02003          MOV      r2,r3
005484  e1a01003          MOV      r1,r3
005488  e59f0adc          LDR      r0,|L1.24428|
00548c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005490  ebfffffe          BL       xQueueGenericSend
;;;3096       #if(SHOW_TIME_DEBUG)
;;;3097       sysprintf(" [INFO EPD] <EPDDrawCar>  [%d].\n", xTaskGetTickCount() - tickLocalStart);  
;;;3098       #endif    
;;;3099   }
005494  e28dd018          ADD      sp,sp,#0x18
005498  e8bd81f0          POP      {r4-r8,pc}
;;;3100   
                          ENDP

                  EPDDrawItem PROC
;;;3166   */
;;;3167   void EPDDrawItem(BOOL reFreshFlag, uint8_t oriSelectCarId, uint8_t selectCarId)
00549c  e92d47f0          PUSH     {r4-r10,lr}
;;;3168   {
0054a0  e24dd050          SUB      sp,sp,#0x50
0054a4  e1a08000          MOV      r8,r0
0054a8  e1a06001          MOV      r6,r1
0054ac  e1a07002          MOV      r7,r2
;;;3169       positionItemInfo PositionItemInfo; 
;;;3170       unsigned int* buff = (unsigned int*)&PositionItemInfo;   
0054b0  e28d9004          ADD      r9,sp,#4
;;;3171       uint8_t targetCarId;
;;;3172       uint8_t buffIndex;
;;;3173       #if(SHOW_TIME_DEBUG)
;;;3174       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3175       #endif
;;;3176       PositionItemInfo.itemNum = 0;
0054b4  e3a00000          MOV      r0,#0
0054b8  e58d0004          STR      r0,[sp,#4]
;;;3177       //
;;;3178       buffIndex = 0;
0054bc  e3a05000          MOV      r5,#0
;;;3179       if(selectCarId != 0)
0054c0  e3570000          CMP      r7,#0
0054c4  0a00008b          BEQ      |L1.22264|
;;;3180       {
;;;3181           targetCarId = selectCarId;
0054c8  e1a04007          MOV      r4,r7
;;;3182           PositionItemInfo.info[buffIndex].bmpId = targetCarId + EPD_PICT_CAR1_I_INDEX - 1;    
0054cc  e284007d          ADD      r0,r4,#0x7d
0054d0  e0851085          ADD      r1,r5,r5,LSL #1
0054d4  e28d2008          ADD      r2,sp,#8
0054d8  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3183           PositionItemInfo.info[buffIndex].xPos = mBannerPositionInfo.info[getCarPositionInfoIndex(targetCarId)].xPos;
0054dc  e1a00004          MOV      r0,r4
0054e0  ebfffffe          BL       getCarPositionInfoIndex
0054e4  e0800080          ADD      r0,r0,r0,LSL #1
0054e8  e59f1a80          LDR      r1,|L1.24432|
0054ec  e0810100          ADD      r0,r1,r0,LSL #2
0054f0  e280a004          ADD      r10,r0,#4
0054f4  e1a0000a          MOV      r0,r10
0054f8  ebfffffe          BL       __aeabi_uread4
0054fc  e0851085          ADD      r1,r5,r5,LSL #1
005500  e28d2008          ADD      r2,sp,#8
005504  e0821101          ADD      r1,r2,r1,LSL #2
005508  e5810004          STR      r0,[r1,#4]
;;;3184           PositionItemInfo.info[buffIndex++].yPos = mBannerPositionInfo.info[getCarPositionInfoIndex(targetCarId)].yPos;
00550c  e1a00004          MOV      r0,r4
005510  ebfffffe          BL       getCarPositionInfoIndex
005514  e0800080          ADD      r0,r0,r0,LSL #1
005518  e59f1a50          LDR      r1,|L1.24432|
00551c  e0810100          ADD      r0,r1,r0,LSL #2
005520  e280a008          ADD      r10,r0,#8
005524  e1a0000a          MOV      r0,r10
005528  ebfffffe          BL       __aeabi_uread4
00552c  e1a01005          MOV      r1,r5
005530  e2852001          ADD      r2,r5,#1
005534  e20250ff          AND      r5,r2,#0xff
005538  e0811081          ADD      r1,r1,r1,LSL #1
00553c  e28d2008          ADD      r2,sp,#8
005540  e0821101          ADD      r1,r2,r1,LSL #2
005544  e5810008          STR      r0,[r1,#8]
;;;3185           
;;;3186           
;;;3187           //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_I_INDEX; 
;;;3188   
;;;3189           if(selectCarId%2 == 1)
005548  e1a04007          MOV      r4,r7
00554c  e1a00004          MOV      r0,r4
005550  e0871fa0          ADD      r1,r7,r0,LSR #31
005554  e1a010c1          ASR      r1,r1,#1
005558  e0471081          SUB      r1,r7,r1,LSL #1
00555c  e3510001          CMP      r1,#1
005560  1a000017          BNE      |L1.21956|
;;;3190           {
;;;3191               
;;;3192               switch(mContainPositionInfo.boardEnableNum)
005564  e51f083c          LDR      r0,|L1.19760|
005568  ebfffffe          BL       __aeabi_uread4
00556c  e3500001          CMP      r0,#1
005570  0a000006          BEQ      |L1.21904|
005574  e3500002          CMP      r0,#2
005578  0a000006          BEQ      |L1.21912|
00557c  e3500003          CMP      r0,#3
005580  0a000009          BEQ      |L1.21932|
005584  e3500004          CMP      r0,#4
005588  1a00000a          BNE      |L1.21944|
00558c  ea000008          B        |L1.21940|
                  |L1.21904|
;;;3193               {
;;;3194                   case 1:
005590  e1a00000          MOV      r0,r0
;;;3195                   case 2:
005594  e1a00000          MOV      r0,r0
                  |L1.21912|
;;;3196                       PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_2_I_L_INDEX;
005598  e3a000ab          MOV      r0,#0xab
00559c  e0851085          ADD      r1,r5,r5,LSL #1
0055a0  e28d2008          ADD      r2,sp,#8
0055a4  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3197                       break;
0055a8  ea000004          B        |L1.21952|
                  |L1.21932|
;;;3198                   case 3:
0055ac  e1a00000          MOV      r0,r0
;;;3199                   case 4:
0055b0  e1a00000          MOV      r0,r0
                  |L1.21940|
;;;3200   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_4_I_L_INDEX;
;;;3201                       break;
0055b4  ea000001          B        |L1.21952|
                  |L1.21944|
;;;3202                   default:
0055b8  e1a00000          MOV      r0,r0
;;;3203   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_I_L_INDEX;
;;;3204                       break;
0055bc  e1a00000          MOV      r0,r0
                  |L1.21952|
0055c0  ea000017          B        |L1.22052|
                  |L1.21956|
;;;3205               }    
;;;3206               //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_I_L_INDEX;
;;;3207           }
;;;3208           else
;;;3209           {
;;;3210               switch(mContainPositionInfo.boardEnableNum)
0055c4  e51f089c          LDR      r0,|L1.19760|
0055c8  ebfffffe          BL       __aeabi_uread4
0055cc  e3500001          CMP      r0,#1
0055d0  0a000006          BEQ      |L1.22000|
0055d4  e3500002          CMP      r0,#2
0055d8  0a000006          BEQ      |L1.22008|
0055dc  e3500003          CMP      r0,#3
0055e0  0a000009          BEQ      |L1.22028|
0055e4  e3500004          CMP      r0,#4
0055e8  1a00000a          BNE      |L1.22040|
0055ec  ea000008          B        |L1.22036|
                  |L1.22000|
;;;3211               {
;;;3212                   case 1:
0055f0  e1a00000          MOV      r0,r0
;;;3213                   case 2:
0055f4  e1a00000          MOV      r0,r0
                  |L1.22008|
;;;3214                       PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_2_I_R_INDEX;
0055f8  e3a010ac          MOV      r1,#0xac
0055fc  e0850085          ADD      r0,r5,r5,LSL #1
005600  e28d2008          ADD      r2,sp,#8
005604  e7821100          STR      r1,[r2,r0,LSL #2]
;;;3215                       break;
005608  ea000004          B        |L1.22048|
                  |L1.22028|
;;;3216                   case 3:
00560c  e1a00000          MOV      r0,r0
;;;3217                   case 4:
005610  e1a00000          MOV      r0,r0
                  |L1.22036|
;;;3218   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_4_I_R_INDEX;
;;;3219                       break;
005614  ea000001          B        |L1.22048|
                  |L1.22040|
;;;3220                   default:
005618  e1a00000          MOV      r0,r0
;;;3221   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_I_R_INDEX;
;;;3222                       break;
00561c  e1a00000          MOV      r0,r0
                  |L1.22048|
005620  e1a00000          MOV      r0,r0                 ;3215
                  |L1.22052|
;;;3223               }    
;;;3224               //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_I_R_INDEX;
;;;3225           }
;;;3226           
;;;3227           PositionItemInfo.info[buffIndex].xPos = mContainPositionInfo.info[targetCarId-1].xPos;
005624  e2441001          SUB      r1,r4,#1
005628  e0811081          ADD      r1,r1,r1,LSL #1
00562c  e59f2944          LDR      r2,|L1.24440|
005630  e0821101          ADD      r1,r2,r1,LSL #2
005634  e2810004          ADD      r0,r1,#4
005638  ebfffffe          BL       __aeabi_uread4
00563c  e0851085          ADD      r1,r5,r5,LSL #1
005640  e28d2008          ADD      r2,sp,#8
005644  e0821101          ADD      r1,r2,r1,LSL #2
005648  e5810004          STR      r0,[r1,#4]
;;;3228           PositionItemInfo.info[buffIndex++].yPos = mContainPositionInfo.info[targetCarId-1].yPos;
00564c  e2441001          SUB      r1,r4,#1
005650  e0811081          ADD      r1,r1,r1,LSL #1
005654  e59f291c          LDR      r2,|L1.24440|
005658  e0821101          ADD      r1,r2,r1,LSL #2
00565c  e2810008          ADD      r0,r1,#8
005660  ebfffffe          BL       __aeabi_uread4
005664  e1a01005          MOV      r1,r5
005668  e2852001          ADD      r2,r5,#1
00566c  e20250ff          AND      r5,r2,#0xff
005670  e0811081          ADD      r1,r1,r1,LSL #1
005674  e28d2008          ADD      r2,sp,#8
005678  e0821101          ADD      r1,r2,r1,LSL #2
00567c  e5810008          STR      r0,[r1,#8]
;;;3229           PositionItemInfo.info[buffIndex].bmpId = targetCarId + EPD_PICT_NUM_SMALL_2_I_INDEX;    
005680  e2840060          ADD      r0,r4,#0x60
005684  e0851085          ADD      r1,r5,r5,LSL #1
005688  e28d2008          ADD      r2,sp,#8
00568c  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3230           PositionItemInfo.info[buffIndex].xPos = mContainNumberPositionInfo.info[targetCarId-1].xPos;
005690  e2441001          SUB      r1,r4,#1
005694  e0811081          ADD      r1,r1,r1,LSL #1
005698  e59f28dc          LDR      r2,|L1.24444|
00569c  e0821101          ADD      r1,r2,r1,LSL #2
0056a0  e2810004          ADD      r0,r1,#4
0056a4  ebfffffe          BL       __aeabi_uread4
0056a8  e0851085          ADD      r1,r5,r5,LSL #1
0056ac  e28d2008          ADD      r2,sp,#8
0056b0  e0821101          ADD      r1,r2,r1,LSL #2
0056b4  e5810004          STR      r0,[r1,#4]
;;;3231           PositionItemInfo.info[buffIndex++].yPos = mContainNumberPositionInfo.info[targetCarId-1].yPos;
0056b8  e2441001          SUB      r1,r4,#1
0056bc  e0811081          ADD      r1,r1,r1,LSL #1
0056c0  e59f28b4          LDR      r2,|L1.24444|
0056c4  e0821101          ADD      r1,r2,r1,LSL #2
0056c8  e2810008          ADD      r0,r1,#8
0056cc  ebfffffe          BL       __aeabi_uread4
0056d0  e1a01005          MOV      r1,r5
0056d4  e2852001          ADD      r2,r5,#1
0056d8  e20250ff          AND      r5,r2,#0xff
0056dc  e0811081          ADD      r1,r1,r1,LSL #1
0056e0  e28d2008          ADD      r2,sp,#8
0056e4  e0821101          ADD      r1,r2,r1,LSL #2
0056e8  e5810008          STR      r0,[r1,#8]
;;;3232           PositionItemInfo.itemNum = PositionItemInfo.itemNum + 3;
0056ec  e59d0004          LDR      r0,[sp,#4]
0056f0  e2800003          ADD      r0,r0,#3
0056f4  e58d0004          STR      r0,[sp,#4]
                  |L1.22264|
;;;3233       }
;;;3234       
;;;3235       if(oriSelectCarId != 0)
0056f8  e3560000          CMP      r6,#0
0056fc  0a00008a          BEQ      |L1.22828|
;;;3236       {
;;;3237           targetCarId = oriSelectCarId;
005700  e1a04006          MOV      r4,r6
;;;3238           PositionItemInfo.info[buffIndex].bmpId = targetCarId + EPD_PICT_CAR1_INDEX - 1;    
005704  e2840077          ADD      r0,r4,#0x77
005708  e0851085          ADD      r1,r5,r5,LSL #1
00570c  e28d2008          ADD      r2,sp,#8
005710  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3239           PositionItemInfo.info[buffIndex].xPos = mBannerPositionInfo.info[getCarPositionInfoIndex(targetCarId)].xPos;
005714  e1a00004          MOV      r0,r4
005718  ebfffffe          BL       getCarPositionInfoIndex
00571c  e0800080          ADD      r0,r0,r0,LSL #1
005720  e59f1848          LDR      r1,|L1.24432|
005724  e0810100          ADD      r0,r1,r0,LSL #2
005728  e280a004          ADD      r10,r0,#4
00572c  e1a0000a          MOV      r0,r10
005730  ebfffffe          BL       __aeabi_uread4
005734  e0851085          ADD      r1,r5,r5,LSL #1
005738  e28d2008          ADD      r2,sp,#8
00573c  e0821101          ADD      r1,r2,r1,LSL #2
005740  e5810004          STR      r0,[r1,#4]
;;;3240           PositionItemInfo.info[buffIndex++].yPos = mBannerPositionInfo.info[getCarPositionInfoIndex(targetCarId)].yPos;
005744  e1a00004          MOV      r0,r4
005748  ebfffffe          BL       getCarPositionInfoIndex
00574c  e0800080          ADD      r0,r0,r0,LSL #1
005750  e59f1818          LDR      r1,|L1.24432|
005754  e0810100          ADD      r0,r1,r0,LSL #2
005758  e280a008          ADD      r10,r0,#8
00575c  e1a0000a          MOV      r0,r10
005760  ebfffffe          BL       __aeabi_uread4
005764  e1a01005          MOV      r1,r5
005768  e2852001          ADD      r2,r5,#1
00576c  e20250ff          AND      r5,r2,#0xff
005770  e0811081          ADD      r1,r1,r1,LSL #1
005774  e28d2008          ADD      r2,sp,#8
005778  e0821101          ADD      r1,r2,r1,LSL #2
00577c  e5810008          STR      r0,[r1,#8]
;;;3241           
;;;3242           //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_INDEX;  
;;;3243           if(oriSelectCarId%2 == 1)
005780  e1a00006          MOV      r0,r6
005784  e0861fa0          ADD      r1,r6,r0,LSR #31
005788  e1a010c1          ASR      r1,r1,#1
00578c  e0461081          SUB      r1,r6,r1,LSL #1
005790  e3510001          CMP      r1,#1
005794  1a000017          BNE      |L1.22520|
;;;3244           {
;;;3245               switch(mContainPositionInfo.boardEnableNum)
005798  e51f0a70          LDR      r0,|L1.19760|
00579c  ebfffffe          BL       __aeabi_uread4
0057a0  e3500001          CMP      r0,#1
0057a4  0a000006          BEQ      |L1.22468|
0057a8  e3500002          CMP      r0,#2
0057ac  0a000006          BEQ      |L1.22476|
0057b0  e3500003          CMP      r0,#3
0057b4  0a000009          BEQ      |L1.22496|
0057b8  e3500004          CMP      r0,#4
0057bc  1a00000a          BNE      |L1.22508|
0057c0  ea000008          B        |L1.22504|
                  |L1.22468|
;;;3246               {
;;;3247                   case 1:
0057c4  e1a00000          MOV      r0,r0
;;;3248                   case 2:
0057c8  e1a00000          MOV      r0,r0
                  |L1.22476|
;;;3249                       PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_2_L_INDEX;
0057cc  e3a000a9          MOV      r0,#0xa9
0057d0  e0851085          ADD      r1,r5,r5,LSL #1
0057d4  e28d2008          ADD      r2,sp,#8
0057d8  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3250                       break;
0057dc  ea000004          B        |L1.22516|
                  |L1.22496|
;;;3251                   case 3:
0057e0  e1a00000          MOV      r0,r0
;;;3252                   case 4:
0057e4  e1a00000          MOV      r0,r0
                  |L1.22504|
;;;3253   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_4_L_INDEX;
;;;3254                       break;
0057e8  ea000001          B        |L1.22516|
                  |L1.22508|
;;;3255                   default:
0057ec  e1a00000          MOV      r0,r0
;;;3256   //                    PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_L_INDEX;
;;;3257                       break;
0057f0  e1a00000          MOV      r0,r0
                  |L1.22516|
0057f4  ea000017          B        |L1.22616|
                  |L1.22520|
;;;3258               }    
;;;3259               //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_L_INDEX;
;;;3260           }
;;;3261           else
;;;3262           {
;;;3263               switch(mContainPositionInfo.boardEnableNum)
0057f8  e51f0ad0          LDR      r0,|L1.19760|
0057fc  ebfffffe          BL       __aeabi_uread4
005800  e3500001          CMP      r0,#1
005804  0a000006          BEQ      |L1.22564|
005808  e3500002          CMP      r0,#2
00580c  0a000006          BEQ      |L1.22572|
005810  e3500003          CMP      r0,#3
005814  0a000009          BEQ      |L1.22592|
005818  e3500004          CMP      r0,#4
00581c  1a00000a          BNE      |L1.22604|
005820  ea000008          B        |L1.22600|
                  |L1.22564|
;;;3264               {
;;;3265                   case 1:
005824  e1a00000          MOV      r0,r0
;;;3266                   case 2:
005828  e1a00000          MOV      r0,r0
                  |L1.22572|
;;;3267                       PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_2_R_INDEX;
00582c  e3a010aa          MOV      r1,#0xaa
005830  e0850085          ADD      r0,r5,r5,LSL #1
005834  e28d2008          ADD      r2,sp,#8
005838  e7821100          STR      r1,[r2,r0,LSL #2]
;;;3268                       break;
00583c  ea000004          B        |L1.22612|
                  |L1.22592|
;;;3269                   case 3:
005840  e1a00000          MOV      r0,r0
;;;3270                   case 4:
005844  e1a00000          MOV      r0,r0
                  |L1.22600|
;;;3271                       //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_4_R_INDEX;
;;;3272                       break;
005848  ea000001          B        |L1.22612|
                  |L1.22604|
;;;3273                   default:
00584c  e1a00000          MOV      r0,r0
;;;3274                       //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_R_INDEX;
;;;3275                       break;
005850  e1a00000          MOV      r0,r0
                  |L1.22612|
005854  e1a00000          MOV      r0,r0                 ;3268
                  |L1.22616|
;;;3276               }    
;;;3277               //PositionItemInfo.info[buffIndex].bmpId = EPD_PICT_BOARD_R_INDEX;
;;;3278           }        
;;;3279           
;;;3280           PositionItemInfo.info[buffIndex].xPos = mContainPositionInfo.info[targetCarId-1].xPos;
005858  e2441001          SUB      r1,r4,#1
00585c  e0811081          ADD      r1,r1,r1,LSL #1
005860  e59f2710          LDR      r2,|L1.24440|
005864  e0821101          ADD      r1,r2,r1,LSL #2
005868  e2810004          ADD      r0,r1,#4
00586c  ebfffffe          BL       __aeabi_uread4
005870  e0851085          ADD      r1,r5,r5,LSL #1
005874  e28d2008          ADD      r2,sp,#8
005878  e0821101          ADD      r1,r2,r1,LSL #2
00587c  e5810004          STR      r0,[r1,#4]
;;;3281           PositionItemInfo.info[buffIndex++].yPos = mContainPositionInfo.info[targetCarId-1].yPos;
005880  e2441001          SUB      r1,r4,#1
005884  e0811081          ADD      r1,r1,r1,LSL #1
005888  e59f26e8          LDR      r2,|L1.24440|
00588c  e0821101          ADD      r1,r2,r1,LSL #2
005890  e2810008          ADD      r0,r1,#8
005894  ebfffffe          BL       __aeabi_uread4
005898  e1a01005          MOV      r1,r5
00589c  e2852001          ADD      r2,r5,#1
0058a0  e20250ff          AND      r5,r2,#0xff
0058a4  e0811081          ADD      r1,r1,r1,LSL #1
0058a8  e28d2008          ADD      r2,sp,#8
0058ac  e0821101          ADD      r1,r2,r1,LSL #2
0058b0  e5810008          STR      r0,[r1,#8]
;;;3282           PositionItemInfo.info[buffIndex].bmpId = targetCarId + EPD_PICT_NUM_SMALL_2_INDEX;    
0058b4  e2840051          ADD      r0,r4,#0x51
0058b8  e0851085          ADD      r1,r5,r5,LSL #1
0058bc  e28d2008          ADD      r2,sp,#8
0058c0  e7820101          STR      r0,[r2,r1,LSL #2]
;;;3283           PositionItemInfo.info[buffIndex].xPos = mContainNumberPositionInfo.info[targetCarId-1].xPos;
0058c4  e2441001          SUB      r1,r4,#1
0058c8  e0811081          ADD      r1,r1,r1,LSL #1
0058cc  e59f26a8          LDR      r2,|L1.24444|
0058d0  e0821101          ADD      r1,r2,r1,LSL #2
0058d4  e2810004          ADD      r0,r1,#4
0058d8  ebfffffe          BL       __aeabi_uread4
0058dc  e0851085          ADD      r1,r5,r5,LSL #1
0058e0  e28d2008          ADD      r2,sp,#8
0058e4  e0821101          ADD      r1,r2,r1,LSL #2
0058e8  e5810004          STR      r0,[r1,#4]
;;;3284           PositionItemInfo.info[buffIndex++].yPos = mContainNumberPositionInfo.info[targetCarId-1].yPos;
0058ec  e2441001          SUB      r1,r4,#1
0058f0  e0811081          ADD      r1,r1,r1,LSL #1
0058f4  e59f2680          LDR      r2,|L1.24444|
0058f8  e0821101          ADD      r1,r2,r1,LSL #2
0058fc  e2810008          ADD      r0,r1,#8
005900  ebfffffe          BL       __aeabi_uread4
005904  e1a01005          MOV      r1,r5
005908  e2852001          ADD      r2,r5,#1
00590c  e20250ff          AND      r5,r2,#0xff
005910  e0811081          ADD      r1,r1,r1,LSL #1
005914  e28d2008          ADD      r2,sp,#8
005918  e0821101          ADD      r1,r2,r1,LSL #2
00591c  e5810008          STR      r0,[r1,#8]
;;;3285           PositionItemInfo.itemNum = PositionItemInfo.itemNum + 3;
005920  e59d0004          LDR      r0,[sp,#4]
005924  e2800003          ADD      r0,r0,#3
005928  e58d0004          STR      r0,[sp,#4]
                  |L1.22828|
;;;3286       } 
;;;3287       if(PositionItemInfo.itemNum == 0)
00592c  e59d0004          LDR      r0,[sp,#4]
005930  e3500000          CMP      r0,#0
005934  1a000001          BNE      |L1.22848|
                  |L1.22840|
;;;3288       {
;;;3289           #if(SHOW_TIME_DEBUG)
;;;3290           sysprintf(" [INFO EPD] <EPDDrawItem>  ignore [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3291           #endif
;;;3292           return;
;;;3293       }
;;;3294       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
;;;3295       LoadImages(buff, PositionItemInfo.itemNum);
;;;3296       
;;;3297       if(reFreshFlag)
;;;3298           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
;;;3299       
;;;3300       xSemaphoreGive(xSemaphore);
;;;3301       #if(SHOW_TIME_DEBUG)
;;;3302       sysprintf(" [INFO EPD] <EPDDrawItem>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3303       #endif
;;;3304   }
005938  e28dd050          ADD      sp,sp,#0x50
00593c  e8bd87f0          POP      {r4-r10,pc}
                  |L1.22848|
005940  e3a03000          MOV      r3,#0                 ;3294
005944  e3e02000          MVN      r2,#0                 ;3294
005948  e1a01003          MOV      r1,r3                 ;3294
00594c  e59f0618          LDR      r0,|L1.24428|
005950  e5900000          LDR      r0,[r0,#0]            ;3294  ; xSemaphore
005954  ebfffffe          BL       xQueueGenericReceive
005958  e1a00009          MOV      r0,r9                 ;3295
00595c  e59d1004          LDR      r1,[sp,#4]            ;3295
005960  ebfffffe          BL       LoadImages
005964  e3580000          CMP      r8,#0                 ;3297
005968  0a000006          BEQ      |L1.22920|
00596c  e3a00001          MOV      r0,#1                 ;3298
005970  e58d0000          STR      r0,[sp,#0]            ;3298
005974  e59f35ec          LDR      r3,|L1.24424|
005978  e3a02b01          MOV      r2,#0x400             ;3298
00597c  e3a01000          MOV      r1,#0                 ;3298
005980  e1a00001          MOV      r0,r1                 ;3298
005984  ebfffffe          BL       DisplayArea
                  |L1.22920|
005988  e3a03000          MOV      r3,#0                 ;3300
00598c  e1a02003          MOV      r2,r3                 ;3300
005990  e1a01003          MOV      r1,r3                 ;3300
005994  e59f05d0          LDR      r0,|L1.24428|
005998  e5900000          LDR      r0,[r0,#0]            ;3300  ; xSemaphore
00599c  ebfffffe          BL       xQueueGenericSend
0059a0  e1a00000          MOV      r0,r0
0059a4  eaffffe3          B        |L1.22840|
;;;3305   /*
                          ENDP

                  EPDDrawDepositTime PROC
;;;3324   void MeterUpdateExpiredTitle(uint8_t selectItemId);
;;;3325   void EPDDrawDepositTime(BOOL reFreshFlag, uint8_t oriSelectItemId, uint8_t selectItemId)
0059a8  e92d47f0          PUSH     {r4-r10,lr}
;;;3326   {
0059ac  e24dd068          SUB      sp,sp,#0x68
0059b0  e1a09000          MOV      r9,r0
0059b4  e1a06001          MOV      r6,r1
0059b8  e1a05002          MOV      r5,r2
;;;3327       depositTimePositionInfo DepositTimePositionInfo; 
;;;3328       unsigned int* buff = (unsigned int*)&DepositTimePositionInfo;   
0059bc  e28da004          ADD      r10,sp,#4
;;;3329       uint8_t targetCarId;
;;;3330       uint8_t buffIndex = 0;
0059c0  e3a08000          MOV      r8,#0
;;;3331       int i;
;;;3332       #if(SHOW_TIME_DEBUG)
;;;3333       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3334       #endif
;;;3335       DepositTimePositionInfo.depositTimeEnableNum = 0;
0059c4  e3a00000          MOV      r0,#0
0059c8  e58d0004          STR      r0,[sp,#4]
;;;3336       //
;;;3337       if(selectItemId != 0)
0059cc  e3550000          CMP      r5,#0
0059d0  0a00001b          BEQ      |L1.23108|
;;;3338       {
;;;3339           targetCarId = DEPOSIT_TIME_DIGITAL_NUM * (selectItemId-1);
0059d4  e2450001          SUB      r0,r5,#1
0059d8  e1a00d00          LSL      r0,r0,#26
0059dc  e1a07c20          LSR      r7,r0,#24
;;;3340           memcpy(&DepositTimePositionInfo.info[buffIndex], &mDepositTimeAllPositionInfo.info[targetCarId], sizeof(positionInfo)*DEPOSIT_TIME_DIGITAL_NUM);
0059e0  e0872087          ADD      r2,r7,r7,LSL #1
0059e4  e51f3cc0          LDR      r3,|L1.19756|
0059e8  e0831102          ADD      r1,r3,r2,LSL #2
0059ec  e0882088          ADD      r2,r8,r8,LSL #1
0059f0  e28d3008          ADD      r3,sp,#8
0059f4  e0830102          ADD      r0,r3,r2,LSL #2
0059f8  e3a02030          MOV      r2,#0x30
0059fc  ebfffffe          BL       __aeabi_memcpy
;;;3341           for(i = 0; i<DEPOSIT_TIME_DIGITAL_NUM; i++)
005a00  e3a04000          MOV      r4,#0
005a04  ea000007          B        |L1.23080|
                  |L1.23048|
;;;3342           {
;;;3343               DepositTimePositionInfo.info[i].bmpId = DepositTimePositionInfo.info[i].bmpId + EPD_PICT_NUM_BIG_I_INDEX - EPD_PICT_NUM_BIG_INDEX;
005a08  e0840084          ADD      r0,r4,r4,LSL #1
005a0c  e28d1008          ADD      r1,sp,#8
005a10  e7910100          LDR      r0,[r1,r0,LSL #2]
005a14  e280000d          ADD      r0,r0,#0xd
005a18  e0841084          ADD      r1,r4,r4,LSL #1
005a1c  e28d2008          ADD      r2,sp,#8
005a20  e7820101          STR      r0,[r2,r1,LSL #2]
005a24  e2844001          ADD      r4,r4,#1              ;3341
                  |L1.23080|
005a28  e3540004          CMP      r4,#4                 ;3341
005a2c  bafffff5          BLT      |L1.23048|
;;;3344           }
;;;3345           buffIndex = buffIndex + DEPOSIT_TIME_DIGITAL_NUM;
005a30  e2880004          ADD      r0,r8,#4
005a34  e20080ff          AND      r8,r0,#0xff
;;;3346           DepositTimePositionInfo.depositTimeEnableNum = DepositTimePositionInfo.depositTimeEnableNum + DEPOSIT_TIME_DIGITAL_NUM;
005a38  e59d0004          LDR      r0,[sp,#4]
005a3c  e2800004          ADD      r0,r0,#4
005a40  e58d0004          STR      r0,[sp,#4]
                  |L1.23108|
;;;3347       }
;;;3348       
;;;3349       if(oriSelectItemId != 0)
005a44  e3560000          CMP      r6,#0
005a48  0a00000d          BEQ      |L1.23172|
;;;3350       {
;;;3351           targetCarId = DEPOSIT_TIME_DIGITAL_NUM * (oriSelectItemId-1);
005a4c  e2460001          SUB      r0,r6,#1
005a50  e1a00d00          LSL      r0,r0,#26
005a54  e1a07c20          LSR      r7,r0,#24
;;;3352           memcpy(&DepositTimePositionInfo.info[buffIndex], &mDepositTimeAllPositionInfo.info[targetCarId], sizeof(positionInfo)*DEPOSIT_TIME_DIGITAL_NUM);
005a58  e0872087          ADD      r2,r7,r7,LSL #1
005a5c  e51f3d38          LDR      r3,|L1.19756|
005a60  e0831102          ADD      r1,r3,r2,LSL #2
005a64  e0882088          ADD      r2,r8,r8,LSL #1
005a68  e28d3008          ADD      r3,sp,#8
005a6c  e0830102          ADD      r0,r3,r2,LSL #2
005a70  e3a02030          MOV      r2,#0x30
005a74  ebfffffe          BL       __aeabi_memcpy
;;;3353           DepositTimePositionInfo.depositTimeEnableNum = DepositTimePositionInfo.depositTimeEnableNum + DEPOSIT_TIME_DIGITAL_NUM;
005a78  e59d0004          LDR      r0,[sp,#4]
005a7c  e2800004          ADD      r0,r0,#4
005a80  e58d0004          STR      r0,[sp,#4]
                  |L1.23172|
;;;3354       } 
;;;3355       if(DepositTimePositionInfo.depositTimeEnableNum == 0)
005a84  e59d0004          LDR      r0,[sp,#4]
005a88  e3500000          CMP      r0,#0
005a8c  1a000001          BNE      |L1.23192|
                  |L1.23184|
;;;3356       {
;;;3357           #if(SHOW_TIME_DEBUG)
;;;3358           sysprintf(" [INFO EPD] <EPDDrawDepositTime> ignore  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3359           #endif
;;;3360           return;
;;;3361       }
;;;3362       
;;;3363       //
;;;3364       #warning
;;;3365       MeterUpdateExpiredTitle(selectItemId);
;;;3366       //
;;;3367       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
;;;3368       LoadImages(buff, DepositTimePositionInfo.depositTimeEnableNum);
;;;3369       
;;;3370       if(reFreshFlag)
;;;3371           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
;;;3372       
;;;3373       xSemaphoreGive(xSemaphore);
;;;3374       #if(SHOW_TIME_DEBUG)
;;;3375       sysprintf(" [INFO EPD] <EPDDrawDepositTime>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3376       #endif
;;;3377       
;;;3378   }
005a90  e28dd068          ADD      sp,sp,#0x68
005a94  e8bd87f0          POP      {r4-r10,pc}
                  |L1.23192|
005a98  e1a00005          MOV      r0,r5                 ;3365
005a9c  ebfffffe          BL       MeterUpdateExpiredTitle
005aa0  e3a03000          MOV      r3,#0                 ;3367
005aa4  e3e02000          MVN      r2,#0                 ;3367
005aa8  e1a01003          MOV      r1,r3                 ;3367
005aac  e59f04b8          LDR      r0,|L1.24428|
005ab0  e5900000          LDR      r0,[r0,#0]            ;3367  ; xSemaphore
005ab4  ebfffffe          BL       xQueueGenericReceive
005ab8  e1a0000a          MOV      r0,r10                ;3368
005abc  e59d1004          LDR      r1,[sp,#4]            ;3368
005ac0  ebfffffe          BL       LoadImages
005ac4  e3590000          CMP      r9,#0                 ;3370
005ac8  0a000006          BEQ      |L1.23272|
005acc  e3a00001          MOV      r0,#1                 ;3371
005ad0  e58d0000          STR      r0,[sp,#0]            ;3371
005ad4  e59f348c          LDR      r3,|L1.24424|
005ad8  e3a02b01          MOV      r2,#0x400             ;3371
005adc  e3a01000          MOV      r1,#0                 ;3371
005ae0  e1a00001          MOV      r0,r1                 ;3371
005ae4  ebfffffe          BL       DisplayArea
                  |L1.23272|
005ae8  e3a03000          MOV      r3,#0                 ;3373
005aec  e1a02003          MOV      r2,r3                 ;3373
005af0  e1a01003          MOV      r1,r3                 ;3373
005af4  e59f0470          LDR      r0,|L1.24428|
005af8  e5900000          LDR      r0,[r0,#0]            ;3373  ; xSemaphore
005afc  ebfffffe          BL       xQueueGenericSend
005b00  e1a00000          MOV      r0,r0
005b04  eaffffe1          B        |L1.23184|
;;;3379   
                          ENDP

                  EPDDrawAllDepositTime PROC
;;;3380   void EPDDrawAllDepositTime(BOOL reFreshFlag)
005b08  e92d40f8          PUSH     {r3-r7,lr}
;;;3381   {
005b0c  e1a04000          MOV      r4,r0
;;;3382       unsigned int* buff = (unsigned int*)&mDepositTimeAllPositionInfo;   
005b10  e59f5468          LDR      r5,|L1.24448|
;;;3383       #if(SHOW_TIME_DEBUG)
;;;3384       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3385       #endif
;;;3386       
;;;3387       #warning
;;;3388       MeterUpdateExpiredTitle(0);  
005b14  e3a00000          MOV      r0,#0
005b18  ebfffffe          BL       MeterUpdateExpiredTitle
;;;3389       
;;;3390       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
005b1c  e3a03000          MOV      r3,#0
005b20  e3e02000          MVN      r2,#0
005b24  e1a01003          MOV      r1,r3
005b28  e59f043c          LDR      r0,|L1.24428|
005b2c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005b30  ebfffffe          BL       xQueueGenericReceive
;;;3391       LoadImages(buff, mDepositTimeAllPositionInfo.depositTimeEnableNum);    
005b34  e2850000          ADD      r0,r5,#0
005b38  ebfffffe          BL       __aeabi_uread4
005b3c  e1a06000          MOV      r6,r0
005b40  e1a01006          MOV      r1,r6
005b44  e1a00005          MOV      r0,r5
005b48  ebfffffe          BL       LoadImages
;;;3392       if(reFreshFlag)
005b4c  e3540000          CMP      r4,#0
005b50  0a000006          BEQ      |L1.23408|
;;;3393           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005b54  e3a00001          MOV      r0,#1
005b58  e58d0000          STR      r0,[sp,#0]
005b5c  e59f3404          LDR      r3,|L1.24424|
005b60  e3a02b01          MOV      r2,#0x400
005b64  e3a01000          MOV      r1,#0
005b68  e1a00001          MOV      r0,r1
005b6c  ebfffffe          BL       DisplayArea
                  |L1.23408|
;;;3394       
;;;3395       xSemaphoreGive(xSemaphore);
005b70  e3a03000          MOV      r3,#0
005b74  e1a02003          MOV      r2,r3
005b78  e1a01003          MOV      r1,r3
005b7c  e59f03e8          LDR      r0,|L1.24428|
005b80  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005b84  ebfffffe          BL       xQueueGenericSend
;;;3396       #if(SHOW_TIME_DEBUG)
;;;3397       sysprintf(" [INFO EPD] <EPDDrawAllDepositTime>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3398       #endif 
;;;3399       
;;;3400        
;;;3401   }
005b88  e8bd80f8          POP      {r3-r7,pc}
;;;3402   
                          ENDP

                  EPDDrawAllScreen PROC
;;;3403   void EPDDrawAllScreen(BOOL reFreshFlag)
005b8c  e92d4038          PUSH     {r3-r5,lr}
;;;3404   {
005b90  e1a04000          MOV      r4,r0
;;;3405       #if(SHOW_TIME_DEBUG)
;;;3406       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3407       #endif
;;;3408       xSemaphoreTake(xSemaphore, portMAX_DELAY);  
005b94  e3a03000          MOV      r3,#0
005b98  e3e02000          MVN      r2,#0
005b9c  e1a01003          MOV      r1,r3
005ba0  e59f03c4          LDR      r0,|L1.24428|
005ba4  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005ba8  ebfffffe          BL       xQueueGenericReceive
;;;3409       LoadImages((unsigned int*)&PositionAllItemInfo, PositionAllItemInfo.itemNum); //car line board board-num 
005bac  e59f03d0          LDR      r0,|L1.24452|
005bb0  ebfffffe          BL       __aeabi_uread4
005bb4  e1a05000          MOV      r5,r0
005bb8  e1a01005          MOV      r1,r5
005bbc  e59f03c0          LDR      r0,|L1.24452|
005bc0  ebfffffe          BL       LoadImages
;;;3410       LoadImages((unsigned int*)&mDepositTimeAllPositionInfo, mDepositTimeAllPositionInfo.depositTimeEnableNum);  //DepositTimeAll
005bc4  e59f03b4          LDR      r0,|L1.24448|
005bc8  ebfffffe          BL       __aeabi_uread4
005bcc  e1a05000          MOV      r5,r0
005bd0  e1a01005          MOV      r1,r5
005bd4  e59f03a4          LDR      r0,|L1.24448|
005bd8  ebfffffe          BL       LoadImages
;;;3411       if(reFreshFlag)
005bdc  e3540000          CMP      r4,#0
005be0  0a000006          BEQ      |L1.23552|
;;;3412           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005be4  e3a00001          MOV      r0,#1
005be8  e58d0000          STR      r0,[sp,#0]
005bec  e59f3374          LDR      r3,|L1.24424|
005bf0  e3a02b01          MOV      r2,#0x400
005bf4  e3a01000          MOV      r1,#0
005bf8  e1a00001          MOV      r0,r1
005bfc  ebfffffe          BL       DisplayArea
                  |L1.23552|
;;;3413       
;;;3414       xSemaphoreGive(xSemaphore);
005c00  e3a03000          MOV      r3,#0
005c04  e1a02003          MOV      r2,r3
005c08  e1a01003          MOV      r1,r3
005c0c  e59f0358          LDR      r0,|L1.24428|
005c10  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005c14  ebfffffe          BL       xQueueGenericSend
;;;3415       #if(SHOW_TIME_DEBUG)
;;;3416       sysprintf(" [INFO EPD] <EPDDrawAllScreen>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3417       #endif
;;;3418       
;;;3419   }
005c18  e8bd8038          POP      {r3-r5,pc}
;;;3420   
                          ENDP

                  EPDDrawPleaseWait PROC
;;;3421   void EPDDrawPleaseWait(BOOL reFreshFlag, BOOL clearFlag)
005c1c  e92d4070          PUSH     {r4-r6,lr}
;;;3422   {
005c20  e24dd018          SUB      sp,sp,#0x18
005c24  e1a04000          MOV      r4,r0
005c28  e1a05001          MOV      r5,r1
;;;3423       positionSingleInfo mPositionSingleInfoTmp;
;;;3424       
;;;3425       unsigned int* buff = (unsigned int*)&mPositionSingleInfoTmp;   
005c2c  e28d6008          ADD      r6,sp,#8
;;;3426       mPositionSingleInfoTmp.itemNum = 1;
005c30  e3a00001          MOV      r0,#1
005c34  e58d0008          STR      r0,[sp,#8]
;;;3427       if(clearFlag)
005c38  e3550000          CMP      r5,#0
005c3c  0a000001          BEQ      |L1.23624|
;;;3428   //        mPositionSingleInfoTmp.info.bmpId = EPD_PICT_PLEASE_WAIT_CLEAR_INDEX;
;;;3429   //    else
;;;3430   //        mPositionSingleInfoTmp.info.bmpId = EPD_PICT_PLEASE_WAIT_INDEX;
;;;3431       
;;;3432       mPositionSingleInfoTmp.info.xPos = 130;
005c40  e3a00082          MOV      r0,#0x82
005c44  e58d0010          STR      r0,[sp,#0x10]
                  |L1.23624|
;;;3433       mPositionSingleInfoTmp.info.yPos = 160;
005c48  e3a000a0          MOV      r0,#0xa0
005c4c  e58d0014          STR      r0,[sp,#0x14]
;;;3434       
;;;3435       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
005c50  e3a03000          MOV      r3,#0
005c54  e3e02000          MVN      r2,#0
005c58  e1a01003          MOV      r1,r3
005c5c  e59f0308          LDR      r0,|L1.24428|
005c60  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005c64  ebfffffe          BL       xQueueGenericReceive
;;;3436       LoadImages(buff, mPositionSingleInfoTmp.itemNum);
005c68  e1a00006          MOV      r0,r6
005c6c  e59d1008          LDR      r1,[sp,#8]
005c70  ebfffffe          BL       LoadImages
;;;3437       if(reFreshFlag)
005c74  e3540000          CMP      r4,#0
005c78  0a000006          BEQ      |L1.23704|
;;;3438           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005c7c  e3a00001          MOV      r0,#1
005c80  e58d0000          STR      r0,[sp,#0]
005c84  e59f32dc          LDR      r3,|L1.24424|
005c88  e3a02b01          MOV      r2,#0x400
005c8c  e3a01000          MOV      r1,#0
005c90  e1a00001          MOV      r0,r1
005c94  ebfffffe          BL       DisplayArea
                  |L1.23704|
;;;3439       xSemaphoreGive(xSemaphore);  
005c98  e3a03000          MOV      r3,#0
005c9c  e1a02003          MOV      r2,r3
005ca0  e1a01003          MOV      r1,r3
005ca4  e59f02c0          LDR      r0,|L1.24428|
005ca8  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005cac  ebfffffe          BL       xQueueGenericSend
;;;3440   }
005cb0  e28dd018          ADD      sp,sp,#0x18
005cb4  e8bd8070          POP      {r4-r6,pc}
;;;3441   
                          ENDP

                  EPDDrawContainSelTime PROC
;;;3442   
;;;3443   void EPDDrawContainSelTime(BOOL reFreshFlag)
005cb8  e92d4030          PUSH     {r4,r5,lr}
;;;3444   {
005cbc  e24dd014          SUB      sp,sp,#0x14
005cc0  e1a04000          MOV      r4,r0
;;;3445       positionSingleInfo mPositionSingleInfoTmp;
;;;3446       
;;;3447       unsigned int* buff = (unsigned int*)&mPositionSingleInfoTmp;   
005cc4  e28d5004          ADD      r5,sp,#4
;;;3448       mPositionSingleInfoTmp.itemNum = 1;
005cc8  e3a00001          MOV      r0,#1
005ccc  e58d0004          STR      r0,[sp,#4]
;;;3449       mPositionSingleInfoTmp.info.bmpId = EPD_PICT_CONTAIN_SELECT_TIME_INDEX;
005cd0  e3a0008b          MOV      r0,#0x8b
005cd4  e58d0008          STR      r0,[sp,#8]
;;;3450       
;;;3451       mPositionSingleInfoTmp.info.xPos = 47;
005cd8  e3a0002f          MOV      r0,#0x2f
005cdc  e58d000c          STR      r0,[sp,#0xc]
;;;3452       mPositionSingleInfoTmp.info.yPos = 74;
005ce0  e3a0004a          MOV      r0,#0x4a
005ce4  e58d0010          STR      r0,[sp,#0x10]
;;;3453       
;;;3454       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
005ce8  e3a03000          MOV      r3,#0
005cec  e3e02000          MVN      r2,#0
005cf0  e1a01003          MOV      r1,r3
005cf4  e59f0270          LDR      r0,|L1.24428|
005cf8  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005cfc  ebfffffe          BL       xQueueGenericReceive
;;;3455       LoadImages(buff, mPositionSingleInfoTmp.itemNum);
005d00  e1a00005          MOV      r0,r5
005d04  e59d1004          LDR      r1,[sp,#4]
005d08  ebfffffe          BL       LoadImages
;;;3456       if(reFreshFlag)
005d0c  e3540000          CMP      r4,#0
005d10  0a000006          BEQ      |L1.23856|
;;;3457           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005d14  e3a00001          MOV      r0,#1
005d18  e58d0000          STR      r0,[sp,#0]
005d1c  e59f3244          LDR      r3,|L1.24424|
005d20  e3a02b01          MOV      r2,#0x400
005d24  e3a01000          MOV      r1,#0
005d28  e1a00001          MOV      r0,r1
005d2c  ebfffffe          BL       DisplayArea
                  |L1.23856|
;;;3458       xSemaphoreGive(xSemaphore);  
005d30  e3a03000          MOV      r3,#0
005d34  e1a02003          MOV      r2,r3
005d38  e1a01003          MOV      r1,r3
005d3c  e59f0228          LDR      r0,|L1.24428|
005d40  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005d44  ebfffffe          BL       xQueueGenericSend
;;;3459   }
005d48  e28dd014          ADD      sp,sp,#0x14
005d4c  e8bd8030          POP      {r4,r5,pc}
;;;3460   
                          ENDP

                  EPDDrawContainClear PROC
;;;3461   void EPDDrawContainClear(BOOL reFreshFlag)
005d50  e92d4030          PUSH     {r4,r5,lr}
;;;3462   {
005d54  e24dd014          SUB      sp,sp,#0x14
005d58  e1a04000          MOV      r4,r0
;;;3463       positionSingleInfo mPositionSingleInfoTmp;
;;;3464       
;;;3465       unsigned int* buff = (unsigned int*)&mPositionSingleInfoTmp;   
005d5c  e28d5004          ADD      r5,sp,#4
;;;3466       #if(SHOW_TIME_DEBUG)
;;;3467       TickType_t tickLocalStart = xTaskGetTickCount();
;;;3468       #endif
;;;3469       mPositionSingleInfoTmp.itemNum = 1;
005d60  e3a00001          MOV      r0,#1
005d64  e58d0004          STR      r0,[sp,#4]
;;;3470       mPositionSingleInfoTmp.info.bmpId = EPD_PICT_CONTAIN_CLEAR_INDEX;
005d68  e3a0008a          MOV      r0,#0x8a
005d6c  e58d0008          STR      r0,[sp,#8]
;;;3471       
;;;3472       mPositionSingleInfoTmp.info.xPos = 47;
005d70  e3a0002f          MOV      r0,#0x2f
005d74  e58d000c          STR      r0,[sp,#0xc]
;;;3473       mPositionSingleInfoTmp.info.yPos = 74;
005d78  e3a0004a          MOV      r0,#0x4a
005d7c  e58d0010          STR      r0,[sp,#0x10]
;;;3474       
;;;3475       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
005d80  e3a03000          MOV      r3,#0
005d84  e3e02000          MVN      r2,#0
005d88  e1a01003          MOV      r1,r3
005d8c  e59f01d8          LDR      r0,|L1.24428|
005d90  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005d94  ebfffffe          BL       xQueueGenericReceive
;;;3476       LoadImages(buff, mPositionSingleInfoTmp.itemNum);
005d98  e1a00005          MOV      r0,r5
005d9c  e59d1004          LDR      r1,[sp,#4]
005da0  ebfffffe          BL       LoadImages
;;;3477       if(reFreshFlag)
005da4  e3540000          CMP      r4,#0
005da8  0a000006          BEQ      |L1.24008|
;;;3478           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005dac  e3a00001          MOV      r0,#1
005db0  e58d0000          STR      r0,[sp,#0]
005db4  e59f31ac          LDR      r3,|L1.24424|
005db8  e3a02b01          MOV      r2,#0x400
005dbc  e3a01000          MOV      r1,#0
005dc0  e1a00001          MOV      r0,r1
005dc4  ebfffffe          BL       DisplayArea
                  |L1.24008|
;;;3479       xSemaphoreGive(xSemaphore);  
005dc8  e3a03000          MOV      r3,#0
005dcc  e1a02003          MOV      r2,r3
005dd0  e1a01003          MOV      r1,r3
005dd4  e59f0190          LDR      r0,|L1.24428|
005dd8  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005ddc  ebfffffe          BL       xQueueGenericSend
;;;3480       #if(SHOW_TIME_DEBUG)
;;;3481       sysprintf(" [INFO EPD] <EPDDrawContainClear>  [%d].\n", xTaskGetTickCount() - tickLocalStart); 
;;;3482       #endif
;;;3483   }
005de0  e28dd014          ADD      sp,sp,#0x14
005de4  e8bd8030          POP      {r4,r5,pc}
;;;3484   #define SEL_DEPOSIT_TIME_TOP_FONT_LINE_INDEX        EPD_PICT_NUM_BIG_INDEX//EPD_PICT_LINE_MEDIUM_INDEX  //?????
                          ENDP

                  EPDDrawTime PROC
;;;3518   
;;;3519   void EPDDrawTime(BOOL reFreshFlag, time_t time)
005de8  e92d4070          PUSH     {r4-r6,lr}
;;;3520   {
005dec  e24ddc01          SUB      sp,sp,#0x100
005df0  e1a04000          MOV      r4,r0
005df4  e1a05001          MOV      r5,r1
;;;3521       positionTmpInfo mPositionTmpInfo;
;;;3522       timeIdInfo idInfo;
;;;3523       
;;;3524       unsigned int* buff = (unsigned int*)&mPositionTmpInfo;   
005df8  e28d600c          ADD      r6,sp,#0xc
;;;3525       mPositionTmpInfo.itemNum = 5;
005dfc  e3a00005          MOV      r0,#5
005e00  e58d000c          STR      r0,[sp,#0xc]
;;;3526       
;;;3527       if(getIDFromTime(time, &idInfo))
005e04  e28d1004          ADD      r1,sp,#4
005e08  e1a00005          MOV      r0,r5
005e0c  ebfffffe          BL       getIDFromTime
005e10  e3500000          CMP      r0,#0
005e14  0a000038          BEQ      |L1.24316|
;;;3528       {
;;;3529           int i;
;;;3530           for(i = 0; i<mPositionTmpInfo.itemNum; i++)
005e18  e3a00000          MOV      r0,#0
005e1c  ea000032          B        |L1.24300|
                  |L1.24096|
;;;3531           {
;;;3532               if(i == 0)
005e20  e3500000          CMP      r0,#0
005e24  1a00000a          BNE      |L1.24148|
;;;3533               {     
;;;3534                   mPositionTmpInfo.info[i].xPos = TIME_START_X_POSITION;
005e28  e59f1158          LDR      r1,|L1.24456|
005e2c  e0802080          ADD      r2,r0,r0,LSL #1
005e30  e28d3010          ADD      r3,sp,#0x10
005e34  e0832102          ADD      r2,r3,r2,LSL #2
005e38  e5821004          STR      r1,[r2,#4]
;;;3535                   mPositionTmpInfo.info[i].yPos = TIME_START_Y_POSITION;
005e3c  e3a010dc          MOV      r1,#0xdc
005e40  e0802080          ADD      r2,r0,r0,LSL #1
005e44  e28d3010          ADD      r3,sp,#0x10
005e48  e0832102          ADD      r2,r3,r2,LSL #2
005e4c  e5821008          STR      r1,[r2,#8]
005e50  ea00001f          B        |L1.24276|
                  |L1.24148|
;;;3536               }
;;;3537               else
;;;3538               {
;;;3539                   if(i == 2)
005e54  e3500002          CMP      r0,#2
005e58  1a00000a          BNE      |L1.24200|
;;;3540                   {
;;;3541                       mPositionTmpInfo.info[i].xPos = mPositionTmpInfo.info[i-1].xPos + (unsigned int)TIME_COLON_FONT_WIDTH;
005e5c  e2401001          SUB      r1,r0,#1
005e60  e0811081          ADD      r1,r1,r1,LSL #1
005e64  e28d2010          ADD      r2,sp,#0x10
005e68  e0821101          ADD      r1,r2,r1,LSL #2
005e6c  e5911004          LDR      r1,[r1,#4]
005e70  e2411037          SUB      r1,r1,#0x37
005e74  e0802080          ADD      r2,r0,r0,LSL #1
005e78  e28d3010          ADD      r3,sp,#0x10
005e7c  e0832102          ADD      r2,r3,r2,LSL #2
005e80  e5821004          STR      r1,[r2,#4]
005e84  ea000009          B        |L1.24240|
                  |L1.24200|
;;;3542                   }
;;;3543                   else
;;;3544                   {
;;;3545                       mPositionTmpInfo.info[i].xPos = mPositionTmpInfo.info[i-1].xPos + (unsigned int)TIME_FONT_WIDTH;
005e88  e2401001          SUB      r1,r0,#1
005e8c  e0811081          ADD      r1,r1,r1,LSL #1
005e90  e28d2010          ADD      r2,sp,#0x10
005e94  e0821101          ADD      r1,r2,r1,LSL #2
005e98  e5911004          LDR      r1,[r1,#4]
005e9c  e2411040          SUB      r1,r1,#0x40
005ea0  e0802080          ADD      r2,r0,r0,LSL #1
005ea4  e28d3010          ADD      r3,sp,#0x10
005ea8  e0832102          ADD      r2,r3,r2,LSL #2
005eac  e5821004          STR      r1,[r2,#4]
                  |L1.24240|
;;;3546                   }
;;;3547                   mPositionTmpInfo.info[i].yPos = mPositionTmpInfo.info[i-1].yPos;
005eb0  e2401001          SUB      r1,r0,#1
005eb4  e0811081          ADD      r1,r1,r1,LSL #1
005eb8  e28d2010          ADD      r2,sp,#0x10
005ebc  e0821101          ADD      r1,r2,r1,LSL #2
005ec0  e5911008          LDR      r1,[r1,#8]
005ec4  e0802080          ADD      r2,r0,r0,LSL #1
005ec8  e28d3010          ADD      r3,sp,#0x10
005ecc  e0832102          ADD      r2,r3,r2,LSL #2
005ed0  e5821008          STR      r1,[r2,#8]
                  |L1.24276|
;;;3548               }
;;;3549               mPositionTmpInfo.info[i].bmpId = idInfo.id[i];
005ed4  e28d1004          ADD      r1,sp,#4
005ed8  e7d11000          LDRB     r1,[r1,r0]
005edc  e0802080          ADD      r2,r0,r0,LSL #1
005ee0  e28d3010          ADD      r3,sp,#0x10
005ee4  e7831102          STR      r1,[r3,r2,LSL #2]
005ee8  e2800001          ADD      r0,r0,#1              ;3530
                  |L1.24300|
005eec  e59d100c          LDR      r1,[sp,#0xc]          ;3530
005ef0  e1510000          CMP      r1,r0                 ;3530
005ef4  8affffc9          BHI      |L1.24096|
;;;3550           }
;;;3551       }   
005ef8  e1a00000          MOV      r0,r0
                  |L1.24316|
;;;3552       
;;;3553       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
005efc  e3a03000          MOV      r3,#0
005f00  e3e02000          MVN      r2,#0
005f04  e1a01003          MOV      r1,r3
005f08  e59f005c          LDR      r0,|L1.24428|
005f0c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005f10  ebfffffe          BL       xQueueGenericReceive
;;;3554       LoadImages(buff, mPositionTmpInfo.itemNum);
005f14  e1a00006          MOV      r0,r6
005f18  e59d100c          LDR      r1,[sp,#0xc]
005f1c  ebfffffe          BL       LoadImages
;;;3555       if(reFreshFlag)
005f20  e3540000          CMP      r4,#0
005f24  0a000006          BEQ      |L1.24388|
;;;3556           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
005f28  e3a00001          MOV      r0,#1
005f2c  e58d0000          STR      r0,[sp,#0]
005f30  e59f3030          LDR      r3,|L1.24424|
005f34  e3a02b01          MOV      r2,#0x400
005f38  e3a01000          MOV      r1,#0
005f3c  e1a00001          MOV      r0,r1
005f40  ebfffffe          BL       DisplayArea
                  |L1.24388|
;;;3557       xSemaphoreGive(xSemaphore);  
005f44  e3a03000          MOV      r3,#0
005f48  e1a02003          MOV      r2,r3
005f4c  e1a01003          MOV      r1,r3
005f50  e59f0014          LDR      r0,|L1.24428|
005f54  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
005f58  ebfffffe          BL       xQueueGenericSend
;;;3558   }
005f5c  e28ddc01          ADD      sp,sp,#0x100
005f60  e8bd8070          POP      {r4-r6,pc}
                  |L1.24420|
                          DCD      pSpiInterface
                  |L1.24424|
                          DCD      0x000002f6
                  |L1.24428|
                          DCD      xSemaphore
                  |L1.24432|
                          DCD      mBannerPositionInfo+0x4
                  |L1.24436|
                          DCD      mBannerPositionInfo
                  |L1.24440|
                          DCD      mContainPositionInfo+0x4
                  |L1.24444|
                          DCD      mContainNumberPositionInfo+0x4
                  |L1.24448|
                          DCD      mDepositTimeAllPositionInfo
                  |L1.24452|
                          DCD      PositionAllItemInfo
                  |L1.24456|
                          DCD      0x00000212
                          ENDP

                  getIDFromCost PROC
;;;3560   #define SEL_DEPOSIT_TIME_DOWN_FONT_NUM_INDEX         EPD_PICT_NUM_BIG_INDEX
;;;3561   uint8_t getIDFromCost(uint32_t cost, costIdInfo* info)
005f8c  e92d47f0          PUSH     {r4-r10,lr}
;;;3562   {
005f90  e1a04000          MOV      r4,r0
005f94  e1a06001          MOV      r6,r1
;;;3563       uint8_t totalPosition = 0;
005f98  e3a05000          MOV      r5,#0
;;;3564       if(cost >= pow10Ex(MAX_COST_POSITION))
005f9c  e3a00004          MOV      r0,#4
005fa0  ebfffffe          BL       pow10Ex
005fa4  e1500004          CMP      r0,r4
005fa8  8a000002          BHI      |L1.24504|
;;;3565       {
;;;3566           cost = pow10Ex(MAX_COST_POSITION) - 1;
005fac  e3a00004          MOV      r0,#4
005fb0  ebfffffe          BL       pow10Ex
005fb4  e2404001          SUB      r4,r0,#1
                  |L1.24504|
;;;3567       }
;;;3568           
;;;3569       if(cost == 0)
005fb8  e3540000          CMP      r4,#0
005fbc  1a000003          BNE      |L1.24528|
;;;3570       {           
;;;3571           info->id[totalPosition] = SEL_DEPOSIT_TIME_DOWN_FONT_NUM_INDEX;
005fc0  e3a0002a          MOV      r0,#0x2a
005fc4  e7c60005          STRB     r0,[r6,r5]
;;;3572           totalPosition = 1;
005fc8  e3a05001          MOV      r5,#1
005fcc  ea00001f          B        |L1.24656|
                  |L1.24528|
;;;3573       }
;;;3574       else
;;;3575       {   
;;;3576           int i;
;;;3577           for(i = 0; i<MAX_COST_POSITION; i++) 
005fd0  e3a07000          MOV      r7,#0
005fd4  ea00001a          B        |L1.24644|
                  |L1.24536|
;;;3578           {
;;;3579                   uint8_t targetValue = MAX_COST_POSITION - 1 - i;
005fd8  e2670003          RSB      r0,r7,#3
005fdc  e20080ff          AND      r8,r0,#0xff
;;;3580                   //sysprintf(" --> check : %d, %d(%d) \n", downCost, pow10Ex(targetValue));
;;;3581                   if(cost >= pow10Ex(targetValue))
005fe0  e1a00008          MOV      r0,r8
005fe4  ebfffffe          BL       pow10Ex
005fe8  e1500004          CMP      r0,r4
005fec  8a000013          BHI      |L1.24640|
;;;3582                   {                    
;;;3583                       //sysprintf(" --> [%d]: targetValue = %d, [%d:%d] (%d: %d) \n ", i, targetValue, 
;;;3584                       //                        downCost/pow10Ex(targetValue), (downCost/pow10Ex(targetValue + 1))*10, pow10Ex(targetValue), pow10Ex(targetValue + 1));
;;;3585                       info->id[totalPosition] = cost/pow10Ex(targetValue) - (cost/pow10Ex(targetValue + 1))*10 + SEL_DEPOSIT_TIME_DOWN_FONT_NUM_INDEX;                    
005ff0  e1a00008          MOV      r0,r8
005ff4  ebfffffe          BL       pow10Ex
005ff8  e1a09000          MOV      r9,r0
005ffc  e1a01009          MOV      r1,r9
006000  e1a00004          MOV      r0,r4
006004  ebfffffe          BL       __aeabi_uidivmod
006008  e1a0a000          MOV      r10,r0
00600c  e2881001          ADD      r1,r8,#1
006010  e20100ff          AND      r0,r1,#0xff
006014  ebfffffe          BL       pow10Ex
006018  e1a09000          MOV      r9,r0
00601c  e1a01009          MOV      r1,r9
006020  e1a00004          MOV      r0,r4
006024  ebfffffe          BL       __aeabi_uidivmod
006028  e0800100          ADD      r0,r0,r0,LSL #2
00602c  e04a0080          SUB      r0,r10,r0,LSL #1
006030  e280002a          ADD      r0,r0,#0x2a
006034  e7c60005          STRB     r0,[r6,r5]
;;;3586                       //sysprintf("EPD:ShowSelDepositTime get position(%d) : %d,  totalPosition = %d\n", i, showNum[totalPosition] - SEL_DEPOSIT_TIME_DOWN_FONT_NUM_INDEX, totalPosition);
;;;3587                       totalPosition++;
006038  e2850001          ADD      r0,r5,#1
00603c  e20050ff          AND      r5,r0,#0xff
                  |L1.24640|
006040  e2877001          ADD      r7,r7,#1              ;3577
                  |L1.24644|
006044  e3570004          CMP      r7,#4                 ;3577
006048  baffffe2          BLT      |L1.24536|
;;;3588                   }
;;;3589                   else
;;;3590                   {
;;;3591                       //sysprintf("EPD:ShowSelDepositTime ignore position(%d)...\n", i);
;;;3592                   }
;;;3593           }
;;;3594       }
00604c  e1a00000          MOV      r0,r0
                  |L1.24656|
;;;3595       return totalPosition;
006050  e1a00005          MOV      r0,r5
;;;3596   }  
006054  e8bd87f0          POP      {r4-r10,pc}
;;;3597   #define COST_START_X_POSITION     400
                          ENDP

                  EPDDrawCost PROC
;;;3601   #define COST_COLON_FONT_WIDTH      -55
;;;3602   void EPDDrawCost(BOOL reFreshFlag, uint32_t cost)
006058  e92d43f0          PUSH     {r4-r9,lr}
;;;3603   {
00605c  e24dd0fc          SUB      sp,sp,#0xfc
006060  e1a07000          MOV      r7,r0
006064  e1a08001          MOV      r8,r1
;;;3604       positionTmpInfo mPositionTmpInfo;
;;;3605       costIdInfo idInfo; 
;;;3606       uint16_t targetX;
;;;3607       int i;    
;;;3608       unsigned int* buff = (unsigned int*)&mPositionTmpInfo;  
006068  e28d9008          ADD      r9,sp,#8
;;;3609   
;;;3610       uint8_t totalPosition = getIDFromCost(cost, &idInfo);    
00606c  e28d1004          ADD      r1,sp,#4
006070  e1a00008          MOV      r0,r8
006074  ebfffffe          BL       getIDFromCost
006078  e1a06000          MOV      r6,r0
;;;3611       mPositionTmpInfo.itemNum = totalPosition + 1;
00607c  e2860001          ADD      r0,r6,#1
006080  e58d0008          STR      r0,[sp,#8]
;;;3612       
;;;3613       switch(totalPosition)
006084  e3560006          CMP      r6,#6
006088  308ff106          ADDCC    pc,pc,r6,LSL #2
00608c  ea000014          B        |L1.24804|
006090  ea000013          B        |L1.24804|
006094  ea00000f          B        |L1.24792|
006098  ea00000b          B        |L1.24780|
00609c  ea000007          B        |L1.24768|
0060a0  ea000003          B        |L1.24756|
0060a4  eaffffff          B        |L1.24744|
                  |L1.24744|
;;;3614       {
;;;3615           case 5:
0060a8  e1a00000          MOV      r0,r0
;;;3616               targetX = COST_START_X_POSITION - COST_FONT_WIDTH*3/2;
0060ac  e59f5484          LDR      r5,|L1.25912|
;;;3617               break;
0060b0  ea00000b          B        |L1.24804|
                  |L1.24756|
;;;3618           case 4:
0060b4  e1a00000          MOV      r0,r0
;;;3619               targetX = COST_START_X_POSITION - COST_FONT_WIDTH*2/2;
0060b8  e59f547c          LDR      r5,|L1.25916|
;;;3620               break;
0060bc  ea000008          B        |L1.24804|
                  |L1.24768|
;;;3621           case 3:
0060c0  e1a00000          MOV      r0,r0
;;;3622               targetX = COST_START_X_POSITION - COST_FONT_WIDTH*1/2;
0060c4  e59f5474          LDR      r5,|L1.25920|
;;;3623               break;
0060c8  ea000005          B        |L1.24804|
                  |L1.24780|
;;;3624           case 2:
0060cc  e1a00000          MOV      r0,r0
;;;3625               targetX = COST_START_X_POSITION;
0060d0  e3a05e19          MOV      r5,#0x190
;;;3626               break;
0060d4  ea000002          B        |L1.24804|
                  |L1.24792|
;;;3627           case 1:
0060d8  e1a00000          MOV      r0,r0
;;;3628               targetX = COST_START_X_POSITION + COST_FONT_WIDTH*1/2;
0060dc  e59f5460          LDR      r5,|L1.25924|
;;;3629               break;                
0060e0  e1a00000          MOV      r0,r0
                  |L1.24804|
0060e4  e1a00000          MOV      r0,r0                 ;3617
;;;3630       }
;;;3631         
;;;3632       //mPositionTmpInfo.info[0].bmpId = EPD_PICT_CONTAIN_SELECT_TIME_CAST_BG_INDEX;
;;;3633       mPositionTmpInfo.info[0].bmpId = EPD_PICT_SMALL_CAST_BG_INDEX;
0060e8  e3a0008c          MOV      r0,#0x8c
0060ec  e58d000c          STR      r0,[sp,#0xc]
;;;3634       mPositionTmpInfo.info[0].xPos = targetX - COST_FONT_WIDTH - (460+COST_FONT_WIDTH)-10;         
0060f0  e2450c01          SUB      r0,r5,#0x100
0060f4  e240004a          SUB      r0,r0,#0x4a
0060f8  e58d0010          STR      r0,[sp,#0x10]
;;;3635       mPositionTmpInfo.info[0].yPos = COST_START_Y_POSITION;  
0060fc  e3a00064          MOV      r0,#0x64
006100  e58d0014          STR      r0,[sp,#0x14]
;;;3636       for(i = 1; i<totalPosition+1; i++)
006104  e3a04001          MOV      r4,#1
006108  ea000025          B        |L1.24996|
                  |L1.24844|
;;;3637       {
;;;3638           if(i == 1)
00610c  e3540001          CMP      r4,#1
006110  1a000009          BNE      |L1.24892|
;;;3639           {     
;;;3640               mPositionTmpInfo.info[i].xPos = targetX;
006114  e0840084          ADD      r0,r4,r4,LSL #1
006118  e28d100c          ADD      r1,sp,#0xc
00611c  e0810100          ADD      r0,r1,r0,LSL #2
006120  e5805004          STR      r5,[r0,#4]
;;;3641               mPositionTmpInfo.info[i].yPos = COST_START_Y_POSITION;
006124  e3a00064          MOV      r0,#0x64
006128  e0841084          ADD      r1,r4,r4,LSL #1
00612c  e28d200c          ADD      r2,sp,#0xc
006130  e0821101          ADD      r1,r2,r1,LSL #2
006134  e5810008          STR      r0,[r1,#8]
006138  ea000012          B        |L1.24968|
                  |L1.24892|
;;;3642           }
;;;3643           else
;;;3644           {
;;;3645               mPositionTmpInfo.info[i].xPos = mPositionTmpInfo.info[i-1].xPos + (unsigned int)COST_FONT_WIDTH;
00613c  e2440001          SUB      r0,r4,#1
006140  e0800080          ADD      r0,r0,r0,LSL #1
006144  e28d100c          ADD      r1,sp,#0xc
006148  e0810100          ADD      r0,r1,r0,LSL #2
00614c  e5900004          LDR      r0,[r0,#4]
006150  e2400046          SUB      r0,r0,#0x46
006154  e0841084          ADD      r1,r4,r4,LSL #1
006158  e28d200c          ADD      r2,sp,#0xc
00615c  e0821101          ADD      r1,r2,r1,LSL #2
006160  e5810004          STR      r0,[r1,#4]
;;;3646               mPositionTmpInfo.info[i].yPos = mPositionTmpInfo.info[i-1].yPos;
006164  e2440001          SUB      r0,r4,#1
006168  e0800080          ADD      r0,r0,r0,LSL #1
00616c  e28d100c          ADD      r1,sp,#0xc
006170  e0810100          ADD      r0,r1,r0,LSL #2
006174  e5901008          LDR      r1,[r0,#8]
006178  e0840084          ADD      r0,r4,r4,LSL #1
00617c  e28d200c          ADD      r2,sp,#0xc
006180  e0820100          ADD      r0,r2,r0,LSL #2
006184  e5801008          STR      r1,[r0,#8]
                  |L1.24968|
;;;3647           }
;;;3648           mPositionTmpInfo.info[i].bmpId = idInfo.id[i-1];
006188  e2440001          SUB      r0,r4,#1
00618c  e28d1004          ADD      r1,sp,#4
006190  e7d10000          LDRB     r0,[r1,r0]
006194  e0841084          ADD      r1,r4,r4,LSL #1
006198  e28d200c          ADD      r2,sp,#0xc
00619c  e7820101          STR      r0,[r2,r1,LSL #2]
0061a0  e2844001          ADD      r4,r4,#1              ;3636
                  |L1.24996|
0061a4  e2860001          ADD      r0,r6,#1              ;3636
0061a8  e1540000          CMP      r4,r0                 ;3636
0061ac  baffffd6          BLT      |L1.24844|
;;;3649       }   
;;;3650       
;;;3651       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
0061b0  e3a03000          MOV      r3,#0
0061b4  e3e02000          MVN      r2,#0
0061b8  e1a01003          MOV      r1,r3
0061bc  e51f0258          LDR      r0,|L1.24428|
0061c0  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0061c4  ebfffffe          BL       xQueueGenericReceive
;;;3652       LoadImages(buff, mPositionTmpInfo.itemNum);
0061c8  e1a00009          MOV      r0,r9
0061cc  e59d1008          LDR      r1,[sp,#8]
0061d0  ebfffffe          BL       LoadImages
;;;3653       if(reFreshFlag)
0061d4  e3570000          CMP      r7,#0
0061d8  0a000006          BEQ      |L1.25080|
;;;3654           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);  
0061dc  e3a00001          MOV      r0,#1
0061e0  e58d0000          STR      r0,[sp,#0]
0061e4  e51f3284          LDR      r3,|L1.24424|
0061e8  e3a02b01          MOV      r2,#0x400
0061ec  e3a01000          MOV      r1,#0
0061f0  e1a00001          MOV      r0,r1
0061f4  ebfffffe          BL       DisplayArea
                  |L1.25080|
;;;3655       xSemaphoreGive(xSemaphore);  
0061f8  e3a03000          MOV      r3,#0
0061fc  e1a02003          MOV      r2,r3
006200  e1a01003          MOV      r1,r3
006204  e51f02a0          LDR      r0,|L1.24428|
006208  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00620c  ebfffffe          BL       xQueueGenericSend
;;;3656   }
006210  e28dd0fc          ADD      sp,sp,#0xfc
006214  e8bd83f0          POP      {r4-r9,pc}
;;;3657   
                          ENDP

                  ShowVoltage PROC
;;;3679   #define VOLTAGE_TOTAL_NUM_POSITION      12
;;;3680   void ShowVoltage(time_t leftVoltage, BOOL leftShow, time_t rightVoltage, BOOL rightShow, BOOL reFreshFlag)
006218  e92d4fff          PUSH     {r0-r11,lr}
;;;3681   {
00621c  e24dd0a4          SUB      sp,sp,#0xa4
006220  e1a0b001          MOV      r11,r1
;;;3682       
;;;3683       uint8_t showNum[VOLTAGE_TOTAL_NUM_POSITION];
;;;3684       #if(BUILD_DEBUG_VERSION)
;;;3685       sysprintf("EPD:ShowVoltage [top:%02d] : [down:%02d] ...\n", leftVoltage, rightVoltage );
;;;3686       #endif
;;;3687   
;;;3688       int i;
;;;3689       unsigned int buff[3*VOLTAGE_TOTAL_NUM_POSITION+1];
;;;3690       uint8_t leftVol1, leftVol2, rightVol1, rightVol2;
;;;3691       uint8_t buffIndex = 0;
006224  e3a05000          MOV      r5,#0
;;;3692       uint8_t counter = 0;
006228  e3a06000          MOV      r6,#0
;;;3693       buff[0] = 0;
00622c  e3a00000          MOV      r0,#0
006230  e58d0004          STR      r0,[sp,#4]
;;;3694   
;;;3695       if(!leftShow && !rightShow)
006234  e35b0000          CMP      r11,#0
006238  1a000006          BNE      |L1.25176|
00623c  e59d00b0          LDR      r0,[sp,#0xb0]
006240  e3500000          CMP      r0,#0
006244  1a000003          BNE      |L1.25176|
;;;3696       {
;;;3697           sysprintf("EPD:ShowVoltage ignore!!!!\r\n");
006248  e28f0fbe          ADR      r0,|L1.25928|
00624c  ebfffffe          BL       sysprintf
                  |L1.25168|
;;;3698           return;
;;;3699       }
;;;3700       if(leftShow)
;;;3701       {
;;;3702           if(leftVoltage == 0)
;;;3703           {
;;;3704               leftVol1 = 0;
;;;3705               leftVol2 = 0;
;;;3706               
;;;3707               showNum[0] = VOLTAGE_LEFT_FONT_LINE_INDEX;
;;;3708               showNum[1] = VOLTAGE_LEFT_FONT_LINE_INDEX;
;;;3709               showNum[2] = VOLTAGE_LEFT_FONT_POINT_INDEX;
;;;3710               showNum[3] = VOLTAGE_LEFT_FONT_LINE_INDEX;
;;;3711               showNum[4] = VOLTAGE_LEFT_FONT_LINE_INDEX;
;;;3712               showNum[5] = VOLTAGE_LEFT_FONT_V_INDEX;
;;;3713           }
;;;3714           else
;;;3715           {
;;;3716               leftVol1 = leftVoltage/100;
;;;3717               leftVol2 = leftVoltage%100;
;;;3718               
;;;3719               showNum[0] = leftVol1/10 + VOLTAGE_LEFT_FONT_NUM_INDEX;
;;;3720               showNum[1] = leftVol1%10 + VOLTAGE_LEFT_FONT_NUM_INDEX;
;;;3721               showNum[2] = VOLTAGE_LEFT_FONT_POINT_INDEX;
;;;3722               showNum[3] = leftVol2/10 + VOLTAGE_LEFT_FONT_NUM_INDEX;
;;;3723               showNum[4] = leftVol2%10 + VOLTAGE_LEFT_FONT_NUM_INDEX;            
;;;3724               showNum[5] = VOLTAGE_LEFT_FONT_V_INDEX;
;;;3725           }
;;;3726           counter = 0;
;;;3727           for(i = 0; i < 6; i++) 
;;;3728           {
;;;3729               if(i == 0)
;;;3730               {
;;;3731                   if(showNum[0] == VOLTAGE_LEFT_FONT_NUM_INDEX)
;;;3732                   {//??????0 ????
;;;3733                       continue;
;;;3734                   }
;;;3735               }
;;;3736               buff[++buffIndex] = showNum[i];
;;;3737               buff[++buffIndex] = VOLTAGE_LEFT_X - counter*VOLTAGE_LEFT_FONT_WIDTH;  
;;;3738               buff[++buffIndex] = VOLTAGE_LEFT_Y; 
;;;3739               counter++;
;;;3740           }
;;;3741           buff[0] = buff[0] + counter;
;;;3742       }
;;;3743       else
;;;3744       {
;;;3745           leftVol1 = 0;
;;;3746           leftVol2 = 0;
;;;3747       }
;;;3748       if(rightShow)
;;;3749       {
;;;3750           if(rightVoltage == 0)
;;;3751           {
;;;3752               rightVol1 = 0;
;;;3753               rightVol2 = 0;
;;;3754               
;;;3755               showNum[0] = VOLTAGE_RIGHT_FONT_LINE_INDEX;
;;;3756               showNum[1] = VOLTAGE_RIGHT_FONT_LINE_INDEX;
;;;3757               showNum[2] = VOLTAGE_RIGHT_FONT_POINT_INDEX;
;;;3758               showNum[3] = VOLTAGE_RIGHT_FONT_LINE_INDEX;
;;;3759               showNum[4] = VOLTAGE_RIGHT_FONT_LINE_INDEX;
;;;3760               showNum[5] = VOLTAGE_RIGHT_FONT_V_INDEX;
;;;3761           }
;;;3762           else
;;;3763           {
;;;3764               rightVol1 = rightVoltage/100;
;;;3765               rightVol2 = rightVoltage%100;
;;;3766   
;;;3767               showNum[0] = rightVol1/10 + VOLTAGE_RIGHT_FONT_NUM_INDEX;
;;;3768               showNum[1] = rightVol1%10 + VOLTAGE_RIGHT_FONT_NUM_INDEX;
;;;3769               showNum[2] = VOLTAGE_RIGHT_FONT_POINT_INDEX;
;;;3770               showNum[3] = rightVol2/10 + VOLTAGE_RIGHT_FONT_NUM_INDEX;
;;;3771               showNum[4] = rightVol2%10 + VOLTAGE_RIGHT_FONT_NUM_INDEX;
;;;3772               showNum[5] = VOLTAGE_RIGHT_FONT_V_INDEX;
;;;3773           }
;;;3774           counter = 0;
;;;3775           for(i = 0; i<6; i++) 
;;;3776           {
;;;3777               if(i == 0)
;;;3778               {
;;;3779                   if(showNum[0] == VOLTAGE_RIGHT_FONT_NUM_INDEX)
;;;3780                   {//??????0 ????
;;;3781                       continue;
;;;3782                   }
;;;3783               }
;;;3784               buff[++buffIndex] = showNum[i];
;;;3785               buff[++buffIndex] = VOLTAGE_RIGHT_X - counter*VOLTAGE_RIGHT_FONT_WIDTH;         
;;;3786               buff[++buffIndex] = VOLTAGE_RIGHT_Y;
;;;3787               counter++;          
;;;3788   
;;;3789           }
;;;3790           buff[0] = buff[0] + counter;
;;;3791       }
;;;3792       else
;;;3793       {
;;;3794           rightVol1 = 0;
;;;3795           rightVol2 = 0;
;;;3796       }  
;;;3797       #if(BUILD_DEBUG_VERSION)
;;;3798       sysprintf("EPD:ShowVoltage [top %02d:%02d] - [down %02d:%02d]...\n", leftVol1, leftVol2, rightVol1, rightVol2);
;;;3799       #endif
;;;3800       #if(0)
;;;3801       for(i = 0; i<buff[0]*3+1; i++) 
;;;3802       {
;;;3803           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;3804       }
;;;3805       #endif
;;;3806       if(buff[0] == 0)
;;;3807       {
;;;3808           sysprintf("EPD:ShowVoltage ignore 2!!!!\r\n");
;;;3809           return;
;;;3810       }
;;;3811       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
;;;3812    
;;;3813       LoadImages(buff, buff[0]);
;;;3814       if(reFreshFlag)
;;;3815           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);   
;;;3816       xSemaphoreGive(xSemaphore);  
;;;3817   }
006250  e28dd0b4          ADD      sp,sp,#0xb4
006254  e8bd8ff0          POP      {r4-r11,pc}
                  |L1.25176|
006258  e35b0000          CMP      r11,#0                ;3700
00625c  0a000058          BEQ      |L1.25540|
006260  e59d00a4          LDR      r0,[sp,#0xa4]         ;3702
006264  e3500000          CMP      r0,#0                 ;3702
006268  1a00000c          BNE      |L1.25248|
00626c  e3a07000          MOV      r7,#0                 ;3704
006270  e3a08000          MOV      r8,#0                 ;3705
006274  e3a00051          MOV      r0,#0x51              ;3707
006278  e5cd0098          STRB     r0,[sp,#0x98]         ;3707
00627c  e5cd0099          STRB     r0,[sp,#0x99]         ;3708
006280  e3a0005e          MOV      r0,#0x5e              ;3709
006284  e5cd009a          STRB     r0,[sp,#0x9a]         ;3709
006288  e3a00051          MOV      r0,#0x51              ;3710
00628c  e5cd009b          STRB     r0,[sp,#0x9b]         ;3710
006290  e5cd009c          STRB     r0,[sp,#0x9c]         ;3711
006294  e3a0005f          MOV      r0,#0x5f              ;3712
006298  e5cd009d          STRB     r0,[sp,#0x9d]         ;3712
00629c  ea00001f          B        |L1.25376|
                  |L1.25248|
0062a0  e3a01064          MOV      r1,#0x64              ;3716
0062a4  e59d00a4          LDR      r0,[sp,#0xa4]         ;3716
0062a8  ebfffffe          BL       __aeabi_uidivmod
0062ac  e20070ff          AND      r7,r0,#0xff           ;3716
0062b0  e3a01064          MOV      r1,#0x64              ;3717
0062b4  e59d00a4          LDR      r0,[sp,#0xa4]         ;3717
0062b8  ebfffffe          BL       __aeabi_uidivmod
0062bc  e1a08001          MOV      r8,r1                 ;3717
0062c0  e3a0100a          MOV      r1,#0xa               ;3719
0062c4  e1a00007          MOV      r0,r7                 ;3719
0062c8  ebfffffe          BL       __aeabi_idivmod
0062cc  e2800051          ADD      r0,r0,#0x51           ;3719
0062d0  e5cd0098          STRB     r0,[sp,#0x98]         ;3719
0062d4  e3a0100a          MOV      r1,#0xa               ;3720
0062d8  e1a00007          MOV      r0,r7                 ;3720
0062dc  ebfffffe          BL       __aeabi_idivmod
0062e0  e2810051          ADD      r0,r1,#0x51           ;3720
0062e4  e5cd0099          STRB     r0,[sp,#0x99]         ;3720
0062e8  e3a0005e          MOV      r0,#0x5e              ;3721
0062ec  e5cd009a          STRB     r0,[sp,#0x9a]         ;3721
0062f0  e3a0100a          MOV      r1,#0xa               ;3722
0062f4  e1a00008          MOV      r0,r8                 ;3722
0062f8  ebfffffe          BL       __aeabi_idivmod
0062fc  e2800051          ADD      r0,r0,#0x51           ;3722
006300  e5cd009b          STRB     r0,[sp,#0x9b]         ;3722
006304  e3a0100a          MOV      r1,#0xa               ;3723
006308  e1a00008          MOV      r0,r8                 ;3723
00630c  ebfffffe          BL       __aeabi_idivmod
006310  e2810051          ADD      r0,r1,#0x51           ;3723
006314  e5cd009c          STRB     r0,[sp,#0x9c]         ;3723
006318  e3a0005f          MOV      r0,#0x5f              ;3724
00631c  e5cd009d          STRB     r0,[sp,#0x9d]         ;3724
                  |L1.25376|
006320  e3a06000          MOV      r6,#0                 ;3726
006324  e3a04000          MOV      r4,#0                 ;3727
006328  ea00001f          B        |L1.25516|
                  |L1.25388|
00632c  e3540000          CMP      r4,#0                 ;3729
006330  1a000003          BNE      |L1.25412|
006334  e5dd0098          LDRB     r0,[sp,#0x98]         ;3731
006338  e3500051          CMP      r0,#0x51              ;3731
00633c  1a000000          BNE      |L1.25412|
006340  ea000018          B        |L1.25512|
                  |L1.25412|
006344  e28d0098          ADD      r0,sp,#0x98           ;3736
006348  e7d00004          LDRB     r0,[r0,r4]            ;3736
00634c  e2851001          ADD      r1,r5,#1              ;3736
006350  e20110ff          AND      r1,r1,#0xff           ;3736
006354  e1a05001          MOV      r5,r1                 ;3736
006358  e28d2004          ADD      r2,sp,#4              ;3736
00635c  e7820101          STR      r0,[r2,r1,LSL #2]     ;3736
006360  e0660186          RSB      r0,r6,r6,LSL #3       ;3737
006364  e0800080          ADD      r0,r0,r0,LSL #1       ;3737
006368  e59f11f8          LDR      r1,|L1.25960|
00636c  e0410000          SUB      r0,r1,r0              ;3737
006370  e2851001          ADD      r1,r5,#1              ;3737
006374  e20110ff          AND      r1,r1,#0xff           ;3737
006378  e1a05001          MOV      r5,r1                 ;3737
00637c  e28d2004          ADD      r2,sp,#4              ;3737
006380  e7820101          STR      r0,[r2,r1,LSL #2]     ;3737
006384  e3a00046          MOV      r0,#0x46              ;3738
006388  e2851001          ADD      r1,r5,#1              ;3738
00638c  e20110ff          AND      r1,r1,#0xff           ;3738
006390  e1a05001          MOV      r5,r1                 ;3738
006394  e28d2004          ADD      r2,sp,#4              ;3738
006398  e7820101          STR      r0,[r2,r1,LSL #2]     ;3738
00639c  e2860001          ADD      r0,r6,#1              ;3739
0063a0  e20060ff          AND      r6,r0,#0xff           ;3739
0063a4  e1a00000          MOV      r0,r0                 ;3733
                  |L1.25512|
0063a8  e2844001          ADD      r4,r4,#1              ;3727
                  |L1.25516|
0063ac  e3540006          CMP      r4,#6                 ;3727
0063b0  baffffdd          BLT      |L1.25388|
0063b4  e59d0004          LDR      r0,[sp,#4]            ;3741
0063b8  e0800006          ADD      r0,r0,r6              ;3741
0063bc  e58d0004          STR      r0,[sp,#4]            ;3741
0063c0  ea000001          B        |L1.25548|
                  |L1.25540|
0063c4  e3a07000          MOV      r7,#0                 ;3745
0063c8  e3a08000          MOV      r8,#0                 ;3746
                  |L1.25548|
0063cc  e59d00b0          LDR      r0,[sp,#0xb0]         ;3748
0063d0  e3500000          CMP      r0,#0                 ;3748
0063d4  0a000064          BEQ      |L1.25964|
0063d8  e59d00ac          LDR      r0,[sp,#0xac]         ;3750
0063dc  e3500000          CMP      r0,#0                 ;3750
0063e0  1a00000c          BNE      |L1.25624|
0063e4  e3a09000          MOV      r9,#0                 ;3752
0063e8  e3a0a000          MOV      r10,#0                ;3753
0063ec  e3a00051          MOV      r0,#0x51              ;3755
0063f0  e5cd0098          STRB     r0,[sp,#0x98]         ;3755
0063f4  e5cd0099          STRB     r0,[sp,#0x99]         ;3756
0063f8  e3a0005e          MOV      r0,#0x5e              ;3757
0063fc  e5cd009a          STRB     r0,[sp,#0x9a]         ;3757
006400  e3a00051          MOV      r0,#0x51              ;3758
006404  e5cd009b          STRB     r0,[sp,#0x9b]         ;3758
006408  e5cd009c          STRB     r0,[sp,#0x9c]         ;3759
00640c  e3a0005f          MOV      r0,#0x5f              ;3760
006410  e5cd009d          STRB     r0,[sp,#0x9d]         ;3760
006414  ea00001f          B        |L1.25752|
                  |L1.25624|
006418  e3a01064          MOV      r1,#0x64              ;3764
00641c  e59d00ac          LDR      r0,[sp,#0xac]         ;3764
006420  ebfffffe          BL       __aeabi_uidivmod
006424  e20090ff          AND      r9,r0,#0xff           ;3764
006428  e3a01064          MOV      r1,#0x64              ;3765
00642c  e59d00ac          LDR      r0,[sp,#0xac]         ;3765
006430  ebfffffe          BL       __aeabi_uidivmod
006434  e1a0a001          MOV      r10,r1                ;3765
006438  e3a0100a          MOV      r1,#0xa               ;3767
00643c  e1a00009          MOV      r0,r9                 ;3767
006440  ebfffffe          BL       __aeabi_idivmod
006444  e2800051          ADD      r0,r0,#0x51           ;3767
006448  e5cd0098          STRB     r0,[sp,#0x98]         ;3767
00644c  e3a0100a          MOV      r1,#0xa               ;3768
006450  e1a00009          MOV      r0,r9                 ;3768
006454  ebfffffe          BL       __aeabi_idivmod
006458  e2810051          ADD      r0,r1,#0x51           ;3768
00645c  e5cd0099          STRB     r0,[sp,#0x99]         ;3768
006460  e3a0005e          MOV      r0,#0x5e              ;3769
006464  e5cd009a          STRB     r0,[sp,#0x9a]         ;3769
006468  e3a0100a          MOV      r1,#0xa               ;3770
00646c  e1a0000a          MOV      r0,r10                ;3770
006470  ebfffffe          BL       __aeabi_idivmod
006474  e2800051          ADD      r0,r0,#0x51           ;3770
006478  e5cd009b          STRB     r0,[sp,#0x9b]         ;3770
00647c  e3a0100a          MOV      r1,#0xa               ;3771
006480  e1a0000a          MOV      r0,r10                ;3771
006484  ebfffffe          BL       __aeabi_idivmod
006488  e2810051          ADD      r0,r1,#0x51           ;3771
00648c  e5cd009c          STRB     r0,[sp,#0x9c]         ;3771
006490  e3a0005f          MOV      r0,#0x5f              ;3772
006494  e5cd009d          STRB     r0,[sp,#0x9d]         ;3772
                  |L1.25752|
006498  e3a06000          MOV      r6,#0                 ;3774
00649c  e3a04000          MOV      r4,#0                 ;3775
0064a0  ea00001e          B        |L1.25888|
                  |L1.25764|
0064a4  e3540000          CMP      r4,#0                 ;3777
0064a8  1a000003          BNE      |L1.25788|
0064ac  e5dd0098          LDRB     r0,[sp,#0x98]         ;3779
0064b0  e3500051          CMP      r0,#0x51              ;3779
0064b4  1a000000          BNE      |L1.25788|
0064b8  ea000017          B        |L1.25884|
                  |L1.25788|
0064bc  e28d0098          ADD      r0,sp,#0x98           ;3784
0064c0  e7d00004          LDRB     r0,[r0,r4]            ;3784
0064c4  e2851001          ADD      r1,r5,#1              ;3784
0064c8  e20110ff          AND      r1,r1,#0xff           ;3784
0064cc  e1a05001          MOV      r5,r1                 ;3784
0064d0  e28d2004          ADD      r2,sp,#4              ;3784
0064d4  e7820101          STR      r0,[r2,r1,LSL #2]     ;3784
0064d8  e0660186          RSB      r0,r6,r6,LSL #3       ;3785
0064dc  e0800080          ADD      r0,r0,r0,LSL #1       ;3785
0064e0  e26000dc          RSB      r0,r0,#0xdc           ;3785
0064e4  e2851001          ADD      r1,r5,#1              ;3785
0064e8  e20110ff          AND      r1,r1,#0xff           ;3785
0064ec  e1a05001          MOV      r5,r1                 ;3785
0064f0  e28d2004          ADD      r2,sp,#4              ;3785
0064f4  e7820101          STR      r0,[r2,r1,LSL #2]     ;3785
0064f8  e3a00046          MOV      r0,#0x46              ;3786
0064fc  e2851001          ADD      r1,r5,#1              ;3786
006500  e20110ff          AND      r1,r1,#0xff           ;3786
006504  e1a05001          MOV      r5,r1                 ;3786
006508  e28d2004          ADD      r2,sp,#4              ;3786
00650c  e7820101          STR      r0,[r2,r1,LSL #2]     ;3786
006510  e2860001          ADD      r0,r6,#1              ;3787
006514  e20060ff          AND      r6,r0,#0xff           ;3787
006518  e1a00000          MOV      r0,r0                 ;3781
                  |L1.25884|
00651c  e2844001          ADD      r4,r4,#1              ;3775
                  |L1.25888|
006520  e3540006          CMP      r4,#6                 ;3775
006524  baffffde          BLT      |L1.25764|
006528  e59d0004          LDR      r0,[sp,#4]            ;3790
00652c  e0800006          ADD      r0,r0,r6              ;3790
006530  e58d0004          STR      r0,[sp,#4]            ;3790
006534  ea00000e          B        |L1.25972|
                  |L1.25912|
                          DCD      0x000001f9
                  |L1.25916|
                          DCD      0x000001d6
                  |L1.25920|
                          DCD      0x000001b3
                  |L1.25924|
                          DCD      0x0000016d
                  |L1.25928|
006548  4550443a          DCB      "EPD:ShowVoltage ignore!!!!\r\n",0
00654c  53686f77
006550  566f6c74
006554  61676520
006558  69676e6f
00655c  72652121
006560  21210d0a
006564  00      
006565  00                DCB      0
006566  00                DCB      0
006567  00                DCB      0
                  |L1.25960|
                          DCD      0x00000251
                  |L1.25964|
00656c  e3a09000          MOV      r9,#0                 ;3794
006570  e3a0a000          MOV      r10,#0                ;3795
                  |L1.25972|
006574  e59d0004          LDR      r0,[sp,#4]            ;3806
006578  e3500000          CMP      r0,#0                 ;3806
00657c  1a000002          BNE      |L1.25996|
006580  e28f0f7a          ADR      r0,|L1.26480|
006584  ebfffffe          BL       sysprintf
006588  eaffff30          B        |L1.25168|
                  |L1.25996|
00658c  e3a03000          MOV      r3,#0                 ;3811
006590  e3e02000          MVN      r2,#0                 ;3811
006594  e1a01003          MOV      r1,r3                 ;3811
006598  e51f0634          LDR      r0,|L1.24428|
00659c  e5900000          LDR      r0,[r0,#0]            ;3811  ; xSemaphore
0065a0  ebfffffe          BL       xQueueGenericReceive
0065a4  e59d1004          LDR      r1,[sp,#4]            ;3813
0065a8  e28d0004          ADD      r0,sp,#4              ;3813
0065ac  ebfffffe          BL       LoadImages
0065b0  e59d00d8          LDR      r0,[sp,#0xd8]         ;3814
0065b4  e3500000          CMP      r0,#0                 ;3814
0065b8  0a000006          BEQ      |L1.26072|
0065bc  e3a00001          MOV      r0,#1                 ;3815
0065c0  e58d0000          STR      r0,[sp,#0]            ;3815
0065c4  e51f3664          LDR      r3,|L1.24424|
0065c8  e3a02b01          MOV      r2,#0x400             ;3815
0065cc  e3a01000          MOV      r1,#0                 ;3815
0065d0  e1a00001          MOV      r0,r1                 ;3815
0065d4  ebfffffe          BL       DisplayArea
                  |L1.26072|
0065d8  e3a03000          MOV      r3,#0                 ;3816
0065dc  e1a02003          MOV      r2,r3                 ;3816
0065e0  e1a01003          MOV      r1,r3                 ;3816
0065e4  e51f0680          LDR      r0,|L1.24428|
0065e8  e5900000          LDR      r0,[r0,#0]            ;3816  ; xSemaphore
0065ec  ebfffffe          BL       xQueueGenericSend
0065f0  e1a00000          MOV      r0,r0
0065f4  eaffff15          B        |L1.25168|
;;;3818   
                          ENDP

                  ShowBatteryStatus PROC
;;;3825   #define BATTERY_STATUS_TOTAL_NUM_POSITION                   2
;;;3826   void ShowBatteryStatus(uint8_t leftId, BOOL leftShow, uint8_t rightId, BOOL rightShow, BOOL reFreshFlag)
0065f8  e92d43f0          PUSH     {r4-r9,lr}
;;;3827   {
0065fc  e24dd024          SUB      sp,sp,#0x24
006600  e1a07000          MOV      r7,r0
006604  e1a05001          MOV      r5,r1
006608  e1a08002          MOV      r8,r2
00660c  e1a06003          MOV      r6,r3
006610  e59d9040          LDR      r9,[sp,#0x40]
;;;3828       
;;;3829       #if(BUILD_DEBUG_VERSION)
;;;3830       sysprintf("EPD:ShowBatteryStatus [left:%02d] : [right:%02d] ...\n", leftId, rightId );
;;;3831       #endif
;;;3832   
;;;3833       unsigned int buff[3*BATTERY_STATUS_TOTAL_NUM_POSITION+1];
;;;3834       uint8_t buffIndex = 0;
006614  e3a04000          MOV      r4,#0
;;;3835       buff[0] = 0;
006618  e3a00000          MOV      r0,#0
00661c  e58d0008          STR      r0,[sp,#8]
;;;3836   
;;;3837       if(!leftShow && !rightShow)
006620  e3550000          CMP      r5,#0
006624  1a000005          BNE      |L1.26176|
006628  e3560000          CMP      r6,#0
00662c  1a000003          BNE      |L1.26176|
;;;3838       {
;;;3839           sysprintf("EPD:ShowBatteryStatus ignore!!!!\r\n");
006630  e28f0f56          ADR      r0,|L1.26512|
006634  ebfffffe          BL       sysprintf
                  |L1.26168|
;;;3840           return;
;;;3841       }
;;;3842       if(leftShow)
;;;3843       {
;;;3844           buff[++buffIndex] = leftId;
;;;3845           buff[++buffIndex] = BATTERY_STATUS_LEFT_X;  
;;;3846           buff[++buffIndex] = BATTERY_STATUS_LEFT_Y; 
;;;3847           buff[0] = buff[0] + 1;
;;;3848       }
;;;3849       
;;;3850       if(rightShow)
;;;3851       {
;;;3852           buff[++buffIndex] = rightId;
;;;3853           buff[++buffIndex] = BATTERY_STATUS_RIGHT_X;  
;;;3854           buff[++buffIndex] = BATTERY_STATUS_RIGHT_Y; 
;;;3855           buff[0] = buff[0] + 1;
;;;3856       }
;;;3857   
;;;3858       #if(0)
;;;3859       for(i = 0; i<buff[0]*3+1; i++) 
;;;3860       {
;;;3861           sysprintf("EPD:buff[%02d]: 0x%04x(%d).. \n", i, buff[i], buff[i]);  
;;;3862       }
;;;3863       #endif
;;;3864       if(buff[0] == 0)
;;;3865       {
;;;3866           sysprintf("EPD:ShowBatteryStatus ignore 2!!!!\r\n");
;;;3867           return;
;;;3868       }
;;;3869       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
;;;3870    
;;;3871       LoadImages(buff, buff[0]);
;;;3872       if(reFreshFlag)
;;;3873           DisplayArea(0,0,EPD_WIDTH,EPD_HEIGHT,1);   
;;;3874       xSemaphoreGive(xSemaphore);  
;;;3875   }
006638  e28dd024          ADD      sp,sp,#0x24
00663c  e8bd83f0          POP      {r4-r9,pc}
                  |L1.26176|
006640  e3550000          CMP      r5,#0                 ;3842
006644  0a000013          BEQ      |L1.26264|
006648  e2840001          ADD      r0,r4,#1              ;3844
00664c  e20000ff          AND      r0,r0,#0xff           ;3844
006650  e1a04000          MOV      r4,r0                 ;3844
006654  e28d1008          ADD      r1,sp,#8              ;3844
006658  e7817100          STR      r7,[r1,r0,LSL #2]     ;3844
00665c  e59f0150          LDR      r0,|L1.26548|
006660  e2841001          ADD      r1,r4,#1              ;3845
006664  e20110ff          AND      r1,r1,#0xff           ;3845
006668  e1a04001          MOV      r4,r1                 ;3845
00666c  e28d2008          ADD      r2,sp,#8              ;3845
006670  e7820101          STR      r0,[r2,r1,LSL #2]     ;3845
006674  e3a0008e          MOV      r0,#0x8e              ;3846
006678  e2841001          ADD      r1,r4,#1              ;3846
00667c  e20110ff          AND      r1,r1,#0xff           ;3846
006680  e1a04001          MOV      r4,r1                 ;3846
006684  e28d2008          ADD      r2,sp,#8              ;3846
006688  e7820101          STR      r0,[r2,r1,LSL #2]     ;3846
00668c  e59d0008          LDR      r0,[sp,#8]            ;3847
006690  e2800001          ADD      r0,r0,#1              ;3847
006694  e58d0008          STR      r0,[sp,#8]            ;3847
                  |L1.26264|
006698  e3560000          CMP      r6,#0                 ;3850
00669c  0a000013          BEQ      |L1.26352|
0066a0  e2840001          ADD      r0,r4,#1              ;3852
0066a4  e20000ff          AND      r0,r0,#0xff           ;3852
0066a8  e1a04000          MOV      r4,r0                 ;3852
0066ac  e28d1008          ADD      r1,sp,#8              ;3852
0066b0  e7818100          STR      r8,[r1,r0,LSL #2]     ;3852
0066b4  e3a0003a          MOV      r0,#0x3a              ;3853
0066b8  e2841001          ADD      r1,r4,#1              ;3853
0066bc  e20110ff          AND      r1,r1,#0xff           ;3853
0066c0  e1a04001          MOV      r4,r1                 ;3853
0066c4  e28d2008          ADD      r2,sp,#8              ;3853
0066c8  e7820101          STR      r0,[r2,r1,LSL #2]     ;3853
0066cc  e3a0008e          MOV      r0,#0x8e              ;3854
0066d0  e2841001          ADD      r1,r4,#1              ;3854
0066d4  e20110ff          AND      r1,r1,#0xff           ;3854
0066d8  e1a04001          MOV      r4,r1                 ;3854
0066dc  e28d2008          ADD      r2,sp,#8              ;3854
0066e0  e7820101          STR      r0,[r2,r1,LSL #2]     ;3854
0066e4  e59d0008          LDR      r0,[sp,#8]            ;3855
0066e8  e2800001          ADD      r0,r0,#1              ;3855
0066ec  e58d0008          STR      r0,[sp,#8]            ;3855
                  |L1.26352|
0066f0  e59d0008          LDR      r0,[sp,#8]            ;3864
0066f4  e3500000          CMP      r0,#0                 ;3864
0066f8  1a000002          BNE      |L1.26376|
0066fc  e28f00b4          ADR      r0,|L1.26552|
006700  ebfffffe          BL       sysprintf
006704  eaffffcb          B        |L1.26168|
                  |L1.26376|
006708  e3a03000          MOV      r3,#0                 ;3869
00670c  e3e02000          MVN      r2,#0                 ;3869
006710  e1a01003          MOV      r1,r3                 ;3869
006714  e51f07b0          LDR      r0,|L1.24428|
006718  e5900000          LDR      r0,[r0,#0]            ;3869  ; xSemaphore
00671c  ebfffffe          BL       xQueueGenericReceive
006720  e59d1008          LDR      r1,[sp,#8]            ;3871
006724  e28d0008          ADD      r0,sp,#8              ;3871
006728  ebfffffe          BL       LoadImages
00672c  e3590000          CMP      r9,#0                 ;3872
006730  0a000006          BEQ      |L1.26448|
006734  e3a00001          MOV      r0,#1                 ;3873
006738  e58d0000          STR      r0,[sp,#0]            ;3873
00673c  e51f37dc          LDR      r3,|L1.24424|
006740  e3a02b01          MOV      r2,#0x400             ;3873
006744  e3a01000          MOV      r1,#0                 ;3873
006748  e1a00001          MOV      r0,r1                 ;3873
00674c  ebfffffe          BL       DisplayArea
                  |L1.26448|
006750  e3a03000          MOV      r3,#0                 ;3874
006754  e1a02003          MOV      r2,r3                 ;3874
006758  e1a01003          MOV      r1,r3                 ;3874
00675c  e51f07f8          LDR      r0,|L1.24428|
006760  e5900000          LDR      r0,[r0,#0]            ;3874  ; xSemaphore
006764  ebfffffe          BL       xQueueGenericSend
006768  e1a00000          MOV      r0,r0
00676c  eaffffb1          B        |L1.26168|
                  |L1.26480|
006770  4550443a          DCB      "EPD:ShowVoltage ignore 2!!!!\r\n",0
006774  53686f77
006778  566f6c74
00677c  61676520
006780  69676e6f
006784  72652032
006788  21212121
00678c  0d0a00  
00678f  00                DCB      0
                  |L1.26512|
006790  4550443a          DCB      "EPD:ShowBatteryStatus ignore!!!!\r\n",0
006794  53686f77
006798  42617474
00679c  65727953
0067a0  74617475
0067a4  73206967
0067a8  6e6f7265
0067ac  21212121
0067b0  0d0a00  
0067b3  00                DCB      0
                  |L1.26548|
                          DCD      0x000001a5
                  |L1.26552|
0067b8  4550443a          DCB      "EPD:ShowBatteryStatus ignore 2!!!!\r\n",0
0067bc  53686f77
0067c0  42617474
0067c4  65727953
0067c8  74617475
0067cc  73206967
0067d0  6e6f7265
0067d4  20322121
0067d8  21210d0a
0067dc  00      
0067dd  00                DCB      0
0067de  00                DCB      0
0067df  00                DCB      0
                          ENDP

                  EPDEnterCriticalSection PROC
;;;3876   void EPDEnterCriticalSection(void)
0067e0  e92d4010          PUSH     {r4,lr}
;;;3877   {
;;;3878       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
0067e4  e3a03000          MOV      r3,#0
0067e8  e3e02000          MVN      r2,#0
0067ec  e1a01003          MOV      r1,r3
0067f0  e51f088c          LDR      r0,|L1.24428|
0067f4  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
0067f8  ebfffffe          BL       xQueueGenericReceive
;;;3879   }
0067fc  e8bd8010          POP      {r4,pc}
;;;3880   void EPDExitCriticalSection(void)
                          ENDP

                  EPDExitCriticalSection PROC
006800  e92d4010          PUSH     {r4,lr}
;;;3881   {
;;;3882        xSemaphoreGive(xSemaphore);
006804  e3a03000          MOV      r3,#0
006808  e1a02003          MOV      r2,r3
00680c  e1a01003          MOV      r1,r3
006810  e51f08ac          LDR      r0,|L1.24428|
006814  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
006818  ebfffffe          BL       xQueueGenericSend
;;;3883   }
00681c  e8bd8010          POP      {r4,pc}
;;;3884   
                          ENDP

                  EPDSetSleepFunction PROC
;;;3885   void EPDSetSleepFunction(BOOL flag)
006820  e92d4010          PUSH     {r4,lr}
;;;3886   {
006824  e1a04000          MOV      r4,r0
;;;3887       xSemaphoreTake(xSemaphore, portMAX_DELAY); 
006828  e3a03000          MOV      r3,#0
00682c  e3e02000          MVN      r2,#0
006830  e1a01003          MOV      r1,r3
006834  e51f08d0          LDR      r0,|L1.24428|
006838  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
00683c  ebfffffe          BL       xQueueGenericReceive
;;;3888       if(flag)
006840  e3540000          CMP      r4,#0
006844  0a000004          BEQ      |L1.26716|
;;;3889       {
;;;3890           sleepFunctionFlag = TRUE;
006848  e3a00001          MOV      r0,#1
00684c  e59f10ec          LDR      r1,|L1.26944|
006850  e5c10000          STRB     r0,[r1,#0]  ; sleepFunctionFlag
;;;3891           EPDEnterSleep();
006854  ebfffffe          BL       EPDEnterSleep
006858  ea000003          B        |L1.26732|
                  |L1.26716|
;;;3892       }
;;;3893       else
;;;3894       {
;;;3895           sleepFunctionFlag = FALSE;
00685c  e3a00000          MOV      r0,#0
006860  e59f10d8          LDR      r1,|L1.26944|
006864  e5c10000          STRB     r0,[r1,#0]  ; sleepFunctionFlag
;;;3896           EPDExitSleep();
006868  ebfffffe          BL       EPDExitSleep
                  |L1.26732|
;;;3897       }
;;;3898       xSemaphoreGive(xSemaphore);
00686c  e3a03000          MOV      r3,#0
006870  e1a02003          MOV      r2,r3
006874  e1a01003          MOV      r1,r3
006878  e51f0914          LDR      r0,|L1.24428|
00687c  e5900000          LDR      r0,[r0,#0]  ; xSemaphore
006880  ebfffffe          BL       xQueueGenericSend
;;;3899   }
006884  e8bd8010          POP      {r4,pc}
;;;3900   
                          ENDP

                  IT8951WriteReg PROC
;;;3901   void IT8951WriteReg(uint16_t usRegAddr,uint16_t usValue)
006888  e92d4070          PUSH     {r4-r6,lr}
;;;3902   {
00688c  e1a05000          MOV      r5,r0
006890  e1a04001          MOV      r4,r1
;;;3903   	//Send Cmd , Register Address and Write Value
;;;3904   	WriteCmdCode(IT8951_TCON_REG_WR, 2);
006894  e3a01002          MOV      r1,#2
006898  e3a00011          MOV      r0,#0x11
00689c  ebfffffe          BL       WriteCmdCode
;;;3905   	WriteData(usRegAddr,2);
0068a0  e3a01002          MOV      r1,#2
0068a4  e1a00005          MOV      r0,r5
0068a8  ebfffffe          BL       WriteData
;;;3906   	WriteData(usValue,2);
0068ac  e3a01002          MOV      r1,#2
0068b0  e1a00004          MOV      r0,r4
0068b4  ebfffffe          BL       WriteData
;;;3907   }
0068b8  e8bd8070          POP      {r4-r6,pc}
;;;3908   
                          ENDP

                  IT8951GetVCOM PROC
;;;3911   
;;;3912   uint16_t IT8951GetVCOM(void)
0068bc  e92d4010          PUSH     {r4,lr}
;;;3913   {
;;;3914   	uint16_t vcom;
;;;3915       WriteCmdCode(USDEF_I80_CMD_VCOM, 2);
0068c0  e3a01002          MOV      r1,#2
0068c4  e3a00039          MOV      r0,#0x39
0068c8  ebfffffe          BL       WriteCmdCode
;;;3916       WriteData(0,2);
0068cc  e3a01002          MOV      r1,#2
0068d0  e3a00000          MOV      r0,#0
0068d4  ebfffffe          BL       WriteData
;;;3917   	//Read data from Host Data bus
;;;3918   	vcom = ReadDataEx(2);
0068d8  e3a00002          MOV      r0,#2
0068dc  ebfffffe          BL       ReadDataEx
0068e0  e1a04000          MOV      r4,r0
;;;3919   	return vcom;
0068e4  e1a00004          MOV      r0,r4
;;;3920   }
0068e8  e8bd8010          POP      {r4,pc}
;;;3921   
                          ENDP

                  IT8951SetVCOM PROC
;;;3922   void IT8951SetVCOM(uint16_t vcom)
0068ec  e92d4010          PUSH     {r4,lr}
;;;3923   {
0068f0  e1a04000          MOV      r4,r0
;;;3924       WriteCmdCode(USDEF_I80_CMD_VCOM, 2);
0068f4  e3a01002          MOV      r1,#2
0068f8  e3a00039          MOV      r0,#0x39
0068fc  ebfffffe          BL       WriteCmdCode
;;;3925       //WriteData(2,2);
;;;3926       WriteData(0x0002,2);
006900  e3a01002          MOV      r1,#2
006904  e1a00001          MOV      r0,r1
006908  ebfffffe          BL       WriteData
;;;3927   	//Read data from Host Data bus
;;;3928       WriteData(vcom,2);
00690c  e3a01002          MOV      r1,#2
006910  e1a00004          MOV      r0,r4
006914  ebfffffe          BL       WriteData
;;;3929   }
006918  e8bd8010          POP      {r4,pc}
;;;3930   
                          ENDP

                  setSpecialCleanFlag PROC
;;;3931   
;;;3932   void setSpecialCleanFlag(BOOL flag)
00691c  e59f1020          LDR      r1,|L1.26948|
;;;3933   {
;;;3934       specialCleanFlag = flag;
006920  e5c10000          STRB     r0,[r1,#0]  ; specialCleanFlag
;;;3935   }
006924  e12fff1e          BX       lr
;;;3936   
                          ENDP

                  setdataCode PROC
;;;3937   void setdataCode(uint32_t buildDataCode)
006928  e59f1018          LDR      r1,|L1.26952|
;;;3938   {
;;;3939       dataCode = buildDataCode;
00692c  e5810000          STR      r0,[r1,#0]  ; dataCode
;;;3940   }
006930  e12fff1e          BX       lr
;;;3941   
                          ENDP

                  getdataCode PROC
;;;3942   
;;;3943   uint32_t getdataCode(void)
006934  e59f000c          LDR      r0,|L1.26952|
;;;3944   {
;;;3945       return dataCode;
006938  e5900000          LDR      r0,[r0,#0]  ; dataCode
;;;3946   }
00693c  e12fff1e          BX       lr
;;;3947   
                          ENDP

                  |L1.26944|
                          DCD      sleepFunctionFlag
                  |L1.26948|
                          DCD      specialCleanFlag
                  |L1.26952|
                          DCD      dataCode

                          AREA ||.bss||, DATA, NOINIT, ALIGN=1

                  mPositionMsgInfoTmp
                          %        388
                  |symbol_number.45|
                          %        388
                  tempFWVersion
                          %        16
                  tempLUTVersion
                          %        16
                  PositionAllItemInfo
                          %        244
                  mBannerPositionInfo
                          %        88
                  mBannerLinePositionInfo
                          %        100
                  mContainPositionInfo
                          %        76
                  mContainNumberPositionInfo
                          %        76
                  mDepositTimeAllPositionInfo
                          %        292
                  PositionDeviceIDInfo
                          %        100

                          AREA ||.constdata||, DATA, READONLY, ALIGN=2

000000  63616c63          DCB      0x63,0x61,0x6c,0x63
000004  756c6174          DCB      0x75,0x6c,0x61,0x74
000008  65436f6e          DCB      0x65,0x43,0x6f,0x6e
00000c  7461696e          DCB      0x74,0x61,0x69,0x6e
000010  4e756d62          DCB      0x4e,0x75,0x6d,0x62
000014  6572506f          DCB      0x65,0x72,0x50,0x6f
000018  73697469          DCB      0x73,0x69,0x74,0x69
00001c  6f6e496e          DCB      0x6f,0x6e,0x49,0x6e
000020  666f2066          DCB      0x66,0x6f,0x20,0x66
000024  61696c3a          DCB      0x61,0x69,0x6c,0x3a
000028  20626f61          DCB      0x20,0x62,0x6f,0x61
00002c  7264456e          DCB      0x72,0x64,0x45,0x6e
000030  61626c65          DCB      0x61,0x62,0x6c,0x65
000034  4e756d62          DCB      0x4e,0x75,0x6d,0x62
000038  6572203d          DCB      0x65,0x72,0x20,0x3d
00003c  2025640d          DCB      0x20,0x25,0x64,0x0d
000040  0a000000          DCB      0x0a,0x00,0x00,0x00
000044  205b4552          DCB      0x20,0x5b,0x45,0x52
000048  524f5220          DCB      0x52,0x4f,0x52,0x20
00004c  4550445d          DCB      0x45,0x50,0x44,0x5d
000050  203c5570          DCB      0x20,0x3c,0x55,0x70
000054  64617465          DCB      0x64,0x61,0x74,0x65
000058  436c6f63          DCB      0x43,0x6c,0x6f,0x63
00005c  6b3e2020          DCB      0x6b,0x3e,0x20,0x20
000060  69676e6f          DCB      0x69,0x67,0x6e,0x6f
000064  72652c20          DCB      0x72,0x65,0x2c,0x20
000068  5254435f          DCB      0x52,0x54,0x43,0x5f
00006c  52656164          DCB      0x52,0x65,0x61,0x64
000070  20657272          DCB      0x20,0x65,0x72,0x72
000074  6f725b63          DCB      0x6f,0x72,0x5b,0x63
000078  6f756e74          DCB      0x6f,0x75,0x6e,0x74
00007c  6572203d          DCB      0x65,0x72,0x20,0x3d
000080  2025645d          DCB      0x20,0x25,0x64,0x5d
000084  2e0a00            DCB      0x2e,0x0a,0x00

                          AREA ||.conststring||, DATA, READONLY, MERGE=1, STRINGS, ALIGN=0

000000  205b4550          DCB      " [EPDDrv] ",0
000004  44447276
000008  5d2000  

                          AREA ||.data||, DATA, ALIGN=2

                  waitTimeoutCounter
                          DCD      0x00000000
                  epdbadCounter
                          DCD      0x00000000
                  threadBackLightWaitTime
                          DCD      0xffffffff
                  epdDrvPowerCallabck
                          DCD      ||.conststring||
                          DCD      epdDrvPreOffCallback
                          DCD      epdDrvOffCallback
                          DCD      epdDrvOnCallback
                          DCD      epdDrvCheckStatus
                  pEpdReinitCallbackFunc
                          DCD      0x00000000
                  initFlag
000024  00                DCB      0x00
                  epdbadFlag
000025  00                DCB      0x00
                  epdopenFlag
000026  01                DCB      0x01
                  specialCleanFlag
000027  00                DCB      0x00
                  flashErrorFlag
000028  00                DCB      0x00
                  W25Q64BVspecialburnFlag
000029  00                DCB      0x00
                  sleepFunctionFlag
00002a  01                DCB      0x01
                  sleepEnteredFlag
00002b  01                DCB      0x01
                  hourTmp
00002c  ff                DCB      0xff
                  minsTmp
00002d  ff0000            DCB      0xff,0x00,0x00
                  yearTmp
                          DCD      0xffffffff
                  monthTmp
                          DCD      0xffffffff
                  dayTmp
                          DCD      0xffffffff
                  upperLinePositionInfo
                          DCD      0x00000085
                          DCD      0x00000036
                          DCD      0x000001f8
                  count_i
                          DCD      0x00000000
                  buffIndex
                          DCD      0x00000000
                  pSpiInterface
                          DCD      0x00000000
                  xSemaphore
                          DCD      0x00000000
                  xBackLightSemaphore
                          DCD      0x00000000
                  dataCode
                          DCD      0x00000000
